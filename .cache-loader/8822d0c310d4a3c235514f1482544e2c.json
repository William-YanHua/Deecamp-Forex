{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\geoms\\interval\\main.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\geoms\\interval\\main.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { isString, isFunction, isArray, isObject, get } from '@antv/util';\r\nimport ElementParser from '../base';\r\nvar COLOR_MAPPER = ['colorField', 'stackField', 'groupField'];\r\nvar IntervalParser = (function (_super) {\r\n    __extends(IntervalParser, _super);\r\n    function IntervalParser() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    IntervalParser.prototype.init = function () {\r\n        this.type = 'interval';\r\n        _super.prototype.init.call(this);\r\n        var props = this.plot.options;\r\n        if (this._needParserColor()) {\r\n            this.parseColor();\r\n        }\r\n        if (!this.config.color) {\r\n            this.config.color = { values: ['#5b8ff9'] };\r\n        }\r\n        var sizeProps = this._getSizeProps(props);\r\n        if (sizeProps) {\r\n            this.parseSize(sizeProps);\r\n        }\r\n        var styleProps = this._getStyleProps(props);\r\n        if (styleProps) {\r\n            this.parseStyle(styleProps);\r\n        }\r\n    };\r\n    IntervalParser.prototype.parseColor = function () {\r\n        var props = this.plot.options;\r\n        var colorField = this._getColorMappingField(props);\r\n        var config = {};\r\n        if (colorField) {\r\n            config.fields = colorField;\r\n        }\r\n        if (props.color) {\r\n            if (isString(props.color)) {\r\n                config.values = [props.color];\r\n            }\r\n            else if (isFunction(props.color)) {\r\n                config.callback = props.color;\r\n            }\r\n            else if (isArray(props.color)) {\r\n                if (colorField) {\r\n                    config.values = props.color;\r\n                }\r\n                else {\r\n                    if (props.color.length > 0) {\r\n                        config.values = [props.color[0]];\r\n                    }\r\n                }\r\n            }\r\n            else if (isObject(props.color)) {\r\n                config.fields = colorField;\r\n                config.callback = function (d) {\r\n                    return props.color[d];\r\n                };\r\n            }\r\n        }\r\n        this.config.color = config;\r\n    };\r\n    IntervalParser.prototype.parseSize = function (sizeProps) {\r\n        var props = this.plot.options;\r\n        var config = {};\r\n        if (isFunction(props[sizeProps])) {\r\n            config.fields = [this.config.position.fields];\r\n            config.callback = props[sizeProps];\r\n        }\r\n        else {\r\n            config.values = [props[sizeProps]];\r\n        }\r\n        this.config.size = config;\r\n    };\r\n    IntervalParser.prototype.parseStyle = function (styleProps) {\r\n        var props = this.plot.options;\r\n        var color = this.config.color;\r\n        var style = this.plot.options[styleProps];\r\n        var config = {};\r\n        if (isFunction(style)) {\r\n            config.fields = (color === null || color === void 0 ? void 0 : color.fields) || [props.xField, props.yField];\r\n            config.callback = style;\r\n        }\r\n        else {\r\n            config.cfg = style;\r\n        }\r\n        this.config.style = config;\r\n    };\r\n    IntervalParser.prototype._getSizeProps = function (props) {\r\n        var sizeMapper = ['columnSize', 'barSize'];\r\n        for (var _i = 0, sizeMapper_1 = sizeMapper; _i < sizeMapper_1.length; _i++) {\r\n            var m = sizeMapper_1[_i];\r\n            if (get(props, m)) {\r\n                return m;\r\n            }\r\n        }\r\n    };\r\n    IntervalParser.prototype._getStyleProps = function (props) {\r\n        var sizeMapper = ['columnStyle', 'barStyle', 'pieStyle', 'ringStyle'];\r\n        for (var _i = 0, sizeMapper_2 = sizeMapper; _i < sizeMapper_2.length; _i++) {\r\n            var m = sizeMapper_2[_i];\r\n            if (get(props, m)) {\r\n                return m;\r\n            }\r\n        }\r\n    };\r\n    IntervalParser.prototype._getColorMappingField = function (props) {\r\n        for (var _i = 0, COLOR_MAPPER_1 = COLOR_MAPPER; _i < COLOR_MAPPER_1.length; _i++) {\r\n            var m = COLOR_MAPPER_1[_i];\r\n            if (get(props, m)) {\r\n                return [props[m]];\r\n            }\r\n        }\r\n    };\r\n    IntervalParser.prototype._needParserColor = function () {\r\n        var props = this.plot.options;\r\n        if (props.color) {\r\n            return true;\r\n        }\r\n        for (var _i = 0, COLOR_MAPPER_2 = COLOR_MAPPER; _i < COLOR_MAPPER_2.length; _i++) {\r\n            var m = COLOR_MAPPER_2[_i];\r\n            if (props[m]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return IntervalParser;\r\n}(ElementParser));\r\nexport default IntervalParser;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\geoms\\interval\\main.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\geoms\\interval\\main.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { isString, isFunction, isArray, isObject, get } from '@antv/util';\nimport ElementParser from '../base';\nvar COLOR_MAPPER = ['colorField', 'stackField', 'groupField'];\nvar IntervalParser = /** @class */ (function (_super) {\n    __extends(IntervalParser, _super);\n    function IntervalParser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IntervalParser.prototype.init = function () {\n        this.type = 'interval';\n        _super.prototype.init.call(this);\n        var props = this.plot.options;\n        if (this._needParserColor()) {\n            this.parseColor();\n        }\n        if (!this.config.color) {\n            this.config.color = { values: ['#5b8ff9'] };\n        }\n        var sizeProps = this._getSizeProps(props);\n        if (sizeProps) {\n            this.parseSize(sizeProps);\n        }\n        var styleProps = this._getStyleProps(props);\n        if (styleProps) {\n            this.parseStyle(styleProps);\n        }\n    };\n    IntervalParser.prototype.parseColor = function () {\n        var props = this.plot.options;\n        var colorField = this._getColorMappingField(props);\n        var config = {};\n        if (colorField) {\n            config.fields = colorField;\n        }\n        if (props.color) {\n            if (isString(props.color)) {\n                config.values = [props.color];\n            }\n            else if (isFunction(props.color)) {\n                config.callback = props.color;\n            }\n            else if (isArray(props.color)) {\n                if (colorField) {\n                    config.values = props.color;\n                }\n                else {\n                    if (props.color.length > 0) {\n                        config.values = [props.color[0]];\n                    }\n                }\n            }\n            else if (isObject(props.color)) {\n                config.fields = colorField;\n                config.callback = function (d) {\n                    return props.color[d];\n                };\n            }\n        }\n        this.config.color = config;\n    };\n    IntervalParser.prototype.parseSize = function (sizeProps) {\n        var props = this.plot.options;\n        var config = {};\n        if (isFunction(props[sizeProps])) {\n            config.fields = [this.config.position.fields];\n            config.callback = props[sizeProps];\n        }\n        else {\n            config.values = [props[sizeProps]];\n        }\n        this.config.size = config;\n    };\n    IntervalParser.prototype.parseStyle = function (styleProps) {\n        var props = this.plot.options;\n        var color = this.config.color;\n        var style = this.plot.options[styleProps];\n        var config = {};\n        if (isFunction(style)) {\n            config.fields = (color === null || color === void 0 ? void 0 : color.fields) || [props.xField, props.yField];\n            config.callback = style;\n        }\n        else {\n            config.cfg = style;\n        }\n        this.config.style = config;\n    };\n    IntervalParser.prototype._getSizeProps = function (props) {\n        var sizeMapper = ['columnSize', 'barSize'];\n        for (var _i = 0, sizeMapper_1 = sizeMapper; _i < sizeMapper_1.length; _i++) {\n            var m = sizeMapper_1[_i];\n            if (get(props, m)) {\n                return m;\n            }\n        }\n    };\n    IntervalParser.prototype._getStyleProps = function (props) {\n        var sizeMapper = ['columnStyle', 'barStyle', 'pieStyle', 'ringStyle'];\n        for (var _i = 0, sizeMapper_2 = sizeMapper; _i < sizeMapper_2.length; _i++) {\n            var m = sizeMapper_2[_i];\n            if (get(props, m)) {\n                return m;\n            }\n        }\n    };\n    IntervalParser.prototype._getColorMappingField = function (props) {\n        /**如果有colorFiled或stackField配置项(后者为堆叠interval)，则参与colorMapping的字段为对应值\n         * 如没有特别设定，则一般是callback中的传参，传入位置映射的字段\n         */\n        for (var _i = 0, COLOR_MAPPER_1 = COLOR_MAPPER; _i < COLOR_MAPPER_1.length; _i++) {\n            var m = COLOR_MAPPER_1[_i];\n            if (get(props, m)) {\n                return [props[m]];\n            }\n        }\n    };\n    IntervalParser.prototype._needParserColor = function () {\n        var props = this.plot.options;\n        if (props.color) {\n            return true;\n        }\n        for (var _i = 0, COLOR_MAPPER_2 = COLOR_MAPPER; _i < COLOR_MAPPER_2.length; _i++) {\n            var m = COLOR_MAPPER_2[_i];\n            if (props[m]) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return IntervalParser;\n}(ElementParser));\nexport default IntervalParser;\n//# sourceMappingURL=main.js.map"]}]}