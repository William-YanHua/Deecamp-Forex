{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-form/lib/createFieldsStore.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-form/lib/createFieldsStore.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["'use strict';\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\nvar _extends2 = require('babel-runtime/helpers/extends');\nvar _extends3 = _interopRequireDefault(_extends2);\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\nvar _createClass2 = require('babel-runtime/helpers/createClass');\nvar _createClass3 = _interopRequireDefault(_createClass2);\nexports['default'] = createFieldsStore;\nvar _set = require('lodash/set');\nvar _set2 = _interopRequireDefault(_set);\nvar _createFormField = require('./createFormField');\nvar _createFormField2 = _interopRequireDefault(_createFormField);\nvar _utils = require('./utils');\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\nfunction partOf(a, b) {\n    return b.indexOf(a) === 0 && ['.', '['].indexOf(b[a.length]) !== -1;\n}\nfunction internalFlattenFields(fields) {\n    return (0, _utils.flattenFields)(fields, function (_, node) {\n        return (0, _createFormField.isFormField)(node);\n    }, 'You must wrap field data with `createFormField`.');\n}\nvar FieldsStore = function () {\n    function FieldsStore(fields) {\n        (0, _classCallCheck3['default'])(this, FieldsStore);\n        _initialiseProps.call(this);\n        this.fields = internalFlattenFields(fields);\n        this.fieldsMeta = {};\n    }\n    (0, _createClass3['default'])(FieldsStore, [{\n            key: 'updateFields',\n            value: function updateFields(fields) {\n                this.fields = internalFlattenFields(fields);\n            }\n        }, {\n            key: 'flattenRegisteredFields',\n            value: function flattenRegisteredFields(fields) {\n                var validFieldsName = this.getAllFieldsName();\n                return (0, _utils.flattenFields)(fields, function (path) {\n                    return validFieldsName.indexOf(path) >= 0;\n                }, 'You cannot set a form field before rendering a field associated with the value.');\n            }\n        }, {\n            key: 'setFields',\n            value: function setFields(fields) {\n                var _this = this;\n                var fieldsMeta = this.fieldsMeta;\n                var nowFields = (0, _extends3['default'])({}, this.fields, fields);\n                var nowValues = {};\n                Object.keys(fieldsMeta).forEach(function (f) {\n                    nowValues[f] = _this.getValueFromFields(f, nowFields);\n                });\n                Object.keys(nowValues).forEach(function (f) {\n                    var value = nowValues[f];\n                    var fieldMeta = _this.getFieldMeta(f);\n                    if (fieldMeta && fieldMeta.normalize) {\n                        var nowValue = fieldMeta.normalize(value, _this.getValueFromFields(f, _this.fields), nowValues);\n                        if (nowValue !== value) {\n                            nowFields[f] = (0, _extends3['default'])({}, nowFields[f], {\n                                value: nowValue\n                            });\n                        }\n                    }\n                });\n                this.fields = nowFields;\n            }\n        }, {\n            key: 'resetFields',\n            value: function resetFields(ns) {\n                var fields = this.fields;\n                var names = ns ? this.getValidFieldsFullName(ns) : this.getAllFieldsName();\n                return names.reduce(function (acc, name) {\n                    var field = fields[name];\n                    if (field && 'value' in field) {\n                        acc[name] = {};\n                    }\n                    return acc;\n                }, {});\n            }\n        }, {\n            key: 'setFieldMeta',\n            value: function setFieldMeta(name, meta) {\n                this.fieldsMeta[name] = meta;\n            }\n        }, {\n            key: 'setFieldsAsDirty',\n            value: function setFieldsAsDirty() {\n                var _this2 = this;\n                Object.keys(this.fields).forEach(function (name) {\n                    var field = _this2.fields[name];\n                    var fieldMeta = _this2.fieldsMeta[name];\n                    if (field && fieldMeta && (0, _utils.hasRules)(fieldMeta.validate)) {\n                        _this2.fields[name] = (0, _extends3['default'])({}, field, {\n                            dirty: true\n                        });\n                    }\n                });\n            }\n        }, {\n            key: 'getFieldMeta',\n            value: function getFieldMeta(name) {\n                this.fieldsMeta[name] = this.fieldsMeta[name] || {};\n                return this.fieldsMeta[name];\n            }\n        }, {\n            key: 'getValueFromFields',\n            value: function getValueFromFields(name, fields) {\n                var field = fields[name];\n                if (field && 'value' in field) {\n                    return field.value;\n                }\n                var fieldMeta = this.getFieldMeta(name);\n                return fieldMeta && fieldMeta.initialValue;\n            }\n        }, {\n            key: 'getValidFieldsName',\n            value: function getValidFieldsName() {\n                var _this3 = this;\n                var fieldsMeta = this.fieldsMeta;\n                return fieldsMeta ? Object.keys(fieldsMeta).filter(function (name) {\n                    return !_this3.getFieldMeta(name).hidden;\n                }) : [];\n            }\n        }, {\n            key: 'getAllFieldsName',\n            value: function getAllFieldsName() {\n                var fieldsMeta = this.fieldsMeta;\n                return fieldsMeta ? Object.keys(fieldsMeta) : [];\n            }\n        }, {\n            key: 'getValidFieldsFullName',\n            value: function getValidFieldsFullName(maybePartialName) {\n                var maybePartialNames = Array.isArray(maybePartialName) ? maybePartialName : [maybePartialName];\n                return this.getValidFieldsName().filter(function (fullName) {\n                    return maybePartialNames.some(function (partialName) {\n                        return fullName === partialName || (0, _utils.startsWith)(fullName, partialName) && ['.', '['].indexOf(fullName[partialName.length]) >= 0;\n                    });\n                });\n            }\n        }, {\n            key: 'getFieldValuePropValue',\n            value: function getFieldValuePropValue(fieldMeta) {\n                var name = fieldMeta.name, getValueProps = fieldMeta.getValueProps, valuePropName = fieldMeta.valuePropName;\n                var field = this.getField(name);\n                var fieldValue = 'value' in field ? field.value : fieldMeta.initialValue;\n                if (getValueProps) {\n                    return getValueProps(fieldValue);\n                }\n                return (0, _defineProperty3['default'])({}, valuePropName, fieldValue);\n            }\n        }, {\n            key: 'getField',\n            value: function getField(name) {\n                return (0, _extends3['default'])({}, this.fields[name], {\n                    name: name\n                });\n            }\n        }, {\n            key: 'getNotCollectedFields',\n            value: function getNotCollectedFields() {\n                var _this4 = this;\n                var fieldsName = this.getValidFieldsName();\n                return fieldsName.filter(function (name) {\n                    return !_this4.fields[name];\n                }).map(function (name) {\n                    return {\n                        name: name,\n                        dirty: false,\n                        value: _this4.getFieldMeta(name).initialValue\n                    };\n                }).reduce(function (acc, field) {\n                    return (0, _set2['default'])(acc, field.name, (0, _createFormField2['default'])(field));\n                }, {});\n            }\n        }, {\n            key: 'getNestedAllFields',\n            value: function getNestedAllFields() {\n                var _this5 = this;\n                return Object.keys(this.fields).reduce(function (acc, name) {\n                    return (0, _set2['default'])(acc, name, (0, _createFormField2['default'])(_this5.fields[name]));\n                }, this.getNotCollectedFields());\n            }\n        }, {\n            key: 'getFieldMember',\n            value: function getFieldMember(name, member) {\n                return this.getField(name)[member];\n            }\n        }, {\n            key: 'getNestedFields',\n            value: function getNestedFields(names, getter) {\n                var fields = names || this.getValidFieldsName();\n                return fields.reduce(function (acc, f) {\n                    return (0, _set2['default'])(acc, f, getter(f));\n                }, {});\n            }\n        }, {\n            key: 'getNestedField',\n            value: function getNestedField(name, getter) {\n                var fullNames = this.getValidFieldsFullName(name);\n                if (fullNames.length === 0 ||\n                    fullNames.length === 1 && fullNames[0] === name) {\n                    return getter(name);\n                }\n                var isArrayValue = fullNames[0][name.length] === '[';\n                var suffixNameStartIndex = isArrayValue ? name.length : name.length + 1;\n                return fullNames.reduce(function (acc, fullName) {\n                    return (0, _set2['default'])(acc, fullName.slice(suffixNameStartIndex), getter(fullName));\n                }, isArrayValue ? [] : {});\n            }\n        }, {\n            key: 'isValidNestedFieldName',\n            value: function isValidNestedFieldName(name) {\n                var names = this.getAllFieldsName();\n                return names.every(function (n) {\n                    return !partOf(n, name) && !partOf(name, n);\n                });\n            }\n        }, {\n            key: 'clearField',\n            value: function clearField(name) {\n                delete this.fields[name];\n                delete this.fieldsMeta[name];\n            }\n        }]);\n    return FieldsStore;\n}();\nvar _initialiseProps = function _initialiseProps() {\n    var _this6 = this;\n    this.setFieldsInitialValue = function (initialValues) {\n        var flattenedInitialValues = _this6.flattenRegisteredFields(initialValues);\n        var fieldsMeta = _this6.fieldsMeta;\n        Object.keys(flattenedInitialValues).forEach(function (name) {\n            if (fieldsMeta[name]) {\n                _this6.setFieldMeta(name, (0, _extends3['default'])({}, _this6.getFieldMeta(name), {\n                    initialValue: flattenedInitialValues[name]\n                }));\n            }\n        });\n    };\n    this.getAllValues = function () {\n        var fieldsMeta = _this6.fieldsMeta, fields = _this6.fields;\n        return Object.keys(fieldsMeta).reduce(function (acc, name) {\n            return (0, _set2['default'])(acc, name, _this6.getValueFromFields(name, fields));\n        }, {});\n    };\n    this.getFieldsValue = function (names) {\n        return _this6.getNestedFields(names, _this6.getFieldValue);\n    };\n    this.getFieldValue = function (name) {\n        var fields = _this6.fields;\n        return _this6.getNestedField(name, function (fullName) {\n            return _this6.getValueFromFields(fullName, fields);\n        });\n    };\n    this.getFieldsError = function (names) {\n        return _this6.getNestedFields(names, _this6.getFieldError);\n    };\n    this.getFieldError = function (name) {\n        return _this6.getNestedField(name, function (fullName) {\n            return (0, _utils.getErrorStrs)(_this6.getFieldMember(fullName, 'errors'));\n        });\n    };\n    this.isFieldValidating = function (name) {\n        return _this6.getFieldMember(name, 'validating');\n    };\n    this.isFieldsValidating = function (ns) {\n        var names = ns || _this6.getValidFieldsName();\n        return names.some(function (n) {\n            return _this6.isFieldValidating(n);\n        });\n    };\n    this.isFieldTouched = function (name) {\n        return _this6.getFieldMember(name, 'touched');\n    };\n    this.isFieldsTouched = function (ns) {\n        var names = ns || _this6.getValidFieldsName();\n        return names.some(function (n) {\n            return _this6.isFieldTouched(n);\n        });\n    };\n};\nfunction createFieldsStore(fields) {\n    return new FieldsStore(fields);\n}\nmodule.exports = exports['default'];\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-form/lib/createFieldsStore.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-form/lib/createFieldsStore.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nexports['default'] = createFieldsStore;\n\nvar _set = require('lodash/set');\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _createFormField = require('./createFormField');\n\nvar _createFormField2 = _interopRequireDefault(_createFormField);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction partOf(a, b) {\n  return b.indexOf(a) === 0 && ['.', '['].indexOf(b[a.length]) !== -1;\n}\n\nfunction internalFlattenFields(fields) {\n  return (0, _utils.flattenFields)(fields, function (_, node) {\n    return (0, _createFormField.isFormField)(node);\n  }, 'You must wrap field data with `createFormField`.');\n}\n\nvar FieldsStore = function () {\n  function FieldsStore(fields) {\n    (0, _classCallCheck3['default'])(this, FieldsStore);\n\n    _initialiseProps.call(this);\n\n    this.fields = internalFlattenFields(fields);\n    this.fieldsMeta = {};\n  }\n\n  (0, _createClass3['default'])(FieldsStore, [{\n    key: 'updateFields',\n    value: function updateFields(fields) {\n      this.fields = internalFlattenFields(fields);\n    }\n  }, {\n    key: 'flattenRegisteredFields',\n    value: function flattenRegisteredFields(fields) {\n      var validFieldsName = this.getAllFieldsName();\n      return (0, _utils.flattenFields)(fields, function (path) {\n        return validFieldsName.indexOf(path) >= 0;\n      }, 'You cannot set a form field before rendering a field associated with the value.');\n    }\n  }, {\n    key: 'setFields',\n    value: function setFields(fields) {\n      var _this = this;\n\n      var fieldsMeta = this.fieldsMeta;\n      var nowFields = (0, _extends3['default'])({}, this.fields, fields);\n      var nowValues = {};\n      Object.keys(fieldsMeta).forEach(function (f) {\n        nowValues[f] = _this.getValueFromFields(f, nowFields);\n      });\n      Object.keys(nowValues).forEach(function (f) {\n        var value = nowValues[f];\n        var fieldMeta = _this.getFieldMeta(f);\n        if (fieldMeta && fieldMeta.normalize) {\n          var nowValue = fieldMeta.normalize(value, _this.getValueFromFields(f, _this.fields), nowValues);\n          if (nowValue !== value) {\n            nowFields[f] = (0, _extends3['default'])({}, nowFields[f], {\n              value: nowValue\n            });\n          }\n        }\n      });\n      this.fields = nowFields;\n    }\n  }, {\n    key: 'resetFields',\n    value: function resetFields(ns) {\n      var fields = this.fields;\n\n      var names = ns ? this.getValidFieldsFullName(ns) : this.getAllFieldsName();\n      return names.reduce(function (acc, name) {\n        var field = fields[name];\n        if (field && 'value' in field) {\n          acc[name] = {};\n        }\n        return acc;\n      }, {});\n    }\n  }, {\n    key: 'setFieldMeta',\n    value: function setFieldMeta(name, meta) {\n      this.fieldsMeta[name] = meta;\n    }\n  }, {\n    key: 'setFieldsAsDirty',\n    value: function setFieldsAsDirty() {\n      var _this2 = this;\n\n      Object.keys(this.fields).forEach(function (name) {\n        var field = _this2.fields[name];\n        var fieldMeta = _this2.fieldsMeta[name];\n        if (field && fieldMeta && (0, _utils.hasRules)(fieldMeta.validate)) {\n          _this2.fields[name] = (0, _extends3['default'])({}, field, {\n            dirty: true\n          });\n        }\n      });\n    }\n  }, {\n    key: 'getFieldMeta',\n    value: function getFieldMeta(name) {\n      this.fieldsMeta[name] = this.fieldsMeta[name] || {};\n      return this.fieldsMeta[name];\n    }\n  }, {\n    key: 'getValueFromFields',\n    value: function getValueFromFields(name, fields) {\n      var field = fields[name];\n      if (field && 'value' in field) {\n        return field.value;\n      }\n      var fieldMeta = this.getFieldMeta(name);\n      return fieldMeta && fieldMeta.initialValue;\n    }\n  }, {\n    key: 'getValidFieldsName',\n    value: function getValidFieldsName() {\n      var _this3 = this;\n\n      var fieldsMeta = this.fieldsMeta;\n\n      return fieldsMeta ? Object.keys(fieldsMeta).filter(function (name) {\n        return !_this3.getFieldMeta(name).hidden;\n      }) : [];\n    }\n  }, {\n    key: 'getAllFieldsName',\n    value: function getAllFieldsName() {\n      var fieldsMeta = this.fieldsMeta;\n\n      return fieldsMeta ? Object.keys(fieldsMeta) : [];\n    }\n  }, {\n    key: 'getValidFieldsFullName',\n    value: function getValidFieldsFullName(maybePartialName) {\n      var maybePartialNames = Array.isArray(maybePartialName) ? maybePartialName : [maybePartialName];\n      return this.getValidFieldsName().filter(function (fullName) {\n        return maybePartialNames.some(function (partialName) {\n          return fullName === partialName || (0, _utils.startsWith)(fullName, partialName) && ['.', '['].indexOf(fullName[partialName.length]) >= 0;\n        });\n      });\n    }\n  }, {\n    key: 'getFieldValuePropValue',\n    value: function getFieldValuePropValue(fieldMeta) {\n      var name = fieldMeta.name,\n          getValueProps = fieldMeta.getValueProps,\n          valuePropName = fieldMeta.valuePropName;\n\n      var field = this.getField(name);\n      var fieldValue = 'value' in field ? field.value : fieldMeta.initialValue;\n      if (getValueProps) {\n        return getValueProps(fieldValue);\n      }\n      return (0, _defineProperty3['default'])({}, valuePropName, fieldValue);\n    }\n  }, {\n    key: 'getField',\n    value: function getField(name) {\n      return (0, _extends3['default'])({}, this.fields[name], {\n        name: name\n      });\n    }\n  }, {\n    key: 'getNotCollectedFields',\n    value: function getNotCollectedFields() {\n      var _this4 = this;\n\n      var fieldsName = this.getValidFieldsName();\n      return fieldsName.filter(function (name) {\n        return !_this4.fields[name];\n      }).map(function (name) {\n        return {\n          name: name,\n          dirty: false,\n          value: _this4.getFieldMeta(name).initialValue\n        };\n      }).reduce(function (acc, field) {\n        return (0, _set2['default'])(acc, field.name, (0, _createFormField2['default'])(field));\n      }, {});\n    }\n  }, {\n    key: 'getNestedAllFields',\n    value: function getNestedAllFields() {\n      var _this5 = this;\n\n      return Object.keys(this.fields).reduce(function (acc, name) {\n        return (0, _set2['default'])(acc, name, (0, _createFormField2['default'])(_this5.fields[name]));\n      }, this.getNotCollectedFields());\n    }\n  }, {\n    key: 'getFieldMember',\n    value: function getFieldMember(name, member) {\n      return this.getField(name)[member];\n    }\n  }, {\n    key: 'getNestedFields',\n    value: function getNestedFields(names, getter) {\n      var fields = names || this.getValidFieldsName();\n      return fields.reduce(function (acc, f) {\n        return (0, _set2['default'])(acc, f, getter(f));\n      }, {});\n    }\n  }, {\n    key: 'getNestedField',\n    value: function getNestedField(name, getter) {\n      var fullNames = this.getValidFieldsFullName(name);\n      if (fullNames.length === 0 || // Not registered\n      fullNames.length === 1 && fullNames[0] === name // Name already is full name.\n      ) {\n          return getter(name);\n        }\n      var isArrayValue = fullNames[0][name.length] === '[';\n      var suffixNameStartIndex = isArrayValue ? name.length : name.length + 1;\n      return fullNames.reduce(function (acc, fullName) {\n        return (0, _set2['default'])(acc, fullName.slice(suffixNameStartIndex), getter(fullName));\n      }, isArrayValue ? [] : {});\n    }\n  }, {\n    key: 'isValidNestedFieldName',\n\n\n    // @private\n    // BG: `a` and `a.b` cannot be use in the same form\n    value: function isValidNestedFieldName(name) {\n      var names = this.getAllFieldsName();\n      return names.every(function (n) {\n        return !partOf(n, name) && !partOf(name, n);\n      });\n    }\n  }, {\n    key: 'clearField',\n    value: function clearField(name) {\n      delete this.fields[name];\n      delete this.fieldsMeta[name];\n    }\n  }]);\n  return FieldsStore;\n}();\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this6 = this;\n\n  this.setFieldsInitialValue = function (initialValues) {\n    var flattenedInitialValues = _this6.flattenRegisteredFields(initialValues);\n    var fieldsMeta = _this6.fieldsMeta;\n    Object.keys(flattenedInitialValues).forEach(function (name) {\n      if (fieldsMeta[name]) {\n        _this6.setFieldMeta(name, (0, _extends3['default'])({}, _this6.getFieldMeta(name), {\n          initialValue: flattenedInitialValues[name]\n        }));\n      }\n    });\n  };\n\n  this.getAllValues = function () {\n    var fieldsMeta = _this6.fieldsMeta,\n        fields = _this6.fields;\n\n    return Object.keys(fieldsMeta).reduce(function (acc, name) {\n      return (0, _set2['default'])(acc, name, _this6.getValueFromFields(name, fields));\n    }, {});\n  };\n\n  this.getFieldsValue = function (names) {\n    return _this6.getNestedFields(names, _this6.getFieldValue);\n  };\n\n  this.getFieldValue = function (name) {\n    var fields = _this6.fields;\n\n    return _this6.getNestedField(name, function (fullName) {\n      return _this6.getValueFromFields(fullName, fields);\n    });\n  };\n\n  this.getFieldsError = function (names) {\n    return _this6.getNestedFields(names, _this6.getFieldError);\n  };\n\n  this.getFieldError = function (name) {\n    return _this6.getNestedField(name, function (fullName) {\n      return (0, _utils.getErrorStrs)(_this6.getFieldMember(fullName, 'errors'));\n    });\n  };\n\n  this.isFieldValidating = function (name) {\n    return _this6.getFieldMember(name, 'validating');\n  };\n\n  this.isFieldsValidating = function (ns) {\n    var names = ns || _this6.getValidFieldsName();\n    return names.some(function (n) {\n      return _this6.isFieldValidating(n);\n    });\n  };\n\n  this.isFieldTouched = function (name) {\n    return _this6.getFieldMember(name, 'touched');\n  };\n\n  this.isFieldsTouched = function (ns) {\n    var names = ns || _this6.getValidFieldsName();\n    return names.some(function (n) {\n      return _this6.isFieldTouched(n);\n    });\n  };\n};\n\nfunction createFieldsStore(fields) {\n  return new FieldsStore(fields);\n}\nmodule.exports = exports['default'];"]}]}