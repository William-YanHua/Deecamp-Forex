{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/guide/data-marker.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/guide/data-marker.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar Guide = require('./base');\nvar DataMarker = function (_Guide) {\n    _inheritsLoose(DataMarker, _Guide);\n    var _super = _createSuper(DataMarker);\n    function DataMarker() {\n        return _Guide.apply(this, arguments) || this;\n    }\n    var _proto = DataMarker.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Guide.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            name: 'dataMarker',\n            zIndex: 1,\n            top: true,\n            position: null,\n            style: {\n                point: {\n                    r: 3,\n                    fill: '#FFFFFF',\n                    stroke: '#1890FF',\n                    lineWidth: 2\n                },\n                line: {\n                    stroke: '#A3B1BF',\n                    lineWidth: 1\n                },\n                text: {\n                    fill: '#000000',\n                    opacity: 0.65,\n                    fontSize: 12,\n                    textAlign: 'start'\n                }\n            },\n            display: {\n                point: true,\n                line: true,\n                text: true\n            },\n            lineLength: 20,\n            direction: 'upward',\n            autoAdjust: true\n        });\n    };\n    _proto.render = function render(coord, group) {\n        var self = this;\n        var point = self.parsePoint(coord, self.get('position'));\n        if (!point) {\n            return;\n        }\n        var markerGroup = group.addGroup();\n        markerGroup.name = 'guide-data-marker';\n        var positions = self._getElementPosition(point);\n        var display = self.get('display');\n        var lineShape;\n        var textShape;\n        if (display.line) {\n            var lineData = positions.line;\n            lineShape = self._drawLine(lineData, markerGroup);\n        }\n        if (display.text && self.get('content')) {\n            var textPosition = positions.text;\n            textShape = self._drawText(textPosition, markerGroup);\n        }\n        if (display.point) {\n            var pointPoisition = positions.point;\n            self._drawPoint(pointPoisition, markerGroup);\n        }\n        if (self.get('autoAdjust')) {\n            var bbox = markerGroup.getBBox();\n            var minX = bbox.minX, minY = bbox.minY, maxX = bbox.maxX, maxY = bbox.maxY;\n            var start = coord.start, end = coord.end;\n            if (textShape) {\n                if (minX <= start.x) {\n                    textShape.attr('textAlign', 'start');\n                }\n                if (maxX >= end.x) {\n                    textShape.attr('textAlign', 'end');\n                }\n                var direction = self.get('direction');\n                if (direction === 'upward' && minY <= end.y || direction !== 'upward' && maxY >= start.y) {\n                    var textBaseline;\n                    var dir;\n                    if (direction === 'upward' && minY <= end.y) {\n                        textBaseline = 'top';\n                        dir = 1;\n                    }\n                    else {\n                        textBaseline = 'bottom';\n                        dir = -1;\n                    }\n                    textShape.attr('textBaseline', textBaseline);\n                    var lineLength = 0;\n                    if (self.get('display').line) {\n                        lineLength = self.get('lineLength');\n                        var linePath = [['M', point.x, point.y], ['L', point.x, point.y + lineLength * dir]];\n                        lineShape.attr('path', linePath);\n                    }\n                    var newY = point.y + (lineLength + 2) * dir;\n                    textShape.attr('y', newY);\n                }\n            }\n        }\n        self.get('appendInfo') && markerGroup.setSilent('appendInfo', self.get('appendInfo'));\n        self.set('el', markerGroup);\n    };\n    _proto._getElementPosition = function _getElementPosition(position) {\n        var self = this;\n        var x = position.x, y = position.y;\n        var lineLength = self.get('display').line ? self.get('lineLength') : 0;\n        var direction = self.get('direction');\n        var textStyle = self.get('style').text;\n        textStyle.textBaseline = direction === 'upward' ? 'bottom' : 'top';\n        var dir = direction === 'upward' ? -1 : 1;\n        var pointPoisition = {\n            x: x,\n            y: y\n        };\n        var lineStart = {\n            x: x,\n            y: y\n        };\n        var lineEnd = {\n            x: x,\n            y: lineLength * dir + y\n        };\n        var textPosition = {\n            x: x,\n            y: (lineLength + 2) * dir + y\n        };\n        return {\n            point: pointPoisition,\n            line: [lineStart, lineEnd],\n            text: textPosition\n        };\n    };\n    _proto._drawLine = function _drawLine(lineData, g) {\n        var self = this;\n        var lineStyle = self.get('style').line;\n        var linePath = [['M', lineData[0].x, lineData[0].y], ['L', lineData[1].x, lineData[1].y]];\n        var lineShape = g.addShape('path', {\n            attrs: Util.mix({\n                path: linePath\n            }, lineStyle)\n        });\n        return lineShape;\n    };\n    _proto._drawText = function _drawText(position, g) {\n        var self = this;\n        var textStyle = this.get('style').text;\n        var textShape = g.addShape('text', {\n            attrs: Util.mix({\n                text: self.get('content')\n            }, textStyle, position)\n        });\n        return textShape;\n    };\n    _proto._drawPoint = function _drawPoint(position, g) {\n        var self = this;\n        var pointStyle = self.get('style').point;\n        var pointShape = g.addShape('circle', {\n            attrs: Util.mix({}, pointStyle, position)\n        });\n        return pointShape;\n    };\n    return DataMarker;\n}(Guide);\nmodule.exports = DataMarker;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/guide/data-marker.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/guide/data-marker.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Guide = require('./base');\n\nvar DataMarker = /*#__PURE__*/function (_Guide) {\n  _inheritsLoose(DataMarker, _Guide);\n\n  var _super = _createSuper(DataMarker);\n\n  function DataMarker() {\n    return _Guide.apply(this, arguments) || this;\n  }\n\n  var _proto = DataMarker.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Guide.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      name: 'dataMarker',\n      zIndex: 1,\n      top: true,\n      position: null,\n      style: {\n        point: {\n          r: 3,\n          fill: '#FFFFFF',\n          stroke: '#1890FF',\n          lineWidth: 2\n        },\n        line: {\n          stroke: '#A3B1BF',\n          lineWidth: 1\n        },\n        text: {\n          fill: '#000000',\n          opacity: 0.65,\n          fontSize: 12,\n          textAlign: 'start'\n        }\n      },\n      // end of style\n      display: {\n        point: true,\n        line: true,\n        text: true\n      },\n      lineLength: 20,\n      direction: 'upward',\n      autoAdjust: true\n    });\n  };\n\n  _proto.render = function render(coord, group) {\n    var self = this;\n    var point = self.parsePoint(coord, self.get('position'));\n\n    if (!point) {\n      return;\n    } // container\n\n\n    var markerGroup = group.addGroup();\n    markerGroup.name = 'guide-data-marker'; // markerGroup.translate(point.x, point.y);\n\n    var positions = self._getElementPosition(point);\n\n    var display = self.get('display');\n    var lineShape;\n    var textShape; // add line\n\n    if (display.line) {\n      var lineData = positions.line;\n      lineShape = self._drawLine(lineData, markerGroup);\n    } // add text\n\n\n    if (display.text && self.get('content')) {\n      var textPosition = positions.text;\n      textShape = self._drawText(textPosition, markerGroup);\n    } // add circle\n\n\n    if (display.point) {\n      var pointPoisition = positions.point;\n\n      self._drawPoint(pointPoisition, markerGroup);\n    }\n\n    if (self.get('autoAdjust')) {\n      var bbox = markerGroup.getBBox();\n      var minX = bbox.minX,\n          minY = bbox.minY,\n          maxX = bbox.maxX,\n          maxY = bbox.maxY;\n      var start = coord.start,\n          end = coord.end;\n\n      if (textShape) {\n        if (minX <= start.x) {\n          // 左侧超出\n          textShape.attr('textAlign', 'start');\n        }\n\n        if (maxX >= end.x) {\n          // 右侧超出\n          textShape.attr('textAlign', 'end');\n        }\n\n        var direction = self.get('direction');\n\n        if (direction === 'upward' && minY <= end.y || direction !== 'upward' && maxY >= start.y) {\n          // 上方或者下方超出\n          var textBaseline;\n          var dir;\n\n          if (direction === 'upward' && minY <= end.y) {\n            textBaseline = 'top';\n            dir = 1;\n          } else {\n            textBaseline = 'bottom';\n            dir = -1;\n          }\n\n          textShape.attr('textBaseline', textBaseline);\n          var lineLength = 0;\n\n          if (self.get('display').line) {\n            lineLength = self.get('lineLength');\n            var linePath = [['M', point.x, point.y], ['L', point.x, point.y + lineLength * dir]];\n            lineShape.attr('path', linePath);\n          }\n\n          var newY = point.y + (lineLength + 2) * dir;\n          textShape.attr('y', newY);\n        }\n      }\n    }\n\n    self.get('appendInfo') && markerGroup.setSilent('appendInfo', self.get('appendInfo'));\n    self.set('el', markerGroup);\n  };\n\n  _proto._getElementPosition = function _getElementPosition(position) {\n    var self = this;\n    var x = position.x,\n        y = position.y;\n    var lineLength = self.get('display').line ? self.get('lineLength') : 0;\n    var direction = self.get('direction');\n    var textStyle = self.get('style').text;\n    textStyle.textBaseline = direction === 'upward' ? 'bottom' : 'top';\n    var dir = direction === 'upward' ? -1 : 1;\n    var pointPoisition = {\n      x: x,\n      y: y\n    };\n    var lineStart = {\n      x: x,\n      y: y\n    };\n    var lineEnd = {\n      x: x,\n      y: lineLength * dir + y\n    };\n    var textPosition = {\n      x: x,\n      y: (lineLength + 2) * dir + y\n    };\n    return {\n      point: pointPoisition,\n      line: [lineStart, lineEnd],\n      text: textPosition\n    };\n  };\n\n  _proto._drawLine = function _drawLine(lineData, g) {\n    var self = this;\n    var lineStyle = self.get('style').line;\n    var linePath = [['M', lineData[0].x, lineData[0].y], ['L', lineData[1].x, lineData[1].y]];\n    var lineShape = g.addShape('path', {\n      attrs: Util.mix({\n        path: linePath\n      }, lineStyle)\n    });\n    return lineShape;\n  };\n\n  _proto._drawText = function _drawText(position, g) {\n    var self = this;\n    var textStyle = this.get('style').text;\n    var textShape = g.addShape('text', {\n      attrs: Util.mix({\n        text: self.get('content')\n      }, textStyle, position)\n    });\n    return textShape;\n  };\n\n  _proto._drawPoint = function _drawPoint(position, g) {\n    var self = this;\n    var pointStyle = self.get('style').point;\n    var pointShape = g.addShape('circle', {\n      attrs: Util.mix({}, pointStyle, position)\n    });\n    return pointShape;\n  };\n\n  return DataMarker;\n}(Guide);\n\nmodule.exports = DataMarker;"]}]}