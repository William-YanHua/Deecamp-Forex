{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/helper/filter-data.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/helper/filter-data.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../../util');\nvar TimeUtil = require('@antv/scale/lib/time-util');\nvar getColDefs = require('./get-col-defs');\nmodule.exports = function (chart) {\n    chart.on('beforeinitgeoms', function () {\n        chart.set('limitInPlot', true);\n        var data = chart.get('data');\n        var colDefs = getColDefs(chart);\n        if (!colDefs)\n            return data;\n        var geoms = chart.get('geoms');\n        var isSpecialGeom = false;\n        Util.each(geoms, function (geom) {\n            if (['area', 'line', 'path'].includes(geom.get('type'))) {\n                isSpecialGeom = true;\n                return false;\n            }\n        });\n        var fields = [];\n        Util.each(colDefs, function (def, key) {\n            if (!isSpecialGeom && def && (def.values || def.min || def.max)) {\n                fields.push(key);\n            }\n        });\n        if (fields.length === 0) {\n            return data;\n        }\n        var geomData = [];\n        Util.each(data, function (obj) {\n            var flag = true;\n            Util.each(fields, function (field) {\n                var value = obj[field];\n                if (value) {\n                    var colDef = colDefs[field];\n                    if (colDef.type === 'timeCat') {\n                        var values = colDef.values;\n                        if (Util.isNumber(values[0])) {\n                            value = TimeUtil.toTimeStamp(value);\n                        }\n                    }\n                    if (colDef.values && !colDef.values.includes(value) || colDef.min && value < colDef.min || colDef.max && value > colDef.max) {\n                        flag = false;\n                    }\n                }\n            });\n            if (flag) {\n                geomData.push(obj);\n            }\n        });\n        chart.set('filteredData', geomData);\n    });\n};\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/helper/filter-data.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/helper/filter-data.js"],"names":[],"mappings":"AAAA,IAAI,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAEjC,IAAI,QAAQ,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;AAEpD,IAAI,UAAU,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAE3C,MAAM,CAAC,OAAO,GAAG,UAAU,KAAK;IAC9B,KAAK,CAAC,EAAE,CAAC,iBAAiB,EAAE;QAC1B,KAAK,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAC/B,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC7B,IAAI,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO;YAAE,OAAO,IAAI,CAAC;QAC1B,IAAI,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,aAAa,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE;gBACvD,aAAa,GAAG,IAAI,CAAC;gBACrB,OAAO,KAAK,CAAC;aACd;QACH,CAAC,CAAC,CAAC;QACH,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,GAAG;YACnC,IAAI,CAAC,aAAa,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,EAAE;gBAC/D,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAClB;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;YACvB,OAAO,IAAI,CAAC;SACb;QAED,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,GAAG;YAC3B,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK;gBAC/B,IAAI,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;gBAEvB,IAAI,KAAK,EAAE;oBACT,IAAI,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;oBAE5B,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE;wBAC7B,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;wBAE3B,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;4BAC5B,KAAK,GAAG,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;yBACrC;qBACF;oBAED,IAAI,MAAM,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,EAAE;wBAC3H,IAAI,GAAG,KAAK,CAAC;qBACd;iBACF;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,IAAI,EAAE;gBACR,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACpB;QACH,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,GAAG,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["var Util = require('../../util');\n\nvar TimeUtil = require('@antv/scale/lib/time-util');\n\nvar getColDefs = require('./get-col-defs');\n\nmodule.exports = function (chart) {\n  chart.on('beforeinitgeoms', function () {\n    chart.set('limitInPlot', true);\n    var data = chart.get('data');\n    var colDefs = getColDefs(chart);\n    if (!colDefs) return data;\n    var geoms = chart.get('geoms');\n    var isSpecialGeom = false;\n    Util.each(geoms, function (geom) {\n      if (['area', 'line', 'path'].includes(geom.get('type'))) {\n        isSpecialGeom = true;\n        return false;\n      }\n    });\n    var fields = [];\n    Util.each(colDefs, function (def, key) {\n      if (!isSpecialGeom && def && (def.values || def.min || def.max)) {\n        fields.push(key);\n      }\n    });\n\n    if (fields.length === 0) {\n      return data;\n    }\n\n    var geomData = [];\n    Util.each(data, function (obj) {\n      var flag = true;\n      Util.each(fields, function (field) {\n        var value = obj[field];\n\n        if (value) {\n          var colDef = colDefs[field];\n\n          if (colDef.type === 'timeCat') {\n            var values = colDef.values;\n\n            if (Util.isNumber(values[0])) {\n              value = TimeUtil.toTimeStamp(value);\n            }\n          }\n\n          if (colDef.values && !colDef.values.includes(value) || colDef.min && value < colDef.min || colDef.max && value > colDef.max) {\n            flag = false;\n          }\n        }\n      });\n\n      if (flag) {\n        geomData.push(obj);\n      }\n    });\n    chart.set('filteredData', geomData);\n  });\n};"]}]}