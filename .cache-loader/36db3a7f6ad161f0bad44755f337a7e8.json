{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/bullet/component/bulletRect.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/bullet/component/bulletRect.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign } from \"tslib\";\nimport { find, map, get } from '@antv/util';\nimport BBox from '../../../util/bbox';\nvar BulletRect = (function () {\n    function BulletRect(view, cfg) {\n        this.view = view;\n        this.cfg = cfg;\n        this._init();\n    }\n    BulletRect.prototype.draw = function () {\n        if (!this.view || this.view.destroyed) {\n            return;\n        }\n        this.container = this.view.middleGroup.addGroup();\n        this.container.set('name', 'rectGroups');\n        this.container.setZIndex(-100);\n        var geometry = this.getGeometry();\n        var shapes = map(geometry === null || geometry === void 0 ? void 0 : geometry.elements, function (element) { return element.shape; });\n        for (var i = 0; i < this.cfg.ranges.length; i += 1) {\n            var shapeBox = shapes[i].getBBox();\n            var widthRatio = shapeBox.width / shapes[i].get('origin').data[this.cfg.yField];\n            this.drawRect(shapeBox, this.cfg.ranges[i] || [0, 1], widthRatio);\n        }\n        this.view.canvas.draw();\n    };\n    BulletRect.prototype.drawRect = function (box, ranges, widthRatio) {\n        var options = this.cfg;\n        var rangeColors = options.rangeColors;\n        var xPos = box.minX;\n        var yPos = box.minY - (box.height * (options.rangeSize - 1)) / 2;\n        for (var i = 1; i < ranges.length; i += 1) {\n            var width = (ranges[i] - ranges[i - 1]) * options.rangeMax * widthRatio;\n            this.container\n                .addShape('rect', {\n                name: 'bullet-rect',\n                attrs: {\n                    width: width,\n                    height: box.height * options.rangeSize,\n                    x: xPos,\n                    y: yPos,\n                    fill: rangeColors[(i - 1) % rangeColors.length],\n                    fillOpacity: 0.25,\n                },\n            })\n                .set('zIndex', -1);\n            xPos += width;\n        }\n        if (options.axis && options.axis.visible) {\n            var tickInterval = options.rangeMax / (options.axis.tickCount - 1);\n            var rangeBox = new BBox(box.x, yPos, xPos, box.height * options.rangeSize);\n            this.drawBulletTicks(rangeBox, tickInterval, widthRatio);\n        }\n    };\n    BulletRect.prototype.drawBulletTicks = function (box, tickInterval, widthRatio) {\n        var options = this.cfg;\n        var ticksStyle = options.axis.style;\n        var tickCount = options.axis.tickCount;\n        var tickPosition = options.axis.position;\n        var tickOffset = get(ticksStyle, 'lineHeight', 0) - ticksStyle.fontSize / 2;\n        for (var tickIdx = 0; tickIdx < tickCount; tickIdx += 1) {\n            var x = box.minX + tickInterval * tickIdx * widthRatio;\n            var tickText = \"\" + tickInterval * tickIdx;\n            if (options.axis.formatter) {\n                tickText = options.axis.formatter(tickText, tickIdx);\n            }\n            this.container.addShape('text', {\n                name: 'tick',\n                attrs: __assign({ x: x, y: tickPosition === 'before' ? box.minY - tickOffset : box.maxY + tickOffset, text: \"\" + tickText }, ticksStyle),\n            });\n            if (options.axis.tickLine && options.axis.tickLine.visible) {\n                var tickLineCfg = options.axis.tickLine;\n                if (tickIdx > 0 && tickIdx !== tickCount - 1) {\n                    this.container\n                        .addShape('path', {\n                        attrs: __assign({ path: [\n                                ['M', x, box.minY],\n                                ['L', x, box.maxY],\n                            ] }, tickLineCfg),\n                    })\n                        .set('zIndex', -1);\n                }\n            }\n        }\n    };\n    BulletRect.prototype.clear = function () {\n        if (this.container) {\n            this.container.clear();\n        }\n    };\n    BulletRect.prototype.destroy = function () {\n        if (this.container) {\n            this.container.remove();\n        }\n    };\n    BulletRect.prototype._init = function () {\n        var _this = this;\n        this.view.on('beforerender', function () {\n            _this.clear();\n        });\n        this.view.on('afterrender', function () {\n            _this.draw();\n        });\n    };\n    BulletRect.prototype.getGeometry = function () {\n        return find(this.view.geometries, function (geometry) { return geometry.type === 'interval'; });\n    };\n    return BulletRect;\n}());\nexport default BulletRect;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/bullet/component/bulletRect.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/bullet/component/bulletRect.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport { find, map, get } from '@antv/util';\nimport BBox from '../../../util/bbox';\nvar BulletRect = /** @class */ (function () {\n    function BulletRect(view, cfg) {\n        this.view = view;\n        this.cfg = cfg;\n        this._init();\n    }\n    /** 绘制辅助labels */\n    BulletRect.prototype.draw = function () {\n        if (!this.view || this.view.destroyed) {\n            return;\n        }\n        this.container = this.view.middleGroup.addGroup();\n        this.container.set('name', 'rectGroups');\n        this.container.setZIndex(-100);\n        var geometry = this.getGeometry();\n        var shapes = map(geometry === null || geometry === void 0 ? void 0 : geometry.elements, function (element) { return element.shape; });\n        for (var i = 0; i < this.cfg.ranges.length; i += 1) {\n            var shapeBox = shapes[i].getBBox();\n            var widthRatio = shapeBox.width / shapes[i].get('origin').data[this.cfg.yField];\n            this.drawRect(shapeBox, this.cfg.ranges[i] || [0, 1], widthRatio);\n        }\n        this.view.canvas.draw();\n    };\n    BulletRect.prototype.drawRect = function (box, ranges, widthRatio) {\n        var options = this.cfg;\n        var rangeColors = options.rangeColors;\n        var xPos = box.minX;\n        var yPos = box.minY - (box.height * (options.rangeSize - 1)) / 2;\n        for (var i = 1; i < ranges.length; i += 1) {\n            var width = (ranges[i] - ranges[i - 1]) * options.rangeMax * widthRatio;\n            this.container\n                .addShape('rect', {\n                name: 'bullet-rect',\n                attrs: {\n                    width: width,\n                    height: box.height * options.rangeSize,\n                    x: xPos,\n                    y: yPos,\n                    fill: rangeColors[(i - 1) % rangeColors.length],\n                    fillOpacity: 0.25,\n                },\n            })\n                .set('zIndex', -1);\n            xPos += width;\n        }\n        if (options.axis && options.axis.visible) {\n            var tickInterval = options.rangeMax / (options.axis.tickCount - 1);\n            var rangeBox = new BBox(box.x, yPos, xPos, box.height * options.rangeSize);\n            this.drawBulletTicks(rangeBox, tickInterval, widthRatio);\n        }\n    };\n    /** 添加 ticks  */\n    BulletRect.prototype.drawBulletTicks = function (box, tickInterval, widthRatio) {\n        var options = this.cfg;\n        var ticksStyle = options.axis.style;\n        var tickCount = options.axis.tickCount;\n        var tickPosition = options.axis.position;\n        var tickOffset = get(ticksStyle, 'lineHeight', 0) - ticksStyle.fontSize / 2;\n        for (var tickIdx = 0; tickIdx < tickCount; tickIdx += 1) {\n            var x = box.minX + tickInterval * tickIdx * widthRatio;\n            var tickText = \"\" + tickInterval * tickIdx;\n            if (options.axis.formatter) {\n                tickText = options.axis.formatter(tickText, tickIdx);\n            }\n            this.container.addShape('text', {\n                name: 'tick',\n                attrs: __assign({ x: x, y: tickPosition === 'before' ? box.minY - tickOffset : box.maxY + tickOffset, text: \"\" + tickText }, ticksStyle),\n            });\n            if (options.axis.tickLine && options.axis.tickLine.visible) {\n                var tickLineCfg = options.axis.tickLine;\n                if (tickIdx > 0 && tickIdx !== tickCount - 1) {\n                    this.container\n                        .addShape('path', {\n                        attrs: __assign({ path: [\n                                ['M', x, box.minY],\n                                ['L', x, box.maxY],\n                            ] }, tickLineCfg),\n                    })\n                        .set('zIndex', -1);\n                }\n            }\n        }\n    };\n    BulletRect.prototype.clear = function () {\n        if (this.container) {\n            this.container.clear();\n        }\n    };\n    BulletRect.prototype.destroy = function () {\n        if (this.container) {\n            this.container.remove();\n        }\n    };\n    BulletRect.prototype._init = function () {\n        var _this = this;\n        this.view.on('beforerender', function () {\n            _this.clear();\n        });\n        this.view.on('afterrender', function () {\n            _this.draw();\n        });\n    };\n    BulletRect.prototype.getGeometry = function () {\n        return find(this.view.geometries, function (geometry) { return geometry.type === 'interval'; });\n    };\n    return BulletRect;\n}());\nexport default BulletRect;\n//# sourceMappingURL=bulletRect.js.map"]}]}