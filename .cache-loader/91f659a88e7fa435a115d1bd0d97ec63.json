{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\category.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\category.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Util = require('../util');\r\nvar Legend = require('./base');\r\nvar Event = Util.Event;\r\nvar Group = Util.Group;\r\nfunction findItem(items, refer) {\r\n    var rst = null;\r\n    var value = refer instanceof Group || refer.name === 'legendGroup' ? refer.get('value') : refer;\r\n    Util.each(items, function (item) {\r\n        if (item.value === value) {\r\n            rst = item;\r\n            return false;\r\n        }\r\n    });\r\n    return rst;\r\n}\r\nfunction findShapeByName(group, name) {\r\n    return group.findBy(function (node) {\r\n        return node.name === name;\r\n    });\r\n}\r\nvar Category = function (_Legend) {\r\n    _inheritsLoose(Category, _Legend);\r\n    function Category() {\r\n        return _Legend.apply(this, arguments) || this;\r\n    }\r\n    var _proto = Category.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Legend.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            type: 'category-legend',\r\n            items: null,\r\n            itemGap: 5,\r\n            itemMarginBottom: 8,\r\n            itemsGroup: null,\r\n            layout: 'horizontal',\r\n            allowAllCanceled: false,\r\n            backPadding: [0, 0, 0, 0],\r\n            unCheckColor: '#ccc',\r\n            background: {\r\n                fill: '#fff',\r\n                fillOpacity: 0\r\n            },\r\n            itemWidth: null,\r\n            textStyle: {\r\n                fill: '#333',\r\n                fontSize: 12,\r\n                textAlign: 'start',\r\n                textBaseline: 'middle',\r\n                fontFamily: '\"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto,\"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",SimSun, \"sans-serif\"'\r\n            },\r\n            _wordSpaceing: 8,\r\n            clickable: true,\r\n            selectedMode: 'multiple',\r\n            reversed: false,\r\n            autoWrap: true,\r\n            highlight: false\r\n        });\r\n    };\r\n    _proto.render = function render() {\r\n        _Legend.prototype.render.call(this);\r\n        this._renderItems();\r\n        this.get('autoWrap') && this._adjustItems();\r\n    };\r\n    _proto._bindEvents = function _bindEvents() {\r\n        if (this.get('hoverable')) {\r\n            this.get('group').on('mousemove', Util.wrapBehavior(this, '_onMousemove'));\r\n            this.get('group').on('mouseleave', Util.wrapBehavior(this, '_onMouseleave'));\r\n        }\r\n        if (this.get('clickable')) {\r\n            this.get('group').on('click', Util.wrapBehavior(this, '_onClick'));\r\n        }\r\n    };\r\n    _proto._getLegendItem = function _getLegendItem(target) {\r\n        var item = target.get('parent');\r\n        if (item && item.name === 'legendGroup') {\r\n            return item;\r\n        }\r\n        return null;\r\n    };\r\n    _proto.activate = function activate(value) {\r\n        var _this = this;\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var children = itemsGroup.get('children');\r\n        var markerItem = void 0;\r\n        children.forEach(function (child) {\r\n            markerItem = findShapeByName(child, 'legend-marker');\r\n            if (!markerItem)\r\n                return;\r\n            var checked = child.get('checked');\r\n            if (_this.get('highlight')) {\r\n                if (child.get('value') === value && checked) {\r\n                    markerItem.attr('stroke', '#333');\r\n                }\r\n                else {\r\n                    markerItem.attr('stroke', null);\r\n                }\r\n            }\r\n            else {\r\n                if (child.get('value') === value) {\r\n                    markerItem.attr('fillOpacity', 0.5);\r\n                }\r\n                else {\r\n                    markerItem.attr('fillOpacity', 1);\r\n                }\r\n            }\r\n        });\r\n        this.get('canvas').draw();\r\n        return;\r\n    };\r\n    _proto.unactivate = function unactivate() {\r\n        var _this2 = this;\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var children = itemsGroup.get('children');\r\n        var markerItem = void 0;\r\n        var unCheckColor = this.get('unCheckColor');\r\n        children.forEach(function (child) {\r\n            markerItem = findShapeByName(child, 'legend-marker');\r\n            if (!markerItem)\r\n                return;\r\n            if (_this2.get('highlight')) {\r\n                var oriStroke = markerItem.get('oriStroke');\r\n                var checked = child.get('checked');\r\n                if (oriStroke && !checked)\r\n                    oriStroke = unCheckColor;\r\n                else\r\n                    oriStroke = '';\r\n                markerItem.attr('stroke', oriStroke);\r\n            }\r\n            else\r\n                markerItem.attr('fillOpacity', 1);\r\n        });\r\n        this.get('canvas').draw();\r\n        return;\r\n    };\r\n    _proto._onMousemove = function _onMousemove(ev) {\r\n        var item = this._getLegendItem(ev.currentTarget);\r\n        if (item && item.get('checked')) {\r\n            var items = this.get('items');\r\n            var itemhover = new Event('itemhover', ev, true, true);\r\n            itemhover.item = findItem(items, item);\r\n            itemhover.checked = item.get('checked');\r\n            itemhover.currentTarget = ev.currentTarget;\r\n            this.unactivate();\r\n            this.activate(item.get('value'));\r\n            this.emit('itemhover', itemhover);\r\n        }\r\n        else {\r\n            this.unactivate();\r\n            this.emit('itemunhover', ev);\r\n        }\r\n        this.get('canvas').draw();\r\n        return;\r\n    };\r\n    _proto._onMouseleave = function _onMouseleave(ev) {\r\n        this.unactivate();\r\n        this.get('canvas').draw();\r\n        this.emit('itemunhover', ev);\r\n        return;\r\n    };\r\n    _proto._onClick = function _onClick(ev) {\r\n        var clickedItem = this._getLegendItem(ev.currentTarget);\r\n        var items = this.get('items');\r\n        if (clickedItem && !clickedItem.get('destroyed')) {\r\n            var checked = clickedItem.get('checked');\r\n            var mode = this.get('selectedMode');\r\n            var item = findItem(items, clickedItem);\r\n            var itemclick = new Event('itemclick', ev, true, true);\r\n            itemclick.item = item;\r\n            itemclick.currentTarget = clickedItem;\r\n            itemclick.appendInfo = ev.currentTarget.get('appendInfo');\r\n            itemclick.checked = mode === 'single' ? true : !checked;\r\n            if (!this.get('allowAllCanceled') && checked && this.getCheckedCount() === 1) {\r\n                this.emit('clicklastitem', itemclick);\r\n                return;\r\n            }\r\n            var unCheckColor = this.get('unCheckColor');\r\n            var checkColor = this.get('textStyle').fill;\r\n            var markerItem = void 0;\r\n            var textItem = void 0;\r\n            var legendItem = void 0;\r\n            if (mode === 'single') {\r\n                var itemsGroup = this.get('itemsGroup');\r\n                var children = itemsGroup.get('children');\r\n                Util.each(children, function (child) {\r\n                    markerItem = findShapeByName(child, 'legend-marker');\r\n                    textItem = findShapeByName(child, 'legend-text');\r\n                    legendItem = findShapeByName(child, 'legend-item');\r\n                    if (child !== clickedItem) {\r\n                        if (markerItem.attr('fill')) {\r\n                            markerItem.attr('fill', unCheckColor);\r\n                        }\r\n                        if (markerItem.attr('stroke')) {\r\n                            markerItem.attr('stroke', unCheckColor);\r\n                        }\r\n                        textItem.attr('fill', unCheckColor);\r\n                        markerItem.setSilent('checked', false);\r\n                        textItem.setSilent('checked', false);\r\n                        legendItem.setSilent('checked', false);\r\n                        child.setSilent('checked', false);\r\n                    }\r\n                    else {\r\n                        if (markerItem.attr('fill')) {\r\n                            item && item.marker && markerItem.attr('fill', item.marker.fill);\r\n                        }\r\n                        if (markerItem.attr('stroke')) {\r\n                            item && item.marker && markerItem.attr('stroke', item.marker.stroke);\r\n                        }\r\n                        textItem.attr('fill', checkColor);\r\n                        markerItem.setSilent('checked', true);\r\n                        textItem.setSilent('checked', true);\r\n                        legendItem.setSilent('checked', true);\r\n                        child.setSilent('checked', true);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                markerItem = findShapeByName(clickedItem, 'legend-marker');\r\n                textItem = findShapeByName(clickedItem, 'legend-text');\r\n                legendItem = findShapeByName(clickedItem, 'legend-item');\r\n                if (markerItem.attr('fill')) {\r\n                    item && item.marker && markerItem.attr('fill', checked ? unCheckColor : item.marker.fill);\r\n                }\r\n                if (markerItem.attr('stroke')) {\r\n                    item && item.marker && markerItem.attr('stroke', checked ? unCheckColor : item.marker.stroke);\r\n                }\r\n                textItem.attr('fill', checked ? unCheckColor : checkColor);\r\n                clickedItem.setSilent('checked', !checked);\r\n                markerItem.setSilent('checked', !checked);\r\n                textItem.setSilent('checked', !checked);\r\n                legendItem.setSilent('checked', !checked);\r\n            }\r\n            this.emit('itemclick', itemclick);\r\n        }\r\n        this.get('canvas').draw();\r\n        return;\r\n    };\r\n    _proto._renderItems = function _renderItems() {\r\n        var _this3 = this;\r\n        var items = this.get('items');\r\n        if (this.get('reversed')) {\r\n            items.reverse();\r\n        }\r\n        Util.each(items, function (item, index) {\r\n            _this3._addItem(item, index);\r\n        });\r\n        if (this.get('highlight')) {\r\n            var itemsGroup = this.get('itemsGroup');\r\n            var children = itemsGroup.get('children');\r\n            var markerItem = void 0;\r\n            children.forEach(function (child) {\r\n                markerItem = findShapeByName(child, 'legend-marker');\r\n                var oriStroke = markerItem.get('oriStroke');\r\n                if (!oriStroke) {\r\n                    if (markerItem.attr('stroke'))\r\n                        markerItem.set('oriStroke', markerItem.attr('stroke'));\r\n                    else\r\n                        markerItem.set('oriStroke', '');\r\n                }\r\n            });\r\n        }\r\n    };\r\n    _proto._formatItemValue = function _formatItemValue(value) {\r\n        var formatter = this.get('formatter') || this.get('itemFormatter');\r\n        if (formatter) {\r\n            value = formatter.call(this, value);\r\n        }\r\n        return value;\r\n    };\r\n    _proto._getNextX = function _getNextX() {\r\n        var layout = this.get('layout');\r\n        var itemGap = this.get('itemGap');\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var itemWidth = this.get('itemWidth');\r\n        var children = itemsGroup.get('children');\r\n        var nextX = 0;\r\n        if (layout === 'horizontal') {\r\n            Util.each(children, function (v) {\r\n                nextX += (itemWidth ? itemWidth : v.getBBox().width) + itemGap;\r\n            });\r\n        }\r\n        return nextX;\r\n    };\r\n    _proto._getNextY = function _getNextY() {\r\n        var itemMarginBottom = this.get('itemMarginBottom');\r\n        var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\r\n        var layout = this.get('layout');\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var titleShape = this.get('titleShape');\r\n        var children = itemsGroup.get('children');\r\n        var nextY = titleGap;\r\n        if (titleShape) {\r\n            nextY += titleShape.getBBox().height;\r\n        }\r\n        if (layout === 'vertical') {\r\n            Util.each(children, function (v) {\r\n                nextY += v.getBBox().height + itemMarginBottom;\r\n            });\r\n        }\r\n        return nextY;\r\n    };\r\n    _proto._addItem = function _addItem(item) {\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var x = this._getNextX();\r\n        var y = this._getNextY();\r\n        var unCheckColor = this.get('unCheckColor');\r\n        var itemGroup = itemsGroup.addGroup({\r\n            x: x,\r\n            y: y,\r\n            value: item.value,\r\n            checked: item.checked\r\n        });\r\n        itemGroup.set('viewId', this.get('viewId'));\r\n        var textStyle = this.get('textStyle');\r\n        var wordSpace = this.get('_wordSpaceing');\r\n        var startX = 0;\r\n        if (item.marker) {\r\n            var markerAttrs = Util.mix({}, item.marker, {\r\n                x: item.marker.radius + x,\r\n                y: y\r\n            });\r\n            if (!item.checked) {\r\n                if (markerAttrs.fill) {\r\n                    markerAttrs.fill = unCheckColor;\r\n                }\r\n                if (markerAttrs.stroke) {\r\n                    markerAttrs.stroke = unCheckColor;\r\n                }\r\n            }\r\n            var markerShape = itemGroup.addShape('marker', {\r\n                type: 'marker',\r\n                attrs: markerAttrs\r\n            });\r\n            markerShape.attr('cursor', 'pointer');\r\n            markerShape.name = 'legend-marker';\r\n            startX += markerShape.getBBox().width + wordSpace;\r\n        }\r\n        var textAttrs = Util.mix({}, {\r\n            fill: '#333',\r\n            fontSize: 12,\r\n            textAlign: 'start',\r\n            textBaseline: 'middle',\r\n            fontFamily: '\"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto,\"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",SimSun, \"sans-serif\"'\r\n        }, textStyle, {\r\n            x: startX + x,\r\n            y: y,\r\n            text: this._formatItemValue(item.value)\r\n        });\r\n        if (!item.checked) {\r\n            Util.mix(textAttrs, {\r\n                fill: unCheckColor\r\n            });\r\n        }\r\n        var textShape = itemGroup.addShape('text', {\r\n            attrs: textAttrs\r\n        });\r\n        textShape.attr('cursor', 'pointer');\r\n        textShape.name = 'legend-text';\r\n        this.get('appendInfo') && textShape.setSilent('appendInfo', this.get('appendInfo'));\r\n        var bbox = itemGroup.getBBox();\r\n        var itemWidth = this.get('itemWidth');\r\n        var wrapperShape = itemGroup.addShape('rect', {\r\n            attrs: {\r\n                x: x,\r\n                y: y - bbox.height / 2,\r\n                fill: '#fff',\r\n                fillOpacity: 0,\r\n                width: itemWidth || bbox.width,\r\n                height: bbox.height\r\n            }\r\n        });\r\n        wrapperShape.attr('cursor', 'pointer');\r\n        wrapperShape.setSilent('origin', item);\r\n        wrapperShape.name = 'legend-item';\r\n        this.get('appendInfo') && wrapperShape.setSilent('appendInfo', this.get('appendInfo'));\r\n        itemGroup.name = 'legendGroup';\r\n        return itemGroup;\r\n    };\r\n    _proto._adjustHorizontal = function _adjustHorizontal() {\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var children = itemsGroup.get('children');\r\n        var maxLength = this.get('maxLength');\r\n        var itemGap = this.get('itemGap');\r\n        var itemMarginBottom = this.get('itemMarginBottom');\r\n        var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\r\n        var row = 0;\r\n        var rowLength = 0;\r\n        var width = void 0;\r\n        var height = void 0;\r\n        var box = void 0;\r\n        var itemWidth = this.get('itemWidth');\r\n        if (itemsGroup.getBBox().width > maxLength) {\r\n            Util.each(children, function (child) {\r\n                box = child.getBBox();\r\n                width = itemWidth || box.width;\r\n                height = box.height + itemMarginBottom;\r\n                if (maxLength - rowLength < width) {\r\n                    row++;\r\n                    rowLength = 0;\r\n                }\r\n                child.move(rowLength, row * height + titleGap);\r\n                rowLength += width + itemGap;\r\n            });\r\n        }\r\n        return;\r\n    };\r\n    _proto._adjustVertical = function _adjustVertical() {\r\n        var itemsGroup = this.get('itemsGroup');\r\n        var titleShape = this.get('titleShape');\r\n        var children = itemsGroup.get('children');\r\n        var maxLength = this.get('maxLength');\r\n        var itemGap = this.get('itemGap');\r\n        var itemMarginBottom = this.get('itemMarginBottom');\r\n        var titleGap = this.get('titleGap');\r\n        var titleHeight = titleShape ? titleShape.getBBox().height + titleGap : 0;\r\n        var itemWidth = this.get('itemWidth');\r\n        var colLength = titleHeight;\r\n        var width = void 0;\r\n        var height = void 0;\r\n        var box = void 0;\r\n        var maxItemWidth = 0;\r\n        var totalLength = 0;\r\n        if (itemsGroup.getBBox().height > maxLength) {\r\n            Util.each(children, function (v) {\r\n                box = v.getBBox();\r\n                width = box.width;\r\n                height = box.height;\r\n                if (itemWidth) {\r\n                    maxItemWidth = itemWidth + itemGap;\r\n                }\r\n                else if (width > maxItemWidth) {\r\n                    maxItemWidth = width + itemGap;\r\n                }\r\n                if (maxLength - colLength < height) {\r\n                    colLength = titleHeight;\r\n                    totalLength += maxItemWidth;\r\n                    v.move(totalLength, titleHeight);\r\n                }\r\n                else {\r\n                    v.move(totalLength, colLength);\r\n                }\r\n                colLength += height + itemMarginBottom;\r\n            });\r\n        }\r\n        return;\r\n    };\r\n    _proto._adjustItems = function _adjustItems() {\r\n        var layout = this.get('layout');\r\n        if (layout === 'horizontal') {\r\n            this._adjustHorizontal();\r\n        }\r\n        else {\r\n            this._adjustVertical();\r\n        }\r\n    };\r\n    _proto.getWidth = function getWidth() {\r\n        return _Legend.prototype.getWidth.call(this);\r\n    };\r\n    _proto.getHeight = function getHeight() {\r\n        return _Legend.prototype.getHeight.call(this);\r\n    };\r\n    _proto.move = function move(x, y) {\r\n        _Legend.prototype.move.call(this, x, y);\r\n    };\r\n    return Category;\r\n}(Legend);\r\nmodule.exports = Category;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\category.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\category.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Legend = require('./base'); // const DomUtil = Util.DomUtil;\n\n\nvar Event = Util.Event;\nvar Group = Util.Group; // const Global = require('../../global');\n// const CONTAINER_CLASS = 'g2-legend';\n\nfunction findItem(items, refer) {\n  var rst = null;\n  var value = refer instanceof Group || refer.name === 'legendGroup' ? refer.get('value') : refer;\n  Util.each(items, function (item) {\n    if (item.value === value) {\n      rst = item;\n      return false;\n    }\n  });\n  return rst;\n}\n\nfunction findShapeByName(group, name) {\n  return group.findBy(function (node) {\n    return node.name === name;\n  });\n}\n\nvar Category =\n/*#__PURE__*/\nfunction (_Legend) {\n  _inheritsLoose(Category, _Legend);\n\n  function Category() {\n    return _Legend.apply(this, arguments) || this;\n  }\n\n  var _proto = Category.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Legend.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * type标识\n       * @type {String}\n       */\n      type: 'category-legend',\n\n      /**\n       * 子项集合\n       * @type {Array}\n       */\n      items: null,\n\n      /**\n       * TODO：rename\n       * 图例项水平方向的间距\n       * @type {Number}\n       */\n      itemGap: 5,\n\n      /**\n       * TODO：rename\n       * 图例项垂直方向的间距\n       * @type {Number}\n       */\n      itemMarginBottom: 8,\n\n      /**\n       * 图例项图组\n       * @type {Group}\n       */\n      itemsGroup: null,\n\n      /**\n       * 布局方式： horizontal，vertical\n       * @type {String}\n       */\n      layout: 'horizontal',\n\n      /**\n       * 是否允许全部取消，默认 false，即必须保留一个被选中\n       * @type {Boolean}\n       */\n      allowAllCanceled: false,\n\n      /**\n       * 边框内边距\n       * @type {Array}\n       */\n      backPadding: [0, 0, 0, 0],\n\n      /**\n       * 图例项取消选中的颜色\n       * @type {String}\n       */\n      unCheckColor: '#ccc',\n\n      /**\n       * 图例背景层属性设置\n       * @type {Obejct}\n       */\n      background: {\n        fill: '#fff',\n        fillOpacity: 0\n      },\n\n      /**\n       * 图例项的宽度，当图例有很多图例项，并且用户想要这些图例项在同一平面内垂直对齐，此时这个属性可帮用户实现此效果\n       * @type {Number}\n       */\n      itemWidth: null,\n\n      /**\n       * 图例文字样式\n       * @type {ATTRS}\n       */\n      textStyle: {\n        fill: '#333',\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle',\n        fontFamily: '\"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto,\"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",SimSun, \"sans-serif\"'\n      },\n\n      /**\n       * marker 和文字的距离\n       * @type {Number}\n       */\n      _wordSpaceing: 8,\n\n      /**\n       * 图例项是否可点击，默认为 true\n       * @type {Boolean}\n       */\n      clickable: true,\n\n      /**\n       * TODO: rename\n       * 图例项的选择模式，多选和单选 multiple、single\n       * @type {String}\n       */\n      selectedMode: 'multiple',\n\n      /**\n       * 图例项的顺序是否要逆序，默认为 false\n       * @type {Boolean}\n       */\n      reversed: false,\n\n      /**\n       * 是否自动换行\n       * @type {Boolean}\n       */\n      autoWrap: true,\n\n      /**\n       * 是否以增加 border 的方式高亮 hover 的 item。若为 false ，则降低其他 item 的透明度。\n       * @type {Boolean}\n       */\n      highlight: false\n    });\n  }; // rendering\n\n\n  _proto.render = function render() {\n    _Legend.prototype.render.call(this);\n\n    this._renderItems();\n\n    this.get('autoWrap') && this._adjustItems(); // 默认自动换行\n  }; // user iteraction\n\n\n  _proto._bindEvents = function _bindEvents() {\n    if (this.get('hoverable')) {\n      this.get('group').on('mousemove', Util.wrapBehavior(this, '_onMousemove'));\n      this.get('group').on('mouseleave', Util.wrapBehavior(this, '_onMouseleave'));\n    }\n\n    if (this.get('clickable')) {\n      this.get('group').on('click', Util.wrapBehavior(this, '_onClick'));\n    }\n  }; // return the target's parent legend object\n\n\n  _proto._getLegendItem = function _getLegendItem(target) {\n    var item = target.get('parent');\n\n    if (item && item.name === 'legendGroup') {\n      return item;\n    }\n\n    return null;\n  }; // activate an item by reduce the opacity of other items.\n  // it is reserved for bi-direction interaction between charts / graph and legend\n\n\n  _proto.activate = function activate(value) {\n    var _this = this;\n\n    var itemsGroup = this.get('itemsGroup');\n    var children = itemsGroup.get('children');\n    var markerItem = void 0;\n    children.forEach(function (child) {\n      markerItem = findShapeByName(child, 'legend-marker');\n      if (!markerItem) return;\n      var checked = child.get('checked');\n\n      if (_this.get('highlight')) {\n        // change stroke color\n        if (child.get('value') === value && checked) {\n          markerItem.attr('stroke', '#333');\n        } else {\n          markerItem.attr('stroke', null);\n        }\n      } else {\n        // change opacity\n        if (child.get('value') === value) {\n          markerItem.attr('fillOpacity', 0.5);\n        } else {\n          markerItem.attr('fillOpacity', 1);\n        }\n      }\n    });\n    this.get('canvas').draw();\n    return;\n  }; // restore the opacity of items\n  // it is reserved for bi-direction interaction between charts / graph and legend\n\n\n  _proto.unactivate = function unactivate() {\n    var _this2 = this;\n\n    var itemsGroup = this.get('itemsGroup');\n    var children = itemsGroup.get('children');\n    var markerItem = void 0;\n    var unCheckColor = this.get('unCheckColor');\n    children.forEach(function (child) {\n      markerItem = findShapeByName(child, 'legend-marker');\n      if (!markerItem) return;\n\n      if (_this2.get('highlight')) {\n        var oriStroke = markerItem.get('oriStroke');\n        var checked = child.get('checked');\n        if (oriStroke && !checked) oriStroke = unCheckColor;else oriStroke = '';\n        markerItem.attr('stroke', oriStroke);\n      } else markerItem.attr('fillOpacity', 1);\n    });\n    this.get('canvas').draw();\n    return;\n  }; // mouse move listener of an item\n  // when mouse over an item, reduce the opacity of the other items.\n\n\n  _proto._onMousemove = function _onMousemove(ev) {\n    var item = this._getLegendItem(ev.currentTarget);\n\n    if (item && item.get('checked')) {\n      var items = this.get('items');\n      var itemhover = new Event('itemhover', ev, true, true);\n      itemhover.item = findItem(items, item);\n      itemhover.checked = item.get('checked');\n      itemhover.currentTarget = ev.currentTarget; // change the opacity of other items\n\n      this.unactivate();\n      this.activate(item.get('value'));\n      this.emit('itemhover', itemhover);\n    } else {\n      this.unactivate();\n      this.emit('itemunhover', ev);\n    }\n\n    this.get('canvas').draw();\n    return;\n  }; // mouse leave listener of an item\n\n\n  _proto._onMouseleave = function _onMouseleave(ev) {\n    this.unactivate();\n    this.get('canvas').draw();\n    this.emit('itemunhover', ev);\n    return;\n  }; // the click listener of an item\n\n\n  _proto._onClick = function _onClick(ev) {\n    var clickedItem = this._getLegendItem(ev.currentTarget);\n\n    var items = this.get('items');\n\n    if (clickedItem && !clickedItem.get('destroyed')) {\n      var checked = clickedItem.get('checked');\n      var mode = this.get('selectedMode');\n      var item = findItem(items, clickedItem);\n      var itemclick = new Event('itemclick', ev, true, true);\n      itemclick.item = item;\n      itemclick.currentTarget = clickedItem;\n      itemclick.appendInfo = ev.currentTarget.get('appendInfo');\n      itemclick.checked = mode === 'single' ? true : !checked;\n\n      if (!this.get('allowAllCanceled') && checked && this.getCheckedCount() === 1) {\n        this.emit('clicklastitem', itemclick);\n        return;\n      }\n\n      var unCheckColor = this.get('unCheckColor');\n      var checkColor = this.get('textStyle').fill;\n      var markerItem = void 0;\n      var textItem = void 0;\n      var legendItem = void 0;\n\n      if (mode === 'single') {\n        var itemsGroup = this.get('itemsGroup');\n        var children = itemsGroup.get('children');\n        Util.each(children, function (child) {\n          markerItem = findShapeByName(child, 'legend-marker');\n          textItem = findShapeByName(child, 'legend-text');\n          legendItem = findShapeByName(child, 'legend-item');\n\n          if (child !== clickedItem) {\n            if (markerItem.attr('fill')) {\n              markerItem.attr('fill', unCheckColor);\n            }\n\n            if (markerItem.attr('stroke')) {\n              markerItem.attr('stroke', unCheckColor);\n            }\n\n            textItem.attr('fill', unCheckColor);\n            markerItem.setSilent('checked', false);\n            textItem.setSilent('checked', false);\n            legendItem.setSilent('checked', false);\n            child.setSilent('checked', false);\n          } else {\n            if (markerItem.attr('fill')) {\n              item && item.marker && markerItem.attr('fill', item.marker.fill);\n            }\n\n            if (markerItem.attr('stroke')) {\n              item && item.marker && markerItem.attr('stroke', item.marker.stroke);\n            }\n\n            textItem.attr('fill', checkColor);\n            markerItem.setSilent('checked', true);\n            textItem.setSilent('checked', true);\n            legendItem.setSilent('checked', true);\n            child.setSilent('checked', true);\n          }\n        });\n      } else {\n        markerItem = findShapeByName(clickedItem, 'legend-marker');\n        textItem = findShapeByName(clickedItem, 'legend-text');\n        legendItem = findShapeByName(clickedItem, 'legend-item');\n\n        if (markerItem.attr('fill')) {\n          item && item.marker && markerItem.attr('fill', checked ? unCheckColor : item.marker.fill);\n        }\n\n        if (markerItem.attr('stroke')) {\n          item && item.marker && markerItem.attr('stroke', checked ? unCheckColor : item.marker.stroke);\n        }\n\n        textItem.attr('fill', checked ? unCheckColor : checkColor);\n        clickedItem.setSilent('checked', !checked);\n        markerItem.setSilent('checked', !checked);\n        textItem.setSilent('checked', !checked);\n        legendItem.setSilent('checked', !checked);\n      }\n\n      this.emit('itemclick', itemclick);\n    }\n\n    this.get('canvas').draw();\n    return;\n  }; // render the items\n\n\n  _proto._renderItems = function _renderItems() {\n    var _this3 = this;\n\n    var items = this.get('items');\n\n    if (this.get('reversed')) {\n      items.reverse();\n    }\n\n    Util.each(items, function (item, index) {\n      _this3._addItem(item, index);\n    });\n\n    if (this.get('highlight')) {\n      var itemsGroup = this.get('itemsGroup');\n      var children = itemsGroup.get('children');\n      var markerItem = void 0;\n      children.forEach(function (child) {\n        markerItem = findShapeByName(child, 'legend-marker');\n        var oriStroke = markerItem.get('oriStroke');\n\n        if (!oriStroke) {\n          if (markerItem.attr('stroke')) markerItem.set('oriStroke', markerItem.attr('stroke'));else markerItem.set('oriStroke', '');\n        }\n      });\n    }\n  }; // format the item value\n\n\n  _proto._formatItemValue = function _formatItemValue(value) {\n    var formatter = this.get('formatter') || this.get('itemFormatter');\n\n    if (formatter) {\n      value = formatter.call(this, value);\n    }\n\n    return value;\n  }; // find x of next item\n\n\n  _proto._getNextX = function _getNextX() {\n    var layout = this.get('layout');\n    var itemGap = this.get('itemGap');\n    var itemsGroup = this.get('itemsGroup');\n    var itemWidth = this.get('itemWidth');\n    var children = itemsGroup.get('children');\n    var nextX = 0;\n\n    if (layout === 'horizontal') {\n      // 水平布局\n      Util.each(children, function (v) {\n        nextX += (itemWidth ? itemWidth : v.getBBox().width) + itemGap;\n      });\n    }\n\n    return nextX;\n  }; // find y of next item\n\n\n  _proto._getNextY = function _getNextY() {\n    var itemMarginBottom = this.get('itemMarginBottom');\n    var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\n    var layout = this.get('layout');\n    var itemsGroup = this.get('itemsGroup');\n    var titleShape = this.get('titleShape');\n    var children = itemsGroup.get('children');\n    var nextY = titleGap;\n\n    if (titleShape) {\n      nextY += titleShape.getBBox().height;\n    }\n\n    if (layout === 'vertical') {\n      // 竖直布局\n      Util.each(children, function (v) {\n        nextY += v.getBBox().height + itemMarginBottom;\n      });\n    }\n\n    return nextY;\n  }; // add an item to the canvas\n\n\n  _proto._addItem = function _addItem(item) {\n    var itemsGroup = this.get('itemsGroup');\n\n    var x = this._getNextX();\n\n    var y = this._getNextY();\n\n    var unCheckColor = this.get('unCheckColor');\n    var itemGroup = itemsGroup.addGroup({\n      x: x,\n      y: y,\n      value: item.value,\n      checked: item.checked\n    }); // @2018-10-20 by blue.lb 需要设置viewId，否则在emit的时候，parent获取不到viewId\n\n    itemGroup.set('viewId', this.get('viewId'));\n    var textStyle = this.get('textStyle');\n    var wordSpace = this.get('_wordSpaceing');\n    var startX = 0;\n\n    if (item.marker) {\n      // 如果有marker添加marker\n      var markerAttrs = Util.mix({}, item.marker, {\n        x: item.marker.radius + x,\n        y: y\n      });\n\n      if (!item.checked) {\n        if (markerAttrs.fill) {\n          markerAttrs.fill = unCheckColor;\n        }\n\n        if (markerAttrs.stroke) {\n          markerAttrs.stroke = unCheckColor;\n        }\n      }\n\n      var markerShape = itemGroup.addShape('marker', {\n        type: 'marker',\n        attrs: markerAttrs\n      });\n      markerShape.attr('cursor', 'pointer');\n      markerShape.name = 'legend-marker';\n      startX += markerShape.getBBox().width + wordSpace;\n    }\n\n    var textAttrs = Util.mix({}, {\n      fill: '#333',\n      fontSize: 12,\n      textAlign: 'start',\n      textBaseline: 'middle',\n      fontFamily: '\"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto,\"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",SimSun, \"sans-serif\"'\n    }, textStyle, {\n      x: startX + x,\n      y: y,\n      text: this._formatItemValue(item.value)\n    });\n\n    if (!item.checked) {\n      Util.mix(textAttrs, {\n        fill: unCheckColor\n      });\n    }\n\n    var textShape = itemGroup.addShape('text', {\n      attrs: textAttrs\n    });\n    textShape.attr('cursor', 'pointer');\n    textShape.name = 'legend-text';\n    this.get('appendInfo') && textShape.setSilent('appendInfo', this.get('appendInfo')); // 添加一个包围矩形，用于事件支持\n\n    var bbox = itemGroup.getBBox();\n    var itemWidth = this.get('itemWidth');\n    var wrapperShape = itemGroup.addShape('rect', {\n      attrs: {\n        x: x,\n        y: y - bbox.height / 2,\n        fill: '#fff',\n        fillOpacity: 0,\n        width: itemWidth || bbox.width,\n        height: bbox.height\n      }\n    });\n    wrapperShape.attr('cursor', 'pointer');\n    wrapperShape.setSilent('origin', item); // 保存图例项相关的数据，便于事件操作\n\n    wrapperShape.name = 'legend-item';\n    this.get('appendInfo') && wrapperShape.setSilent('appendInfo', this.get('appendInfo'));\n    itemGroup.name = 'legendGroup';\n    return itemGroup;\n  }; // auto break the line for horizontal layout\n\n\n  _proto._adjustHorizontal = function _adjustHorizontal() {\n    var itemsGroup = this.get('itemsGroup');\n    var children = itemsGroup.get('children');\n    var maxLength = this.get('maxLength');\n    var itemGap = this.get('itemGap');\n    var itemMarginBottom = this.get('itemMarginBottom');\n    var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\n    var row = 0;\n    var rowLength = 0;\n    var width = void 0;\n    var height = void 0;\n    var box = void 0;\n    var itemWidth = this.get('itemWidth');\n\n    if (itemsGroup.getBBox().width > maxLength) {\n      Util.each(children, function (child) {\n        box = child.getBBox();\n        width = itemWidth || box.width;\n        height = box.height + itemMarginBottom;\n\n        if (maxLength - rowLength < width) {\n          row++;\n          rowLength = 0;\n        }\n\n        child.move(rowLength, row * height + titleGap);\n        rowLength += width + itemGap;\n      });\n    }\n\n    return;\n  }; // auto break the column for vertical layout\n\n\n  _proto._adjustVertical = function _adjustVertical() {\n    var itemsGroup = this.get('itemsGroup');\n    var titleShape = this.get('titleShape');\n    var children = itemsGroup.get('children');\n    var maxLength = this.get('maxLength'); // 垂直布局，则 maxLength 代表容器的高度\n\n    var itemGap = this.get('itemGap');\n    var itemMarginBottom = this.get('itemMarginBottom');\n    var titleGap = this.get('titleGap');\n    var titleHeight = titleShape ? titleShape.getBBox().height + titleGap : 0;\n    var itemWidth = this.get('itemWidth');\n    var colLength = titleHeight;\n    var width = void 0;\n    var height = void 0;\n    var box = void 0;\n    var maxItemWidth = 0;\n    var totalLength = 0;\n\n    if (itemsGroup.getBBox().height > maxLength) {\n      Util.each(children, function (v) {\n        box = v.getBBox();\n        width = box.width;\n        height = box.height;\n\n        if (itemWidth) {\n          maxItemWidth = itemWidth + itemGap;\n        } else if (width > maxItemWidth) {\n          maxItemWidth = width + itemGap;\n        }\n\n        if (maxLength - colLength < height) {\n          colLength = titleHeight;\n          totalLength += maxItemWidth;\n          v.move(totalLength, titleHeight);\n        } else {\n          v.move(totalLength, colLength);\n        }\n\n        colLength += height + itemMarginBottom;\n      });\n    }\n\n    return;\n  }; // automatically break the line / column while the width / height exceeds maxLength\n\n\n  _proto._adjustItems = function _adjustItems() {\n    var layout = this.get('layout');\n\n    if (layout === 'horizontal') {\n      this._adjustHorizontal();\n    } else {\n      this._adjustVertical();\n    }\n  };\n\n  _proto.getWidth = function getWidth() {\n    return _Legend.prototype.getWidth.call(this);\n  };\n\n  _proto.getHeight = function getHeight() {\n    return _Legend.prototype.getHeight.call(this);\n  };\n\n  _proto.move = function move(x, y) {\n    _Legend.prototype.move.call(this, x, y);\n  };\n\n  return Category;\n}(Legend);\n\nmodule.exports = Category;"]}]}