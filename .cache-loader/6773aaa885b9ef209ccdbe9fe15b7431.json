{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\mask\\base.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\mask\\base.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { each } from '@antv/util';\r\nimport Action from '../base';\r\nvar MaskBase = (function (_super) {\r\n    __extends(MaskBase, _super);\r\n    function MaskBase() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.maskShape = null;\r\n        _this.points = [];\r\n        _this.starting = false;\r\n        _this.moving = false;\r\n        _this.preMovePoint = null;\r\n        _this.shapeType = 'path';\r\n        return _this;\r\n    }\r\n    MaskBase.prototype.getCurrentPoint = function () {\r\n        var event = this.context.event;\r\n        return {\r\n            x: event.x,\r\n            y: event.y,\r\n        };\r\n    };\r\n    MaskBase.prototype.emitEvent = function (type) {\r\n        var eventName = \"mask:\" + type;\r\n        var view = this.context.view;\r\n        var event = this.context.event;\r\n        view.emit(eventName, {\r\n            target: this.maskShape,\r\n            shape: this.maskShape,\r\n            points: this.points,\r\n            x: event.x,\r\n            y: event.y,\r\n        });\r\n    };\r\n    MaskBase.prototype.createMask = function () {\r\n        var view = this.context.view;\r\n        var maskAttrs = this.getMaskAttrs();\r\n        var maskShape = view.foregroundGroup.addShape({\r\n            type: this.shapeType,\r\n            name: 'mask',\r\n            draggable: true,\r\n            attrs: __assign({ fill: '#C5D4EB', opacity: 0.3 }, maskAttrs),\r\n        });\r\n        return maskShape;\r\n    };\r\n    MaskBase.prototype.getMaskPath = function () {\r\n        return [];\r\n    };\r\n    MaskBase.prototype.show = function () {\r\n        if (this.maskShape) {\r\n            this.maskShape.show();\r\n            this.emitEvent('show');\r\n        }\r\n    };\r\n    MaskBase.prototype.start = function () {\r\n        this.starting = true;\r\n        this.moving = false;\r\n        this.points = [this.getCurrentPoint()];\r\n        if (!this.maskShape) {\r\n            this.maskShape = this.createMask();\r\n            this.maskShape.set('capture', false);\r\n        }\r\n        this.updateMask();\r\n        this.emitEvent('start');\r\n    };\r\n    MaskBase.prototype.moveStart = function () {\r\n        this.moving = true;\r\n        this.preMovePoint = this.getCurrentPoint();\r\n    };\r\n    MaskBase.prototype.move = function () {\r\n        if (!this.moving || !this.maskShape) {\r\n            return;\r\n        }\r\n        var currentPoint = this.getCurrentPoint();\r\n        var preMovePoint = this.preMovePoint;\r\n        var dx = currentPoint.x - preMovePoint.x;\r\n        var dy = currentPoint.y - preMovePoint.y;\r\n        var points = this.points;\r\n        each(points, function (point) {\r\n            point.x += dx;\r\n            point.y += dy;\r\n        });\r\n        this.updateMask();\r\n        this.emitEvent('change');\r\n        this.preMovePoint = currentPoint;\r\n    };\r\n    MaskBase.prototype.updateMask = function () {\r\n        var attrs = this.getMaskAttrs();\r\n        this.maskShape.attr(attrs);\r\n    };\r\n    MaskBase.prototype.moveEnd = function () {\r\n        this.moving = false;\r\n        this.preMovePoint = null;\r\n    };\r\n    MaskBase.prototype.end = function () {\r\n        this.starting = false;\r\n        this.emitEvent('end');\r\n        if (this.maskShape) {\r\n            this.maskShape.set('capture', true);\r\n        }\r\n    };\r\n    MaskBase.prototype.hide = function () {\r\n        if (this.maskShape) {\r\n            this.maskShape.hide();\r\n            this.emitEvent('hide');\r\n        }\r\n    };\r\n    MaskBase.prototype.resize = function () {\r\n        if (this.starting && this.maskShape) {\r\n            this.points.push(this.getCurrentPoint());\r\n            this.updateMask();\r\n            this.emitEvent('change');\r\n        }\r\n    };\r\n    MaskBase.prototype.destroy = function () {\r\n        this.points = [];\r\n        if (this.maskShape) {\r\n            this.maskShape.remove();\r\n        }\r\n        this.maskShape = null;\r\n        this.preMovePoint = null;\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    return MaskBase;\r\n}(Action));\r\nexport default MaskBase;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\mask\\base.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\mask\\base.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\n/**\n * @ignore\n * 辅助框 Action 的基类\n */\nvar MaskBase = /** @class */ (function (_super) {\n    __extends(MaskBase, _super);\n    function MaskBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // mask 图形\n        _this.maskShape = null;\n        // 组成 mask 的各个点\n        _this.points = [];\n        // 开始 mask 的标记\n        _this.starting = false;\n        // 开始移动的标记\n        _this.moving = false;\n        _this.preMovePoint = null;\n        _this.shapeType = 'path';\n        return _this;\n    }\n    // 获取当前的位置\n    MaskBase.prototype.getCurrentPoint = function () {\n        var event = this.context.event;\n        return {\n            x: event.x,\n            y: event.y,\n        };\n    };\n    // 触发 mask 的事件\n    MaskBase.prototype.emitEvent = function (type) {\n        var eventName = \"mask:\" + type;\n        var view = this.context.view;\n        var event = this.context.event;\n        view.emit(eventName, {\n            target: this.maskShape,\n            shape: this.maskShape,\n            points: this.points,\n            x: event.x,\n            y: event.y,\n        });\n    };\n    // 创建 mask\n    MaskBase.prototype.createMask = function () {\n        var view = this.context.view;\n        var maskAttrs = this.getMaskAttrs();\n        var maskShape = view.foregroundGroup.addShape({\n            type: this.shapeType,\n            name: 'mask',\n            draggable: true,\n            attrs: __assign({ fill: '#C5D4EB', opacity: 0.3 }, maskAttrs),\n        });\n        return maskShape;\n    };\n    // 生成 mask 的路径\n    MaskBase.prototype.getMaskPath = function () {\n        return [];\n    };\n    /**\n     * 显示\n     */\n    MaskBase.prototype.show = function () {\n        if (this.maskShape) {\n            this.maskShape.show();\n            this.emitEvent('show');\n        }\n    };\n    /**\n     * 开始\n     */\n    MaskBase.prototype.start = function () {\n        this.starting = true;\n        // 开始时，保证移动结束\n        this.moving = false;\n        this.points = [this.getCurrentPoint()];\n        if (!this.maskShape) {\n            this.maskShape = this.createMask();\n            // 开始时设置 capture: false，可以避免创建、resize 时触发事件\n            this.maskShape.set('capture', false);\n        }\n        this.updateMask();\n        this.emitEvent('start');\n    };\n    /**\n     * 开始移动\n     */\n    MaskBase.prototype.moveStart = function () {\n        this.moving = true;\n        this.preMovePoint = this.getCurrentPoint();\n    };\n    /**\n     * 移动 mask\n     */\n    MaskBase.prototype.move = function () {\n        if (!this.moving || !this.maskShape) {\n            return;\n        }\n        var currentPoint = this.getCurrentPoint();\n        var preMovePoint = this.preMovePoint;\n        var dx = currentPoint.x - preMovePoint.x;\n        var dy = currentPoint.y - preMovePoint.y;\n        var points = this.points;\n        each(points, function (point) {\n            point.x += dx;\n            point.y += dy;\n        });\n        this.updateMask();\n        this.emitEvent('change');\n        this.preMovePoint = currentPoint;\n    };\n    MaskBase.prototype.updateMask = function () {\n        var attrs = this.getMaskAttrs();\n        this.maskShape.attr(attrs);\n    };\n    /**\n     * 结束移动\n     */\n    MaskBase.prototype.moveEnd = function () {\n        this.moving = false;\n        this.preMovePoint = null;\n    };\n    /**\n     * 结束\n     */\n    MaskBase.prototype.end = function () {\n        this.starting = false;\n        this.emitEvent('end');\n        if (this.maskShape) {\n            this.maskShape.set('capture', true);\n        }\n    };\n    /**\n     * 隐藏\n     */\n    MaskBase.prototype.hide = function () {\n        if (this.maskShape) {\n            this.maskShape.hide();\n            this.emitEvent('hide');\n        }\n    };\n    /**\n     * 大小变化\n     */\n    MaskBase.prototype.resize = function () {\n        // 只有进行中，才会允许大小变化\n        if (this.starting && this.maskShape) {\n            this.points.push(this.getCurrentPoint());\n            this.updateMask();\n            this.emitEvent('change');\n        }\n    };\n    /**\n     * 销毁\n     */\n    MaskBase.prototype.destroy = function () {\n        this.points = [];\n        if (this.maskShape) {\n            this.maskShape.remove();\n        }\n        this.maskShape = null;\n        this.preMovePoint = null;\n        _super.prototype.destroy.call(this);\n    };\n    return MaskBase;\n}(Action));\nexport default MaskBase;\n//# sourceMappingURL=base.js.map"]}]}