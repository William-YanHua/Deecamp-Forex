{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/scrollbar/scrollbar.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/scrollbar/scrollbar.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\nimport { addEventListener } from '@antv/dom-util';\nimport { clamp, get, noop } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nvar DEFAULT_STYLE = {\n    trackColor: 'rgba(0,0,0,0)',\n    thumbColor: 'rgba(0,0,0,0.15)',\n    size: 8,\n    lineCap: 'round',\n};\nexport var DEFAULT_THEME = {\n    default: DEFAULT_STYLE,\n    hover: {\n        thumbColor: 'rgba(0,0,0,0.2)',\n    },\n};\nvar Scrollbar = (function (_super) {\n    __extends(Scrollbar, _super);\n    function Scrollbar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.clearEvents = noop;\n        _this.onStartEvent = function (isMobile) {\n            return function (e) {\n                _this.isMobile = isMobile;\n                e.originalEvent.preventDefault();\n                var clientX = isMobile ? get(e.originalEvent, 'touches.0.clientX') : e.clientX;\n                var clientY = isMobile ? get(e.originalEvent, 'touches.0.clientY') : e.clientY;\n                _this.startPos = _this.cfg.isHorizontal ? clientX : clientY;\n                _this.bindLaterEvent();\n            };\n        };\n        _this.bindLaterEvent = function () {\n            var containerDOM = _this.getContainerDOM();\n            var events = [];\n            if (_this.isMobile) {\n                events = [\n                    addEventListener(containerDOM, 'touchmove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'touchend', _this.onMouseUp),\n                    addEventListener(containerDOM, 'touchcancel', _this.onMouseUp),\n                ];\n            }\n            else {\n                events = [\n                    addEventListener(containerDOM, 'mousemove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'mouseup', _this.onMouseUp),\n                    addEventListener(containerDOM, 'mouseleave', _this.onMouseUp),\n                ];\n            }\n            _this.clearEvents = function () {\n                events.forEach(function (e) {\n                    e.remove();\n                });\n            };\n        };\n        _this.onMouseMove = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, thumbOffset = _a.thumbOffset;\n            e.preventDefault();\n            var clientX = _this.isMobile ? get(e, 'touches.0.clientX') : e.clientX;\n            var clientY = _this.isMobile ? get(e, 'touches.0.clientY') : e.clientY;\n            var endPos = isHorizontal ? clientX : clientY;\n            var diff = endPos - _this.startPos;\n            _this.startPos = endPos;\n            _this.updateThumbOffset(thumbOffset + diff);\n        };\n        _this.onMouseUp = function (e) {\n            e.preventDefault();\n            _this.clearEvents();\n        };\n        _this.onTrackClick = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, x = _a.x, y = _a.y, thumbLen = _a.thumbLen;\n            var containerDOM = _this.getContainerDOM();\n            var rect = containerDOM.getBoundingClientRect();\n            var clientX = e.clientX, clientY = e.clientY;\n            var offset = isHorizontal ? clientX - rect.left - x - thumbLen / 2 : clientY - rect.top - y - thumbLen / 2;\n            var newOffset = _this.validateRange(offset);\n            _this.updateThumbOffset(newOffset);\n        };\n        _this.onThumbMouseOver = function () {\n            var thumbColor = _this.cfg.theme.hover.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        _this.onThumbMouseOut = function () {\n            var thumbColor = _this.cfg.theme.default.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        return _this;\n    }\n    Scrollbar.prototype.setRange = function (min, max) {\n        this.set('minLimit', min);\n        this.set('maxLimit', max);\n        var curValue = this.getValue();\n        var newValue = clamp(curValue, min, max);\n        if (curValue !== newValue && !this.get('isInit')) {\n            this.setValue(newValue);\n        }\n    };\n    Scrollbar.prototype.getRange = function () {\n        var min = this.get('minLimit') || 0;\n        var max = this.get('maxLimit') || 1;\n        return { min: min, max: max };\n    };\n    Scrollbar.prototype.setValue = function (value) {\n        var range = this.getRange();\n        var originalValue = this.getValue();\n        this.update({\n            thumbOffset: (this.get('trackLen') - this.get('thumbLen')) * clamp(value, range.min, range.max),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: this.getValue(),\n        });\n    };\n    Scrollbar.prototype.getValue = function () {\n        return clamp(this.get('thumbOffset') / (this.get('trackLen') - this.get('thumbLen')), 0, 1);\n    };\n    Scrollbar.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'scrollbar', isHorizontal: true, minThumbLen: 20, thumbOffset: 0, theme: DEFAULT_THEME });\n    };\n    Scrollbar.prototype.renderInner = function (group) {\n        this.renderTrackShape(group);\n        this.renderThumbShape(group);\n    };\n    Scrollbar.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Scrollbar.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    Scrollbar.prototype.renderTrackShape = function (group) {\n        var _a = this.cfg, trackLen = _a.trackLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, lineCap = _c.lineCap, trackColor = _c.trackColor, size = _c.size;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: 0 + size / 2,\n                y1: size / 2,\n                x2: trackLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            }\n            : {\n                x1: size / 2,\n                y1: 0 + size / 2,\n                x2: size / 2,\n                y2: trackLen - size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            };\n        return this.addShape(group, {\n            id: this.getElementId('track'),\n            name: 'track',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    Scrollbar.prototype.renderThumbShape = function (group) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, thumbLen = _a.thumbLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, size = _c.size, lineCap = _c.lineCap, thumbColor = _c.thumbColor;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: thumbOffset + size / 2,\n                y1: size / 2,\n                x2: thumbOffset + thumbLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            }\n            : {\n                x1: size / 2,\n                y1: thumbOffset + size / 2,\n                x2: size / 2,\n                y2: thumbOffset + thumbLen - size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            };\n        return this.addShape(group, {\n            id: this.getElementId('thumb'),\n            name: 'thumb',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    Scrollbar.prototype.bindEvents = function () {\n        var group = this.get('group');\n        group.on('mousedown', this.onStartEvent(false));\n        group.on('mouseup', this.onMouseUp);\n        group.on('touchstart', this.onStartEvent(true));\n        group.on('touchend', this.onMouseUp);\n        var trackShape = group.findById(this.getElementId('track'));\n        trackShape.on('click', this.onTrackClick);\n        var thumbShape = group.findById(this.getElementId('thumb'));\n        thumbShape.on('mouseover', this.onThumbMouseOver);\n        thumbShape.on('mouseout', this.onThumbMouseOut);\n    };\n    Scrollbar.prototype.getContainerDOM = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        return canvas && canvas.get('container');\n    };\n    Scrollbar.prototype.validateRange = function (offset) {\n        var _a = this.cfg, thumbLen = _a.thumbLen, trackLen = _a.trackLen;\n        var newOffset = offset;\n        if (offset + thumbLen > trackLen) {\n            newOffset = trackLen - thumbLen;\n        }\n        else if (offset + thumbLen < thumbLen) {\n            newOffset = 0;\n        }\n        return newOffset;\n    };\n    Scrollbar.prototype.draw = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    Scrollbar.prototype.updateThumbOffset = function (offset) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, isHorizontal = _a.isHorizontal, thumbLen = _a.thumbLen, size = _a.size;\n        var newOffset = this.validateRange(offset);\n        if (newOffset === thumbOffset) {\n            return;\n        }\n        var thumbShape = this.getElementByLocalId('thumb');\n        if (isHorizontal) {\n            thumbShape.attr({\n                x1: newOffset + size / 2,\n                x2: newOffset + thumbLen - size / 2,\n            });\n        }\n        else {\n            thumbShape.attr({\n                y1: newOffset + size / 2,\n                y2: newOffset + thumbLen - size / 2,\n            });\n        }\n        this.emitOffsetChange(newOffset);\n    };\n    Scrollbar.prototype.emitOffsetChange = function (offset) {\n        var _a = this.cfg, originalValue = _a.thumbOffset, trackLen = _a.trackLen, thumbLen = _a.thumbLen;\n        this.cfg.thumbOffset = offset;\n        this.emit('scrollchange', {\n            thumbOffset: offset,\n            ratio: clamp(offset / (trackLen - thumbLen), 0, 1),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: offset,\n        });\n    };\n    return Scrollbar;\n}(GroupComponent));\nexport { Scrollbar };\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/scrollbar/scrollbar.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/scrollbar/scrollbar.js"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAC5C,OAAO,EAAE,gBAAgB,EAAE,MAAM,gBAAgB,CAAC;AAClD,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,YAAY,CAAC;AAC9C,OAAO,cAAc,MAAM,6BAA6B,CAAC;AACzD,IAAI,aAAa,GAAG;IAChB,UAAU,EAAE,eAAe;IAC3B,UAAU,EAAE,kBAAkB;IAC9B,IAAI,EAAE,CAAC;IACP,OAAO,EAAE,OAAO;CACnB,CAAC;AACF,MAAM,CAAC,IAAI,aAAa,GAAG;IAEvB,OAAO,EAAE,aAAa;IAEtB,KAAK,EAAE;QACH,UAAU,EAAE,iBAAiB;KAChC;CACJ,CAAC;AACF,IAAI,SAAS,GAAiB,CAAC,UAAU,MAAM;IAC3C,SAAS,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;IAC7B,SAAS,SAAS;QACd,IAAI,KAAK,GAAG,MAAM,KAAK,IAAI,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC;QACrE,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;QACzB,KAAK,CAAC,YAAY,GAAG,UAAU,QAAQ;YAAI,OAAO,UAAU,CAAC;gBACzD,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBAC1B,CAAC,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;gBACjC,IAAI,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,aAAa,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;gBAC/E,IAAI,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,aAAa,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;gBAE/E,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC;gBAC5D,KAAK,CAAC,cAAc,EAAE,CAAC;YAC3B,CAAC,CAAC;QAAC,CAAC,CAAC;QACL,KAAK,CAAC,cAAc,GAAG;YACnB,IAAI,YAAY,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;YAC3C,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,IAAI,KAAK,CAAC,QAAQ,EAAE;gBAChB,MAAM,GAAG;oBACL,gBAAgB,CAAC,YAAY,EAAE,WAAW,EAAE,KAAK,CAAC,WAAW,CAAC;oBAC9D,gBAAgB,CAAC,YAAY,EAAE,UAAU,EAAE,KAAK,CAAC,SAAS,CAAC;oBAC3D,gBAAgB,CAAC,YAAY,EAAE,aAAa,EAAE,KAAK,CAAC,SAAS,CAAC;iBACjE,CAAC;aACL;iBACI;gBACD,MAAM,GAAG;oBACL,gBAAgB,CAAC,YAAY,EAAE,WAAW,EAAE,KAAK,CAAC,WAAW,CAAC;oBAC9D,gBAAgB,CAAC,YAAY,EAAE,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC;oBAE1D,gBAAgB,CAAC,YAAY,EAAE,YAAY,EAAE,KAAK,CAAC,SAAS,CAAC;iBAChE,CAAC;aACL;YACD,KAAK,CAAC,WAAW,GAAG;gBAChB,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;oBACtB,CAAC,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC,CAAC,CAAC;YACP,CAAC,CAAC;QACN,CAAC,CAAC;QAGF,KAAK,CAAC,WAAW,GAAG,UAAU,CAAC;YAC3B,IAAI,EAAE,GAAG,KAAK,CAAC,GAAG,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC;YACjF,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,OAAO,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACvE,IAAI,OAAO,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YAEvE,IAAI,MAAM,GAAG,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC;YAE9C,IAAI,IAAI,GAAG,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC;YAEnC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC;YACxB,KAAK,CAAC,iBAAiB,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC;QAChD,CAAC,CAAC;QACF,KAAK,CAAC,SAAS,GAAG,UAAU,CAAC;YACzB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,KAAK,CAAC,WAAW,EAAE,CAAC;QACxB,CAAC,CAAC;QAEF,KAAK,CAAC,YAAY,GAAG,UAAU,CAAC;YAC5B,IAAI,EAAE,GAAG,KAAK,CAAC,GAAG,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;YAC/F,IAAI,YAAY,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;YAC3C,IAAI,IAAI,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAC;YAChD,IAAI,OAAO,GAAG,CAAC,CAAC,OAAO,EAAE,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC;YAC7C,IAAI,MAAM,GAAG,YAAY,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC;YAC3G,IAAI,SAAS,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC5C,KAAK,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QACvC,CAAC,CAAC;QACF,KAAK,CAAC,gBAAgB,GAAG;YACrB,IAAI,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC;YAClD,KAAK,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;YAC9D,KAAK,CAAC,IAAI,EAAE,CAAC;QACjB,CAAC,CAAC;QACF,KAAK,CAAC,eAAe,GAAG;YACpB,IAAI,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC;YACpD,KAAK,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;YAC9D,KAAK,CAAC,IAAI,EAAE,CAAC;QACjB,CAAC,CAAC;QACF,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,SAAS,CAAC,SAAS,CAAC,QAAQ,GAAG,UAAU,GAAG,EAAE,GAAG;QAC7C,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QAC1B,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC/B,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QACzC,IAAI,QAAQ,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YAC9C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;SAC3B;IACL,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,QAAQ,GAAG;QAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAClC,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,QAAQ,GAAG,UAAU,KAAK;QAC1C,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC5B,IAAI,aAAa,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QACpC,IAAI,CAAC,MAAM,CAAC;YACR,WAAW,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC;SAClG,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE;YAC7B,aAAa,EAAE,aAAa;YAC5B,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE;SACzB,CAAC,CAAC;IACP,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,QAAQ,GAAG;QAC3B,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAChG,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,aAAa,GAAG;QAChC,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpD,OAAO,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,IAAI,EAAE,WAAW,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE,KAAK,EAAE,aAAa,EAAE,CAAC,CAAC;IACzI,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,WAAW,GAAG,UAAU,KAAK;QAC7C,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC7B,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,WAAW,GAAG;QAC9B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;YAClC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;YAChB,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;SACnB,CAAC,CAAC;IACP,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,SAAS,GAAG;QAC5B,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC,CAAC;IAEF,SAAS,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,KAAK;QAClD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,CAAC,KAAK,EAAE,KAAK,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QACvG,IAAI,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC;QACzF,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC;YAChC,CAAC,CAAC;gBACE,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC;gBAChB,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,EAAE,EAAE,QAAQ,GAAG,IAAI,GAAG,CAAC;gBACvB,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,SAAS,EAAE,IAAI;gBACf,MAAM,EAAE,UAAU;gBAClB,OAAO,EAAE,OAAO;aACnB;YACD,CAAC,CAAC;gBACE,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC;gBAChB,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,EAAE,EAAE,QAAQ,GAAG,IAAI,GAAG,CAAC;gBACvB,SAAS,EAAE,IAAI;gBACf,MAAM,EAAE,UAAU;gBAClB,OAAO,EAAE,OAAO;aACnB,CAAC;QACN,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;YACxB,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC;YAC9B,IAAI,EAAE,OAAO;YACb,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,KAAK;SACf,CAAC,CAAC;IACP,CAAC,CAAC;IAEF,SAAS,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,KAAK;QAClD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,CAAC,KAAK,EAAE,KAAK,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QACrI,IAAI,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,IAAI,GAAG,EAAE,CAAC,IAAI,EAAE,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC;QACzF,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC;YAChC,CAAC,CAAC;gBACE,EAAE,EAAE,WAAW,GAAG,IAAI,GAAG,CAAC;gBAC1B,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,EAAE,EAAE,WAAW,GAAG,QAAQ,GAAG,IAAI,GAAG,CAAC;gBACrC,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,SAAS,EAAE,IAAI;gBACf,MAAM,EAAE,UAAU;gBAClB,OAAO,EAAE,OAAO;gBAChB,MAAM,EAAE,SAAS;aACpB;YACD,CAAC,CAAC;gBACE,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,EAAE,EAAE,WAAW,GAAG,IAAI,GAAG,CAAC;gBAC1B,EAAE,EAAE,IAAI,GAAG,CAAC;gBACZ,EAAE,EAAE,WAAW,GAAG,QAAQ,GAAG,IAAI,GAAG,CAAC;gBACrC,SAAS,EAAE,IAAI;gBACf,MAAM,EAAE,UAAU;gBAClB,OAAO,EAAE,OAAO;gBAChB,MAAM,EAAE,SAAS;aACpB,CAAC;QACN,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;YACxB,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC;YAC9B,IAAI,EAAE,OAAO;YACb,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,KAAK;SACf,CAAC,CAAC;IACP,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,UAAU,GAAG;QAC7B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;QAChD,KAAK,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACpC,KAAK,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;QAChD,KAAK,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACrC,IAAI,UAAU,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5D,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC1C,IAAI,UAAU,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5D,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAClD,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IACpD,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,eAAe,GAAG;QAClC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,SAAS,IAAI,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClD,OAAO,MAAM,IAAI,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,aAAa,GAAG,UAAU,MAAM;QAChD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;QAClE,IAAI,SAAS,GAAG,MAAM,CAAC;QACvB,IAAI,MAAM,GAAG,QAAQ,GAAG,QAAQ,EAAE;YAC9B,SAAS,GAAG,QAAQ,GAAG,QAAQ,CAAC;SACnC;aACI,IAAI,MAAM,GAAG,QAAQ,GAAG,QAAQ,EAAE;YACnC,SAAS,GAAG,CAAC,CAAC;SACjB;QACD,OAAO,SAAS,CAAC;IACrB,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,IAAI,GAAG;QACvB,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,SAAS,IAAI,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClD,IAAI,MAAM,EAAE;YACR,MAAM,CAAC,IAAI,EAAE,CAAC;SACjB;IACL,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,iBAAiB,GAAG,UAAU,MAAM;QACpD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC;QACxH,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC3C,IAAI,SAAS,KAAK,WAAW,EAAE;YAE3B,OAAO;SACV;QACD,IAAI,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,YAAY,EAAE;YACd,UAAU,CAAC,IAAI,CAAC;gBACZ,EAAE,EAAE,SAAS,GAAG,IAAI,GAAG,CAAC;gBACxB,EAAE,EAAE,SAAS,GAAG,QAAQ,GAAG,IAAI,GAAG,CAAC;aACtC,CAAC,CAAC;SACN;aACI;YACD,UAAU,CAAC,IAAI,CAAC;gBACZ,EAAE,EAAE,SAAS,GAAG,IAAI,GAAG,CAAC;gBACxB,EAAE,EAAE,SAAS,GAAG,QAAQ,GAAG,IAAI,GAAG,CAAC;aACtC,CAAC,CAAC;SACN;QACD,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;IACrC,CAAC,CAAC;IACF,SAAS,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,MAAM;QACnD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,aAAa,GAAG,EAAE,CAAC,WAAW,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;QAClG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACtB,WAAW,EAAE,MAAM;YACnB,KAAK,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;SACrD,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE;YAC7B,aAAa,EAAE,aAAa;YAC5B,KAAK,EAAE,MAAM;SAChB,CAAC,CAAC;IACP,CAAC,CAAC;IACF,OAAO,SAAS,CAAC;AACrB,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;AACnB,OAAO,EAAE,SAAS,EAAE,CAAC","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { addEventListener } from '@antv/dom-util';\nimport { clamp, get, noop } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nvar DEFAULT_STYLE = {\n    trackColor: 'rgba(0,0,0,0)',\n    thumbColor: 'rgba(0,0,0,0.15)',\n    size: 8,\n    lineCap: 'round',\n};\nexport var DEFAULT_THEME = {\n    // 默认样式\n    default: DEFAULT_STYLE,\n    // 鼠标 hover 的样式\n    hover: {\n        thumbColor: 'rgba(0,0,0,0.2)',\n    },\n};\nvar Scrollbar = /** @class */ (function (_super) {\n    __extends(Scrollbar, _super);\n    function Scrollbar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.clearEvents = noop;\n        _this.onStartEvent = function (isMobile) { return function (e) {\n            _this.isMobile = isMobile;\n            e.originalEvent.preventDefault();\n            var clientX = isMobile ? get(e.originalEvent, 'touches.0.clientX') : e.clientX;\n            var clientY = isMobile ? get(e.originalEvent, 'touches.0.clientY') : e.clientY;\n            // 将开始的点记录下来\n            _this.startPos = _this.cfg.isHorizontal ? clientX : clientY;\n            _this.bindLaterEvent();\n        }; };\n        _this.bindLaterEvent = function () {\n            var containerDOM = _this.getContainerDOM();\n            var events = [];\n            if (_this.isMobile) {\n                events = [\n                    addEventListener(containerDOM, 'touchmove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'touchend', _this.onMouseUp),\n                    addEventListener(containerDOM, 'touchcancel', _this.onMouseUp),\n                ];\n            }\n            else {\n                events = [\n                    addEventListener(containerDOM, 'mousemove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'mouseup', _this.onMouseUp),\n                    // 为了保证划出 canvas containerDom 时还没触发 mouseup\n                    addEventListener(containerDOM, 'mouseleave', _this.onMouseUp),\n                ];\n            }\n            _this.clearEvents = function () {\n                events.forEach(function (e) {\n                    e.remove();\n                });\n            };\n        };\n        // 拖拽滑块的事件回调\n        // 这里是 dom 原生事件，绑定在 dom 元素上的\n        _this.onMouseMove = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, thumbOffset = _a.thumbOffset;\n            e.preventDefault();\n            var clientX = _this.isMobile ? get(e, 'touches.0.clientX') : e.clientX;\n            var clientY = _this.isMobile ? get(e, 'touches.0.clientY') : e.clientY;\n            // 鼠标松开的位置\n            var endPos = isHorizontal ? clientX : clientY;\n            // 滑块需要移动的距离, 由于这里是对滑块监听，所以移动的距离就是 diffDis, 如果监听对象是 container dom，则需要算比例\n            var diff = endPos - _this.startPos;\n            // 更新 _startPos\n            _this.startPos = endPos;\n            _this.updateThumbOffset(thumbOffset + diff);\n        };\n        _this.onMouseUp = function (e) {\n            e.preventDefault();\n            _this.clearEvents();\n        };\n        // 点击滑道的事件回调,移动滑块位置\n        _this.onTrackClick = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, x = _a.x, y = _a.y, thumbLen = _a.thumbLen;\n            var containerDOM = _this.getContainerDOM();\n            var rect = containerDOM.getBoundingClientRect();\n            var clientX = e.clientX, clientY = e.clientY;\n            var offset = isHorizontal ? clientX - rect.left - x - thumbLen / 2 : clientY - rect.top - y - thumbLen / 2;\n            var newOffset = _this.validateRange(offset);\n            _this.updateThumbOffset(newOffset);\n        };\n        _this.onThumbMouseOver = function () {\n            var thumbColor = _this.cfg.theme.hover.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        _this.onThumbMouseOut = function () {\n            var thumbColor = _this.cfg.theme.default.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        return _this;\n    }\n    Scrollbar.prototype.setRange = function (min, max) {\n        this.set('minLimit', min);\n        this.set('maxLimit', max);\n        var curValue = this.getValue();\n        var newValue = clamp(curValue, min, max);\n        if (curValue !== newValue && !this.get('isInit')) {\n            this.setValue(newValue);\n        }\n    };\n    Scrollbar.prototype.getRange = function () {\n        var min = this.get('minLimit') || 0;\n        var max = this.get('maxLimit') || 1;\n        return { min: min, max: max };\n    };\n    Scrollbar.prototype.setValue = function (value) {\n        var range = this.getRange();\n        var originalValue = this.getValue();\n        this.update({\n            thumbOffset: (this.get('trackLen') - this.get('thumbLen')) * clamp(value, range.min, range.max),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: this.getValue(),\n        });\n    };\n    Scrollbar.prototype.getValue = function () {\n        return clamp(this.get('thumbOffset') / (this.get('trackLen') - this.get('thumbLen')), 0, 1);\n    };\n    Scrollbar.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'scrollbar', isHorizontal: true, minThumbLen: 20, thumbOffset: 0, theme: DEFAULT_THEME });\n    };\n    Scrollbar.prototype.renderInner = function (group) {\n        this.renderTrackShape(group);\n        this.renderThumbShape(group);\n    };\n    Scrollbar.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Scrollbar.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    // 创建滑道的 shape\n    Scrollbar.prototype.renderTrackShape = function (group) {\n        var _a = this.cfg, trackLen = _a.trackLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, lineCap = _c.lineCap, trackColor = _c.trackColor, size = _c.size;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: 0 + size / 2,\n                y1: size / 2,\n                x2: trackLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            }\n            : {\n                x1: size / 2,\n                y1: 0 + size / 2,\n                x2: size / 2,\n                y2: trackLen - size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            };\n        return this.addShape(group, {\n            id: this.getElementId('track'),\n            name: 'track',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    // 创建滑块的 shape\n    Scrollbar.prototype.renderThumbShape = function (group) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, thumbLen = _a.thumbLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, size = _c.size, lineCap = _c.lineCap, thumbColor = _c.thumbColor;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: thumbOffset + size / 2,\n                y1: size / 2,\n                x2: thumbOffset + thumbLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            }\n            : {\n                x1: size / 2,\n                y1: thumbOffset + size / 2,\n                x2: size / 2,\n                y2: thumbOffset + thumbLen - size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            };\n        return this.addShape(group, {\n            id: this.getElementId('thumb'),\n            name: 'thumb',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    Scrollbar.prototype.bindEvents = function () {\n        var group = this.get('group');\n        group.on('mousedown', this.onStartEvent(false));\n        group.on('mouseup', this.onMouseUp);\n        group.on('touchstart', this.onStartEvent(true));\n        group.on('touchend', this.onMouseUp);\n        var trackShape = group.findById(this.getElementId('track'));\n        trackShape.on('click', this.onTrackClick);\n        var thumbShape = group.findById(this.getElementId('thumb'));\n        thumbShape.on('mouseover', this.onThumbMouseOver);\n        thumbShape.on('mouseout', this.onThumbMouseOut);\n    };\n    Scrollbar.prototype.getContainerDOM = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        return canvas && canvas.get('container');\n    };\n    Scrollbar.prototype.validateRange = function (offset) {\n        var _a = this.cfg, thumbLen = _a.thumbLen, trackLen = _a.trackLen;\n        var newOffset = offset;\n        if (offset + thumbLen > trackLen) {\n            newOffset = trackLen - thumbLen;\n        }\n        else if (offset + thumbLen < thumbLen) {\n            newOffset = 0;\n        }\n        return newOffset;\n    };\n    Scrollbar.prototype.draw = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    Scrollbar.prototype.updateThumbOffset = function (offset) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, isHorizontal = _a.isHorizontal, thumbLen = _a.thumbLen, size = _a.size;\n        var newOffset = this.validateRange(offset);\n        if (newOffset === thumbOffset) {\n            // 如果更新后的 offset 与原值相同，则不改变\n            return;\n        }\n        var thumbShape = this.getElementByLocalId('thumb');\n        if (isHorizontal) {\n            thumbShape.attr({\n                x1: newOffset + size / 2,\n                x2: newOffset + thumbLen - size / 2,\n            });\n        }\n        else {\n            thumbShape.attr({\n                y1: newOffset + size / 2,\n                y2: newOffset + thumbLen - size / 2,\n            });\n        }\n        this.emitOffsetChange(newOffset);\n    };\n    Scrollbar.prototype.emitOffsetChange = function (offset) {\n        var _a = this.cfg, originalValue = _a.thumbOffset, trackLen = _a.trackLen, thumbLen = _a.thumbLen;\n        this.cfg.thumbOffset = offset;\n        // 发送事件\n        this.emit('scrollchange', {\n            thumbOffset: offset,\n            ratio: clamp(offset / (trackLen - thumbLen), 0, 1),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: offset,\n        });\n    };\n    return Scrollbar;\n}(GroupComponent));\nexport { Scrollbar };\n//# sourceMappingURL=scrollbar.js.map"]}]}