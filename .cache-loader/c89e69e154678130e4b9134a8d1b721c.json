{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\interaction\\action\\util.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\interaction\\action\\util.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScaleByField = exports.isInRecords = exports.getSiblingPoint = exports.getSilbings = exports.isInBox = exports.getSpline = exports.distance = exports.getComponents = exports.getElementsByPath = exports.getIntersectElements = exports.intersectRect = exports.getElementValue = exports.getElementsByState = exports.getElementsByField = exports.getElements = exports.getSiblingMaskElements = exports.getMaskedElements = exports.isMask = exports.isSlider = exports.isList = exports.isElementChange = exports.getDelegationObject = exports.getCurrentElement = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\nvar util_1 = require(\"@antv/util\");\r\nvar path_1 = require(\"../../geometry/shape/util/path\");\r\nvar bbox_1 = require(\"../../util/bbox\");\r\nvar is_polygons_intersect_1 = tslib_1.__importDefault(require(\"@antv/path-util/lib/is-polygons-intersect\"));\r\nfunction getMaskBBox(context, tolerance) {\r\n    var event = context.event;\r\n    var maskShape = event.target;\r\n    var maskBBox = maskShape.getCanvasBBox();\r\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\r\n        return null;\r\n    }\r\n    return maskBBox;\r\n}\r\nfunction getMaskPath(context, tolerance) {\r\n    var event = context.event;\r\n    var maskShape = event.target;\r\n    var maskBBox = maskShape.getCanvasBBox();\r\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\r\n        return null;\r\n    }\r\n    return maskShape.attr('path');\r\n}\r\nfunction getCurrentElement(context) {\r\n    var event = context.event;\r\n    var element;\r\n    var target = event.target;\r\n    if (target) {\r\n        element = target.get('element');\r\n    }\r\n    return element;\r\n}\r\nexports.getCurrentElement = getCurrentElement;\r\nfunction getDelegationObject(context) {\r\n    var event = context.event;\r\n    var target = event.target;\r\n    var delegateObject;\r\n    if (target) {\r\n        delegateObject = target.get('delegateObject');\r\n    }\r\n    return delegateObject;\r\n}\r\nexports.getDelegationObject = getDelegationObject;\r\nfunction isElementChange(context) {\r\n    var event = context.event.gEvent;\r\n    if (event && event.fromShape && event.toShape && event.fromShape.get('element') === event.toShape.get('element')) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexports.isElementChange = isElementChange;\r\nfunction isList(delegateObject) {\r\n    return delegateObject && delegateObject.component && delegateObject.component.isList();\r\n}\r\nexports.isList = isList;\r\nfunction isSlider(delegateObject) {\r\n    return delegateObject && delegateObject.component && delegateObject.component.isSlider();\r\n}\r\nexports.isSlider = isSlider;\r\nfunction isMask(context) {\r\n    var event = context.event;\r\n    var target = event.target;\r\n    return target && target.get('name') === 'mask';\r\n}\r\nexports.isMask = isMask;\r\nfunction getMaskedElements(context, tolerance) {\r\n    var target = context.event.target;\r\n    if (target.get('type') === 'path') {\r\n        var maskPath = getMaskPath(context, tolerance);\r\n        if (!maskPath) {\r\n            return;\r\n        }\r\n        return getElementsByPath(context.view, maskPath);\r\n    }\r\n    var maskBBox = getMaskBBox(context, tolerance);\r\n    if (!maskBBox) {\r\n        return null;\r\n    }\r\n    return getIntersectElements(context.view, maskBBox);\r\n}\r\nexports.getMaskedElements = getMaskedElements;\r\nfunction getSiblingMaskElements(context, sibling, tolerance) {\r\n    var maskBBox = getMaskBBox(context, tolerance);\r\n    if (!maskBBox) {\r\n        return null;\r\n    }\r\n    var view = context.view;\r\n    var start = getSiblingPoint(view, sibling, { x: maskBBox.x, y: maskBBox.y });\r\n    var end = getSiblingPoint(view, sibling, { x: maskBBox.maxX, y: maskBBox.maxY });\r\n    var box = {\r\n        minX: start.x,\r\n        minY: start.y,\r\n        maxX: end.x,\r\n        maxY: end.y,\r\n    };\r\n    return getIntersectElements(sibling, box);\r\n}\r\nexports.getSiblingMaskElements = getSiblingMaskElements;\r\nfunction getElements(view) {\r\n    var geometries = view.geometries;\r\n    var rst = [];\r\n    util_1.each(geometries, function (geom) {\r\n        var elements = geom.elements;\r\n        rst = rst.concat(elements);\r\n    });\r\n    if (view.views && view.views.length) {\r\n        util_1.each(view.views, function (subView) {\r\n            rst = rst.concat(getElements(subView));\r\n        });\r\n    }\r\n    return rst;\r\n}\r\nexports.getElements = getElements;\r\nfunction getElementsByField(view, field, value) {\r\n    var elements = getElements(view);\r\n    return elements.filter(function (el) {\r\n        return getElementValue(el, field) === value;\r\n    });\r\n}\r\nexports.getElementsByField = getElementsByField;\r\nfunction getElementsByState(view, stateName) {\r\n    var geometries = view.geometries;\r\n    var rst = [];\r\n    util_1.each(geometries, function (geom) {\r\n        var elements = geom.getElementsBy(function (el) { return el.hasState(stateName); });\r\n        rst = rst.concat(elements);\r\n    });\r\n    return rst;\r\n}\r\nexports.getElementsByState = getElementsByState;\r\nfunction getElementValue(element, field) {\r\n    var model = element.getModel();\r\n    var record = model.data;\r\n    var value;\r\n    if (util_1.isArray(record)) {\r\n        value = record[0][field];\r\n    }\r\n    else {\r\n        value = record[field];\r\n    }\r\n    return value;\r\n}\r\nexports.getElementValue = getElementValue;\r\nfunction intersectRect(box1, box2) {\r\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\r\n}\r\nexports.intersectRect = intersectRect;\r\nfunction getIntersectElements(view, box) {\r\n    var elements = getElements(view);\r\n    var rst = [];\r\n    util_1.each(elements, function (el) {\r\n        var shape = el.shape;\r\n        var shapeBBox = shape.getCanvasBBox();\r\n        if (intersectRect(box, shapeBBox)) {\r\n            rst.push(el);\r\n        }\r\n    });\r\n    return rst;\r\n}\r\nexports.getIntersectElements = getIntersectElements;\r\nfunction pathToPoints(path) {\r\n    var points = [];\r\n    util_1.each(path, function (seg) {\r\n        var command = seg[0];\r\n        if (command !== 'A') {\r\n            for (var i = 1; i < seg.length; i = i + 2) {\r\n                points.push([seg[i], seg[i + 1]]);\r\n            }\r\n        }\r\n        else {\r\n            var length_1 = seg.length;\r\n            points.push([seg[length_1 - 2], seg[length_1 - 1]]);\r\n        }\r\n    });\r\n    return points;\r\n}\r\nfunction getElementsByPath(view, path) {\r\n    var elements = getElements(view);\r\n    var points = pathToPoints(path);\r\n    var rst = elements.filter(function (el) {\r\n        var shape = el.shape;\r\n        var shapePoints;\r\n        if (shape.get('type') === 'path') {\r\n            shapePoints = pathToPoints(shape.attr('path'));\r\n        }\r\n        else {\r\n            var shapeBBox = shape.getCanvasBBox();\r\n            shapePoints = bbox_1.toPoints(shapeBBox);\r\n        }\r\n        return is_polygons_intersect_1.default(points, shapePoints);\r\n    });\r\n    return rst;\r\n}\r\nexports.getElementsByPath = getElementsByPath;\r\nfunction getComponents(view) {\r\n    return view.getComponents().map(function (co) { return co.component; });\r\n}\r\nexports.getComponents = getComponents;\r\nfunction distance(p1, p2) {\r\n    var dx = p2.x - p1.x;\r\n    var dy = p2.y - p1.y;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\nexports.distance = distance;\r\nfunction getSpline(points, z) {\r\n    if (points.length <= 2) {\r\n        return path_1.getLinePath(points, false);\r\n    }\r\n    var first = points[0];\r\n    var arr = [];\r\n    util_1.each(points, function (point) {\r\n        arr.push(point.x);\r\n        arr.push(point.y);\r\n    });\r\n    var path = path_1.catmullRom2bezier(arr, z, null);\r\n    path.unshift(['M', first.x, first.y]);\r\n    return path;\r\n}\r\nexports.getSpline = getSpline;\r\nfunction isInBox(box, point) {\r\n    return box.x <= point.x && box.maxX >= point.x && box.y <= point.y && box.maxY > point.y;\r\n}\r\nexports.isInBox = isInBox;\r\nfunction getSilbings(view) {\r\n    var parent = view.parent;\r\n    var siblings = null;\r\n    if (parent) {\r\n        siblings = parent.views.filter(function (sub) { return sub !== view; });\r\n    }\r\n    return siblings;\r\n}\r\nexports.getSilbings = getSilbings;\r\nfunction point2Normalize(view, point) {\r\n    var coord = view.getCoordinate();\r\n    return coord.invert(point);\r\n}\r\nfunction getSiblingPoint(view, sibling, point) {\r\n    var normalPoint = point2Normalize(view, point);\r\n    return sibling.getCoordinate().convert(normalPoint);\r\n}\r\nexports.getSiblingPoint = getSiblingPoint;\r\nfunction isInRecords(records, record, xFiled, yField) {\r\n    var isIn = false;\r\n    util_1.each(records, function (r) {\r\n        if (r[xFiled] === record[xFiled] && r[yField] === record[yField]) {\r\n            isIn = true;\r\n            return false;\r\n        }\r\n    });\r\n    return isIn;\r\n}\r\nexports.isInRecords = isInRecords;\r\nfunction getScaleByField(view, field) {\r\n    var scale = view.getScaleByField(field);\r\n    if (!scale && view.views) {\r\n        util_1.each(view.views, function (subView) {\r\n            scale = getScaleByField(subView, field);\r\n            if (scale) {\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    return scale;\r\n}\r\nexports.getScaleByField = getScaleByField;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\interaction\\action\\util.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\interaction\\action\\util.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getScaleByField = exports.isInRecords = exports.getSiblingPoint = exports.getSilbings = exports.isInBox = exports.getSpline = exports.distance = exports.getComponents = exports.getElementsByPath = exports.getIntersectElements = exports.intersectRect = exports.getElementValue = exports.getElementsByState = exports.getElementsByField = exports.getElements = exports.getSiblingMaskElements = exports.getMaskedElements = exports.isMask = exports.isSlider = exports.isList = exports.isElementChange = exports.getDelegationObject = exports.getCurrentElement = void 0;\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"@antv/util\");\nvar path_1 = require(\"../../geometry/shape/util/path\");\nvar bbox_1 = require(\"../../util/bbox\");\nvar is_polygons_intersect_1 = tslib_1.__importDefault(require(\"@antv/path-util/lib/is-polygons-intersect\"));\nfunction getMaskBBox(context, tolerance) {\n    var event = context.event;\n    var maskShape = event.target;\n    var maskBBox = maskShape.getCanvasBBox();\n    // 如果 bbox 过小则不返回\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\n        return null;\n    }\n    return maskBBox;\n}\nfunction getMaskPath(context, tolerance) {\n    var event = context.event;\n    var maskShape = event.target;\n    var maskBBox = maskShape.getCanvasBBox();\n    // 如果 bbox 过小则不返回\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\n        return null;\n    }\n    return maskShape.attr('path');\n}\n/**\n * 获取当前事件相关的图表元素\n * @param context 交互的上下文\n * @ignore\n */\nfunction getCurrentElement(context) {\n    var event = context.event;\n    var element;\n    var target = event.target;\n    if (target) {\n        element = target.get('element');\n    }\n    return element;\n}\nexports.getCurrentElement = getCurrentElement;\n/**\n * 获取委托对象\n * @param context 上下文\n * @ignore\n */\nfunction getDelegationObject(context) {\n    var event = context.event;\n    var target = event.target;\n    var delegateObject;\n    if (target) {\n        delegateObject = target.get('delegateObject');\n    }\n    return delegateObject;\n}\nexports.getDelegationObject = getDelegationObject;\nfunction isElementChange(context) {\n    var event = context.event.gEvent;\n    // 在同一个 element 内部移动，label 和 shape 之间\n    if (event && event.fromShape && event.toShape && event.fromShape.get('element') === event.toShape.get('element')) {\n        return false;\n    }\n    return true;\n}\nexports.isElementChange = isElementChange;\n/**\n * 是否是列表组件\n * @param delegateObject 委托对象\n * @ignore\n */\nfunction isList(delegateObject) {\n    return delegateObject && delegateObject.component && delegateObject.component.isList();\n}\nexports.isList = isList;\n/**\n * 是否是滑块组件\n * @param delegateObject 委托对象\n * @ignore\n */\nfunction isSlider(delegateObject) {\n    return delegateObject && delegateObject.component && delegateObject.component.isSlider();\n}\nexports.isSlider = isSlider;\n/**\n * 是否由 mask 触发\n * @param context 上下文\n * @ignore\n */\nfunction isMask(context) {\n    var event = context.event;\n    var target = event.target;\n    return target && target.get('name') === 'mask';\n}\nexports.isMask = isMask;\n/**\n * 获取被遮挡的 elements\n * @param context 上下文\n * @ignore\n */\nfunction getMaskedElements(context, tolerance) {\n    var target = context.event.target;\n    if (target.get('type') === 'path') {\n        var maskPath = getMaskPath(context, tolerance);\n        if (!maskPath) {\n            return;\n        }\n        return getElementsByPath(context.view, maskPath);\n    }\n    var maskBBox = getMaskBBox(context, tolerance);\n    // 如果 bbox 过小则不返回\n    if (!maskBBox) {\n        return null;\n    }\n    return getIntersectElements(context.view, maskBBox);\n}\nexports.getMaskedElements = getMaskedElements;\n/**\n * @ignore\n */\nfunction getSiblingMaskElements(context, sibling, tolerance) {\n    var maskBBox = getMaskBBox(context, tolerance);\n    // 如果 bbox 过小则不返回\n    if (!maskBBox) {\n        return null;\n    }\n    var view = context.view;\n    var start = getSiblingPoint(view, sibling, { x: maskBBox.x, y: maskBBox.y });\n    var end = getSiblingPoint(view, sibling, { x: maskBBox.maxX, y: maskBBox.maxY });\n    var box = {\n        minX: start.x,\n        minY: start.y,\n        maxX: end.x,\n        maxY: end.y,\n    };\n    return getIntersectElements(sibling, box);\n}\nexports.getSiblingMaskElements = getSiblingMaskElements;\n/**\n * 获取所有的图表元素\n * @param view View/Chart\n * @ignore\n */\nfunction getElements(view) {\n    var geometries = view.geometries;\n    var rst = [];\n    util_1.each(geometries, function (geom) {\n        var elements = geom.elements;\n        rst = rst.concat(elements);\n    });\n    if (view.views && view.views.length) {\n        util_1.each(view.views, function (subView) {\n            rst = rst.concat(getElements(subView));\n        });\n    }\n    return rst;\n}\nexports.getElements = getElements;\n/**\n * 获取所有的图表元素\n * @param view View/Chart\n * @param field 字段名\n * @param value 字段值\n * @ignore\n */\nfunction getElementsByField(view, field, value) {\n    var elements = getElements(view);\n    return elements.filter(function (el) {\n        return getElementValue(el, field) === value;\n    });\n}\nexports.getElementsByField = getElementsByField;\n/**\n * 根据状态名获取图表元素\n * @param view View/Chart\n * @param stateName 状态名\n * @ignore\n */\nfunction getElementsByState(view, stateName) {\n    var geometries = view.geometries;\n    var rst = [];\n    util_1.each(geometries, function (geom) {\n        var elements = geom.getElementsBy(function (el) { return el.hasState(stateName); });\n        rst = rst.concat(elements);\n    });\n    return rst;\n}\nexports.getElementsByState = getElementsByState;\n/**\n * 获取图表元素对应字段的值\n * @param element 图表元素\n * @param field 字段名\n * @ignore\n */\nfunction getElementValue(element, field) {\n    var model = element.getModel();\n    var record = model.data;\n    var value;\n    if (util_1.isArray(record)) {\n        value = record[0][field];\n    }\n    else {\n        value = record[field];\n    }\n    return value;\n}\nexports.getElementValue = getElementValue;\n/**\n * 两个包围盒是否相交\n * @param box1 包围盒1\n * @param box2 包围盒2\n * @ignore\n */\nfunction intersectRect(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\nexports.intersectRect = intersectRect;\n/**\n * 获取包围盒内的图表元素\n * @param view View/Chart\n * @param box 包围盒\n * @ignore\n */\nfunction getIntersectElements(view, box) {\n    var elements = getElements(view);\n    var rst = [];\n    util_1.each(elements, function (el) {\n        var shape = el.shape;\n        var shapeBBox = shape.getCanvasBBox();\n        if (intersectRect(box, shapeBBox)) {\n            rst.push(el);\n        }\n    });\n    return rst;\n}\nexports.getIntersectElements = getIntersectElements;\nfunction pathToPoints(path) {\n    var points = [];\n    util_1.each(path, function (seg) {\n        var command = seg[0];\n        if (command !== 'A') {\n            for (var i = 1; i < seg.length; i = i + 2) {\n                points.push([seg[i], seg[i + 1]]);\n            }\n        }\n        else {\n            var length_1 = seg.length;\n            points.push([seg[length_1 - 2], seg[length_1 - 1]]);\n        }\n    });\n    return points;\n}\n/**\n * 获取包围盒内的图表元素\n * @param view View/Chart\n * @param path 路径\n * @ignore\n */\nfunction getElementsByPath(view, path) {\n    var elements = getElements(view);\n    var points = pathToPoints(path);\n    var rst = elements.filter(function (el) {\n        var shape = el.shape;\n        var shapePoints;\n        if (shape.get('type') === 'path') {\n            shapePoints = pathToPoints(shape.attr('path'));\n        }\n        else {\n            var shapeBBox = shape.getCanvasBBox();\n            shapePoints = bbox_1.toPoints(shapeBBox);\n        }\n        return is_polygons_intersect_1.default(points, shapePoints);\n    });\n    return rst;\n}\nexports.getElementsByPath = getElementsByPath;\n/**\n * 获取当前 View 的所有组件\n * @param view View/Chart\n * @ignore\n */\nfunction getComponents(view) {\n    return view.getComponents().map(function (co) { return co.component; });\n}\nexports.getComponents = getComponents;\n/** @ignore */\nfunction distance(p1, p2) {\n    var dx = p2.x - p1.x;\n    var dy = p2.y - p1.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.distance = distance;\n/** @ignore */\nfunction getSpline(points, z) {\n    if (points.length <= 2) {\n        return path_1.getLinePath(points, false);\n    }\n    var first = points[0];\n    var arr = [];\n    util_1.each(points, function (point) {\n        arr.push(point.x);\n        arr.push(point.y);\n    });\n    var path = path_1.catmullRom2bezier(arr, z, null);\n    path.unshift(['M', first.x, first.y]);\n    return path;\n}\nexports.getSpline = getSpline;\n/**\n * 检测点是否在包围盒内\n * @param box 包围盒\n * @param point 点\n * @ignore\n */\nfunction isInBox(box, point) {\n    return box.x <= point.x && box.maxX >= point.x && box.y <= point.y && box.maxY > point.y;\n}\nexports.isInBox = isInBox;\n/**\n * 获取同 view 同一级的 views\n * @param view 当前 view\n * @returns 同一级的 views\n * @ignore\n */\nfunction getSilbings(view) {\n    var parent = view.parent;\n    var siblings = null;\n    if (parent) {\n        siblings = parent.views.filter(function (sub) { return sub !== view; });\n    }\n    return siblings;\n}\nexports.getSilbings = getSilbings;\nfunction point2Normalize(view, point) {\n    var coord = view.getCoordinate();\n    return coord.invert(point);\n}\n/**\n * 将 view 上的一点转换成另一个 view 的点\n * @param view 当前的 view\n * @param sibling 同一层级的 view\n * @param point 指定点\n * @ignore\n */\nfunction getSiblingPoint(view, sibling, point) {\n    var normalPoint = point2Normalize(view, point);\n    return sibling.getCoordinate().convert(normalPoint);\n}\nexports.getSiblingPoint = getSiblingPoint;\n/**\n * 是否在记录中，临时因为所有的 view 中的数据不是引用，而使用的方法\n * 不同 view 上对数据的引用不相等，导致无法直接用 includes\n * 假设 x, y 值相等时是同一条数据，这个假设不完全正确，而改成 isEqual 则成本太高\n * 后面改成同一个引用时可以修改回来\n * @param records\n * @param record\n * @param xFiled\n * @param yField\n * @returns\n * @ignore\n */\nfunction isInRecords(records, record, xFiled, yField) {\n    var isIn = false;\n    util_1.each(records, function (r) {\n        if (r[xFiled] === record[xFiled] && r[yField] === record[yField]) {\n            isIn = true;\n            return false;\n        }\n    });\n    return isIn;\n}\nexports.isInRecords = isInRecords;\n// 级联获取 field 对应的 scale，如果 view 上没有，遍历子 view\nfunction getScaleByField(view, field) {\n    var scale = view.getScaleByField(field);\n    if (!scale && view.views) {\n        util_1.each(view.views, function (subView) {\n            scale = getScaleByField(subView, field);\n            if (scale) {\n                return false; // 终止循环\n            }\n        });\n    }\n    return scale;\n}\nexports.getScaleByField = getScaleByField;\n//# sourceMappingURL=util.js.map"]}]}