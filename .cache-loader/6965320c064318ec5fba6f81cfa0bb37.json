{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\util\\responsive\\apply\\axis.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\util\\responsive\\apply\\axis.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { each } from '@antv/util';\r\nimport ShapeNodes from '../node/shape-nodes';\r\nimport Responsive from '../responsive';\r\nimport ApplyResponsive from './base';\r\nvar SCALE_MAPPER = {\r\n    cat: 'category',\r\n    timeCat: 'category',\r\n    time: 'dateTime',\r\n    linear: 'linear',\r\n};\r\nvar ApplyResponsiveAxis = (function (_super) {\r\n    __extends(ApplyResponsiveAxis, _super);\r\n    function ApplyResponsiveAxis() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ApplyResponsiveAxis.prototype.init = function () {\r\n        this.axisInstance = this.getAxisInstance();\r\n        _super.prototype.init.call(this);\r\n    };\r\n    ApplyResponsiveAxis.prototype.shouldApply = function () {\r\n        var options = this.plot.options;\r\n        if (!this.responsiveTheme.axis) {\r\n            return false;\r\n        }\r\n        if (this.responsiveTheme.axis[this.dim] &&\r\n            options[this.dim + \"Axis\"].visible &&\r\n            options[this.dim + \"Axis\"].label &&\r\n            options[this.dim + \"Axis\"].label.visible) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ApplyResponsiveAxis.prototype.apply = function () {\r\n        var _this = this;\r\n        var rawLabels = this.plot.view.backgroundGroup.findAll(function (el) {\r\n            var name = el.get('name');\r\n            if (name === 'axis-label') {\r\n                var field = el.get('delegateObject').axis.get('field');\r\n                if (field === _this.plot.options[_this.dim + \"Field\"]) {\r\n                    return el;\r\n                }\r\n            }\r\n        });\r\n        var shapes = [];\r\n        for (var i = 0; i < rawLabels.length; i++) {\r\n            shapes.push(rawLabels[i]);\r\n        }\r\n        var shapeNodes = new ShapeNodes({\r\n            shapes: shapes,\r\n        });\r\n        var _a = this.responsiveTheme.axis.x[this.type], constraints = _a.constraints, rules = _a.rules;\r\n        new Responsive({\r\n            nodes: shapeNodes,\r\n            constraints: constraints,\r\n            region: this.plot.getViewRange(),\r\n            rules: rules,\r\n            plot: this.plot,\r\n            onEnd: function (nodes) {\r\n                _this.updateTicks(nodes.origion_nodes);\r\n            },\r\n        });\r\n    };\r\n    ApplyResponsiveAxis.prototype.getType = function () {\r\n        var props = this.plot.options;\r\n        var axis = this.dim + \"Axis\";\r\n        var field = this.dim + \"Field\";\r\n        if (props[axis] && props[axis].type && props[axis].type === 'dateTime') {\r\n            return 'dateTime';\r\n        }\r\n        var scaleType = this.plot.view.getScaleByField([props[field]]).type;\r\n        return SCALE_MAPPER[scaleType];\r\n    };\r\n    ApplyResponsiveAxis.prototype.getAxisInstance = function () {\r\n        var axisIndex = this.dim === 'x' ? 0 : 1;\r\n        var axis = this.plot.view.getController('axis').getComponents()[axisIndex].component;\r\n        return axis;\r\n    };\r\n    ApplyResponsiveAxis.prototype.updateTicks = function (nodes) {\r\n        var _this = this;\r\n        var tickLineContainer = this.plot.view.backgroundGroup.findAll(function (el) {\r\n            var name = el.get('name');\r\n            if (name === 'axis-tickline-group') {\r\n                var field = el.get('delegateObject').axis.get('field');\r\n                if (field === _this.plot.options[_this.dim + \"Field\"]) {\r\n                    return el;\r\n                }\r\n            }\r\n        })[0];\r\n        if (tickLineContainer) {\r\n            var tickShapes_1 = tickLineContainer.get('children');\r\n            each(nodes, function (n, index) {\r\n                if (n.shape.attr('text') === '') {\r\n                    tickShapes_1[index].attr('opacity', 0);\r\n                }\r\n            });\r\n        }\r\n        this.plot.canvas.draw();\r\n    };\r\n    return ApplyResponsiveAxis;\r\n}(ApplyResponsive));\r\nexport default ApplyResponsiveAxis;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\util\\responsive\\apply\\axis.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\util\\responsive\\apply\\axis.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport ShapeNodes from '../node/shape-nodes';\nimport Responsive from '../responsive';\nimport ApplyResponsive from './base';\nvar SCALE_MAPPER = {\n    cat: 'category',\n    timeCat: 'category',\n    time: 'dateTime',\n    linear: 'linear',\n};\nvar ApplyResponsiveAxis = /** @class */ (function (_super) {\n    __extends(ApplyResponsiveAxis, _super);\n    function ApplyResponsiveAxis() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ApplyResponsiveAxis.prototype.init = function () {\n        this.axisInstance = this.getAxisInstance();\n        _super.prototype.init.call(this);\n    };\n    ApplyResponsiveAxis.prototype.shouldApply = function () {\n        var options = this.plot.options;\n        if (!this.responsiveTheme.axis) {\n            return false;\n        }\n        if (this.responsiveTheme.axis[this.dim] &&\n            options[this.dim + \"Axis\"].visible &&\n            options[this.dim + \"Axis\"].label &&\n            options[this.dim + \"Axis\"].label.visible) {\n            return true;\n        }\n        return false;\n    };\n    ApplyResponsiveAxis.prototype.apply = function () {\n        var _this = this;\n        var rawLabels = this.plot.view.backgroundGroup.findAll(function (el) {\n            var name = el.get('name');\n            if (name === 'axis-label') {\n                var field = el.get('delegateObject').axis.get('field');\n                if (field === _this.plot.options[_this.dim + \"Field\"]) {\n                    return el;\n                }\n            }\n        });\n        var shapes = [];\n        for (var i = 0; i < rawLabels.length; i++) {\n            shapes.push(rawLabels[i]);\n        }\n        var shapeNodes = new ShapeNodes({\n            shapes: shapes,\n        });\n        var _a = this.responsiveTheme.axis.x[this.type], constraints = _a.constraints, rules = _a.rules;\n        new Responsive({\n            nodes: shapeNodes,\n            constraints: constraints,\n            region: this.plot.getViewRange(),\n            rules: rules,\n            plot: this.plot,\n            onEnd: function (nodes) {\n                _this.updateTicks(nodes.origion_nodes);\n            },\n        });\n    };\n    ApplyResponsiveAxis.prototype.getType = function () {\n        var props = this.plot.options;\n        var axis = this.dim + \"Axis\";\n        var field = this.dim + \"Field\";\n        if (props[axis] && props[axis].type && props[axis].type === 'dateTime') {\n            return 'dateTime';\n        }\n        var scaleType = this.plot.view.getScaleByField([props[field]]).type;\n        return SCALE_MAPPER[scaleType];\n    };\n    ApplyResponsiveAxis.prototype.getAxisInstance = function () {\n        var axisIndex = this.dim === 'x' ? 0 : 1;\n        var axis = this.plot.view.getController('axis').getComponents()[axisIndex].component;\n        return axis;\n    };\n    ApplyResponsiveAxis.prototype.updateTicks = function (nodes) {\n        var _this = this;\n        var tickLineContainer = this.plot.view.backgroundGroup.findAll(function (el) {\n            var name = el.get('name');\n            if (name === 'axis-tickline-group') {\n                var field = el.get('delegateObject').axis.get('field');\n                if (field === _this.plot.options[_this.dim + \"Field\"]) {\n                    return el;\n                }\n            }\n        })[0];\n        if (tickLineContainer) {\n            var tickShapes_1 = tickLineContainer.get('children');\n            each(nodes, function (n, index) {\n                if (n.shape.attr('text') === '') {\n                    tickShapes_1[index].attr('opacity', 0);\n                }\n            });\n        }\n        this.plot.canvas.draw();\n    };\n    return ApplyResponsiveAxis;\n}(ApplyResponsive));\nexport default ApplyResponsiveAxis;\n//# sourceMappingURL=axis.js.map"]}]}