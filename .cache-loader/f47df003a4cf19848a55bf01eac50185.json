{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\util\\legend.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\util\\legend.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { deepMix, isString } from '@antv/util';\r\nimport { DIRECTION } from '../constant';\r\nimport { getMappingValue } from './attr';\r\nimport { MarkerSymbols } from './marker';\r\nfunction setMarkerSymbol(marker) {\r\n    var symbol = marker.symbol;\r\n    if (isString(symbol) && MarkerSymbols[symbol]) {\r\n        marker.symbol = MarkerSymbols[symbol];\r\n    }\r\n}\r\nexport function getLegendLayout(direction) {\r\n    return direction.startsWith(DIRECTION.LEFT) || direction.startsWith(DIRECTION.RIGHT) ? 'vertical' : 'horizontal';\r\n}\r\nexport function getLegendItems(view, geometry, attr, themeMarker, userMarker) {\r\n    var scale = attr.getScale(attr.type);\r\n    if (scale.isCategory) {\r\n        var field_1 = scale.field;\r\n        var colorAttr_1 = geometry.getAttribute('color');\r\n        var shapeAttr_1 = geometry.getAttribute('shape');\r\n        var defaultColor_1 = view.getTheme().defaultColor;\r\n        var isInPolar_1 = geometry.coordinate.isPolar;\r\n        return scale.getTicks().map(function (tick) {\r\n            var _a;\r\n            var text = tick.text, scaleValue = tick.value;\r\n            var name = text;\r\n            var value = scale.invert(scaleValue);\r\n            var unchecked = view.filterFieldData(field_1, [(_a = {}, _a[field_1] = value, _a)]).length === 0;\r\n            var color = getMappingValue(colorAttr_1, value, defaultColor_1);\r\n            var shape = getMappingValue(shapeAttr_1, value, 'point');\r\n            var marker = geometry.getShapeMarker(shape, {\r\n                color: color,\r\n                isInPolar: isInPolar_1,\r\n            });\r\n            marker = deepMix({}, themeMarker, marker, userMarker);\r\n            setMarkerSymbol(marker);\r\n            return { id: value, name: name, value: value, marker: marker, unchecked: unchecked };\r\n        });\r\n    }\r\n    return [];\r\n}\r\nexport function getCustomLegendItems(themeMarker, userMarker, customItems) {\r\n    return customItems.map(function (item) {\r\n        var marker = deepMix({}, themeMarker, userMarker, item.marker);\r\n        setMarkerSymbol(marker);\r\n        item.marker = marker;\r\n        return item;\r\n    });\r\n}\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\util\\legend.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\util\\legend.js"],"names":[],"mappings":"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","sourcesContent":["import { deepMix, isString } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getMappingValue } from './attr';\nimport { MarkerSymbols } from './marker';\nfunction setMarkerSymbol(marker) {\n    var symbol = marker.symbol;\n    if (isString(symbol) && MarkerSymbols[symbol]) {\n        marker.symbol = MarkerSymbols[symbol];\n    }\n}\n/**\n * @ignore\n * get the legend layout from direction\n * @param direction\n * @returns layout 'horizontal' | 'vertical'\n */\nexport function getLegendLayout(direction) {\n    return direction.startsWith(DIRECTION.LEFT) || direction.startsWith(DIRECTION.RIGHT) ? 'vertical' : 'horizontal';\n}\n/**\n * @ignore\n * get the legend items\n * @param view\n * @param geometry\n * @param attr\n * @param themeMarker\n * @param userMarker\n * @returns legend items\n */\nexport function getLegendItems(view, geometry, attr, themeMarker, userMarker) {\n    var scale = attr.getScale(attr.type);\n    if (scale.isCategory) {\n        var field_1 = scale.field;\n        var colorAttr_1 = geometry.getAttribute('color');\n        var shapeAttr_1 = geometry.getAttribute('shape');\n        var defaultColor_1 = view.getTheme().defaultColor;\n        var isInPolar_1 = geometry.coordinate.isPolar;\n        return scale.getTicks().map(function (tick) {\n            var _a;\n            var text = tick.text, scaleValue = tick.value;\n            var name = text;\n            var value = scale.invert(scaleValue);\n            // 通过过滤图例项的数据，来看是否 unchecked\n            var unchecked = view.filterFieldData(field_1, [(_a = {}, _a[field_1] = value, _a)]).length === 0;\n            // @ts-ignore\n            var color = getMappingValue(colorAttr_1, value, defaultColor_1);\n            var shape = getMappingValue(shapeAttr_1, value, 'point');\n            var marker = geometry.getShapeMarker(shape, {\n                color: color,\n                isInPolar: isInPolar_1,\n            });\n            // the marker configure order should be ensure\n            marker = deepMix({}, themeMarker, marker, userMarker);\n            setMarkerSymbol(marker);\n            return { id: value, name: name, value: value, marker: marker, unchecked: unchecked };\n        });\n    }\n    return [];\n}\n/**\n * @ignore\n * custom legend 的 items 获取\n * @param themeMarker\n * @param userMarker\n * @param customItems\n */\nexport function getCustomLegendItems(themeMarker, userMarker, customItems) {\n    // 如果有自定义的 item，那么就直接使用，并合并主题的 marker 配置\n    return customItems.map(function (item) {\n        var marker = deepMix({}, themeMarker, userMarker, item.marker);\n        setMarkerSymbol(marker);\n        item.marker = marker;\n        return item;\n    });\n}\n//# sourceMappingURL=legend.js.map"]}]}