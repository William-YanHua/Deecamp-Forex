{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/group.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/group.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../util/index');\nvar Element = require('./element');\nvar Shape = require('../shapes/index');\nvar SHAPE_MAP = {};\nvar INDEX = '_INDEX';\nfunction getComparer(compare) {\n    return function (left, right) {\n        var result = compare(left, right);\n        return result === 0 ? left[INDEX] - right[INDEX] : result;\n    };\n}\nfunction find(children, x, y) {\n    var rst;\n    for (var i = children.length - 1; i >= 0; i--) {\n        var child = children[i];\n        if (child._cfg.visible && child._cfg.capture) {\n            if (child.isGroup) {\n                rst = child.getShape(x, y);\n            }\n            else if (child.isHit(x, y)) {\n                rst = child;\n            }\n        }\n        if (rst) {\n            break;\n        }\n    }\n    return rst;\n}\nvar Group = function Group(cfg) {\n    Group.superclass.constructor.call(this, cfg);\n    this.set('children', []);\n    this.set('tobeRemoved', []);\n    this._beforeRenderUI();\n    this._renderUI();\n    this._bindUI();\n};\nfunction initClassCfgs(c) {\n    if (c._cfg || c === Group) {\n        return;\n    }\n    var superCon = c.superclass.constructor;\n    if (superCon && !superCon._cfg) {\n        initClassCfgs(superCon);\n    }\n    c._cfg = {};\n    Util.merge(c._cfg, superCon._cfg);\n    Util.merge(c._cfg, c.CFG);\n}\nUtil.extend(Group, Element);\nUtil.augment(Group, {\n    isGroup: true,\n    type: 'group',\n    canFill: true,\n    canStroke: true,\n    getDefaultCfg: function getDefaultCfg() {\n        initClassCfgs(this.constructor);\n        return Util.merge({}, this.constructor._cfg);\n    },\n    _beforeRenderUI: function _beforeRenderUI() { },\n    _renderUI: function _renderUI() { },\n    _bindUI: function _bindUI() { },\n    addShape: function addShape(type, cfg) {\n        var canvas = this.get('canvas');\n        cfg = cfg || {};\n        var shapeType = SHAPE_MAP[type];\n        if (!shapeType) {\n            shapeType = Util.upperFirst(type);\n            SHAPE_MAP[type] = shapeType;\n        }\n        if (cfg.attrs && canvas) {\n            var attrs = cfg.attrs;\n            if (type === 'text') {\n                var topFontFamily = canvas.get('fontFamily');\n                if (topFontFamily) {\n                    attrs.fontFamily = attrs.fontFamily ? attrs.fontFamily : topFontFamily;\n                }\n            }\n        }\n        cfg.canvas = canvas;\n        cfg.type = type;\n        var rst = new Shape[shapeType](cfg);\n        this.add(rst);\n        return rst;\n    },\n    addGroup: function addGroup(param, cfg) {\n        var canvas = this.get('canvas');\n        var rst;\n        cfg = Util.merge({}, cfg);\n        if (Util.isFunction(param)) {\n            if (cfg) {\n                cfg.canvas = canvas;\n                cfg.parent = this;\n                rst = new param(cfg);\n            }\n            else {\n                rst = new param({\n                    canvas: canvas,\n                    parent: this\n                });\n            }\n            this.add(rst);\n        }\n        else if (Util.isObject(param)) {\n            param.canvas = canvas;\n            rst = new Group(param);\n            this.add(rst);\n        }\n        else if (param === undefined) {\n            rst = new Group();\n            this.add(rst);\n        }\n        else {\n            return false;\n        }\n        return rst;\n    },\n    renderBack: function renderBack(padding, attrs) {\n        var backShape = this.get('backShape');\n        var innerBox = this.getBBox();\n        Util.merge(attrs, {\n            x: innerBox.minX - padding[3],\n            y: innerBox.minY - padding[0],\n            width: innerBox.width + padding[1] + padding[3],\n            height: innerBox.height + padding[0] + padding[2]\n        });\n        if (backShape) {\n            backShape.attr(attrs);\n        }\n        else {\n            backShape = this.addShape('rect', {\n                zIndex: -1,\n                attrs: attrs\n            });\n        }\n        this.set('backShape', backShape);\n        this.sort();\n        return backShape;\n    },\n    removeChild: function removeChild(item, destroy) {\n        if (arguments.length >= 2) {\n            if (this.contain(item)) {\n                item.remove(destroy);\n            }\n        }\n        else {\n            if (arguments.length === 1) {\n                if (Util.isBoolean(item)) {\n                    destroy = item;\n                }\n                else {\n                    if (this.contain(item)) {\n                        item.remove(true);\n                    }\n                    return this;\n                }\n            }\n            if (arguments.length === 0) {\n                destroy = true;\n            }\n            Group.superclass.remove.call(this, destroy);\n        }\n        return this;\n    },\n    add: function add(items) {\n        var self = this;\n        var children = self.get('children');\n        if (Util.isArray(items)) {\n            Util.each(items, function (item) {\n                var parent = item.get('parent');\n                if (parent) {\n                    parent.removeChild(item, false);\n                }\n                self._setCfgProperty(item);\n            });\n            self._cfg.children = children.concat(items);\n        }\n        else {\n            var item = items;\n            var parent = item.get('parent');\n            if (parent) {\n                parent.removeChild(item, false);\n            }\n            self._setCfgProperty(item);\n            children.push(item);\n        }\n        return self;\n    },\n    _setCfgProperty: function _setCfgProperty(item) {\n        var cfg = this._cfg;\n        item.set('parent', this);\n        item.set('canvas', cfg.canvas);\n        if (cfg.timeline) {\n            item.set('timeline', cfg.timeline);\n        }\n    },\n    contain: function contain(item) {\n        var children = this.get('children');\n        return children.indexOf(item) > -1;\n    },\n    getChildByIndex: function getChildByIndex(index) {\n        var children = this.get('children');\n        return children[index];\n    },\n    getFirst: function getFirst() {\n        return this.getChildByIndex(0);\n    },\n    getLast: function getLast() {\n        var lastIndex = this.get('children').length - 1;\n        return this.getChildByIndex(lastIndex);\n    },\n    getBBox: function getBBox() {\n        var self = this;\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var children = self.get('children');\n        if (children.length > 0) {\n            Util.each(children, function (child) {\n                if (child.get('visible')) {\n                    if (child.isGroup && child.get('children').length === 0) {\n                        return;\n                    }\n                    var _box = child.getBBox();\n                    if (!_box) {\n                        return true;\n                    }\n                    var leftTop = [_box.minX, _box.minY, 1];\n                    var leftBottom = [_box.minX, _box.maxY, 1];\n                    var rightTop = [_box.maxX, _box.minY, 1];\n                    var rightBottom = [_box.maxX, _box.maxY, 1];\n                    child.apply(leftTop);\n                    child.apply(leftBottom);\n                    child.apply(rightTop);\n                    child.apply(rightBottom);\n                    var boxMinX = Math.min(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0]);\n                    var boxMaxX = Math.max(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0]);\n                    var boxMinY = Math.min(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1]);\n                    var boxMaxY = Math.max(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1]);\n                    if (boxMinX < minX) {\n                        minX = boxMinX;\n                    }\n                    if (boxMaxX > maxX) {\n                        maxX = boxMaxX;\n                    }\n                    if (boxMinY < minY) {\n                        minY = boxMinY;\n                    }\n                    if (boxMaxY > maxY) {\n                        maxY = boxMaxY;\n                    }\n                }\n            });\n        }\n        else {\n            minX = 0;\n            maxX = 0;\n            minY = 0;\n            maxY = 0;\n        }\n        var box = {\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY\n        };\n        box.x = box.minX;\n        box.y = box.minY;\n        box.width = box.maxX - box.minX;\n        box.height = box.maxY - box.minY;\n        return box;\n    },\n    getCount: function getCount() {\n        return this.get('children').length;\n    },\n    sort: function sort() {\n        var children = this.get('children');\n        Util.each(children, function (child, index) {\n            child[INDEX] = index;\n            return child;\n        });\n        children.sort(getComparer(function (obj1, obj2) {\n            return obj1.get('zIndex') - obj2.get('zIndex');\n        }));\n        return this;\n    },\n    findById: function findById(id) {\n        return this.find(function (item) {\n            return item.get('id') === id;\n        });\n    },\n    find: function find(fn) {\n        if (Util.isString(fn)) {\n            return this.findById(fn);\n        }\n        var children = this.get('children');\n        var rst = null;\n        Util.each(children, function (item) {\n            if (fn(item)) {\n                rst = item;\n            }\n            else if (item.find) {\n                rst = item.find(fn);\n            }\n            if (rst) {\n                return false;\n            }\n        });\n        return rst;\n    },\n    findAll: function findAll(fn) {\n        var children = this.get('children');\n        var rst = [];\n        var childRst = [];\n        Util.each(children, function (item) {\n            if (fn(item)) {\n                rst.push(item);\n            }\n            if (item.findAllBy) {\n                childRst = item.findAllBy(fn);\n                rst = rst.concat(childRst);\n            }\n        });\n        return rst;\n    },\n    findBy: function findBy(fn) {\n        var children = this.get('children');\n        var rst = null;\n        Util.each(children, function (item) {\n            if (fn(item)) {\n                rst = item;\n            }\n            else if (item.findBy) {\n                rst = item.findBy(fn);\n            }\n            if (rst) {\n                return false;\n            }\n        });\n        return rst;\n    },\n    findAllBy: function findAllBy(fn) {\n        var children = this.get('children');\n        var rst = [];\n        var childRst = [];\n        Util.each(children, function (item) {\n            if (fn(item)) {\n                rst.push(item);\n            }\n            if (item.findAllBy) {\n                childRst = item.findAllBy(fn);\n                rst = rst.concat(childRst);\n            }\n        });\n        return rst;\n    },\n    getShape: function getShape(x, y) {\n        var self = this;\n        var clip = self._attrs.clip;\n        var children = self._cfg.children;\n        var rst;\n        if (clip) {\n            var v = [x, y, 1];\n            clip.invert(v, self.get('canvas'));\n            if (clip.isPointInPath(v[0], v[1])) {\n                rst = find(children, x, y);\n            }\n        }\n        else {\n            rst = find(children, x, y);\n        }\n        return rst;\n    },\n    clearTotalMatrix: function clearTotalMatrix() {\n        var m = this.get('totalMatrix');\n        if (m) {\n            this.setSilent('totalMatrix', null);\n            var children = this._cfg.children;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                child.clearTotalMatrix();\n            }\n        }\n    },\n    clear: function clear(delayRemove) {\n        var children = this._cfg.children;\n        for (var i = children.length - 1; i >= 0; i--) {\n            children[i].remove(true, delayRemove);\n        }\n        this._cfg.children = [];\n        return this;\n    },\n    destroy: function destroy() {\n        if (this.get('destroyed')) {\n            return;\n        }\n        this.clear();\n        Group.superclass.destroy.call(this);\n    },\n    clone: function clone() {\n        var self = this;\n        var children = self._cfg.children;\n        var clone = new Group();\n        Util.each(children, function (child) {\n            clone.add(child.clone());\n        });\n        return clone;\n    }\n});\nmodule.exports = Group;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/group.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/group.js"],"names":[],"mappings":"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","sourcesContent":["var Util = require('../util/index');\n\nvar Element = require('./element');\n\nvar Shape = require('../shapes/index');\n\nvar SHAPE_MAP = {}; // 缓存图形类型\n\nvar INDEX = '_INDEX';\n\nfunction getComparer(compare) {\n  return function (left, right) {\n    var result = compare(left, right);\n    return result === 0 ? left[INDEX] - right[INDEX] : result;\n  };\n}\n\nfunction find(children, x, y) {\n  var rst;\n\n  for (var i = children.length - 1; i >= 0; i--) {\n    var child = children[i];\n\n    if (child._cfg.visible && child._cfg.capture) {\n      if (child.isGroup) {\n        rst = child.getShape(x, y);\n      } else if (child.isHit(x, y)) {\n        rst = child;\n      }\n    }\n\n    if (rst) {\n      break;\n    }\n  }\n\n  return rst;\n}\n\nvar Group = function Group(cfg) {\n  Group.superclass.constructor.call(this, cfg);\n  this.set('children', []);\n  this.set('tobeRemoved', []);\n\n  this._beforeRenderUI();\n\n  this._renderUI();\n\n  this._bindUI();\n};\n\nfunction initClassCfgs(c) {\n  if (c._cfg || c === Group) {\n    return;\n  }\n\n  var superCon = c.superclass.constructor;\n\n  if (superCon && !superCon._cfg) {\n    initClassCfgs(superCon);\n  }\n\n  c._cfg = {};\n  Util.merge(c._cfg, superCon._cfg);\n  Util.merge(c._cfg, c.CFG);\n}\n\nUtil.extend(Group, Element);\nUtil.augment(Group, {\n  isGroup: true,\n  type: 'group',\n  canFill: true,\n  canStroke: true,\n  getDefaultCfg: function getDefaultCfg() {\n    initClassCfgs(this.constructor);\n    return Util.merge({}, this.constructor._cfg);\n  },\n  _beforeRenderUI: function _beforeRenderUI() {},\n  _renderUI: function _renderUI() {},\n  _bindUI: function _bindUI() {},\n  addShape: function addShape(type, cfg) {\n    var canvas = this.get('canvas');\n    cfg = cfg || {};\n    var shapeType = SHAPE_MAP[type];\n\n    if (!shapeType) {\n      shapeType = Util.upperFirst(type);\n      SHAPE_MAP[type] = shapeType;\n    }\n\n    if (cfg.attrs && canvas) {\n      var attrs = cfg.attrs;\n\n      if (type === 'text') {\n        // 临时解决\n        var topFontFamily = canvas.get('fontFamily');\n\n        if (topFontFamily) {\n          attrs.fontFamily = attrs.fontFamily ? attrs.fontFamily : topFontFamily;\n        }\n      }\n    }\n\n    cfg.canvas = canvas;\n    cfg.type = type;\n    var rst = new Shape[shapeType](cfg);\n    this.add(rst);\n    return rst;\n  },\n\n  /** 添加图组\n   * @param  {Function|Object|undefined} param 图组类\n   * @param  {Object} cfg 配置项\n   * @return {Object} rst 图组\n   */\n  addGroup: function addGroup(param, cfg) {\n    var canvas = this.get('canvas');\n    var rst;\n    cfg = Util.merge({}, cfg);\n\n    if (Util.isFunction(param)) {\n      if (cfg) {\n        cfg.canvas = canvas;\n        cfg.parent = this;\n        rst = new param(cfg);\n      } else {\n        rst = new param({\n          canvas: canvas,\n          parent: this\n        });\n      }\n\n      this.add(rst);\n    } else if (Util.isObject(param)) {\n      param.canvas = canvas;\n      rst = new Group(param);\n      this.add(rst);\n    } else if (param === undefined) {\n      rst = new Group();\n      this.add(rst);\n    } else {\n      return false;\n    }\n\n    return rst;\n  },\n\n  /** 绘制背景\n   * @param  {Array} padding 内边距\n   * @param  {Attrs} attrs 图形属性\n   * @param  {Shape} backShape 背景图形\n   * @return {Object} 背景层对象\n   */\n  renderBack: function renderBack(padding, attrs) {\n    var backShape = this.get('backShape');\n    var innerBox = this.getBBox(); // const parent = this.get('parent'); // getParent\n\n    Util.merge(attrs, {\n      x: innerBox.minX - padding[3],\n      y: innerBox.minY - padding[0],\n      width: innerBox.width + padding[1] + padding[3],\n      height: innerBox.height + padding[0] + padding[2]\n    });\n\n    if (backShape) {\n      backShape.attr(attrs);\n    } else {\n      backShape = this.addShape('rect', {\n        zIndex: -1,\n        attrs: attrs\n      });\n    }\n\n    this.set('backShape', backShape);\n    this.sort();\n    return backShape;\n  },\n  removeChild: function removeChild(item, destroy) {\n    if (arguments.length >= 2) {\n      if (this.contain(item)) {\n        item.remove(destroy);\n      }\n    } else {\n      if (arguments.length === 1) {\n        if (Util.isBoolean(item)) {\n          destroy = item;\n        } else {\n          if (this.contain(item)) {\n            item.remove(true);\n          }\n\n          return this;\n        }\n      }\n\n      if (arguments.length === 0) {\n        destroy = true;\n      }\n\n      Group.superclass.remove.call(this, destroy);\n    }\n\n    return this;\n  },\n\n  /**\n   * 向组中添加shape或者group\n   * @param {Object} items 图形或者分组\n   * @return {Object} group 本尊\n   */\n  add: function add(items) {\n    var self = this;\n    var children = self.get('children');\n\n    if (Util.isArray(items)) {\n      Util.each(items, function (item) {\n        var parent = item.get('parent');\n\n        if (parent) {\n          parent.removeChild(item, false);\n        }\n\n        self._setCfgProperty(item);\n      });\n      self._cfg.children = children.concat(items);\n    } else {\n      var item = items;\n      var parent = item.get('parent');\n\n      if (parent) {\n        parent.removeChild(item, false);\n      }\n\n      self._setCfgProperty(item);\n\n      children.push(item);\n    }\n\n    return self;\n  },\n  _setCfgProperty: function _setCfgProperty(item) {\n    var cfg = this._cfg;\n    item.set('parent', this);\n    item.set('canvas', cfg.canvas);\n\n    if (cfg.timeline) {\n      item.set('timeline', cfg.timeline);\n    }\n  },\n  contain: function contain(item) {\n    var children = this.get('children');\n    return children.indexOf(item) > -1;\n  },\n  getChildByIndex: function getChildByIndex(index) {\n    var children = this.get('children');\n    return children[index];\n  },\n  getFirst: function getFirst() {\n    return this.getChildByIndex(0);\n  },\n  getLast: function getLast() {\n    var lastIndex = this.get('children').length - 1;\n    return this.getChildByIndex(lastIndex);\n  },\n  getBBox: function getBBox() {\n    var self = this;\n    var minX = Infinity;\n    var maxX = -Infinity;\n    var minY = Infinity;\n    var maxY = -Infinity;\n    var children = self.get('children');\n\n    if (children.length > 0) {\n      Util.each(children, function (child) {\n        if (child.get('visible')) {\n          if (child.isGroup && child.get('children').length === 0) {\n            return;\n          }\n\n          var _box = child.getBBox();\n\n          if (!_box) {\n            return true;\n          }\n\n          var leftTop = [_box.minX, _box.minY, 1];\n          var leftBottom = [_box.minX, _box.maxY, 1];\n          var rightTop = [_box.maxX, _box.minY, 1];\n          var rightBottom = [_box.maxX, _box.maxY, 1];\n          child.apply(leftTop);\n          child.apply(leftBottom);\n          child.apply(rightTop);\n          child.apply(rightBottom);\n          var boxMinX = Math.min(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0]);\n          var boxMaxX = Math.max(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0]);\n          var boxMinY = Math.min(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1]);\n          var boxMaxY = Math.max(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1]);\n\n          if (boxMinX < minX) {\n            minX = boxMinX;\n          }\n\n          if (boxMaxX > maxX) {\n            maxX = boxMaxX;\n          }\n\n          if (boxMinY < minY) {\n            minY = boxMinY;\n          }\n\n          if (boxMaxY > maxY) {\n            maxY = boxMaxY;\n          }\n        }\n      });\n    } else {\n      minX = 0;\n      maxX = 0;\n      minY = 0;\n      maxY = 0;\n    }\n\n    var box = {\n      minX: minX,\n      minY: minY,\n      maxX: maxX,\n      maxY: maxY\n    };\n    box.x = box.minX;\n    box.y = box.minY;\n    box.width = box.maxX - box.minX;\n    box.height = box.maxY - box.minY;\n    return box;\n  },\n  getCount: function getCount() {\n    return this.get('children').length;\n  },\n  sort: function sort() {\n    var children = this.get('children'); // 稳定排序\n\n    Util.each(children, function (child, index) {\n      child[INDEX] = index;\n      return child;\n    });\n    children.sort(getComparer(function (obj1, obj2) {\n      return obj1.get('zIndex') - obj2.get('zIndex');\n    }));\n    return this;\n  },\n  findById: function findById(id) {\n    return this.find(function (item) {\n      return item.get('id') === id;\n    });\n  },\n\n  /**\n   * 根据查找函数查找分组或者图形\n   * @param  {Function} fn 匹配函数\n   * @return {Canvas.Base} 分组或者图形\n   */\n  find: function find(fn) {\n    if (Util.isString(fn)) {\n      return this.findById(fn);\n    }\n\n    var children = this.get('children');\n    var rst = null;\n    Util.each(children, function (item) {\n      if (fn(item)) {\n        rst = item;\n      } else if (item.find) {\n        rst = item.find(fn);\n      }\n\n      if (rst) {\n        return false;\n      }\n    });\n    return rst;\n  },\n\n  /**\n   * @param  {Function} fn filter mathod\n   * @return {Array} all the matching shapes and groups\n   */\n  findAll: function findAll(fn) {\n    var children = this.get('children');\n    var rst = [];\n    var childRst = [];\n    Util.each(children, function (item) {\n      if (fn(item)) {\n        rst.push(item);\n      }\n\n      if (item.findAllBy) {\n        childRst = item.findAllBy(fn);\n        rst = rst.concat(childRst);\n      }\n    });\n    return rst;\n  },\n\n  /**\n   * @Deprecated\n   * @param  {Function} fn filter method\n   * @return {Object} found shape or group\n   */\n  findBy: function findBy(fn) {\n    var children = this.get('children');\n    var rst = null;\n    Util.each(children, function (item) {\n      if (fn(item)) {\n        rst = item;\n      } else if (item.findBy) {\n        rst = item.findBy(fn);\n      }\n\n      if (rst) {\n        return false;\n      }\n    });\n    return rst;\n  },\n\n  /**\n   * @Deprecated\n   * @param  {Function} fn filter mathod\n   * @return {Array} all the matching shapes and groups\n   */\n  findAllBy: function findAllBy(fn) {\n    var children = this.get('children');\n    var rst = [];\n    var childRst = [];\n    Util.each(children, function (item) {\n      if (fn(item)) {\n        rst.push(item);\n      }\n\n      if (item.findAllBy) {\n        childRst = item.findAllBy(fn);\n        rst = rst.concat(childRst);\n      }\n    });\n    return rst;\n  },\n  getShape: function getShape(x, y) {\n    var self = this;\n    var clip = self._attrs.clip;\n    var children = self._cfg.children;\n    var rst;\n\n    if (clip) {\n      var v = [x, y, 1];\n      clip.invert(v, self.get('canvas')); // 已经在外面转换\n\n      if (clip.isPointInPath(v[0], v[1])) {\n        rst = find(children, x, y);\n      }\n    } else {\n      rst = find(children, x, y);\n    }\n\n    return rst;\n  },\n  clearTotalMatrix: function clearTotalMatrix() {\n    var m = this.get('totalMatrix');\n\n    if (m) {\n      this.setSilent('totalMatrix', null);\n      var children = this._cfg.children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        child.clearTotalMatrix();\n      }\n    }\n  },\n  clear: function clear(delayRemove) {\n    var children = this._cfg.children;\n\n    for (var i = children.length - 1; i >= 0; i--) {\n      children[i].remove(true, delayRemove);\n    }\n\n    this._cfg.children = [];\n    return this;\n  },\n  destroy: function destroy() {\n    if (this.get('destroyed')) {\n      return;\n    }\n\n    this.clear();\n    Group.superclass.destroy.call(this);\n  },\n  clone: function clone() {\n    var self = this;\n    var children = self._cfg.children;\n    var clone = new Group();\n    Util.each(children, function (child) {\n      clone.add(child.clone());\n    });\n    return clone;\n  }\n});\nmodule.exports = Group;"]}]}