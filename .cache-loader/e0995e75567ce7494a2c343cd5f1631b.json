{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/view/scale-translate.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/view/scale-translate.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\nvar ScaleTranslate = (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.starting = false;\n        _this.startCache = {};\n        return _this;\n    }\n    ScaleTranslate.prototype.start = function () {\n        var _this = this;\n        this.startPoint = this.context.getCurrentPoint();\n        this.starting = true;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            var scale = _this.getScale(dim);\n            var min = scale.min, max = scale.max, values = scale.values;\n            _this.startCache[dim] = { min: min, max: max, values: values };\n        });\n    };\n    ScaleTranslate.prototype.end = function () {\n        this.startPoint = null;\n        this.starting = false;\n        this.startCache = {};\n    };\n    ScaleTranslate.prototype.translate = function () {\n        var _this = this;\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var coord = this.context.view.getCoordinate();\n        var currentPoint = this.context.getCurrentPoint();\n        var normalStart = coord.invert(startPoint);\n        var noramlCurrent = coord.invert(currentPoint);\n        var dx = noramlCurrent.x - normalStart.x;\n        var dy = noramlCurrent.y - normalStart.y;\n        var view = this.context.view;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.translateDim(dim, { x: dx * -1, y: dy * -1 });\n        });\n        view.render(true);\n    };\n    ScaleTranslate.prototype.translateDim = function (dim, normalPoint) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.translateLinear(dim, scale, normalPoint);\n            }\n        }\n    };\n    ScaleTranslate.prototype.translateLinear = function (dim, scale, normalPoint) {\n        var view = this.context.view;\n        var _a = this.startCache[dim], min = _a.min, max = _a.max;\n        var range = max - min;\n        var d = normalPoint[dim] * range;\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                nice: scale.nice,\n                min: min,\n                max: max,\n            };\n        }\n        view.scale(scale.field, {\n            nice: false,\n            min: min + d,\n            max: max + d,\n        });\n    };\n    ScaleTranslate.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.startPoint = null;\n        this.starting = false;\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/view/scale-translate.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/view/scale-translate.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 拖拽 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.starting = false;\n        _this.startCache = {};\n        return _this;\n    }\n    /**\n     * 开始\n     */\n    ScaleTranslate.prototype.start = function () {\n        var _this = this;\n        this.startPoint = this.context.getCurrentPoint();\n        this.starting = true;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            var scale = _this.getScale(dim);\n            var min = scale.min, max = scale.max, values = scale.values;\n            _this.startCache[dim] = { min: min, max: max, values: values };\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 结束\n     */\n    ScaleTranslate.prototype.end = function () {\n        this.startPoint = null;\n        this.starting = false;\n        this.startCache = {};\n    };\n    /**\n     * 平移\n     */\n    ScaleTranslate.prototype.translate = function () {\n        var _this = this;\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var coord = this.context.view.getCoordinate();\n        var currentPoint = this.context.getCurrentPoint();\n        var normalStart = coord.invert(startPoint);\n        var noramlCurrent = coord.invert(currentPoint);\n        var dx = noramlCurrent.x - normalStart.x;\n        var dy = noramlCurrent.y - normalStart.y;\n        var view = this.context.view;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.translateDim(dim, { x: dx * -1, y: dy * -1 });\n        });\n        view.render(true);\n    };\n    // 平移度量\n    ScaleTranslate.prototype.translateDim = function (dim, normalPoint) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.translateLinear(dim, scale, normalPoint);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.translateCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.translateLinear = function (dim, scale, normalPoint) {\n        var view = this.context.view;\n        var _a = this.startCache[dim], min = _a.min, max = _a.max;\n        var range = max - min;\n        var d = normalPoint[dim] * range;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: min,\n                max: max,\n            };\n        }\n        view.scale(scale.field, {\n            // @ts-ignore\n            nice: false,\n            min: min + d,\n            max: max + d,\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 回滚\n     */\n    ScaleTranslate.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.startPoint = null;\n        this.starting = false;\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-translate.js.map"]}]}