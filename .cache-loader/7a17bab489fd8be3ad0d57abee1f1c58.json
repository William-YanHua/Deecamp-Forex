{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\geom\\shape\\edge.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\geom\\shape\\edge.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var Util = require('../../util');\r\nvar Shape = require('./shape');\r\nvar ShapeUtil = require('../util/shape');\r\nvar Global = require('../../global');\r\nvar PathUtil = require('../util/path');\r\nvar CORNER_PERCENT = 1 / 3;\r\nfunction getAttrs(cfg) {\r\n    var defaultCfg = Global.shape.edge;\r\n    var shapeCfg = Util.mix({}, defaultCfg, {\r\n        stroke: cfg.color,\r\n        lineWidth: cfg.size,\r\n        strokeOpacity: cfg.opacity,\r\n        opacity: cfg.opacity\r\n    }, cfg.style);\r\n    return shapeCfg;\r\n}\r\nvar Edge = Shape.registerFactory('edge', {\r\n    defaultShapeType: 'line',\r\n    getDefaultPoints: function getDefaultPoints(pointInfo) {\r\n        return ShapeUtil.splitPoints(pointInfo);\r\n    },\r\n    getActiveCfg: function getActiveCfg(type, cfg) {\r\n        var lineWidth = cfg.lineWidth || 0;\r\n        return {\r\n            lineWidth: lineWidth + 1\r\n        };\r\n    }\r\n});\r\nfunction getCPath(from, to) {\r\n    var points = [];\r\n    points.push({\r\n        x: from.x,\r\n        y: from.y * (1 - 1 / 2) + to.y * 1 / 2\r\n    });\r\n    points.push({\r\n        y: from.y * (1 - 1 / 2) + to.y * 1 / 2,\r\n        x: to.x\r\n    });\r\n    points.push(to);\r\n    var sub = ['C'];\r\n    Util.each(points, function (point) {\r\n        sub.push(point.x, point.y);\r\n    });\r\n    return sub;\r\n}\r\nfunction getQPath(to, center) {\r\n    var points = [];\r\n    points.push({\r\n        x: center.x,\r\n        y: center.y\r\n    });\r\n    points.push(to);\r\n    var sub = ['Q'];\r\n    Util.each(points, function (point) {\r\n        sub.push(point.x, point.y);\r\n    });\r\n    return sub;\r\n}\r\nfunction createSmoothPath(from, to) {\r\n    var sub = getCPath(from, to);\r\n    var path = [['M', from.x, from.y]];\r\n    path.push(sub);\r\n    return path;\r\n}\r\nfunction createArcPath(from, to, center) {\r\n    var sub = getQPath(to, center);\r\n    var path = [['M', from.x, from.y]];\r\n    path.push(sub);\r\n    return path;\r\n}\r\nfunction createArcWeightPath(points, center) {\r\n    var arc1 = getQPath(points[1], center);\r\n    var arc2 = getQPath(points[3], center);\r\n    var path = [['M', points[0].x, points[0].y]];\r\n    path.push(arc2);\r\n    path.push(['L', points[3].x, points[3].y]);\r\n    path.push(['L', points[2].x, points[2].y]);\r\n    path.push(arc1);\r\n    path.push(['L', points[1].x, points[1].y]);\r\n    path.push(['L', points[0].x, points[0].y]);\r\n    path.push(['Z']);\r\n    return path;\r\n}\r\nfunction createRectPath(from, to) {\r\n    var points = [];\r\n    points.push({\r\n        y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\r\n        x: from.x\r\n    });\r\n    points.push({\r\n        y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\r\n        x: to.x\r\n    });\r\n    points.push(to);\r\n    var path = [['M', from.x, from.y]];\r\n    Util.each(points, function (point) {\r\n        path.push(['L', point.x, point.y]);\r\n    });\r\n    return path;\r\n}\r\nShape.registerShape('edge', 'line', {\r\n    draw: function draw(cfg, container) {\r\n        var points = this.parsePoints(cfg.points);\r\n        var attrCfg = getAttrs(cfg);\r\n        var path = PathUtil.getLinePath(points);\r\n        var line = container.addShape('path', {\r\n            attrs: Util.mix(attrCfg, {\r\n                path: path\r\n            })\r\n        });\r\n        return line;\r\n    },\r\n    getMarkerCfg: function getMarkerCfg(cfg) {\r\n        return Util.mix({\r\n            symbol: 'circle',\r\n            radius: 4.5\r\n        }, getAttrs(cfg));\r\n    }\r\n});\r\nShape.registerShape('edge', 'vhv', {\r\n    draw: function draw(cfg, container) {\r\n        var points = cfg.points;\r\n        var attrCfg = getAttrs(cfg);\r\n        var path = createRectPath(points[0], points[1]);\r\n        path = this.parsePath(path);\r\n        var line = container.addShape('path', {\r\n            attrs: Util.mix(attrCfg, {\r\n                path: path\r\n            })\r\n        });\r\n        return line;\r\n    },\r\n    getMarkerCfg: function getMarkerCfg(cfg) {\r\n        return Util.mix({\r\n            symbol: 'circle',\r\n            radius: 4.5\r\n        }, getAttrs(cfg));\r\n    }\r\n});\r\nShape.registerShape('edge', 'smooth', {\r\n    draw: function draw(cfg, container) {\r\n        var points = cfg.points;\r\n        var attrCfg = getAttrs(cfg);\r\n        var path = createSmoothPath(points[0], points[1]);\r\n        path = this.parsePath(path);\r\n        var line = container.addShape('path', {\r\n            attrs: Util.mix(attrCfg, {\r\n                path: path\r\n            })\r\n        });\r\n        return line;\r\n    },\r\n    getMarkerCfg: function getMarkerCfg(cfg) {\r\n        return Util.mix({\r\n            symbol: 'circle',\r\n            radius: 4.5\r\n        }, getAttrs(cfg));\r\n    }\r\n});\r\nShape.registerShape('edge', 'arc', {\r\n    draw: function draw(cfg, container) {\r\n        var points = cfg.points;\r\n        var type = points.length > 2 ? 'weight' : 'normal';\r\n        var attrCfg = getAttrs(cfg);\r\n        var line;\r\n        var path;\r\n        if (cfg.isInCircle) {\r\n            var center = {\r\n                x: 0,\r\n                y: 1\r\n            };\r\n            if (type === 'normal') {\r\n                path = createArcPath(points[0], points[1], center);\r\n            }\r\n            else {\r\n                attrCfg.fill = attrCfg.stroke;\r\n                path = createArcWeightPath(points, center);\r\n            }\r\n            path = this.parsePath(path);\r\n            line = container.addShape('path', {\r\n                attrs: Util.mix(attrCfg, {\r\n                    path: path\r\n                })\r\n            });\r\n        }\r\n        else {\r\n            if (type === 'normal') {\r\n                points = this.parsePoints(points);\r\n                line = container.addShape('arc', {\r\n                    attrs: Util.mix(attrCfg, {\r\n                        x: (points[1].x + points[0].x) / 2,\r\n                        y: points[0].y,\r\n                        r: Math.abs(points[1].x - points[0].x) / 2,\r\n                        startAngle: Math.PI,\r\n                        endAngle: Math.PI * 2\r\n                    })\r\n                });\r\n            }\r\n            else {\r\n                path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y]];\r\n                var c1 = getCPath(points[1], points[3]);\r\n                var c2 = getCPath(points[2], points[0]);\r\n                path.push(c1);\r\n                path.push(['L', points[3].x, points[3].y]);\r\n                path.push(['L', points[2].x, points[2].y]);\r\n                path.push(c2);\r\n                path.push(['Z']);\r\n                path = this.parsePath(path);\r\n                attrCfg.fill = attrCfg.stroke;\r\n                line = container.addShape('path', {\r\n                    attrs: Util.mix(attrCfg, {\r\n                        path: path\r\n                    })\r\n                });\r\n            }\r\n        }\r\n        return line;\r\n    },\r\n    getMarkerCfg: function getMarkerCfg(cfg) {\r\n        return Util.mix({\r\n            symbol: 'circle',\r\n            radius: 4.5\r\n        }, getAttrs(cfg));\r\n    }\r\n});\r\nmodule.exports = Edge;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\geom\\shape\\edge.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\geom\\shape\\edge.js"],"names":[],"mappings":"AAIA,IAAI,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAEjC,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAE/B,IAAI,SAAS,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAEzC,IAAI,MAAM,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAErC,IAAI,QAAQ,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAEvC,IAAI,cAAc,GAAG,CAAC,GAAG,CAAC,CAAC;AAE3B,SAAS,QAAQ,CAAC,GAAG;IACnB,IAAI,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;IACnC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,UAAU,EAAE;QACtC,MAAM,EAAE,GAAG,CAAC,KAAK;QACjB,SAAS,EAAE,GAAG,CAAC,IAAI;QACnB,aAAa,EAAE,GAAG,CAAC,OAAO;QAC1B,OAAO,EAAE,GAAG,CAAC,OAAO;KACrB,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;IACd,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,IAAI,IAAI,GAAG,KAAK,CAAC,eAAe,CAAC,MAAM,EAAE;IACvC,gBAAgB,EAAE,MAAM;IACxB,gBAAgB,EAAE,SAAS,gBAAgB,CAAC,SAAS;QACnD,OAAO,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;IAC1C,CAAC;IACD,YAAY,EAAE,SAAS,YAAY,CAAC,IAAI,EAAE,GAAG;QAC3C,IAAI,SAAS,GAAG,GAAG,CAAC,SAAS,IAAI,CAAC,CAAC;QACnC,OAAO;YACL,SAAS,EAAE,SAAS,GAAG,CAAC;SACzB,CAAC;IACJ,CAAC;CACF,CAAC,CAAC;AAEH,SAAS,QAAQ,CAAC,IAAI,EAAE,EAAE;IACxB,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,MAAM,CAAC,IAAI,CAAC;QACV,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;KACvC,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,CAAC;QACV,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;QACtC,CAAC,EAAE,EAAE,CAAC,CAAC;KACR,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAChB,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;IAChB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK;QAC/B,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC,CAAC;IACH,OAAO,GAAG,CAAC;AACb,CAAC;AAED,SAAS,QAAQ,CAAC,EAAE,EAAE,MAAM;IAC1B,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,MAAM,CAAC,IAAI,CAAC;QACV,CAAC,EAAE,MAAM,CAAC,CAAC;QACX,CAAC,EAAE,MAAM,CAAC,CAAC;KACZ,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAChB,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;IAChB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK;QAC/B,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC,CAAC;IACH,OAAO,GAAG,CAAC;AACb,CAAC;AAED,SAAS,gBAAgB,CAAC,IAAI,EAAE,EAAE;IAChC,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;IAC7B,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACf,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAS,aAAa,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM;IACrC,IAAI,GAAG,GAAG,QAAQ,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAC/B,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACf,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAS,mBAAmB,CAAC,MAAM,EAAE,MAAM;IACzC,IAAI,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;IACvC,IAAI,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;IACvC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAChB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAChB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IACjB,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAS,cAAc,CAAC,IAAI,EAAE,EAAE;IAC9B,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,MAAM,CAAC,IAAI,CAAC;QACV,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,cAAc,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,cAAc;QACxD,CAAC,EAAE,IAAI,CAAC,CAAC;KACV,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,CAAC;QACV,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,cAAc,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,cAAc;QACxD,CAAC,EAAE,EAAE,CAAC,CAAC;KACR,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAChB,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK;QAC/B,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC;IACH,OAAO,IAAI,CAAC;AACd,CAAC;AAED,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,MAAM,EAAE;IAClC,IAAI,EAAE,SAAS,IAAI,CAAC,GAAG,EAAE,SAAS;QAChC,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC1C,IAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACxC,IAAI,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YACpC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;gBACvB,IAAI,EAAE,IAAI;aACX,CAAC;SACH,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;IACd,CAAC;IACD,YAAY,EAAE,SAAS,YAAY,CAAC,GAAG;QACrC,OAAO,IAAI,CAAC,GAAG,CAAC;YACd,MAAM,EAAE,QAAQ;YAChB,MAAM,EAAE,GAAG;SACZ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACpB,CAAC;CACF,CAAC,CAAC;AACH,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE;IACjC,IAAI,EAAE,SAAS,IAAI,CAAC,GAAG,EAAE,SAAS;QAChC,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACxB,IAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YACpC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;gBACvB,IAAI,EAAE,IAAI;aACX,CAAC;SACH,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;IACd,CAAC;IACD,YAAY,EAAE,SAAS,YAAY,CAAC,GAAG;QACrC,OAAO,IAAI,CAAC,GAAG,CAAC;YACd,MAAM,EAAE,QAAQ;YAChB,MAAM,EAAE,GAAG;SACZ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACpB,CAAC;CACF,CAAC,CAAC;AACH,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,QAAQ,EAAE;IACpC,IAAI,EAAE,SAAS,IAAI,CAAC,GAAG,EAAE,SAAS;QAChC,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACxB,IAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YACpC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;gBACvB,IAAI,EAAE,IAAI;aACX,CAAC;SACH,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;IACd,CAAC;IACD,YAAY,EAAE,SAAS,YAAY,CAAC,GAAG;QACrC,OAAO,IAAI,CAAC,GAAG,CAAC;YACd,MAAM,EAAE,QAAQ;YAChB,MAAM,EAAE,GAAG;SACZ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACpB,CAAC;CACF,CAAC,CAAC;AAEH,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE;IACjC,IAAI,EAAE,SAAS,IAAI,CAAC,GAAG,EAAE,SAAS;QAChC,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACxB,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC;QACnD,IAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,IAAI,CAAC;QACT,IAAI,IAAI,CAAC;QAET,IAAI,GAAG,CAAC,UAAU,EAAE;YAClB,IAAI,MAAM,GAAG;gBACX,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;aACL,CAAC;YAEF,IAAI,IAAI,KAAK,QAAQ,EAAE;gBACrB,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;aACpD;iBAAM;gBACL,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;gBAC9B,IAAI,GAAG,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;aAC5C;YAED,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAC5B,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;gBAChC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;oBACvB,IAAI,EAAE,IAAI;iBACX,CAAC;aACH,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,IAAI,KAAK,QAAQ,EAAE;gBACrB,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBAClC,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE;oBAC/B,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;wBACvB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;wBAClC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBACd,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;wBAC1C,UAAU,EAAE,IAAI,CAAC,EAAE;wBACnB,QAAQ,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC;qBACtB,CAAC;iBACH,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1E,IAAI,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxC,IAAI,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACd,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACd,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACjB,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBAC5B,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;gBAC9B,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;oBAChC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;wBACvB,IAAI,EAAE,IAAI;qBACX,CAAC;iBACH,CAAC,CAAC;aACJ;SACF;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IACD,YAAY,EAAE,SAAS,YAAY,CAAC,GAAG;QACrC,OAAO,IAAI,CAAC,GAAG,CAAC;YACd,MAAM,EAAE,QAAQ;YAChB,MAAM,EAAE,GAAG;SACZ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACpB,CAAC;CACF,CAAC,CAAC;AACH,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC","sourcesContent":["/**\n * @fileOverview 边的 shape\n * @author dxq613@gmail.com\n */\nvar Util = require('../../util');\n\nvar Shape = require('./shape');\n\nvar ShapeUtil = require('../util/shape');\n\nvar Global = require('../../global');\n\nvar PathUtil = require('../util/path');\n\nvar CORNER_PERCENT = 1 / 3;\n\nfunction getAttrs(cfg) {\n  var defaultCfg = Global.shape.edge;\n  var shapeCfg = Util.mix({}, defaultCfg, {\n    stroke: cfg.color,\n    lineWidth: cfg.size,\n    strokeOpacity: cfg.opacity,\n    opacity: cfg.opacity\n  }, cfg.style);\n  return shapeCfg;\n}\n\nvar Edge = Shape.registerFactory('edge', {\n  defaultShapeType: 'line',\n  getDefaultPoints: function getDefaultPoints(pointInfo) {\n    return ShapeUtil.splitPoints(pointInfo);\n  },\n  getActiveCfg: function getActiveCfg(type, cfg) {\n    var lineWidth = cfg.lineWidth || 0;\n    return {\n      lineWidth: lineWidth + 1\n    };\n  }\n});\n\nfunction getCPath(from, to) {\n  var points = [];\n  points.push({\n    x: from.x,\n    y: from.y * (1 - 1 / 2) + to.y * 1 / 2\n  });\n  points.push({\n    y: from.y * (1 - 1 / 2) + to.y * 1 / 2,\n    x: to.x\n  });\n  points.push(to);\n  var sub = ['C'];\n  Util.each(points, function (point) {\n    sub.push(point.x, point.y);\n  });\n  return sub;\n}\n\nfunction getQPath(to, center) {\n  var points = [];\n  points.push({\n    x: center.x,\n    y: center.y\n  });\n  points.push(to);\n  var sub = ['Q'];\n  Util.each(points, function (point) {\n    sub.push(point.x, point.y);\n  });\n  return sub;\n}\n\nfunction createSmoothPath(from, to) {\n  var sub = getCPath(from, to);\n  var path = [['M', from.x, from.y]];\n  path.push(sub);\n  return path;\n}\n\nfunction createArcPath(from, to, center) {\n  var sub = getQPath(to, center);\n  var path = [['M', from.x, from.y]];\n  path.push(sub);\n  return path;\n}\n\nfunction createArcWeightPath(points, center) {\n  var arc1 = getQPath(points[1], center);\n  var arc2 = getQPath(points[3], center);\n  var path = [['M', points[0].x, points[0].y]];\n  path.push(arc2);\n  path.push(['L', points[3].x, points[3].y]);\n  path.push(['L', points[2].x, points[2].y]);\n  path.push(arc1);\n  path.push(['L', points[1].x, points[1].y]);\n  path.push(['L', points[0].x, points[0].y]);\n  path.push(['Z']);\n  return path;\n}\n\nfunction createRectPath(from, to) {\n  var points = [];\n  points.push({\n    y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\n    x: from.x\n  });\n  points.push({\n    y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\n    x: to.x\n  });\n  points.push(to);\n  var path = [['M', from.x, from.y]];\n  Util.each(points, function (point) {\n    path.push(['L', point.x, point.y]);\n  });\n  return path;\n}\n\nShape.registerShape('edge', 'line', {\n  draw: function draw(cfg, container) {\n    var points = this.parsePoints(cfg.points);\n    var attrCfg = getAttrs(cfg);\n    var path = PathUtil.getLinePath(points);\n    var line = container.addShape('path', {\n      attrs: Util.mix(attrCfg, {\n        path: path\n      })\n    });\n    return line;\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return Util.mix({\n      symbol: 'circle',\n      radius: 4.5\n    }, getAttrs(cfg));\n  }\n});\nShape.registerShape('edge', 'vhv', {\n  draw: function draw(cfg, container) {\n    var points = cfg.points;\n    var attrCfg = getAttrs(cfg);\n    var path = createRectPath(points[0], points[1]);\n    path = this.parsePath(path);\n    var line = container.addShape('path', {\n      attrs: Util.mix(attrCfg, {\n        path: path\n      })\n    });\n    return line;\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return Util.mix({\n      symbol: 'circle',\n      radius: 4.5\n    }, getAttrs(cfg));\n  }\n});\nShape.registerShape('edge', 'smooth', {\n  draw: function draw(cfg, container) {\n    var points = cfg.points;\n    var attrCfg = getAttrs(cfg);\n    var path = createSmoothPath(points[0], points[1]);\n    path = this.parsePath(path);\n    var line = container.addShape('path', {\n      attrs: Util.mix(attrCfg, {\n        path: path\n      })\n    });\n    return line;\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return Util.mix({\n      symbol: 'circle',\n      radius: 4.5\n    }, getAttrs(cfg));\n  }\n}); //  弧线包括笛卡尔坐标系下的半圆弧线、极坐标系下以圆心为控制点的二阶曲线、笛卡尔坐标系下带权重的三阶曲线、极坐标系下带权重的以圆心为控制点的二阶曲线\n\nShape.registerShape('edge', 'arc', {\n  draw: function draw(cfg, container) {\n    var points = cfg.points;\n    var type = points.length > 2 ? 'weight' : 'normal';\n    var attrCfg = getAttrs(cfg);\n    var line;\n    var path;\n\n    if (cfg.isInCircle) {\n      var center = {\n        x: 0,\n        y: 1\n      };\n\n      if (type === 'normal') {\n        path = createArcPath(points[0], points[1], center);\n      } else {\n        attrCfg.fill = attrCfg.stroke;\n        path = createArcWeightPath(points, center);\n      }\n\n      path = this.parsePath(path);\n      line = container.addShape('path', {\n        attrs: Util.mix(attrCfg, {\n          path: path\n        })\n      });\n    } else {\n      if (type === 'normal') {\n        points = this.parsePoints(points);\n        line = container.addShape('arc', {\n          attrs: Util.mix(attrCfg, {\n            x: (points[1].x + points[0].x) / 2,\n            y: points[0].y,\n            r: Math.abs(points[1].x - points[0].x) / 2,\n            startAngle: Math.PI,\n            endAngle: Math.PI * 2\n          })\n        });\n      } else {\n        path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y]];\n        var c1 = getCPath(points[1], points[3]);\n        var c2 = getCPath(points[2], points[0]);\n        path.push(c1);\n        path.push(['L', points[3].x, points[3].y]);\n        path.push(['L', points[2].x, points[2].y]);\n        path.push(c2);\n        path.push(['Z']);\n        path = this.parsePath(path);\n        attrCfg.fill = attrCfg.stroke;\n        line = container.addShape('path', {\n          attrs: Util.mix(attrCfg, {\n            path: path\n          })\n        });\n      }\n    }\n\n    return line;\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return Util.mix({\n      symbol: 'circle',\n      radius: 4.5\n    }, getAttrs(cfg));\n  }\n});\nmodule.exports = Edge;"]}]}