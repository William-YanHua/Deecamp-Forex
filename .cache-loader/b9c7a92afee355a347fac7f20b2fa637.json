{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/donut/component/ring-statistic.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/donut/component/ring-statistic.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\nimport StatisticHtml from './statistic';\nimport { getTemplate } from './statistic-template';\nimport { debounce, each } from '@antv/util';\nvar RingStatistic = (function (_super) {\n    __extends(RingStatistic, _super);\n    function RingStatistic(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.view = cfg.view;\n        _this.plot = cfg.plot;\n        _this.statisticClass = cfg.statisticClass;\n        _this.adjustOptions();\n        return _this;\n    }\n    RingStatistic.prototype.triggerOn = function () {\n        var _this = this;\n        var triggerOnEvent = this.options.triggerOn;\n        this.view.on(\"interval:\" + triggerOnEvent, debounce(function (e) {\n            var displayData = _this.parseStatisticData('item', e.data.data, e.data.color);\n            var htmlString = _this.getStatisticHtmlString(displayData);\n            _this.updateHtml(htmlString);\n        }, 150));\n        var triggerOffEvent = this.options.triggerOff ? this.options.triggerOff : 'mouseleave';\n        this.view.on(\"interval:\" + triggerOffEvent, debounce(function () {\n            var htmlString = _this.getTotalHtmlString();\n            _this.updateHtml(htmlString);\n        }, 150));\n    };\n    RingStatistic.prototype.getTotalHtmlString = function () {\n        var displayData;\n        if (this.options.content) {\n            displayData = this.options.content;\n        }\n        else {\n            var data = this.getTotalValue();\n            displayData = this.parseStatisticData('total', data);\n        }\n        var htmlString;\n        if (this.options.htmlContent) {\n            htmlString = this.options.htmlContent(displayData, this.getStatisticSize());\n        }\n        else {\n            htmlString = this.getStatisticTemplate(displayData);\n        }\n        return htmlString;\n    };\n    RingStatistic.prototype.adjustOptions = function () {\n        this.html = this.getTotalHtmlString();\n        var _a = this.view.coordinateBBox, minX = _a.minX, minY = _a.minY, width = _a.width, height = _a.height;\n        this.x = minX + width / 2;\n        this.y = minY + height / 2;\n    };\n    RingStatistic.prototype.getTotalValue = function () {\n        var _a;\n        var total = 0;\n        var _b = this.plot.options, angleField = _b.angleField, colorField = _b.colorField;\n        var totalLabel = this.options.totalLabel;\n        each(this.plot.options.data, function (item) {\n            if (typeof item[angleField] === 'number') {\n                total += item[angleField];\n            }\n        });\n        var data = (_a = {},\n            _a[angleField] = total,\n            _a[colorField] = totalLabel,\n            _a);\n        return data;\n    };\n    RingStatistic.prototype.parseStatisticData = function (type, data, color) {\n        var plot = this.plot;\n        var _a = plot.options, angleField = _a.angleField, colorField = _a.colorField;\n        var angleScale = plot.getScaleByField(angleField);\n        var colorScale = plot.getScaleByField(colorField);\n        var statisticData = {\n            name: colorScale ? colorScale.getText(data[colorField]) : null,\n            value: angleScale.getText(data[angleField]),\n        };\n        if (type === 'item') {\n            statisticData.itemData = data;\n            statisticData.color = color;\n        }\n        return statisticData;\n    };\n    RingStatistic.prototype.getStatisticTemplate = function (data) {\n        var size = this.getStatisticSize();\n        var htmlString = getTemplate(data.name, data.value, this.statisticClass, size);\n        return htmlString;\n    };\n    RingStatistic.prototype.getStatisticSize = function () {\n        var viewRange = this.plot.view.coordinateBBox;\n        var _a = this.plot.options, radius = _a.radius, innerRadius = _a.innerRadius;\n        var minContainerSize = Math.min(viewRange.width, viewRange.height);\n        var size = minContainerSize * radius * innerRadius;\n        return size;\n    };\n    RingStatistic.prototype.getStatisticHtmlString = function (data) {\n        var htmlContent = this.options.htmlContent;\n        var htmlString;\n        if (htmlContent) {\n            htmlString = htmlContent(data, this.getStatisticSize());\n        }\n        else {\n            htmlString = this.getStatisticTemplate(data);\n        }\n        return htmlString;\n    };\n    return RingStatistic;\n}(StatisticHtml));\nexport default RingStatistic;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/donut/component/ring-statistic.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/donut/component/ring-statistic.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport StatisticHtml from './statistic';\nimport { getTemplate } from './statistic-template';\nimport { debounce, each } from '@antv/util';\nvar RingStatistic = /** @class */ (function (_super) {\n    __extends(RingStatistic, _super);\n    function RingStatistic(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.view = cfg.view;\n        _this.plot = cfg.plot;\n        _this.statisticClass = cfg.statisticClass;\n        _this.adjustOptions();\n        return _this;\n    }\n    RingStatistic.prototype.triggerOn = function () {\n        var _this = this;\n        var triggerOnEvent = this.options.triggerOn;\n        this.view.on(\"interval:\" + triggerOnEvent, debounce(function (e) {\n            var displayData = _this.parseStatisticData('item', e.data.data, e.data.color);\n            var htmlString = _this.getStatisticHtmlString(displayData);\n            _this.updateHtml(htmlString);\n        }, 150));\n        var triggerOffEvent = this.options.triggerOff ? this.options.triggerOff : 'mouseleave';\n        this.view.on(\"interval:\" + triggerOffEvent, debounce(function () {\n            var htmlString = _this.getTotalHtmlString();\n            _this.updateHtml(htmlString);\n        }, 150));\n    };\n    RingStatistic.prototype.getTotalHtmlString = function () {\n        var displayData;\n        if (this.options.content) {\n            displayData = this.options.content;\n        }\n        else {\n            /** 用户没有指定文本内容时，默认显示总计 */\n            var data = this.getTotalValue();\n            displayData = this.parseStatisticData('total', data);\n        }\n        /** 中心文本显示 */\n        var htmlString;\n        if (this.options.htmlContent) {\n            htmlString = this.options.htmlContent(displayData, this.getStatisticSize());\n        }\n        else {\n            htmlString = this.getStatisticTemplate(displayData);\n        }\n        return htmlString;\n    };\n    RingStatistic.prototype.adjustOptions = function () {\n        this.html = this.getTotalHtmlString();\n        var _a = this.view.coordinateBBox, minX = _a.minX, minY = _a.minY, width = _a.width, height = _a.height;\n        this.x = minX + width / 2;\n        this.y = minY + height / 2;\n    };\n    RingStatistic.prototype.getTotalValue = function () {\n        var _a;\n        var total = 0;\n        var _b = this.plot.options, angleField = _b.angleField, colorField = _b.colorField;\n        var totalLabel = this.options.totalLabel;\n        each(this.plot.options.data, function (item) {\n            if (typeof item[angleField] === 'number') {\n                total += item[angleField];\n            }\n        });\n        var data = (_a = {},\n            _a[angleField] = total,\n            _a[colorField] = totalLabel,\n            _a);\n        return data;\n    };\n    RingStatistic.prototype.parseStatisticData = function (type, data, color) {\n        var plot = this.plot;\n        var _a = plot.options, angleField = _a.angleField, colorField = _a.colorField;\n        var angleScale = plot.getScaleByField(angleField);\n        var colorScale = plot.getScaleByField(colorField);\n        var statisticData = {\n            name: colorScale ? colorScale.getText(data[colorField]) : null,\n            value: angleScale.getText(data[angleField]),\n        };\n        if (type === 'item') {\n            // 每一个扇形区域的数据\n            statisticData.itemData = data;\n            statisticData.color = color;\n        }\n        return statisticData;\n    };\n    RingStatistic.prototype.getStatisticTemplate = function (data) {\n        var size = this.getStatisticSize();\n        var htmlString = getTemplate(data.name, data.value, this.statisticClass, size);\n        /** 更为复杂的文本要求用户自行制定html模板 */\n        return htmlString;\n    };\n    RingStatistic.prototype.getStatisticSize = function () {\n        var viewRange = this.plot.view.coordinateBBox;\n        var _a = this.plot.options, radius = _a.radius, innerRadius = _a.innerRadius;\n        var minContainerSize = Math.min(viewRange.width, viewRange.height);\n        var size = minContainerSize * radius * innerRadius;\n        return size;\n    };\n    RingStatistic.prototype.getStatisticHtmlString = function (data) {\n        var htmlContent = this.options.htmlContent;\n        var htmlString;\n        if (htmlContent) {\n            htmlString = htmlContent(data, this.getStatisticSize());\n        }\n        else {\n            htmlString = this.getStatisticTemplate(data);\n        }\n        return htmlString;\n    };\n    return RingStatistic;\n}(StatisticHtml));\nexport default RingStatistic;\n//# sourceMappingURL=ring-statistic.js.map"]}]}