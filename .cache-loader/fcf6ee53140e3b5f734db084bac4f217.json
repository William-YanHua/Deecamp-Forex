{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\rect.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\rect.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Base = require('./base');\r\nvar Rect = function (_Base) {\r\n    _inheritsLoose(Rect, _Base);\r\n    function Rect() {\r\n        return _Base.apply(this, arguments) || this;\r\n    }\r\n    var _proto = Rect.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Base.prototype.getDefaultCfg.call(this);\r\n        cfg.type = 'rect';\r\n        return cfg;\r\n    };\r\n    _proto.generateFacets = function generateFacets(data) {\r\n        var self = this;\r\n        var fields = self.fields;\r\n        var rst = [];\r\n        var rows = 1;\r\n        var cols = 1;\r\n        var colField = fields[0];\r\n        var rowField = fields[1];\r\n        var colValues = [''];\r\n        var rowValues = [''];\r\n        if (colField) {\r\n            colValues = self.getFieldValues(colField, data);\r\n            cols = colValues.length;\r\n        }\r\n        if (rowField) {\r\n            rowValues = self.getFieldValues(rowField, data);\r\n            rows = rowValues.length;\r\n        }\r\n        colValues.forEach(function (xVal, xIndex) {\r\n            rowValues.forEach(function (yVal, yIndex) {\r\n                var conditions = [{\r\n                        field: colField,\r\n                        value: xVal,\r\n                        values: colValues\r\n                    }, {\r\n                        field: rowField,\r\n                        value: yVal,\r\n                        values: rowValues\r\n                    }];\r\n                var filter = self.getFilter(conditions);\r\n                var subData = data.filter(filter);\r\n                var facet = {\r\n                    type: self.type,\r\n                    colValue: xVal,\r\n                    rowValue: yVal,\r\n                    colField: colField,\r\n                    rowField: rowField,\r\n                    colIndex: xIndex,\r\n                    rowIndex: yIndex,\r\n                    cols: cols,\r\n                    rows: rows,\r\n                    data: subData,\r\n                    region: self.getRegion(rows, cols, xIndex, yIndex)\r\n                };\r\n                rst.push(facet);\r\n            });\r\n        });\r\n        return rst;\r\n    };\r\n    _proto.setXAxis = function setXAxis(xField, axes, facet) {\r\n        if (facet.rowIndex !== facet.rows - 1) {\r\n            axes[xField].title = null;\r\n            axes[xField].label = null;\r\n        }\r\n        else if (facet.colIndex !== parseInt((facet.cols - 1) / 2)) {\r\n            axes[xField].title = null;\r\n        }\r\n    };\r\n    _proto.setYAxis = function setYAxis(yField, axes, facet) {\r\n        if (facet.colIndex !== 0) {\r\n            axes[yField].title = null;\r\n            axes[yField].label = null;\r\n        }\r\n        else if (facet.rowIndex !== parseInt((facet.rows - 1) / 2)) {\r\n            axes[yField].title = null;\r\n        }\r\n    };\r\n    _proto.renderTitle = function renderTitle(view, facet) {\r\n        if (facet.rowIndex === 0) {\r\n            this.drawColTitle(view, facet);\r\n        }\r\n        if (facet.colIndex === facet.cols - 1) {\r\n            this.drawRowTitle(view, facet);\r\n        }\r\n    };\r\n    return Rect;\r\n}(Base);\r\nmodule.exports = Rect;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\rect.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\rect.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview 分面的基类\n * @author dxq613@gmail.com\n */\nvar Base = require('./base');\n/**\n * 矩形的 facet 有以下属性：\n * - colField 列的字段\n * - rowField 行的字段\n * - colValue 列字段的值\n * - rowValue 行字段的值\n * - cols 列数\n * - rows 行数\n * - colIndex 列的序号\n * - rowIndex 行的序号\n */\n\n/**\n * 用于生成分面的类\n * @class Facets.Rect\n */\n\n\nvar Rect =\n/*#__PURE__*/\nfunction (_Base) {\n  _inheritsLoose(Rect, _Base);\n\n  function Rect() {\n    return _Base.apply(this, arguments) || this;\n  }\n\n  var _proto = Rect.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Base.prototype.getDefaultCfg.call(this);\n\n    cfg.type = 'rect';\n    return cfg;\n  };\n\n  _proto.generateFacets = function generateFacets(data) {\n    var self = this;\n    var fields = self.fields; // var defs = self.defs;\n\n    var rst = [];\n    var rows = 1;\n    var cols = 1;\n    var colField = fields[0];\n    var rowField = fields[1];\n    var colValues = [''];\n    var rowValues = [''];\n\n    if (colField) {\n      colValues = self.getFieldValues(colField, data);\n      cols = colValues.length;\n    }\n\n    if (rowField) {\n      rowValues = self.getFieldValues(rowField, data);\n      rows = rowValues.length;\n    } // 获取每个维度对应的frame\n\n\n    colValues.forEach(function (xVal, xIndex) {\n      rowValues.forEach(function (yVal, yIndex) {\n        var conditions = [{\n          field: colField,\n          value: xVal,\n          values: colValues\n        }, {\n          field: rowField,\n          value: yVal,\n          values: rowValues\n        }];\n        var filter = self.getFilter(conditions);\n        var subData = data.filter(filter);\n        var facet = {\n          type: self.type,\n          colValue: xVal,\n          rowValue: yVal,\n          colField: colField,\n          rowField: rowField,\n          colIndex: xIndex,\n          rowIndex: yIndex,\n          cols: cols,\n          rows: rows,\n          data: subData,\n          region: self.getRegion(rows, cols, xIndex, yIndex)\n        };\n        rst.push(facet);\n      });\n    });\n    return rst;\n  }; // 设置 x 坐标轴的文本、title 是否显示\n\n\n  _proto.setXAxis = function setXAxis(xField, axes, facet) {\n    if (facet.rowIndex !== facet.rows - 1) {\n      axes[xField].title = null;\n      axes[xField].label = null;\n    } else if (facet.colIndex !== parseInt((facet.cols - 1) / 2)) {\n      axes[xField].title = null;\n    }\n  }; // 设置 y 坐标轴的文本、title 是否显示\n\n\n  _proto.setYAxis = function setYAxis(yField, axes, facet) {\n    if (facet.colIndex !== 0) {\n      axes[yField].title = null;\n      axes[yField].label = null;\n    } else if (facet.rowIndex !== parseInt((facet.rows - 1) / 2)) {\n      axes[yField].title = null;\n    }\n  };\n\n  _proto.renderTitle = function renderTitle(view, facet) {\n    if (facet.rowIndex === 0) {\n      this.drawColTitle(view, facet);\n    }\n\n    if (facet.colIndex === facet.cols - 1) {\n      this.drawRowTitle(view, facet);\n    }\n  };\n\n  return Rect;\n}(Base);\n\nmodule.exports = Rect;"]}]}