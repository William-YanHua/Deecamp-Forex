{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\chart\\controller\\tooltip.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\chart\\controller\\tooltip.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar util_1 = require(\"@antv/util\");\r\nvar dependents_1 = require(\"../../dependents\");\r\nvar coordinate_1 = require(\"../../util/coordinate\");\r\nvar graphics_1 = require(\"../../util/graphics\");\r\nvar tooltip_1 = require(\"../../util/tooltip\");\r\nvar base_1 = require(\"./base\");\r\nfunction uniq(items) {\r\n    var uniqItems = [];\r\n    var _loop_1 = function (index) {\r\n        var item = items[index];\r\n        var result = util_1.find(uniqItems, function (subItem) {\r\n            return (subItem.color === item.color &&\r\n                subItem.name === item.name &&\r\n                subItem.value === item.value &&\r\n                subItem.title === item.title);\r\n        });\r\n        if (!result) {\r\n            uniqItems.push(item);\r\n        }\r\n    };\r\n    for (var index = 0; index < items.length; index++) {\r\n        _loop_1(index);\r\n    }\r\n    return uniqItems;\r\n}\r\nvar Tooltip = (function (_super) {\r\n    tslib_1.__extends(Tooltip, _super);\r\n    function Tooltip() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isLocked = false;\r\n        _this.isVisible = true;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Tooltip.prototype, \"name\", {\r\n        get: function () {\r\n            return 'tooltip';\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Tooltip.prototype.init = function () { };\r\n    Tooltip.prototype.render = function () {\r\n        var option = this.view.getOptions().tooltip;\r\n        this.isVisible = option !== false;\r\n    };\r\n    Tooltip.prototype.showTooltip = function (point) {\r\n        this.point = point;\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        var view = this.view;\r\n        var items = this.getTooltipItems(point);\r\n        if (!items.length) {\r\n            this.hideTooltip();\r\n            return;\r\n        }\r\n        var title = this.getTitle(items);\r\n        var dataPoint = {\r\n            x: items[0].x,\r\n            y: items[0].y,\r\n        };\r\n        view.emit('tooltip:show', tslib_1.__assign({ items: items,\r\n            title: title }, point));\r\n        var cfg = this.getTooltipCfg();\r\n        var follow = cfg.follow, showMarkers = cfg.showMarkers, showCrosshairs = cfg.showCrosshairs, showContent = cfg.showContent, marker = cfg.marker;\r\n        var lastItems = this.items;\r\n        var lastTitle = this.title;\r\n        if (!util_1.isEqual(lastTitle, title) || !util_1.isEqual(lastItems, items)) {\r\n            view.emit('tooltip:change', tslib_1.__assign({ items: items,\r\n                title: title }, point));\r\n            if (showContent) {\r\n                if (!this.tooltip) {\r\n                    this.renderTooltip();\r\n                }\r\n                this.tooltip.update(util_1.mix({}, cfg, {\r\n                    items: items,\r\n                    title: title,\r\n                }, follow ? point : {}));\r\n                this.tooltip.show();\r\n            }\r\n            if (showMarkers) {\r\n                this.renderTooltipMarkers(items, marker);\r\n            }\r\n        }\r\n        else {\r\n            if (this.tooltip && follow) {\r\n                this.tooltip.update(point);\r\n                this.tooltip.show();\r\n            }\r\n            if (this.tooltipMarkersGroup) {\r\n                this.tooltipMarkersGroup.show();\r\n            }\r\n        }\r\n        this.items = items;\r\n        this.title = title;\r\n        if (showCrosshairs) {\r\n            var isCrosshairsFollowCursor = util_1.get(cfg, ['crosshairs', 'follow'], false);\r\n            this.renderCrosshairs(isCrosshairsFollowCursor ? point : dataPoint, cfg);\r\n        }\r\n    };\r\n    Tooltip.prototype.hideTooltip = function () {\r\n        var follow = this.getTooltipCfg().follow;\r\n        if (!follow) {\r\n            this.point = null;\r\n            return;\r\n        }\r\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\r\n        if (tooltipMarkersGroup) {\r\n            tooltipMarkersGroup.hide();\r\n        }\r\n        var xCrosshair = this.xCrosshair;\r\n        var yCrosshair = this.yCrosshair;\r\n        if (xCrosshair) {\r\n            xCrosshair.hide();\r\n        }\r\n        if (yCrosshair) {\r\n            yCrosshair.hide();\r\n        }\r\n        var tooltip = this.tooltip;\r\n        if (tooltip) {\r\n            tooltip.hide();\r\n        }\r\n        this.view.emit('tooltip:hide', {});\r\n        this.point = null;\r\n    };\r\n    Tooltip.prototype.lockTooltip = function () {\r\n        this.isLocked = true;\r\n        if (this.tooltip) {\r\n            this.tooltip.setCapture(true);\r\n        }\r\n    };\r\n    Tooltip.prototype.unlockTooltip = function () {\r\n        this.isLocked = false;\r\n        var cfg = this.getTooltipCfg();\r\n        if (this.tooltip) {\r\n            this.tooltip.setCapture(cfg.capture);\r\n        }\r\n    };\r\n    Tooltip.prototype.isTooltipLocked = function () {\r\n        return this.isLocked;\r\n    };\r\n    Tooltip.prototype.clear = function () {\r\n        var _a = this, tooltip = _a.tooltip, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair, tooltipMarkersGroup = _a.tooltipMarkersGroup;\r\n        if (tooltip) {\r\n            tooltip.hide();\r\n            tooltip.clear();\r\n        }\r\n        if (xCrosshair) {\r\n            xCrosshair.clear();\r\n        }\r\n        if (yCrosshair) {\r\n            yCrosshair.clear();\r\n        }\r\n        if (tooltipMarkersGroup) {\r\n            tooltipMarkersGroup.clear();\r\n        }\r\n    };\r\n    Tooltip.prototype.destroy = function () {\r\n        if (this.tooltip) {\r\n            this.tooltip.destroy();\r\n        }\r\n        if (this.xCrosshair) {\r\n            this.xCrosshair.destroy();\r\n        }\r\n        if (this.yCrosshair) {\r\n            this.yCrosshair.destroy();\r\n        }\r\n        if (this.guideGroup) {\r\n            this.guideGroup.remove(true);\r\n        }\r\n        this.items = null;\r\n        this.title = null;\r\n        this.tooltipMarkersGroup = null;\r\n        this.tooltipCrosshairsGroup = null;\r\n        this.xCrosshair = null;\r\n        this.yCrosshair = null;\r\n        this.tooltip = null;\r\n        this.guideGroup = null;\r\n        this.isLocked = false;\r\n        this.point = null;\r\n    };\r\n    Tooltip.prototype.changeVisible = function (visible) {\r\n        if (this.visible === visible) {\r\n            return;\r\n        }\r\n        var _a = this, tooltip = _a.tooltip, tooltipMarkersGroup = _a.tooltipMarkersGroup, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair;\r\n        if (visible) {\r\n            if (tooltip) {\r\n                tooltip.show();\r\n            }\r\n            if (tooltipMarkersGroup) {\r\n                tooltipMarkersGroup.show();\r\n            }\r\n            if (xCrosshair) {\r\n                xCrosshair.show();\r\n            }\r\n            if (yCrosshair) {\r\n                yCrosshair.show();\r\n            }\r\n        }\r\n        else {\r\n            if (tooltip) {\r\n                tooltip.hide();\r\n            }\r\n            if (tooltipMarkersGroup) {\r\n                tooltipMarkersGroup.hide();\r\n            }\r\n            if (xCrosshair) {\r\n                xCrosshair.hide();\r\n            }\r\n            if (yCrosshair) {\r\n                yCrosshair.hide();\r\n            }\r\n        }\r\n        this.visible = visible;\r\n    };\r\n    Tooltip.prototype.getTooltipItems = function (point) {\r\n        var items = this.findItemsFromView(this.view, point);\r\n        if (items.length) {\r\n            items = util_1.flatten(items);\r\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n                var itemArr = items_1[_i];\r\n                for (var _a = 0, itemArr_1 = itemArr; _a < itemArr_1.length; _a++) {\r\n                    var item = itemArr_1[_a];\r\n                    var _b = item.mappingData, x = _b.x, y = _b.y;\r\n                    item.x = util_1.isArray(x) ? x[x.length - 1] : x;\r\n                    item.y = util_1.isArray(y) ? y[y.length - 1] : y;\r\n                }\r\n            }\r\n            var shared = this.getTooltipCfg().shared;\r\n            if (shared === false && items.length > 1) {\r\n                var snapItem = items[0];\r\n                var min = Math.abs(point.y - snapItem[0].y);\r\n                for (var _c = 0, items_2 = items; _c < items_2.length; _c++) {\r\n                    var aItem = items_2[_c];\r\n                    var yDistance = Math.abs(point.y - aItem[0].y);\r\n                    if (yDistance <= min) {\r\n                        snapItem = aItem;\r\n                        min = yDistance;\r\n                    }\r\n                }\r\n                items = [snapItem];\r\n            }\r\n            return uniq(util_1.flatten(items));\r\n        }\r\n        return [];\r\n    };\r\n    Tooltip.prototype.layout = function () { };\r\n    Tooltip.prototype.update = function () {\r\n        if (this.point) {\r\n            this.showTooltip(this.point);\r\n        }\r\n    };\r\n    Tooltip.prototype.getTooltipCfg = function () {\r\n        var view = this.view;\r\n        var option = view.getOptions().tooltip;\r\n        var theme = view.getTheme();\r\n        var defaultCfg = util_1.get(theme, ['components', 'tooltip'], {});\r\n        var enterable = util_1.isUndefined(util_1.get(option, 'enterable')) ? defaultCfg.enterable : util_1.get(option, 'enterable');\r\n        return util_1.deepMix({}, defaultCfg, option, {\r\n            capture: enterable || this.isLocked ? true : false,\r\n        });\r\n    };\r\n    Tooltip.prototype.getTitle = function (items) {\r\n        var title = items[0].title || items[0].name;\r\n        this.title = title;\r\n        return title;\r\n    };\r\n    Tooltip.prototype.renderTooltip = function () {\r\n        var canvas = this.view.getCanvas();\r\n        var region = {\r\n            start: { x: 0, y: 0 },\r\n            end: { x: canvas.get('width'), y: canvas.get('height') },\r\n        };\r\n        var cfg = this.getTooltipCfg();\r\n        var tooltip = new dependents_1.HtmlTooltip(tslib_1.__assign(tslib_1.__assign({ parent: canvas.get('el').parentNode, region: region }, cfg), { visible: false, crosshairs: null }));\r\n        tooltip.init();\r\n        this.tooltip = tooltip;\r\n    };\r\n    Tooltip.prototype.renderTooltipMarkers = function (items, marker) {\r\n        var tooltipMarkersGroup = this.getTooltipMarkersGroup();\r\n        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\r\n            var item = items_3[_i];\r\n            var x = item.x, y = item.y;\r\n            var attrs = tslib_1.__assign(tslib_1.__assign({ fill: item.color, symbol: 'circle', shadowColor: item.color }, marker), { x: x,\r\n                y: y });\r\n            tooltipMarkersGroup.addShape('marker', {\r\n                attrs: attrs,\r\n            });\r\n        }\r\n    };\r\n    Tooltip.prototype.renderCrosshairs = function (point, cfg) {\r\n        var crosshairsType = util_1.get(cfg, ['crosshairs', 'type'], 'x');\r\n        if (crosshairsType === 'x') {\r\n            if (this.yCrosshair) {\r\n                this.yCrosshair.hide();\r\n            }\r\n            this.renderXCrosshairs(point, cfg);\r\n        }\r\n        else if (crosshairsType === 'y') {\r\n            if (this.xCrosshair) {\r\n                this.xCrosshair.hide();\r\n            }\r\n            this.renderYCrosshairs(point, cfg);\r\n        }\r\n        else if (crosshairsType === 'xy') {\r\n            this.renderXCrosshairs(point, cfg);\r\n            this.renderYCrosshairs(point, cfg);\r\n        }\r\n    };\r\n    Tooltip.prototype.renderXCrosshairs = function (point, tooltipCfg) {\r\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\r\n        if (!coordinate_1.isPointInCoordinate(coordinate, point)) {\r\n            return;\r\n        }\r\n        var start;\r\n        var end;\r\n        if (coordinate.isRect) {\r\n            if (coordinate.isTransposed) {\r\n                start = {\r\n                    x: coordinate.start.x,\r\n                    y: point.y,\r\n                };\r\n                end = {\r\n                    x: coordinate.end.x,\r\n                    y: point.y,\r\n                };\r\n            }\r\n            else {\r\n                start = {\r\n                    x: point.x,\r\n                    y: coordinate.end.y,\r\n                };\r\n                end = {\r\n                    x: point.x,\r\n                    y: coordinate.start.y,\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            var angle = coordinate_1.getAngleByPoint(coordinate, point);\r\n            var center = coordinate.getCenter();\r\n            var radius = coordinate.getRadius();\r\n            end = graphics_1.polarToCartesian(center.x, center.y, radius, angle);\r\n            start = center;\r\n        }\r\n        var cfg = util_1.deepMix({\r\n            start: start,\r\n            end: end,\r\n            container: this.getTooltipCrosshairsGroup(),\r\n        }, util_1.get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('x', point, tooltipCfg));\r\n        delete cfg.type;\r\n        var xCrosshair = this.xCrosshair;\r\n        if (xCrosshair) {\r\n            xCrosshair.update(cfg);\r\n        }\r\n        else {\r\n            xCrosshair = new dependents_1.Crosshair.Line(cfg);\r\n            xCrosshair.init();\r\n        }\r\n        xCrosshair.render();\r\n        xCrosshair.show();\r\n        this.xCrosshair = xCrosshair;\r\n    };\r\n    Tooltip.prototype.renderYCrosshairs = function (point, tooltipCfg) {\r\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\r\n        if (!coordinate_1.isPointInCoordinate(coordinate, point)) {\r\n            return;\r\n        }\r\n        var cfg;\r\n        var type;\r\n        if (coordinate.isRect) {\r\n            var start = void 0;\r\n            var end = void 0;\r\n            if (coordinate.isTransposed) {\r\n                start = {\r\n                    x: point.x,\r\n                    y: coordinate.end.y,\r\n                };\r\n                end = {\r\n                    x: point.x,\r\n                    y: coordinate.start.y,\r\n                };\r\n            }\r\n            else {\r\n                start = {\r\n                    x: coordinate.start.x,\r\n                    y: point.y,\r\n                };\r\n                end = {\r\n                    x: coordinate.end.x,\r\n                    y: point.y,\r\n                };\r\n            }\r\n            cfg = {\r\n                start: start,\r\n                end: end,\r\n            };\r\n            type = 'Line';\r\n        }\r\n        else {\r\n            cfg = {\r\n                center: coordinate.getCenter(),\r\n                radius: coordinate_1.getDistanceToCenter(coordinate, point),\r\n                startAngle: coordinate.startAngle,\r\n                endAngle: coordinate.endAngle,\r\n            };\r\n            type = 'Circle';\r\n        }\r\n        cfg = util_1.deepMix({\r\n            container: this.getTooltipCrosshairsGroup(),\r\n        }, cfg, util_1.get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('y', point, tooltipCfg));\r\n        delete cfg.type;\r\n        var yCrosshair = this.yCrosshair;\r\n        if (yCrosshair) {\r\n            if ((coordinate.isRect && yCrosshair.get('type') === 'circle') ||\r\n                (!coordinate.isRect && yCrosshair.get('type') === 'line')) {\r\n                yCrosshair = new dependents_1.Crosshair[type](cfg);\r\n                yCrosshair.init();\r\n            }\r\n            else {\r\n                yCrosshair.update(cfg);\r\n            }\r\n        }\r\n        else {\r\n            yCrosshair = new dependents_1.Crosshair[type](cfg);\r\n            yCrosshair.init();\r\n        }\r\n        yCrosshair.render();\r\n        yCrosshair.show();\r\n        this.yCrosshair = yCrosshair;\r\n    };\r\n    Tooltip.prototype.getCrosshairsText = function (type, point, tooltipCfg) {\r\n        var textCfg = util_1.get(tooltipCfg, ['crosshairs', 'text']);\r\n        var follow = util_1.get(tooltipCfg, ['crosshairs', 'follow']);\r\n        var items = this.items;\r\n        if (textCfg) {\r\n            var view = this.getViewWithGeometry(this.view);\r\n            var firstItem = items[0];\r\n            var xScale = view.getXScale();\r\n            var yScale = view.getYScales()[0];\r\n            var xValue = void 0;\r\n            var yValue = void 0;\r\n            if (follow) {\r\n                var invertPoint = this.view.getCoordinate().invert(point);\r\n                xValue = xScale.invert(invertPoint.x);\r\n                yValue = yScale.invert(invertPoint.y);\r\n            }\r\n            else {\r\n                xValue = firstItem.data[xScale.field];\r\n                yValue = firstItem.data[yScale.field];\r\n            }\r\n            var content = type === 'x' ? xValue : yValue;\r\n            if (util_1.isFunction(textCfg)) {\r\n                textCfg = textCfg(type, content, items, point);\r\n            }\r\n            else {\r\n                textCfg.content = content;\r\n            }\r\n            return {\r\n                text: textCfg,\r\n            };\r\n        }\r\n    };\r\n    Tooltip.prototype.getGuideGroup = function () {\r\n        if (!this.guideGroup) {\r\n            var foregroundGroup = this.view.foregroundGroup;\r\n            this.guideGroup = foregroundGroup.addGroup({\r\n                name: 'tooltipGuide',\r\n                capture: false,\r\n            });\r\n        }\r\n        return this.guideGroup;\r\n    };\r\n    Tooltip.prototype.getTooltipMarkersGroup = function () {\r\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\r\n        if (tooltipMarkersGroup && !tooltipMarkersGroup.destroyed) {\r\n            tooltipMarkersGroup.clear();\r\n            tooltipMarkersGroup.show();\r\n        }\r\n        else {\r\n            tooltipMarkersGroup = this.getGuideGroup().addGroup({\r\n                name: 'tooltipMarkersGroup',\r\n            });\r\n            tooltipMarkersGroup.toFront();\r\n            this.tooltipMarkersGroup = tooltipMarkersGroup;\r\n        }\r\n        return tooltipMarkersGroup;\r\n    };\r\n    Tooltip.prototype.getTooltipCrosshairsGroup = function () {\r\n        var tooltipCrosshairsGroup = this.tooltipCrosshairsGroup;\r\n        if (!tooltipCrosshairsGroup) {\r\n            tooltipCrosshairsGroup = this.getGuideGroup().addGroup({\r\n                name: 'tooltipCrosshairsGroup',\r\n                capture: false,\r\n            });\r\n            tooltipCrosshairsGroup.toBack();\r\n            this.tooltipCrosshairsGroup = tooltipCrosshairsGroup;\r\n        }\r\n        return tooltipCrosshairsGroup;\r\n    };\r\n    Tooltip.prototype.getTooltipItemsByHitShape = function (geometry, point, title) {\r\n        var result = [];\r\n        var container = geometry.container;\r\n        var shape = container.getShape(point.x, point.y);\r\n        if (shape && shape.get('visible') && shape.get('origin')) {\r\n            var mappingData = shape.get('origin').mappingData;\r\n            var items = tooltip_1.getTooltipItems(mappingData, geometry, title);\r\n            if (items.length) {\r\n                result.push(items);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Tooltip.prototype.getTooltipItemsByFindData = function (geometry, point, title) {\r\n        var result = [];\r\n        var dataArray = geometry.dataArray;\r\n        geometry.sort(dataArray);\r\n        for (var _i = 0, dataArray_1 = dataArray; _i < dataArray_1.length; _i++) {\r\n            var data = dataArray_1[_i];\r\n            var record = tooltip_1.findDataByPoint(point, data, geometry);\r\n            if (record) {\r\n                var elementId = geometry.getElementId(record);\r\n                var element = geometry.elementsMap[elementId];\r\n                if (geometry.type === 'heatmap' || element.visible) {\r\n                    var items = tooltip_1.getTooltipItems(record, geometry, title);\r\n                    if (items.length) {\r\n                        result.push(items);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Tooltip.prototype.findItemsFromView = function (view, point) {\r\n        if (view.getOptions().tooltip === false) {\r\n            return [];\r\n        }\r\n        var result = [];\r\n        var geometries = view.geometries;\r\n        var _a = this.getTooltipCfg(), shared = _a.shared, title = _a.title;\r\n        for (var _i = 0, geometries_1 = geometries; _i < geometries_1.length; _i++) {\r\n            var geometry = geometries_1[_i];\r\n            if (geometry.visible && geometry.tooltipOption !== false) {\r\n                var geometryType = geometry.type;\r\n                var tooltipItems = void 0;\r\n                if (['point', 'edge', 'polygon'].includes(geometryType)) {\r\n                    tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\r\n                }\r\n                else if (['area', 'line', 'path', 'heatmap'].includes(geometryType)) {\r\n                    tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\r\n                }\r\n                else {\r\n                    if (shared !== false) {\r\n                        tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\r\n                    }\r\n                    else {\r\n                        tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\r\n                    }\r\n                }\r\n                if (tooltipItems.length) {\r\n                    result.push(tooltipItems);\r\n                }\r\n            }\r\n        }\r\n        for (var _b = 0, _c = view.views; _b < _c.length; _b++) {\r\n            var childView = _c[_b];\r\n            result = result.concat(this.findItemsFromView(childView, point));\r\n        }\r\n        return result;\r\n    };\r\n    Tooltip.prototype.getViewWithGeometry = function (view) {\r\n        var _this = this;\r\n        if (view.geometries.length) {\r\n            return view;\r\n        }\r\n        return util_1.find(view.views, function (childView) { return _this.getViewWithGeometry(childView); });\r\n    };\r\n    return Tooltip;\r\n}(base_1.Controller));\r\nexports.default = Tooltip;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\chart\\controller\\tooltip.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\lib\\chart\\controller\\tooltip.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,IAAI,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC/B,IAAI,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACnC,IAAI,YAAY,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAC/C,IAAI,YAAY,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;AACpD,IAAI,UAAU,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAChD,IAAI,SAAS,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAC9C,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAE/B,SAAS,IAAI,CAAC,KAAK;IACf,IAAI,SAAS,GAAG,EAAE,CAAC;IACnB,IAAI,OAAO,GAAG,UAAU,KAAK;QACzB,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;QACxB,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,OAAO;YACjD,OAAO,CAAC,OAAO,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK;gBAChC,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI;gBAC1B,OAAO,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK;gBAC5B,OAAO,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,EAAE;YACT,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACxB;IACL,CAAC,CAAC;IACF,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;QAC/C,OAAO,CAAC,KAAK,CAAC,CAAC;KAClB;IACD,OAAO,SAAS,CAAC;AACrB,CAAC;AAED,IAAI,OAAO,GAAiB,CAAC,UAAU,MAAM;IACzC,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACnC,SAAS,OAAO;QACZ,IAAI,KAAK,GAAG,MAAM,KAAK,IAAI,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC;QACrE,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;QACvB,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;QACvB,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,EAAE;QAC7C,GAAG,EAAE;YACD,OAAO,SAAS,CAAC;QACrB,CAAC;QACD,UAAU,EAAE,KAAK;QACjB,YAAY,EAAE,IAAI;KACrB,CAAC,CAAC;IACH,OAAO,CAAC,SAAS,CAAC,IAAI,GAAG,cAAc,CAAC,CAAC;IACzC,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG;QACvB,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC;QAC5C,IAAI,CAAC,SAAS,GAAG,MAAM,KAAK,KAAK,CAAC;IACtC,CAAC,CAAC;IAKF,OAAO,CAAC,SAAS,CAAC,WAAW,GAAG,UAAU,KAAK;QAC3C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YAEjB,OAAO;SACV;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YAEf,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,OAAO;SACV;QACD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,SAAS,GAAG;YACZ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACb,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SAChB,CAAC;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK;YACrD,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC;QAC5B,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAC/B,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,WAAW,GAAG,GAAG,CAAC,WAAW,EAAE,cAAc,GAAG,GAAG,CAAC,cAAc,EAAE,WAAW,GAAG,GAAG,CAAC,WAAW,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QAChJ,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,EAAE;YAExE,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,OAAO,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK;gBACvD,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC;YAC5B,IAAI,WAAW,EAAE;gBAEb,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBAEf,IAAI,CAAC,aAAa,EAAE,CAAC;iBACxB;gBACD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE;oBACpC,KAAK,EAAE,KAAK;oBACZ,KAAK,EAAE,KAAK;iBACf,EAAE,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACvB;YACD,IAAI,WAAW,EAAE;gBAEb,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;aAC5C;SACJ;aACI;YAED,IAAI,IAAI,CAAC,OAAO,IAAI,MAAM,EAAE;gBACxB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAC3B,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACvB;YACD,IAAI,IAAI,CAAC,mBAAmB,EAAE;gBAC1B,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;aACnC;SACJ;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,cAAc,EAAE;YAEhB,IAAI,wBAAwB,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;YAChF,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;SAC5E;IACL,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,WAAW,GAAG;QAC5B,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC;QACzC,IAAI,CAAC,MAAM,EAAE;YACT,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,OAAO;SACV;QAED,IAAI,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACnD,IAAI,mBAAmB,EAAE;YACrB,mBAAmB,CAAC,IAAI,EAAE,CAAC;SAC9B;QAED,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjC,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjC,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,IAAI,EAAE,CAAC;SACrB;QACD,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,IAAI,EAAE,CAAC;SACrB;QACD,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,OAAO,EAAE;YACT,OAAO,CAAC,IAAI,EAAE,CAAC;SAClB;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;QACnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC,CAAC;IAIF,OAAO,CAAC,SAAS,CAAC,WAAW,GAAG;QAC5B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,IAAI,CAAC,OAAO,EAAE;YAEd,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;SACjC;IACL,CAAC,CAAC;IAIF,OAAO,CAAC,SAAS,CAAC,aAAa,GAAG;QAC9B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAC/B,IAAI,IAAI,CAAC,OAAO,EAAE;YAEd,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SACxC;IACL,CAAC,CAAC;IAIF,OAAO,CAAC,SAAS,CAAC,eAAe,GAAG;QAChC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG;QACtB,IAAI,EAAE,GAAG,IAAI,EAAE,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,mBAAmB,GAAG,EAAE,CAAC,mBAAmB,CAAC;QAC1I,IAAI,OAAO,EAAE;YACT,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,EAAE,CAAC;SACnB;QACD,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,KAAK,EAAE,CAAC;SACtB;QACD,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,KAAK,EAAE,CAAC;SACtB;QACD,IAAI,mBAAmB,EAAE;YACrB,mBAAmB,CAAC,KAAK,EAAE,CAAC;SAC/B;IACL,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG;QACxB,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QACD,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;SAC7B;QACD,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;SAC7B;QACD,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAChC;QACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,aAAa,GAAG,UAAU,OAAO;QAC/C,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,EAAE;YAC1B,OAAO;SACV;QACD,IAAI,EAAE,GAAG,IAAI,EAAE,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,mBAAmB,GAAG,EAAE,CAAC,mBAAmB,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC;QAC1I,IAAI,OAAO,EAAE;YACT,IAAI,OAAO,EAAE;gBACT,OAAO,CAAC,IAAI,EAAE,CAAC;aAClB;YACD,IAAI,mBAAmB,EAAE;gBACrB,mBAAmB,CAAC,IAAI,EAAE,CAAC;aAC9B;YACD,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,EAAE,CAAC;aACrB;YACD,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,EAAE,CAAC;aACrB;SACJ;aACI;YACD,IAAI,OAAO,EAAE;gBACT,OAAO,CAAC,IAAI,EAAE,CAAC;aAClB;YACD,IAAI,mBAAmB,EAAE;gBACrB,mBAAmB,CAAC,IAAI,EAAE,CAAC;aAC9B;YACD,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,EAAE,CAAC;aACrB;YACD,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,EAAE,CAAC;aACrB;SACJ;QACD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,eAAe,GAAG,UAAU,KAAK;QAC/C,IAAI,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACrD,IAAI,KAAK,CAAC,MAAM,EAAE;YAEd,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC9B,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,OAAO,GAAG,KAAK,EAAE,EAAE,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;gBACzD,IAAI,OAAO,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;gBAC1B,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,SAAS,GAAG,OAAO,EAAE,EAAE,GAAG,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;oBAC/D,IAAI,IAAI,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;oBACzB,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;oBAC9C,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjD,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACpD;aACJ;YACD,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC;YAEzC,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACtC,IAAI,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBACxB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,OAAO,GAAG,KAAK,EAAE,EAAE,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;oBACzD,IAAI,KAAK,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;oBACxB,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/C,IAAI,SAAS,IAAI,GAAG,EAAE;wBAClB,QAAQ,GAAG,KAAK,CAAC;wBACjB,GAAG,GAAG,SAAS,CAAC;qBACnB;iBACJ;gBACD,KAAK,GAAG,CAAC,QAAQ,CAAC,CAAC;aACtB;YACD,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;SACtC;QACD,OAAO,EAAE,CAAC;IACd,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,cAAc,CAAC,CAAC;IAC3C,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG;QACvB,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAChC;IACL,CAAC,CAAC;IAEF,OAAO,CAAC,SAAS,CAAC,aAAa,GAAG;QAC9B,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrB,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC;QACvC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC5B,IAAI,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC;QAClE,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;QAC7H,OAAO,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE;YAC1C,OAAO,EAAE,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;SACrD,CAAC,CAAC;IACP,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,UAAU,KAAK;QACxC,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,aAAa,GAAG;QAC9B,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QACnC,IAAI,MAAM,GAAG;YACT,KAAK,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;YACrB,GAAG,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;SAC3D,CAAC;QACF,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAC/B,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QACnL,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,oBAAoB,GAAG,UAAU,KAAK,EAAE,MAAM;QAC5D,IAAI,mBAAmB,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;QACxD,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,OAAO,GAAG,KAAK,EAAE,EAAE,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACzD,IAAI,IAAI,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;YAC3B,IAAI,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC;gBAC1H,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACZ,mBAAmB,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBACnC,KAAK,EAAE,KAAK;aACf,CAAC,CAAC;SACN;IACL,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,KAAK,EAAE,GAAG;QACrD,IAAI,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;QAClE,IAAI,cAAc,KAAK,GAAG,EAAE;YACxB,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;aAC1B;YACD,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;SACtC;aACI,IAAI,cAAc,KAAK,GAAG,EAAE;YAC7B,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;aAC1B;YACD,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;SACtC;aACI,IAAI,cAAc,KAAK,IAAI,EAAE;YAC9B,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;YACnC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;SACtC;IACL,CAAC,CAAC;IAEF,OAAO,CAAC,SAAS,CAAC,iBAAiB,GAAG,UAAU,KAAK,EAAE,UAAU;QAC7D,IAAI,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,KAAK,CAAC,EAAE;YACtD,OAAO;SACV;QACD,IAAI,KAAK,CAAC;QACV,IAAI,GAAG,CAAC;QACR,IAAI,UAAU,CAAC,MAAM,EAAE;YACnB,IAAI,UAAU,CAAC,YAAY,EAAE;gBACzB,KAAK,GAAG;oBACJ,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;oBACrB,CAAC,EAAE,KAAK,CAAC,CAAC;iBACb,CAAC;gBACF,GAAG,GAAG;oBACF,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC;oBACnB,CAAC,EAAE,KAAK,CAAC,CAAC;iBACb,CAAC;aACL;iBACI;gBACD,KAAK,GAAG;oBACJ,CAAC,EAAE,KAAK,CAAC,CAAC;oBACV,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC;iBACtB,CAAC;gBACF,GAAG,GAAG;oBACF,CAAC,EAAE,KAAK,CAAC,CAAC;oBACV,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;iBACxB,CAAC;aACL;SACJ;aACI;YAED,IAAI,KAAK,GAAG,YAAY,CAAC,eAAe,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAC5D,IAAI,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;YACpC,IAAI,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;YACpC,GAAG,GAAG,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;YACrE,KAAK,GAAG,MAAM,CAAC;SAClB;QACD,IAAI,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC;YACrB,KAAK,EAAE,KAAK;YACZ,GAAG,EAAE,GAAG;YACR,SAAS,EAAE,IAAI,CAAC,yBAAyB,EAAE;SAC9C,EAAE,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,YAAY,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC;QAC7F,OAAO,GAAG,CAAC,IAAI,CAAC;QAChB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjC,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAC1B;aACI;YACD,UAAU,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAClD,UAAU,CAAC,IAAI,EAAE,CAAC;SACrB;QACD,UAAU,CAAC,MAAM,EAAE,CAAC;QACpB,UAAU,CAAC,IAAI,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACjC,CAAC,CAAC;IAEF,OAAO,CAAC,SAAS,CAAC,iBAAiB,GAAG,UAAU,KAAK,EAAE,UAAU;QAC7D,IAAI,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,KAAK,CAAC,EAAE;YACtD,OAAO;SACV;QACD,IAAI,GAAG,CAAC;QACR,IAAI,IAAI,CAAC;QACT,IAAI,UAAU,CAAC,MAAM,EAAE;YACnB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC;YACnB,IAAI,GAAG,GAAG,KAAK,CAAC,CAAC;YACjB,IAAI,UAAU,CAAC,YAAY,EAAE;gBACzB,KAAK,GAAG;oBACJ,CAAC,EAAE,KAAK,CAAC,CAAC;oBACV,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC;iBACtB,CAAC;gBACF,GAAG,GAAG;oBACF,CAAC,EAAE,KAAK,CAAC,CAAC;oBACV,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;iBACxB,CAAC;aACL;iBACI;gBACD,KAAK,GAAG;oBACJ,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;oBACrB,CAAC,EAAE,KAAK,CAAC,CAAC;iBACb,CAAC;gBACF,GAAG,GAAG;oBACF,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC;oBACnB,CAAC,EAAE,KAAK,CAAC,CAAC;iBACb,CAAC;aACL;YACD,GAAG,GAAG;gBACF,KAAK,EAAE,KAAK;gBACZ,GAAG,EAAE,GAAG;aACX,CAAC;YACF,IAAI,GAAG,MAAM,CAAC;SACjB;aACI;YAED,GAAG,GAAG;gBACF,MAAM,EAAE,UAAU,CAAC,SAAS,EAAE;gBAE9B,MAAM,EAAE,YAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,KAAK,CAAC;gBAC3D,UAAU,EAAE,UAAU,CAAC,UAAU;gBACjC,QAAQ,EAAE,UAAU,CAAC,QAAQ;aAChC,CAAC;YACF,IAAI,GAAG,QAAQ,CAAC;SACnB;QACD,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC;YACjB,SAAS,EAAE,IAAI,CAAC,yBAAyB,EAAE;SAC9C,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,YAAY,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC;QAClG,OAAO,GAAG,CAAC,IAAI,CAAC;QAChB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjC,IAAI,UAAU,EAAE;YAEZ,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,QAAQ,CAAC;gBAC1D,CAAC,CAAC,UAAU,CAAC,MAAM,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,MAAM,CAAC,EAAE;gBAC3D,UAAU,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;gBACnD,UAAU,CAAC,IAAI,EAAE,CAAC;aACrB;iBACI;gBACD,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aAC1B;SACJ;aACI;YACD,UAAU,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YACnD,UAAU,CAAC,IAAI,EAAE,CAAC;SACrB;QACD,UAAU,CAAC,MAAM,EAAE,CAAC;QACpB,UAAU,CAAC,IAAI,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACjC,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,iBAAiB,GAAG,UAAU,IAAI,EAAE,KAAK,EAAE,UAAU;QACnE,IAAI,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC,CAAC;QAC7D,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAC;QAC9D,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,IAAI,OAAO,EAAE;YACT,IAAI,IAAI,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAE/C,IAAI,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAC9B,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,MAAM,GAAG,KAAK,CAAC,CAAC;YACpB,IAAI,MAAM,GAAG,KAAK,CAAC,CAAC;YACpB,IAAI,MAAM,EAAE;gBAER,IAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAC1D,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBACtC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aACzC;iBACI;gBACD,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBACtC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aACzC;YACD,IAAI,OAAO,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;YAC7C,IAAI,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;gBAC5B,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aAClD;iBACI;gBACD,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;aAC7B;YACD,OAAO;gBACH,IAAI,EAAE,OAAO;aAChB,CAAC;SACL;IACL,CAAC,CAAC;IAEF,OAAO,CAAC,SAAS,CAAC,aAAa,GAAG;QAC9B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,IAAI,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;YAChD,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC,QAAQ,CAAC;gBACvC,IAAI,EAAE,cAAc;gBACpB,OAAO,EAAE,KAAK;aACjB,CAAC,CAAC;SACN;QACD,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC,CAAC;IAEF,OAAO,CAAC,SAAS,CAAC,sBAAsB,GAAG;QACvC,IAAI,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACnD,IAAI,mBAAmB,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;YACvD,mBAAmB,CAAC,KAAK,EAAE,CAAC;YAC5B,mBAAmB,CAAC,IAAI,EAAE,CAAC;SAC9B;aACI;YACD,mBAAmB,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,QAAQ,CAAC;gBAChD,IAAI,EAAE,qBAAqB;aAC9B,CAAC,CAAC;YACH,mBAAmB,CAAC,OAAO,EAAE,CAAC;YAC9B,IAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;SAClD;QACD,OAAO,mBAAmB,CAAC;IAC/B,CAAC,CAAC;IAEF,OAAO,CAAC,SAAS,CAAC,yBAAyB,GAAG;QAC1C,IAAI,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC;QACzD,IAAI,CAAC,sBAAsB,EAAE;YACzB,sBAAsB,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,QAAQ,CAAC;gBACnD,IAAI,EAAE,wBAAwB;gBAC9B,OAAO,EAAE,KAAK;aACjB,CAAC,CAAC;YACH,sBAAsB,CAAC,MAAM,EAAE,CAAC;YAChC,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAC;SACxD;QACD,OAAO,sBAAsB,CAAC;IAClC,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,yBAAyB,GAAG,UAAU,QAAQ,EAAE,KAAK,EAAE,KAAK;QAC1E,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;QACnC,IAAI,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACjD,IAAI,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YACtD,IAAI,WAAW,GAAG,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC;YAClD,IAAI,KAAK,GAAG,SAAS,CAAC,eAAe,CAAC,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;YACpE,IAAI,KAAK,CAAC,MAAM,EAAE;gBACd,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACtB;SACJ;QACD,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,yBAAyB,GAAG,UAAU,QAAQ,EAAE,KAAK,EAAE,KAAK;QAC1E,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;QACnC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACzB,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,WAAW,GAAG,SAAS,EAAE,EAAE,GAAG,WAAW,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACrE,IAAI,IAAI,GAAG,WAAW,CAAC,EAAE,CAAC,CAAC;YAC3B,IAAI,MAAM,GAAG,SAAS,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;YAC9D,IAAI,MAAM,EAAE;gBACR,IAAI,SAAS,GAAG,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAC9C,IAAI,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;gBAC9C,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,IAAI,OAAO,CAAC,OAAO,EAAE;oBAGhD,IAAI,KAAK,GAAG,SAAS,CAAC,eAAe,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;oBAC/D,IAAI,KAAK,CAAC,MAAM,EAAE;wBACd,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACtB;iBACJ;aACJ;SACJ;QACD,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,iBAAiB,GAAG,UAAU,IAAI,EAAE,KAAK;QACvD,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,KAAK,KAAK,EAAE;YAErC,OAAO,EAAE,CAAC;SACb;QACD,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACjC,IAAI,EAAE,GAAG,IAAI,CAAC,aAAa,EAAE,EAAE,MAAM,GAAG,EAAE,CAAC,MAAM,EAAE,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;QACpE,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,YAAY,GAAG,UAAU,EAAE,EAAE,GAAG,YAAY,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACxE,IAAI,QAAQ,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC;YAChC,IAAI,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,aAAa,KAAK,KAAK,EAAE;gBAEtD,IAAI,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC;gBACjC,IAAI,YAAY,GAAG,KAAK,CAAC,CAAC;gBAC1B,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;oBAErD,YAAY,GAAG,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;iBACzE;qBACI,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;oBAEjE,YAAY,GAAG,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;iBACzE;qBACI;oBACD,IAAI,MAAM,KAAK,KAAK,EAAE;wBAClB,YAAY,GAAG,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBACzE;yBACI;wBACD,YAAY,GAAG,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;qBACzE;iBACJ;gBACD,IAAI,YAAY,CAAC,MAAM,EAAE;oBAErB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAC7B;aACJ;SACJ;QAED,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACpD,IAAI,SAAS,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YACvB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;SACpE;QACD,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC;IAGF,OAAO,CAAC,SAAS,CAAC,mBAAmB,GAAG,UAAU,IAAI;QAClD,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YACxB,OAAO,IAAI,CAAC;SACf;QACD,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,SAAS,IAAI,OAAO,KAAK,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1G,CAAC,CAAC;IACF,OAAO,OAAO,CAAC;AACnB,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;AACtB,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"@antv/util\");\nvar dependents_1 = require(\"../../dependents\");\nvar coordinate_1 = require(\"../../util/coordinate\");\nvar graphics_1 = require(\"../../util/graphics\");\nvar tooltip_1 = require(\"../../util/tooltip\");\nvar base_1 = require(\"./base\");\n// Filter duplicates, use `name`, `color`, `value` and `title` property values as condition\nfunction uniq(items) {\n    var uniqItems = [];\n    var _loop_1 = function (index) {\n        var item = items[index];\n        var result = util_1.find(uniqItems, function (subItem) {\n            return (subItem.color === item.color &&\n                subItem.name === item.name &&\n                subItem.value === item.value &&\n                subItem.title === item.title);\n        });\n        if (!result) {\n            uniqItems.push(item);\n        }\n    };\n    for (var index = 0; index < items.length; index++) {\n        _loop_1(index);\n    }\n    return uniqItems;\n}\n/** @ignore */\nvar Tooltip = /** @class */ (function (_super) {\n    tslib_1.__extends(Tooltip, _super);\n    function Tooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isLocked = false;\n        _this.isVisible = true;\n        return _this;\n    }\n    Object.defineProperty(Tooltip.prototype, \"name\", {\n        get: function () {\n            return 'tooltip';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Tooltip.prototype.init = function () { };\n    Tooltip.prototype.render = function () {\n        var option = this.view.getOptions().tooltip;\n        this.isVisible = option !== false;\n    };\n    /**\n     * Shows tooltip\n     * @param point\n     */\n    Tooltip.prototype.showTooltip = function (point) {\n        this.point = point;\n        if (!this.isVisible) {\n            // 如果设置 tooltip(false) 则始终不显示\n            return;\n        }\n        var view = this.view;\n        var items = this.getTooltipItems(point);\n        if (!items.length) {\n            // 无内容则不展示，同时 tooltip 需要隐藏\n            this.hideTooltip();\n            return;\n        }\n        var title = this.getTitle(items);\n        var dataPoint = {\n            x: items[0].x,\n            y: items[0].y,\n        }; // 数据点位置\n        view.emit('tooltip:show', tslib_1.__assign({ items: items,\n            title: title }, point));\n        var cfg = this.getTooltipCfg();\n        var follow = cfg.follow, showMarkers = cfg.showMarkers, showCrosshairs = cfg.showCrosshairs, showContent = cfg.showContent, marker = cfg.marker;\n        var lastItems = this.items;\n        var lastTitle = this.title;\n        if (!util_1.isEqual(lastTitle, title) || !util_1.isEqual(lastItems, items)) {\n            // 内容发生变化了更新 tooltip\n            view.emit('tooltip:change', tslib_1.__assign({ items: items,\n                title: title }, point));\n            if (showContent) {\n                // 展示 tooltip 内容框才渲染 tooltip\n                if (!this.tooltip) {\n                    // 延迟生成\n                    this.renderTooltip();\n                }\n                this.tooltip.update(util_1.mix({}, cfg, {\n                    items: items,\n                    title: title,\n                }, follow ? point : {}));\n                this.tooltip.show();\n            }\n            if (showMarkers) {\n                // 展示 tooltipMarkers，tooltipMarkers 跟随数据\n                this.renderTooltipMarkers(items, marker);\n            }\n        }\n        else {\n            // 内容未发生变化，则更新位置\n            if (this.tooltip && follow) {\n                this.tooltip.update(point);\n                this.tooltip.show(); // tooltip 有可能被隐藏，需要保证显示状态\n            }\n            if (this.tooltipMarkersGroup) {\n                this.tooltipMarkersGroup.show();\n            }\n        }\n        this.items = items;\n        this.title = title;\n        if (showCrosshairs) {\n            // 展示 tooltip 辅助线\n            var isCrosshairsFollowCursor = util_1.get(cfg, ['crosshairs', 'follow'], false); // 辅助线是否要跟随鼠标\n            this.renderCrosshairs(isCrosshairsFollowCursor ? point : dataPoint, cfg);\n        }\n    };\n    Tooltip.prototype.hideTooltip = function () {\n        var follow = this.getTooltipCfg().follow;\n        if (!follow) {\n            this.point = null;\n            return;\n        }\n        // hide the tooltipMarkers\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\n        if (tooltipMarkersGroup) {\n            tooltipMarkersGroup.hide();\n        }\n        // hide crosshairs\n        var xCrosshair = this.xCrosshair;\n        var yCrosshair = this.yCrosshair;\n        if (xCrosshair) {\n            xCrosshair.hide();\n        }\n        if (yCrosshair) {\n            yCrosshair.hide();\n        }\n        var tooltip = this.tooltip;\n        if (tooltip) {\n            tooltip.hide();\n        }\n        this.view.emit('tooltip:hide', {});\n        this.point = null;\n    };\n    /**\n     * lockTooltip\n     */\n    Tooltip.prototype.lockTooltip = function () {\n        this.isLocked = true;\n        if (this.tooltip) {\n            // tooltip contianer 可捕获事件\n            this.tooltip.setCapture(true);\n        }\n    };\n    /**\n     * unlockTooltip\n     */\n    Tooltip.prototype.unlockTooltip = function () {\n        this.isLocked = false;\n        var cfg = this.getTooltipCfg();\n        if (this.tooltip) {\n            // 重置 capture 属性\n            this.tooltip.setCapture(cfg.capture);\n        }\n    };\n    /**\n     * isTooltipLocked\n     */\n    Tooltip.prototype.isTooltipLocked = function () {\n        return this.isLocked;\n    };\n    Tooltip.prototype.clear = function () {\n        var _a = this, tooltip = _a.tooltip, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair, tooltipMarkersGroup = _a.tooltipMarkersGroup;\n        if (tooltip) {\n            tooltip.hide();\n            tooltip.clear();\n        }\n        if (xCrosshair) {\n            xCrosshair.clear();\n        }\n        if (yCrosshair) {\n            yCrosshair.clear();\n        }\n        if (tooltipMarkersGroup) {\n            tooltipMarkersGroup.clear();\n        }\n    };\n    Tooltip.prototype.destroy = function () {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n        if (this.xCrosshair) {\n            this.xCrosshair.destroy();\n        }\n        if (this.yCrosshair) {\n            this.yCrosshair.destroy();\n        }\n        if (this.guideGroup) {\n            this.guideGroup.remove(true);\n        }\n        this.items = null;\n        this.title = null;\n        this.tooltipMarkersGroup = null;\n        this.tooltipCrosshairsGroup = null;\n        this.xCrosshair = null;\n        this.yCrosshair = null;\n        this.tooltip = null;\n        this.guideGroup = null;\n        this.isLocked = false;\n        this.point = null;\n    };\n    Tooltip.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        var _a = this, tooltip = _a.tooltip, tooltipMarkersGroup = _a.tooltipMarkersGroup, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair;\n        if (visible) {\n            if (tooltip) {\n                tooltip.show();\n            }\n            if (tooltipMarkersGroup) {\n                tooltipMarkersGroup.show();\n            }\n            if (xCrosshair) {\n                xCrosshair.show();\n            }\n            if (yCrosshair) {\n                yCrosshair.show();\n            }\n        }\n        else {\n            if (tooltip) {\n                tooltip.hide();\n            }\n            if (tooltipMarkersGroup) {\n                tooltipMarkersGroup.hide();\n            }\n            if (xCrosshair) {\n                xCrosshair.hide();\n            }\n            if (yCrosshair) {\n                yCrosshair.hide();\n            }\n        }\n        this.visible = visible;\n    };\n    Tooltip.prototype.getTooltipItems = function (point) {\n        var items = this.findItemsFromView(this.view, point);\n        if (items.length) {\n            // 三层\n            items = util_1.flatten(items);\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var itemArr = items_1[_i];\n                for (var _a = 0, itemArr_1 = itemArr; _a < itemArr_1.length; _a++) {\n                    var item = itemArr_1[_a];\n                    var _b = item.mappingData, x = _b.x, y = _b.y;\n                    item.x = util_1.isArray(x) ? x[x.length - 1] : x;\n                    item.y = util_1.isArray(y) ? y[y.length - 1] : y;\n                }\n            }\n            var shared = this.getTooltipCfg().shared;\n            // shared: false 代表只显示当前拾取到的 shape 的数据，但是一个 view 会有多个 Geometry，所以有可能会拾取到多个 shape\n            if (shared === false && items.length > 1) {\n                var snapItem = items[0];\n                var min = Math.abs(point.y - snapItem[0].y);\n                for (var _c = 0, items_2 = items; _c < items_2.length; _c++) {\n                    var aItem = items_2[_c];\n                    var yDistance = Math.abs(point.y - aItem[0].y);\n                    if (yDistance <= min) {\n                        snapItem = aItem;\n                        min = yDistance;\n                    }\n                }\n                items = [snapItem];\n            }\n            return uniq(util_1.flatten(items));\n        }\n        return [];\n    };\n    Tooltip.prototype.layout = function () { };\n    Tooltip.prototype.update = function () {\n        if (this.point) {\n            this.showTooltip(this.point);\n        }\n    };\n    // 获取 tooltip 配置，因为用户可能会通过 view.tooltip() 重新配置 tooltip，所以就不做缓存，每次直接读取\n    Tooltip.prototype.getTooltipCfg = function () {\n        var view = this.view;\n        var option = view.getOptions().tooltip;\n        var theme = view.getTheme();\n        var defaultCfg = util_1.get(theme, ['components', 'tooltip'], {});\n        var enterable = util_1.isUndefined(util_1.get(option, 'enterable')) ? defaultCfg.enterable : util_1.get(option, 'enterable');\n        return util_1.deepMix({}, defaultCfg, option, {\n            capture: enterable || this.isLocked ? true : false,\n        });\n    };\n    Tooltip.prototype.getTitle = function (items) {\n        var title = items[0].title || items[0].name;\n        this.title = title;\n        return title;\n    };\n    Tooltip.prototype.renderTooltip = function () {\n        var canvas = this.view.getCanvas();\n        var region = {\n            start: { x: 0, y: 0 },\n            end: { x: canvas.get('width'), y: canvas.get('height') },\n        };\n        var cfg = this.getTooltipCfg();\n        var tooltip = new dependents_1.HtmlTooltip(tslib_1.__assign(tslib_1.__assign({ parent: canvas.get('el').parentNode, region: region }, cfg), { visible: false, crosshairs: null }));\n        tooltip.init();\n        this.tooltip = tooltip;\n    };\n    Tooltip.prototype.renderTooltipMarkers = function (items, marker) {\n        var tooltipMarkersGroup = this.getTooltipMarkersGroup();\n        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n            var item = items_3[_i];\n            var x = item.x, y = item.y;\n            var attrs = tslib_1.__assign(tslib_1.__assign({ fill: item.color, symbol: 'circle', shadowColor: item.color }, marker), { x: x,\n                y: y });\n            tooltipMarkersGroup.addShape('marker', {\n                attrs: attrs,\n            });\n        }\n    };\n    Tooltip.prototype.renderCrosshairs = function (point, cfg) {\n        var crosshairsType = util_1.get(cfg, ['crosshairs', 'type'], 'x'); // 默认展示 x 轴上的辅助线\n        if (crosshairsType === 'x') {\n            if (this.yCrosshair) {\n                this.yCrosshair.hide();\n            }\n            this.renderXCrosshairs(point, cfg);\n        }\n        else if (crosshairsType === 'y') {\n            if (this.xCrosshair) {\n                this.xCrosshair.hide();\n            }\n            this.renderYCrosshairs(point, cfg);\n        }\n        else if (crosshairsType === 'xy') {\n            this.renderXCrosshairs(point, cfg);\n            this.renderYCrosshairs(point, cfg);\n        }\n    };\n    // 渲染 x 轴上的 tooltip 辅助线\n    Tooltip.prototype.renderXCrosshairs = function (point, tooltipCfg) {\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n        if (!coordinate_1.isPointInCoordinate(coordinate, point)) {\n            return;\n        }\n        var start;\n        var end;\n        if (coordinate.isRect) {\n            if (coordinate.isTransposed) {\n                start = {\n                    x: coordinate.start.x,\n                    y: point.y,\n                };\n                end = {\n                    x: coordinate.end.x,\n                    y: point.y,\n                };\n            }\n            else {\n                start = {\n                    x: point.x,\n                    y: coordinate.end.y,\n                };\n                end = {\n                    x: point.x,\n                    y: coordinate.start.y,\n                };\n            }\n        }\n        else {\n            // 极坐标下 x 轴上的 crosshairs 表现为半径\n            var angle = coordinate_1.getAngleByPoint(coordinate, point);\n            var center = coordinate.getCenter();\n            var radius = coordinate.getRadius();\n            end = graphics_1.polarToCartesian(center.x, center.y, radius, angle);\n            start = center;\n        }\n        var cfg = util_1.deepMix({\n            start: start,\n            end: end,\n            container: this.getTooltipCrosshairsGroup(),\n        }, util_1.get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('x', point, tooltipCfg));\n        delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n        var xCrosshair = this.xCrosshair;\n        if (xCrosshair) {\n            xCrosshair.update(cfg);\n        }\n        else {\n            xCrosshair = new dependents_1.Crosshair.Line(cfg);\n            xCrosshair.init();\n        }\n        xCrosshair.render();\n        xCrosshair.show();\n        this.xCrosshair = xCrosshair;\n    };\n    // 渲染 y 轴上的辅助线\n    Tooltip.prototype.renderYCrosshairs = function (point, tooltipCfg) {\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n        if (!coordinate_1.isPointInCoordinate(coordinate, point)) {\n            return;\n        }\n        var cfg;\n        var type;\n        if (coordinate.isRect) {\n            var start = void 0;\n            var end = void 0;\n            if (coordinate.isTransposed) {\n                start = {\n                    x: point.x,\n                    y: coordinate.end.y,\n                };\n                end = {\n                    x: point.x,\n                    y: coordinate.start.y,\n                };\n            }\n            else {\n                start = {\n                    x: coordinate.start.x,\n                    y: point.y,\n                };\n                end = {\n                    x: coordinate.end.x,\n                    y: point.y,\n                };\n            }\n            cfg = {\n                start: start,\n                end: end,\n            };\n            type = 'Line';\n        }\n        else {\n            // 极坐标下 y 轴上的 crosshairs 表现为圆弧\n            cfg = {\n                center: coordinate.getCenter(),\n                // @ts-ignore\n                radius: coordinate_1.getDistanceToCenter(coordinate, point),\n                startAngle: coordinate.startAngle,\n                endAngle: coordinate.endAngle,\n            };\n            type = 'Circle';\n        }\n        cfg = util_1.deepMix({\n            container: this.getTooltipCrosshairsGroup(),\n        }, cfg, util_1.get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('y', point, tooltipCfg));\n        delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n        var yCrosshair = this.yCrosshair;\n        if (yCrosshair) {\n            // 如果坐标系发生直角坐标系与极坐标的切换操作\n            if ((coordinate.isRect && yCrosshair.get('type') === 'circle') ||\n                (!coordinate.isRect && yCrosshair.get('type') === 'line')) {\n                yCrosshair = new dependents_1.Crosshair[type](cfg);\n                yCrosshair.init();\n            }\n            else {\n                yCrosshair.update(cfg);\n            }\n        }\n        else {\n            yCrosshair = new dependents_1.Crosshair[type](cfg);\n            yCrosshair.init();\n        }\n        yCrosshair.render();\n        yCrosshair.show();\n        this.yCrosshair = yCrosshair;\n    };\n    Tooltip.prototype.getCrosshairsText = function (type, point, tooltipCfg) {\n        var textCfg = util_1.get(tooltipCfg, ['crosshairs', 'text']);\n        var follow = util_1.get(tooltipCfg, ['crosshairs', 'follow']);\n        var items = this.items;\n        if (textCfg) {\n            var view = this.getViewWithGeometry(this.view);\n            // 需要展示文本\n            var firstItem = items[0];\n            var xScale = view.getXScale();\n            var yScale = view.getYScales()[0];\n            var xValue = void 0;\n            var yValue = void 0;\n            if (follow) {\n                // 如果需要跟随鼠标移动，就需要将当前鼠标坐标点转换为对应的数值\n                var invertPoint = this.view.getCoordinate().invert(point);\n                xValue = xScale.invert(invertPoint.x); // 转换为原始值\n                yValue = yScale.invert(invertPoint.y); // 转换为原始值\n            }\n            else {\n                xValue = firstItem.data[xScale.field];\n                yValue = firstItem.data[yScale.field];\n            }\n            var content = type === 'x' ? xValue : yValue;\n            if (util_1.isFunction(textCfg)) {\n                textCfg = textCfg(type, content, items, point);\n            }\n            else {\n                textCfg.content = content;\n            }\n            return {\n                text: textCfg,\n            };\n        }\n    };\n    // 获取存储 tooltipMarkers 和 crosshairs 的容器\n    Tooltip.prototype.getGuideGroup = function () {\n        if (!this.guideGroup) {\n            var foregroundGroup = this.view.foregroundGroup;\n            this.guideGroup = foregroundGroup.addGroup({\n                name: 'tooltipGuide',\n                capture: false,\n            });\n        }\n        return this.guideGroup;\n    };\n    // 获取 tooltipMarkers 存储的容器\n    Tooltip.prototype.getTooltipMarkersGroup = function () {\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\n        if (tooltipMarkersGroup && !tooltipMarkersGroup.destroyed) {\n            tooltipMarkersGroup.clear();\n            tooltipMarkersGroup.show();\n        }\n        else {\n            tooltipMarkersGroup = this.getGuideGroup().addGroup({\n                name: 'tooltipMarkersGroup',\n            });\n            tooltipMarkersGroup.toFront();\n            this.tooltipMarkersGroup = tooltipMarkersGroup;\n        }\n        return tooltipMarkersGroup;\n    };\n    // 获取 tooltip crosshairs 存储的容器\n    Tooltip.prototype.getTooltipCrosshairsGroup = function () {\n        var tooltipCrosshairsGroup = this.tooltipCrosshairsGroup;\n        if (!tooltipCrosshairsGroup) {\n            tooltipCrosshairsGroup = this.getGuideGroup().addGroup({\n                name: 'tooltipCrosshairsGroup',\n                capture: false,\n            });\n            tooltipCrosshairsGroup.toBack();\n            this.tooltipCrosshairsGroup = tooltipCrosshairsGroup;\n        }\n        return tooltipCrosshairsGroup;\n    };\n    Tooltip.prototype.getTooltipItemsByHitShape = function (geometry, point, title) {\n        var result = [];\n        var container = geometry.container;\n        var shape = container.getShape(point.x, point.y);\n        if (shape && shape.get('visible') && shape.get('origin')) {\n            var mappingData = shape.get('origin').mappingData;\n            var items = tooltip_1.getTooltipItems(mappingData, geometry, title);\n            if (items.length) {\n                result.push(items);\n            }\n        }\n        return result;\n    };\n    Tooltip.prototype.getTooltipItemsByFindData = function (geometry, point, title) {\n        var result = [];\n        var dataArray = geometry.dataArray;\n        geometry.sort(dataArray); // 先进行排序，便于 tooltip 查找\n        for (var _i = 0, dataArray_1 = dataArray; _i < dataArray_1.length; _i++) {\n            var data = dataArray_1[_i];\n            var record = tooltip_1.findDataByPoint(point, data, geometry);\n            if (record) {\n                var elementId = geometry.getElementId(record);\n                var element = geometry.elementsMap[elementId];\n                if (geometry.type === 'heatmap' || element.visible) {\n                    // Heatmap 没有 Element\n                    // 如果图形元素隐藏了，怎不再 tooltip 上展示相关数据\n                    var items = tooltip_1.getTooltipItems(record, geometry, title);\n                    if (items.length) {\n                        result.push(items);\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    Tooltip.prototype.findItemsFromView = function (view, point) {\n        if (view.getOptions().tooltip === false) {\n            // 如果 view 关闭了 tooltip\n            return [];\n        }\n        var result = [];\n        // 先从 view 本身查找\n        var geometries = view.geometries;\n        var _a = this.getTooltipCfg(), shared = _a.shared, title = _a.title;\n        for (var _i = 0, geometries_1 = geometries; _i < geometries_1.length; _i++) {\n            var geometry = geometries_1[_i];\n            if (geometry.visible && geometry.tooltipOption !== false) {\n                // geometry 可见同时未关闭 tooltip\n                var geometryType = geometry.type;\n                var tooltipItems = void 0;\n                if (['point', 'edge', 'polygon'].includes(geometryType)) {\n                    // 始终通过图形拾取\n                    tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\n                }\n                else if (['area', 'line', 'path', 'heatmap'].includes(geometryType)) {\n                    // 如果是 'area', 'line', 'path'，始终通过数据查找方法查找 tooltip\n                    tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\n                }\n                else {\n                    if (shared !== false) {\n                        tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\n                    }\n                    else {\n                        tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\n                    }\n                }\n                if (tooltipItems.length) {\n                    // geometry 有可能会有多个 item，因为用户可以设置 geometry.tooltip('x*y*z')\n                    result.push(tooltipItems);\n                }\n            }\n        }\n        // 递归查找，并合并结果\n        for (var _b = 0, _c = view.views; _b < _c.length; _b++) {\n            var childView = _c[_b];\n            result = result.concat(this.findItemsFromView(childView, point));\n        }\n        return result;\n    };\n    // FIXME: hack 方法\n    // 因为 tooltip 的交互是挂载在 Chart 上，所以当chart 上没有绘制 Geometry 的时候，就查找不到数据，并且绘图区域同子 View 的区域不同\n    Tooltip.prototype.getViewWithGeometry = function (view) {\n        var _this = this;\n        if (view.geometries.length) {\n            return view;\n        }\n        return util_1.find(view.views, function (childView) { return _this.getViewWithGeometry(childView); });\n    };\n    return Tooltip;\n}(base_1.Controller));\nexports.default = Tooltip;\n//# sourceMappingURL=tooltip.js.map"]}]}