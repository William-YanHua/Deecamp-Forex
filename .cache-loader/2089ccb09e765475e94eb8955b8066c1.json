{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\geometry\\interval.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\geometry\\interval.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { get } from '@antv/util';\r\nimport { getXDimensionLength } from '../util/coordinate';\r\nimport Geometry from './base';\r\nimport './shape/interval';\r\nimport { getDefaultSize } from './util/shape-size';\r\nvar Interval = (function (_super) {\r\n    __extends(Interval, _super);\r\n    function Interval() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.type = 'interval';\r\n        _this.shapeType = 'interval';\r\n        _this.generatePoints = true;\r\n        return _this;\r\n    }\r\n    Interval.prototype.createShapePointsCfg = function (obj) {\r\n        var cfg = _super.prototype.createShapePointsCfg.call(this, obj);\r\n        var size;\r\n        var sizeAttr = this.getAttribute('size');\r\n        if (sizeAttr) {\r\n            size = this.getAttributeValues(sizeAttr, obj)[0];\r\n            var coordinate = this.coordinate;\r\n            var coordinateWidth = getXDimensionLength(coordinate);\r\n            size = size / coordinateWidth;\r\n        }\r\n        else {\r\n            if (!this.defaultSize) {\r\n                this.defaultSize = getDefaultSize(this);\r\n            }\r\n            size = this.defaultSize;\r\n        }\r\n        cfg.size = size;\r\n        return cfg;\r\n    };\r\n    Interval.prototype.adjustScale = function () {\r\n        _super.prototype.adjustScale.call(this);\r\n        var yScale = this.getYScale();\r\n        if (this.coordinate.type === 'theta') {\r\n            yScale.change({\r\n                nice: false,\r\n                min: 0,\r\n                max: Math.max(Math.max.apply(null, yScale.values), yScale.max),\r\n            });\r\n        }\r\n        else {\r\n            var scaleDefs = this.scaleDefs;\r\n            var field = yScale.field, min = yScale.min, max = yScale.max, type = yScale.type;\r\n            if (type !== 'time') {\r\n                if (min > 0 && !get(scaleDefs, [field, 'min'])) {\r\n                    yScale.change({\r\n                        min: 0,\r\n                    });\r\n                }\r\n                if (max <= 0 && !get(scaleDefs, [field, 'max'])) {\r\n                    yScale.change({\r\n                        max: 0,\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Interval;\r\n}(Geometry));\r\nexport default Interval;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\geometry\\interval.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\geometry\\interval.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\nimport './shape/interval';\nimport { getDefaultSize } from './util/shape-size';\n/**\n * Interval 几何标记。\n * 用于绘制柱状图、饼图、条形图、玫瑰图等。\n */\nvar Interval = /** @class */ (function (_super) {\n    __extends(Interval, _super);\n    function Interval() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'interval';\n        _this.shapeType = 'interval';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取每条数据的 Shape 绘制信息\n     * @param obj 经过分组 -> 数字化 -> adjust 调整后的数据记录\n     * @returns\n     */\n    Interval.prototype.createShapePointsCfg = function (obj) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, obj);\n        // 计算每个 shape 的 size\n        var size;\n        var sizeAttr = this.getAttribute('size');\n        if (sizeAttr) {\n            size = this.getAttributeValues(sizeAttr, obj)[0];\n            // 归一化\n            var coordinate = this.coordinate;\n            var coordinateWidth = getXDimensionLength(coordinate);\n            size = size / coordinateWidth;\n        }\n        else {\n            if (!this.defaultSize) {\n                this.defaultSize = getDefaultSize(this);\n            }\n            size = this.defaultSize;\n        }\n        cfg.size = size;\n        return cfg;\n    };\n    /**\n     * 调整 y 轴的 scale 范围。\n     * 对于 Y 轴为数值轴柱状图，默认从 0 开始 生长。\n     */\n    Interval.prototype.adjustScale = function () {\n        _super.prototype.adjustScale.call(this);\n        var yScale = this.getYScale();\n        // 特殊逻辑：饼图需要填充满整个空间\n        if (this.coordinate.type === 'theta') {\n            yScale.change({\n                nice: false,\n                min: 0,\n                // 发生过 stack 调整，yScale 的 max 被调整过，this.updateStackRange()\n                max: Math.max(Math.max.apply(null, yScale.values), yScale.max),\n            });\n        }\n        else {\n            // 柱状图数值轴默认从 0 开始\n            var scaleDefs = this.scaleDefs;\n            var field = yScale.field, min = yScale.min, max = yScale.max, type = yScale.type;\n            if (type !== 'time') {\n                // time 类型不做调整\n                // 柱状图的 Y 轴要从 0 开始生长，但是如果用户设置了则以用户的为准\n                if (min > 0 && !get(scaleDefs, [field, 'min'])) {\n                    yScale.change({\n                        min: 0,\n                    });\n                }\n                // 柱当柱状图全为负值时也需要从 0 开始生长，但是如果用户设置了则以用户的为准\n                if (max <= 0 && !get(scaleDefs, [field, 'max'])) {\n                    yScale.change({\n                        max: 0,\n                    });\n                }\n            }\n        }\n    };\n    return Interval;\n}(Geometry));\nexport default Interval;\n//# sourceMappingURL=interval.js.map"]}]}