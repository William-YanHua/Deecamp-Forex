{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\chart\\view.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\chart\\view.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nfunction _assertThisInitialized(self) { if (self === void 0) {\r\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n} return self; }\r\nvar Base = require('../base');\r\nvar Geom = require('../geom/base');\r\nvar Util = require('../util');\r\nvar Controller = require('./controller/index');\r\nvar Global = require('../global');\r\nvar Theme = require('../theme/index');\r\nvar FIELD_ORIGIN = '_origin';\r\nvar Animate = require('../animate/index');\r\nfunction isFullCircle(coord) {\r\n    var startAngle = coord.startAngle;\r\n    var endAngle = coord.endAngle;\r\n    if (!Util.isNil(startAngle) && !Util.isNil(endAngle) && endAngle - startAngle < Math.PI * 2) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction isBetween(value, start, end) {\r\n    var tmp = (value - start) / (end - start);\r\n    return tmp >= 0 && tmp <= 1;\r\n}\r\nfunction isPointInCoord(coord, point) {\r\n    var result = false;\r\n    if (coord) {\r\n        var type = coord.type;\r\n        if (type === 'theta') {\r\n            var start = coord.start;\r\n            var end = coord.end;\r\n            result = isBetween(point.x, start.x, end.x) && isBetween(point.y, start.y, end.y);\r\n        }\r\n        else {\r\n            var invertPoint = coord.invert(point);\r\n            result = invertPoint.x >= 0 && invertPoint.y >= 0 && invertPoint.x <= 1 && invertPoint.y <= 1;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar ViewGeoms = {};\r\nUtil.each(Geom, function (geomConstructor, className) {\r\n    var methodName = Util.lowerFirst(className);\r\n    ViewGeoms[methodName] = function (cfg) {\r\n        var geom = new geomConstructor(cfg);\r\n        this.addGeom(geom);\r\n        return geom;\r\n    };\r\n});\r\nvar View = function (_Base) {\r\n    _inheritsLoose(View, _Base);\r\n    var _proto = View.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        return {\r\n            viewContainer: null,\r\n            coord: null,\r\n            start: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            end: {\r\n                x: 1,\r\n                y: 1\r\n            },\r\n            geoms: [],\r\n            scales: {},\r\n            options: {},\r\n            scaleController: null,\r\n            padding: 0,\r\n            theme: null,\r\n            parent: null,\r\n            tooltipEnable: true,\r\n            animate: Global.animate,\r\n            visible: true\r\n        };\r\n    };\r\n    function View(cfg) {\r\n        var _this;\r\n        _this = _Base.call(this, cfg) || this;\r\n        var self = _assertThisInitialized(_assertThisInitialized(_this));\r\n        self._setTheme();\r\n        Util.each(Geom, function (GeomConstructor, className) {\r\n            var methodName = Util.lowerFirst(className);\r\n            self[methodName] = function (cfg) {\r\n                if (cfg === void 0) {\r\n                    cfg = {};\r\n                }\r\n                cfg.viewTheme = self.get('viewTheme');\r\n                var geom = new GeomConstructor(cfg);\r\n                self.addGeom(geom);\r\n                return geom;\r\n            };\r\n        });\r\n        self.init();\r\n        return _this;\r\n    }\r\n    _proto._setTheme = function _setTheme() {\r\n        var self = this;\r\n        var theme = self.get('theme');\r\n        var viewTheme = {};\r\n        var newTheme = {};\r\n        if (Util.isObject(theme)) {\r\n            newTheme = theme;\r\n        }\r\n        else if (Util.indexOf(Object.keys(Theme), theme) !== -1) {\r\n            newTheme = Theme[theme];\r\n        }\r\n        Util.deepMix(viewTheme, Global, newTheme);\r\n        self.set('viewTheme', viewTheme);\r\n    };\r\n    _proto.init = function init() {\r\n        this._initViewPlot();\r\n        if (this.get('data')) {\r\n            this._initData(this.get('data'));\r\n        }\r\n        this._initOptions();\r\n        this._initControllers();\r\n        this._bindEvents();\r\n    };\r\n    _proto._initOptions = function _initOptions() {\r\n        var self = this;\r\n        var options = Util.mix({}, self.get('options'));\r\n        if (!options.scales) {\r\n            options.scales = {};\r\n        }\r\n        if (!options.coord) {\r\n            options.coord = {};\r\n        }\r\n        if (options.animate === false) {\r\n            this.set('animate', false);\r\n        }\r\n        if (options.tooltip === false || Util.isNull(options.tooltip)) {\r\n            this.set('tooltipEnable', false);\r\n        }\r\n        if (options.geoms && options.geoms.length) {\r\n            Util.each(options.geoms, function (geomOption) {\r\n                self._createGeom(geomOption);\r\n            });\r\n        }\r\n        var scaleController = self.get('scaleController');\r\n        if (scaleController) {\r\n            scaleController.defs = options.scales;\r\n        }\r\n        var coordController = self.get('coordController');\r\n        if (coordController) {\r\n            coordController.reset(options.coord);\r\n        }\r\n        this.set('options', options);\r\n    };\r\n    _proto._createGeom = function _createGeom(cfg) {\r\n        var type = cfg.type;\r\n        var geom;\r\n        if (this[type]) {\r\n            geom = this[type]();\r\n            Util.each(cfg, function (v, k) {\r\n                if (geom[k]) {\r\n                    if (Util.isObject(v) && v.field) {\r\n                        if (v === 'label') {\r\n                            geom[k](v.field, v.callback, v.cfg);\r\n                        }\r\n                        else {\r\n                            var _cfg;\r\n                            Util.each(v, function (value, key) {\r\n                                if (key !== 'field') {\r\n                                    _cfg = value;\r\n                                }\r\n                            });\r\n                            geom[k](v.field, _cfg);\r\n                        }\r\n                    }\r\n                    else {\r\n                        geom[k](v);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    _proto._initControllers = function _initControllers() {\r\n        var self = this;\r\n        var options = self.get('options');\r\n        var viewTheme = self.get('viewTheme');\r\n        var canvas = self.get('canvas');\r\n        var scaleController = new Controller.Scale({\r\n            viewTheme: viewTheme,\r\n            defs: options.scales\r\n        });\r\n        var coordController = new Controller.Coord(options.coord);\r\n        this.set('scaleController', scaleController);\r\n        this.set('coordController', coordController);\r\n        var axisController = new Controller.Axis({\r\n            canvas: canvas,\r\n            viewTheme: viewTheme\r\n        });\r\n        this.set('axisController', axisController);\r\n        var guideController = new Controller.Guide({\r\n            viewTheme: viewTheme,\r\n            options: options.guides || []\r\n        });\r\n        this.set('guideController', guideController);\r\n    };\r\n    _proto._initViewPlot = function _initViewPlot() {\r\n        if (!this.get('viewContainer')) {\r\n            this.set('viewContainer', this.get('middlePlot'));\r\n        }\r\n    };\r\n    _proto._initGeoms = function _initGeoms() {\r\n        var geoms = this.get('geoms');\r\n        var filteredData = this.get('filteredData');\r\n        var coord = this.get('coord');\r\n        var viewId = this.get('_id');\r\n        for (var i = 0; i < geoms.length; i++) {\r\n            var geom = geoms[i];\r\n            geom.set('data', filteredData);\r\n            geom.set('coord', coord);\r\n            geom.set('_id', viewId + '-geom' + i);\r\n            geom.set('keyFields', this.get('keyFields'));\r\n            geom.init();\r\n        }\r\n    };\r\n    _proto._clearGeoms = function _clearGeoms() {\r\n        var self = this;\r\n        var geoms = self.get('geoms');\r\n        for (var i = 0; i < geoms.length; i++) {\r\n            var geom = geoms[i];\r\n            geom.clear();\r\n        }\r\n    };\r\n    _proto._removeGeoms = function _removeGeoms() {\r\n        var self = this;\r\n        var geoms = self.get('geoms');\r\n        while (geoms.length > 0) {\r\n            var geom = geoms.shift();\r\n            geom.destroy();\r\n        }\r\n    };\r\n    _proto._drawGeoms = function _drawGeoms() {\r\n        var geoms = this.get('geoms');\r\n        var coord = this.get('coord');\r\n        for (var i = 0; i < geoms.length; i++) {\r\n            var geom = geoms[i];\r\n            geom.setCoord(coord);\r\n            geom.paint();\r\n        }\r\n    };\r\n    _proto.isShapeInView = function isShapeInView(shape) {\r\n        var id = this.get('_id');\r\n        var shapeId = shape._id;\r\n        if (!shapeId) {\r\n            return shape.get('parent').get('viewId') === id;\r\n        }\r\n        return shapeId.split('-')[0] === id;\r\n    };\r\n    _proto.getViewRegion = function getViewRegion() {\r\n        var self = this;\r\n        var parent = self.get('parent');\r\n        var start;\r\n        var end;\r\n        if (parent) {\r\n            var region = parent.getViewRegion();\r\n            var viewRegion = self._getViewRegion(region.start, region.end);\r\n            start = viewRegion.start;\r\n            end = viewRegion.end;\r\n        }\r\n        else {\r\n            start = self.get('start');\r\n            end = self.get('end');\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end\r\n        };\r\n    };\r\n    _proto._getViewRegion = function _getViewRegion(plotStart, plotEnd) {\r\n        var start = this.get('start');\r\n        var end = this.get('end');\r\n        var startX = start.x;\r\n        var startY = 1 - end.y;\r\n        var endX = end.x;\r\n        var endY = 1 - start.y;\r\n        var padding = this.get('padding');\r\n        var allPadding = Util.toAllPadding(padding);\r\n        var top = allPadding[0];\r\n        var right = allPadding[1];\r\n        var bottom = allPadding[2];\r\n        var left = allPadding[3];\r\n        var startPoint = {\r\n            x: startX * (plotEnd.x - plotStart.x) + plotStart.x + left,\r\n            y: startY * (plotEnd.y - plotStart.y) + plotStart.y - bottom\r\n        };\r\n        var endPoint = {\r\n            x: endX * (plotEnd.x - plotStart.x) + plotStart.x - right,\r\n            y: endY * (plotEnd.y - plotStart.y) + plotStart.y + top\r\n        };\r\n        return {\r\n            start: startPoint,\r\n            end: endPoint\r\n        };\r\n    };\r\n    _proto._createCoord = function _createCoord() {\r\n        var coordController = this.get('coordController');\r\n        var region = this.getViewRegion();\r\n        var coord = coordController.createCoord(region.start, region.end);\r\n        this.set('coord', coord);\r\n    };\r\n    _proto._renderAxes = function _renderAxes() {\r\n        var options = this.get('options');\r\n        var axesOptions = options.axes;\r\n        if (axesOptions === false) {\r\n            return;\r\n        }\r\n        var axisController = this.get('axisController');\r\n        axisController.container = this.get('backPlot');\r\n        axisController.coord = this.get('coord');\r\n        axisController.options = axesOptions || {};\r\n        var xScale = this.getXScale();\r\n        var yScales = this.getYScales();\r\n        var viewId = this.get('_id');\r\n        axisController.createAxis(xScale, yScales, viewId);\r\n    };\r\n    _proto._renderGuides = function _renderGuides() {\r\n        var guideController = this.get('guideController');\r\n        if (!Util.isEmpty(guideController.options)) {\r\n            var coord = this.get('coord');\r\n            guideController.view = this;\r\n            guideController.backContainer = this.get('backPlot');\r\n            guideController.frontContainer = this.get('frontPlot');\r\n            guideController.xScales = this._getScales('x');\r\n            guideController.yScales = this._getScales('y');\r\n            guideController.render(coord);\r\n        }\r\n    };\r\n    _proto._bindEvents = function _bindEvents() {\r\n        var eventController = new Controller.Event({\r\n            view: this,\r\n            canvas: this.get('canvas')\r\n        });\r\n        eventController.bindEvents();\r\n        this.set('eventController', eventController);\r\n    };\r\n    _proto._clearEvents = function _clearEvents() {\r\n        var eventController = this.get('eventController');\r\n        eventController && eventController.clearEvents();\r\n    };\r\n    _proto._getScales = function _getScales(dimType) {\r\n        var geoms = this.get('geoms');\r\n        var result = {};\r\n        for (var i = 0; i < geoms.length; i++) {\r\n            var geom = geoms[i];\r\n            var scale = dimType === 'x' ? geom.getXScale() : geom.getYScale();\r\n            if (scale && !result[scale.field]) {\r\n                result[scale.field] = scale;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    _proto._adjustScale = function _adjustScale() {\r\n        this._setCatScalesRange();\r\n        var geoms = this.get('geoms');\r\n        var scaleController = this.get('scaleController');\r\n        var colDefs = scaleController.defs;\r\n        for (var i = 0; i < geoms.length; i++) {\r\n            var geom = geoms[i];\r\n            if (geom.get('type') === 'interval') {\r\n                var yScale = geom.getYScale();\r\n                var field = yScale.field, min = yScale.min, max = yScale.max, type = yScale.type;\r\n                if (!(colDefs[field] && colDefs[field].min) && type !== 'time') {\r\n                    if (min > 0) {\r\n                        yScale.change({\r\n                            min: 0\r\n                        });\r\n                    }\r\n                    else if (max <= 0) {\r\n                        yScale.change({\r\n                            max: 0\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    _proto._setCatScalesRange = function _setCatScalesRange() {\r\n        var self = this;\r\n        var coord = self.get('coord');\r\n        var viewTheme = self.get('viewTheme');\r\n        var xScale = self.getXScale();\r\n        var yScales = self.getYScales();\r\n        var scales = [];\r\n        xScale && scales.push(xScale);\r\n        scales = scales.concat(yScales);\r\n        var inFullCircle = coord.isPolar && isFullCircle(coord);\r\n        var scaleController = self.get('scaleController');\r\n        var colDefs = scaleController.defs;\r\n        Util.each(scales, function (scale) {\r\n            if ((scale.isCategory || scale.isIdentity) && scale.values && !(colDefs[scale.field] && colDefs[scale.field].range)) {\r\n                var count = scale.values.length;\r\n                var range;\r\n                if (count === 1) {\r\n                    range = [0.5, 1];\r\n                }\r\n                else {\r\n                    var widthRatio = 1;\r\n                    var offset = 0;\r\n                    if (inFullCircle) {\r\n                        if (!coord.isTransposed) {\r\n                            range = [0, 1 - 1 / count];\r\n                        }\r\n                        else {\r\n                            widthRatio = viewTheme.widthRatio.multiplePie;\r\n                            offset = 1 / count * widthRatio;\r\n                            range = [offset / 2, 1 - offset / 2];\r\n                        }\r\n                    }\r\n                    else {\r\n                        offset = 1 / count * 1 / 2;\r\n                        range = [offset, 1 - offset];\r\n                    }\r\n                }\r\n                scale.range = range;\r\n            }\r\n        });\r\n    };\r\n    _proto.getXScale = function getXScale() {\r\n        var geoms = this.get('geoms');\r\n        var xScale = null;\r\n        if (!Util.isEmpty(geoms)) {\r\n            xScale = geoms[0].getXScale();\r\n        }\r\n        return xScale;\r\n    };\r\n    _proto.getYScales = function getYScales() {\r\n        var geoms = this.get('geoms');\r\n        var rst = [];\r\n        for (var i = 0; i < geoms.length; i++) {\r\n            var geom = geoms[i];\r\n            var yScale = geom.getYScale();\r\n            if (yScale && Util.indexOf(rst, yScale) === -1) {\r\n                rst.push(yScale);\r\n            }\r\n        }\r\n        return rst;\r\n    };\r\n    _proto.getXY = function getXY(item) {\r\n        var self = this;\r\n        var coord = self.get('coord');\r\n        var xScales = self._getScales('x');\r\n        var yScales = self._getScales('y');\r\n        var x;\r\n        var y;\r\n        for (var field in item) {\r\n            if (xScales[field]) {\r\n                x = xScales[field].scale(item[field]);\r\n            }\r\n            if (yScales[field]) {\r\n                y = yScales[field].scale(item[field]);\r\n            }\r\n        }\r\n        if (!Util.isNil(x) && !Util.isNil(y)) {\r\n            return coord.convert({\r\n                x: x,\r\n                y: y\r\n            });\r\n        }\r\n        return null;\r\n    };\r\n    _proto.getSnapRecords = function getSnapRecords(point) {\r\n        var self = this;\r\n        var geoms = self.get('geoms');\r\n        var rst = [];\r\n        Util.each(geoms, function (geom) {\r\n            var dataArray = geom.get('dataArray');\r\n            var record;\r\n            Util.each(dataArray, function (data) {\r\n                record = geom.findPoint(point, data);\r\n                record && rst.push(record);\r\n            });\r\n        });\r\n        return rst;\r\n    };\r\n    _proto.addGeom = function addGeom(geom) {\r\n        var self = this;\r\n        var geoms = self.get('geoms');\r\n        geoms.push(geom);\r\n        geom.set('view', self);\r\n        var container = self.get('viewContainer');\r\n        geom.set('container', container);\r\n        geom.set('animate', self.get('animate'));\r\n        geom.bindEvents();\r\n    };\r\n    _proto.removeGeom = function removeGeom(geom) {\r\n        var geoms = this.get('geoms');\r\n        Util.Array.remove(geoms, geom);\r\n        geom.destroy();\r\n    };\r\n    _proto.createScale = function createScale(field, data) {\r\n        var scales = this.get('scales');\r\n        var parent = this.get('parent');\r\n        var scale = scales[field];\r\n        if (!data) {\r\n            var filteredData = this.get('filteredData');\r\n            var legendFields = this._getFieldsForLegend();\r\n            if (filteredData.length && legendFields.indexOf(field) === -1) {\r\n                data = filteredData;\r\n            }\r\n            else {\r\n                data = this.get('data');\r\n            }\r\n        }\r\n        var scaleController = this.get('scaleController');\r\n        if (!scale) {\r\n            scale = scaleController.createScale(field, data);\r\n            if (scale.sync && parent) {\r\n                var parentScale = parent.createScale(field, data);\r\n                scale = this._getSyncScale(parentScale, scale);\r\n            }\r\n            scales[field] = scale;\r\n        }\r\n        else if (scale.sync) {\r\n            var newScale = scaleController.createScale(field, data);\r\n            this._syncScale(scale, newScale);\r\n        }\r\n        return scale;\r\n    };\r\n    _proto._getFieldsForLegend = function _getFieldsForLegend() {\r\n        var fields = [];\r\n        var geoms = this.get('geoms');\r\n        Util.each(geoms, function (geom) {\r\n            var geomFields = geom.getFieldsForLegend();\r\n            fields = fields.concat(geomFields);\r\n        });\r\n        return Util.uniq(fields);\r\n    };\r\n    _proto._getSyncScale = function _getSyncScale(parentScale, scale) {\r\n        if (parentScale.type !== scale.type) {\r\n            return scale;\r\n        }\r\n        this._syncScale(parentScale, scale);\r\n        return parentScale;\r\n    };\r\n    _proto._syncScale = function _syncScale(distScale, sourceScale) {\r\n        var mergeValues = Util.union(distScale.values, sourceScale.values);\r\n        if (sourceScale.isLinear) {\r\n            var max = Math.max(distScale.max, sourceScale.max);\r\n            var min = Math.min(distScale.min, sourceScale.min);\r\n            if (distScale.max !== max || distScale.min !== min) {\r\n                distScale.change({\r\n                    min: min,\r\n                    max: max,\r\n                    values: mergeValues\r\n                });\r\n            }\r\n        }\r\n        if (mergeValues.length !== distScale.values.length) {\r\n            distScale.change({\r\n                values: mergeValues\r\n            });\r\n        }\r\n    };\r\n    _proto.getFilteredValues = function getFilteredValues(field) {\r\n        var scale = this.get('scales')[field];\r\n        var values = scale.values;\r\n        var filters = this._getFilters();\r\n        var rst;\r\n        if (filters && filters[field]) {\r\n            rst = values.filter(filters[field]);\r\n        }\r\n        else {\r\n            rst = values.slice(0);\r\n        }\r\n        return rst;\r\n    };\r\n    _proto.getFilteredOutValues = function getFilteredOutValues(field) {\r\n        var scale = this.get('scales')[field];\r\n        var values = scale.values;\r\n        var filters = this._getFilters();\r\n        var rst;\r\n        if (filters && filters[field]) {\r\n            rst = values.filter(function (v) {\r\n                return !filters[field](v);\r\n            });\r\n        }\r\n        else {\r\n            rst = [];\r\n        }\r\n        return rst;\r\n    };\r\n    _proto.filter = function filter(field, condition) {\r\n        var options = this.get('options');\r\n        if (!options.filters) {\r\n            options.filters = {};\r\n        }\r\n        options.filters[field] = condition;\r\n    };\r\n    _proto._getFilters = function _getFilters() {\r\n        var options = this.get('options');\r\n        return options.filters;\r\n    };\r\n    _proto.execFilter = function execFilter(data) {\r\n        var self = this;\r\n        var filters = self._getFilters();\r\n        if (filters) {\r\n            data = data.filter(function (obj) {\r\n                var rst = true;\r\n                Util.each(filters, function (fn, k) {\r\n                    if (fn) {\r\n                        rst = fn(obj[k], obj);\r\n                        if (!rst) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                });\r\n                return rst;\r\n            });\r\n        }\r\n        return data;\r\n    };\r\n    _proto.axis = function axis(field, cfg) {\r\n        var options = this.get('options');\r\n        if (field === false) {\r\n            options.axes = false;\r\n        }\r\n        else {\r\n            if (!options.axes) {\r\n                options.axes = {};\r\n            }\r\n            var axisOptions = options.axes;\r\n            axisOptions[field] = cfg;\r\n        }\r\n        return this;\r\n    };\r\n    _proto.guide = function guide() {\r\n        return this.get('guideController');\r\n    };\r\n    _proto._getKeyFields = function _getKeyFields(scaleDefs) {\r\n        var keyFields = [];\r\n        Util.each(scaleDefs, function (def, field) {\r\n            if (def.key) {\r\n                keyFields.push(field);\r\n            }\r\n        });\r\n        this.set('keyFields', keyFields);\r\n    };\r\n    _proto.scale = function scale(field, cfg) {\r\n        var options = this.get('options');\r\n        var scaleDefs = options.scales;\r\n        if (Util.isObject(field)) {\r\n            Util.mix(scaleDefs, field);\r\n        }\r\n        else {\r\n            scaleDefs[field] = cfg;\r\n        }\r\n        this._getKeyFields(scaleDefs);\r\n        return this;\r\n    };\r\n    _proto.tooltip = function tooltip(visible) {\r\n        this.set('tooltipEnable', visible);\r\n        return this;\r\n    };\r\n    _proto.animate = function animate(enable) {\r\n        var options = this.get('options');\r\n        options.animate = enable;\r\n        this.set('animate', enable);\r\n        return this;\r\n    };\r\n    _proto.changeOptions = function changeOptions(options) {\r\n        this.set('options', options);\r\n        this._initOptions(options);\r\n        return this;\r\n    };\r\n    _proto.getViewsByPoint = function getViewsByPoint(point) {\r\n        var rst = [];\r\n        var views = this.get('views');\r\n        if (isPointInCoord(this.get('coord'), point)) {\r\n            rst.push(this);\r\n        }\r\n        Util.each(views, function (view) {\r\n            if (view.get('visible') && isPointInCoord(view.get('coord'), point)) {\r\n                rst.push(view);\r\n            }\r\n        });\r\n        return rst;\r\n    };\r\n    _proto.eachShape = function eachShape(fn) {\r\n        var self = this;\r\n        var views = self.get('views');\r\n        var canvas = self.get('canvas');\r\n        Util.each(views, function (view) {\r\n            view.eachShape(fn);\r\n        });\r\n        var geoms = this.get('geoms');\r\n        Util.each(geoms, function (geom) {\r\n            var shapes = geom.getShapes();\r\n            Util.each(shapes, function (shape) {\r\n                var origin = shape.get('origin');\r\n                if (Util.isArray(origin)) {\r\n                    var arr = origin.map(function (subOrigin) {\r\n                        return subOrigin[FIELD_ORIGIN];\r\n                    });\r\n                    fn(arr, shape, geom, self);\r\n                }\r\n                else {\r\n                    var obj = origin[FIELD_ORIGIN];\r\n                    fn(obj, shape, geom, self);\r\n                }\r\n            });\r\n        });\r\n        canvas.draw();\r\n        return this;\r\n    };\r\n    _proto.filterShape = function filterShape(fn) {\r\n        var callback = function callback(record, shape, geom, view) {\r\n            if (!fn(record, shape, geom, view)) {\r\n                shape.hide();\r\n            }\r\n            else {\r\n                shape.show();\r\n            }\r\n        };\r\n        this.eachShape(callback);\r\n        return this;\r\n    };\r\n    _proto.clearInner = function clearInner() {\r\n        this.set('scales', {});\r\n        var options = this.get('options');\r\n        options.geoms = null;\r\n        this._clearGeoms();\r\n        this.get('guideController') && this.get('guideController').reset();\r\n        this.get('axisController') && this.get('axisController').clear();\r\n    };\r\n    _proto.clear = function clear() {\r\n        var options = this.get('options');\r\n        options.filters = null;\r\n        this._removeGeoms();\r\n        this.clearInner();\r\n        this.get('guideController') && this.get('guideController').clear();\r\n        this.set('isUpdate', false);\r\n        this.set('keyFields', []);\r\n        return this;\r\n    };\r\n    _proto.coord = function coord(type, cfg) {\r\n        var coordController = this.get('coordController');\r\n        coordController.reset({\r\n            type: type,\r\n            cfg: cfg\r\n        });\r\n        return coordController;\r\n    };\r\n    _proto.resetCoord = function resetCoord() {\r\n        this._createCoord();\r\n    };\r\n    _proto.source = function source(data, scales) {\r\n        this._initData(data);\r\n        if (scales) {\r\n            this.scale(scales);\r\n        }\r\n        this.emit('setdata');\r\n        return this;\r\n    };\r\n    _proto.changeData = function changeData(data) {\r\n        this.emit('beforechangedata');\r\n        this._initData(data);\r\n        this.emit('afterchangedata');\r\n        this.repaint();\r\n        return this;\r\n    };\r\n    _proto._initData = function _initData(data) {\r\n        var dataView = this.get('dataView');\r\n        if (dataView) {\r\n            dataView.off('change', Util.getWrapBehavior(this, '_onViewChange'));\r\n            this.set('dataView', null);\r\n        }\r\n        if (data && data.isDataView) {\r\n            data.on('change', Util.wrapBehavior(this, '_onViewChange'));\r\n            this.set('dataView', data);\r\n            data = data.rows;\r\n        }\r\n        this.set('data', data);\r\n    };\r\n    _proto._onViewChange = function _onViewChange() {\r\n        this.emit('beforechangedata');\r\n        var dataView = this.get('dataView');\r\n        var rows = dataView.rows;\r\n        this.set('data', rows);\r\n        this.emit('afterchangedata');\r\n        this.repaint();\r\n    };\r\n    _proto.beforeRender = function beforeRender() {\r\n        var views = this.get('views');\r\n        Util.each(views, function (view) {\r\n            view.beforeRender();\r\n        });\r\n        this.initView();\r\n    };\r\n    _proto.drawComponents = function drawComponents() {\r\n        var views = this.get('views');\r\n        Util.each(views, function (view) {\r\n            view.drawComponents();\r\n        });\r\n        this._renderAxes();\r\n        this._renderGuides();\r\n    };\r\n    _proto.drawCanvas = function drawCanvas(stopDraw) {\r\n        if (!stopDraw) {\r\n            var views = this.get('views');\r\n            var backPlot = this.get('backPlot');\r\n            backPlot.sort();\r\n            var canvas = this.get('canvas');\r\n            var animate = this.get('animate');\r\n            if (animate) {\r\n                var isUpdate = this.get('isUpdate');\r\n                Util.each(views, function (view) {\r\n                    Animate.execAnimation(view, isUpdate);\r\n                });\r\n                Animate.execAnimation(this, isUpdate);\r\n            }\r\n            else {\r\n                canvas.draw();\r\n            }\r\n        }\r\n    };\r\n    _proto.render = function render(stopDraw) {\r\n        this.clearInner();\r\n        this.emit('beforerender');\r\n        this.beforeRender();\r\n        this.emit('beforepaint');\r\n        this.drawComponents();\r\n        this.paint();\r\n        this.emit('afterpaint');\r\n        this.drawCanvas(stopDraw);\r\n        this.emit('afterrender');\r\n        this.set('rendered', true);\r\n        return this;\r\n    };\r\n    _proto.initView = function initView() {\r\n        var data = this.get('data') || [];\r\n        var filteredData = this.execFilter(data);\r\n        this.set('filteredData', filteredData);\r\n        this._createCoord();\r\n        this._initGeoms();\r\n        this._adjustScale();\r\n    };\r\n    _proto.paint = function paint() {\r\n        var views = this.get('views');\r\n        Util.each(views, function (view) {\r\n            view.paint();\r\n        });\r\n        var data = this.get('data');\r\n        if (!Util.isEmpty(data)) {\r\n            this._drawGeoms();\r\n        }\r\n        if (!this.get('visible')) {\r\n            this.changeVisible(false, true);\r\n        }\r\n    };\r\n    _proto.changeVisible = function changeVisible(visible, stopDraw) {\r\n        var geoms = this.get('geoms');\r\n        Util.each(geoms, function (geom) {\r\n            geom.changeVisible(visible, true);\r\n        });\r\n        this.get('axisController') && this.get('axisController').changeVisible(visible);\r\n        this.get('guideController') && this.get('guideController').changeVisible(visible);\r\n        if (!stopDraw) {\r\n            var canvas = this.get('canvas');\r\n            canvas.draw();\r\n        }\r\n    };\r\n    _proto.repaint = function repaint() {\r\n        this.set('isUpdate', true);\r\n        this.clearInner();\r\n        this.render();\r\n    };\r\n    _proto.destroy = function destroy() {\r\n        this._clearEvents();\r\n        var dataView = this.get('dataView');\r\n        dataView && dataView.off('change', Util.getWrapBehavior(this, '_onViewChange'));\r\n        this.clear();\r\n        _Base.prototype.destroy.call(this);\r\n    };\r\n    return View;\r\n}(Base);\r\nmodule.exports = View;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\chart\\view.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\chart\\view.js"],"names":[],"mappings":"AAAA,SAAS,cAAc,CAAC,QAAQ,EAAE,UAAU,IAAI,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC;AAEvL,SAAS,sBAAsB,CAAC,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;IAAE,MAAM,IAAI,cAAc,CAAC,2DAA2D,CAAC,CAAC;CAAE,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC;AAMtK,IAAI,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAE9B,IAAI,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAEnC,IAAI,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAE9B,IAAI,UAAU,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAE/C,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAElC,IAAI,KAAK,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAEtC,IAAI,YAAY,GAAG,SAAS,CAAC;AAE7B,IAAI,OAAO,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAE1C,SAAS,YAAY,CAAC,KAAK;IACzB,IAAI,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC;IAClC,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;IAE9B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,QAAQ,GAAG,UAAU,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE;QAC3F,OAAO,KAAK,CAAC;KACd;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAS,SAAS,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG;IAClC,IAAI,GAAG,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC;IAC1C,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;AAC9B,CAAC;AAED,SAAS,cAAc,CAAC,KAAK,EAAE,KAAK;IAClC,IAAI,MAAM,GAAG,KAAK,CAAC;IAEnB,IAAI,KAAK,EAAE;QACT,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;QAEtB,IAAI,IAAI,KAAK,OAAO,EAAE;YACpB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YACxB,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;YACpB,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;SACnF;aAAM;YACL,IAAI,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,GAAG,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC;SAC/F;KACF;IAED,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,IAAI,SAAS,GAAG,EAAE,CAAC;AACnB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,eAAe,EAAE,SAAS;IAClD,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;IAE5C,SAAS,CAAC,UAAU,CAAC,GAAG,UAAU,GAAG;QACnC,IAAI,IAAI,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,CAAC;QACpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACnB,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;AAMH,IAAI,IAAI,GAER,UAAU,KAAK;IACb,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IAE5B,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC;IAO5B,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,OAAO;YACL,aAAa,EAAE,IAAI;YACnB,KAAK,EAAE,IAAI;YACX,KAAK,EAAE;gBACL,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;aACL;YACD,GAAG,EAAE;gBACH,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;aACL;YACD,KAAK,EAAE,EAAE;YACT,MAAM,EAAE,EAAE;YACV,OAAO,EAAE,EAAE;YACX,eAAe,EAAE,IAAI;YACrB,OAAO,EAAE,CAAC;YACV,KAAK,EAAE,IAAI;YACX,MAAM,EAAE,IAAI;YACZ,aAAa,EAAE,IAAI;YAEnB,OAAO,EAAE,MAAM,CAAC,OAAO;YACvB,OAAO,EAAE,IAAI;SACd,CAAC;IACJ,CAAC,CAAC;IAEF,SAAS,IAAI,CAAC,GAAG;QACf,IAAI,KAAK,CAAC;QAEV,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,CAAC;QAEtC,IAAI,IAAI,GAAG,sBAAsB,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC,CAAC;QAEjE,IAAI,CAAC,SAAS,EAAE,CAAC;QAEjB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,eAAe,EAAE,SAAS;YAClD,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAE5C,IAAI,CAAC,UAAU,CAAC,GAAG,UAAU,GAAG;gBAC9B,IAAI,GAAG,KAAK,KAAK,CAAC,EAAE;oBAClB,GAAG,GAAG,EAAE,CAAC;iBACV;gBAED,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;gBACtC,IAAI,IAAI,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,CAAC;gBACpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACnB,OAAO,IAAI,CAAC;YACd,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,OAAO,KAAK,CAAC;IACf,CAAC;IAED,MAAM,CAAC,SAAS,GAAG,SAAS,SAAS;QACnC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,QAAQ,GAAG,EAAE,CAAC;QAElB,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACxB,QAAQ,GAAG,KAAK,CAAC;SAClB;aAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;YACzD,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IACnC,CAAC,CAAC;IAOF,MAAM,CAAC,IAAI,GAAG,SAAS,IAAI;QACzB,IAAI,CAAC,aAAa,EAAE,CAAC;QAGrB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YACpB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;SAClC;QAED,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAExB,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC,CAAC;IAGF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;QAEhD,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACnB,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;SACrB;QAED,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YAClB,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC;SACpB;QAED,IAAI,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE;YAC7B,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;SAC5B;QAED,IAAI,OAAO,CAAC,OAAO,KAAK,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAE7D,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;SAClC;QAED,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE;YACzC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,UAAU;gBAC3C,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YAC/B,CAAC,CAAC,CAAC;SACJ;QAED,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAElD,IAAI,eAAe,EAAE;YACnB,eAAe,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;SACvC;QAED,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAElD,IAAI,eAAe,EAAE;YACnB,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACtC;QAED,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IAC/B,CAAC,CAAC;IAEF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW,CAAC,GAAG;QAC3C,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QACpB,IAAI,IAAI,CAAC;QAET,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE;YACd,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,EAAE,CAAC;gBAC3B,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE;oBACX,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE;wBAE/B,IAAI,CAAC,KAAK,OAAO,EAAE;4BACjB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;yBACrC;6BAAM;4BACL,IAAI,IAAI,CAAC;4BAET,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,UAAU,KAAK,EAAE,GAAG;gCAC/B,IAAI,GAAG,KAAK,OAAO,EAAE;oCACnB,IAAI,GAAG,KAAK,CAAC;iCACd;4BACH,CAAC,CAAC,CAAC;4BACH,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;yBACxB;qBACF;yBAAM;wBACL,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACZ;iBACF;YACH,CAAC,CAAC,CAAC;SACJ;IACH,CAAC,CAAC;IAGF,MAAM,CAAC,gBAAgB,GAAG,SAAS,gBAAgB;QACjD,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,eAAe,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC;YACzC,SAAS,EAAE,SAAS;YACpB,IAAI,EAAE,OAAO,CAAC,MAAM;SACrB,CAAC,CAAC;QACH,IAAI,eAAe,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;QAC7C,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;QAC7C,IAAI,cAAc,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC;YACvC,MAAM,EAAE,MAAM;YACd,SAAS,EAAE,SAAS;SACrB,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;QAC3C,IAAI,eAAe,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC;YACzC,SAAS,EAAE,SAAS;YACpB,OAAO,EAAE,OAAO,CAAC,MAAM,IAAI,EAAE;SAC9B,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;IAC/C,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;YAE9B,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;SACnD;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU;QACrC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QAC5C,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;YAC/B,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;YACzB,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW;QACvC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACvB,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;YACzB,IAAI,CAAC,OAAO,EAAE,CAAC;SAChB;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU;QACrC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC,KAAK;QACjD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACzB,IAAI,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC;QAExB,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;SACjD;QAED,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IACtC,CAAC,CAAC;IAQF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,KAAK,CAAC;QACV,IAAI,GAAG,CAAC;QAER,IAAI,MAAM,EAAE;YACV,IAAI,MAAM,GAAG,MAAM,CAAC,aAAa,EAAE,CAAC;YAEpC,IAAI,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;YAE/D,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;YACzB,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC;SACtB;aAAM;YACL,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAC1B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;SACvB;QAED,OAAO;YACL,KAAK,EAAE,KAAK;YACZ,GAAG,EAAE,GAAG;SACT,CAAC;IACJ,CAAC,CAAC;IAGF,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc,CAAC,SAAS,EAAE,OAAO;QAChE,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC1B,IAAI,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;QACrB,IAAI,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QACvB,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC;QACjB,IAAI,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QACvB,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAElC,IAAI,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QACxB,IAAI,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAC1B,IAAI,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAC3B,IAAI,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QACzB,IAAI,UAAU,GAAG;YACf,CAAC,EAAE,MAAM,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,IAAI;YAC1D,CAAC,EAAE,MAAM,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,MAAM;SAC7D,CAAC;QACF,IAAI,QAAQ,GAAG;YACb,CAAC,EAAE,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,KAAK;YACzD,CAAC,EAAE,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,GAAG;SACxD,CAAC;QACF,OAAO;YACL,KAAK,EAAE,UAAU;YACjB,GAAG,EAAE,QAAQ;SACd,CAAC;IACJ,CAAC,CAAC;IAEF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAClD,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAClC,IAAI,KAAK,GAAG,eAAe,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;QAClE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC3B,CAAC,CAAC;IAEF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW;QACvC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,IAAI,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC;QAE/B,IAAI,WAAW,KAAK,KAAK,EAAE;YAEzB,OAAO;SACR;QAED,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAChD,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAChD,cAAc,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACzC,cAAc,CAAC,OAAO,GAAG,WAAW,IAAI,EAAE,CAAC;QAC3C,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC9B,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAChC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC7B,cAAc,CAAC,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IACrD,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAElD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE;YAC1C,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAC9B,eAAe,CAAC,IAAI,GAAG,IAAI,CAAC;YAC5B,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACrD,eAAe,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACvD,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;YAC/C,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;YAC/C,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC/B;IACH,CAAC,CAAC;IAGF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW;QACvC,IAAI,eAAe,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC;YACzC,IAAI,EAAE,IAAI;YACV,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;SAC3B,CAAC,CAAC;QACH,eAAe,CAAC,UAAU,EAAE,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;IAC/C,CAAC,CAAC;IAGF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAClD,eAAe,IAAI,eAAe,CAAC,WAAW,EAAE,CAAC;IACnD,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,OAAO;QAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,KAAK,GAAG,OAAO,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YAElE,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBACjC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;aAC7B;SACF;QAED,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC;IAEF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAClD,IAAI,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC;QAEnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YAEpB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,UAAU,EAAE;gBACnC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;gBAC9B,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,EACpB,GAAG,GAAG,MAAM,CAAC,GAAG,EAChB,GAAG,GAAG,MAAM,CAAC,GAAG,EAChB,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;gBAEvB,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,KAAK,MAAM,EAAE;oBAC9D,IAAI,GAAG,GAAG,CAAC,EAAE;wBACX,MAAM,CAAC,MAAM,CAAC;4BACZ,GAAG,EAAE,CAAC;yBACP,CAAC,CAAC;qBACJ;yBAAM,IAAI,GAAG,IAAI,CAAC,EAAE;wBAEnB,MAAM,CAAC,MAAM,CAAC;4BACZ,GAAG,EAAE,CAAC;yBACP,CAAC,CAAC;qBACJ;iBACF;aACF;SACF;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,kBAAkB,GAAG,SAAS,kBAAkB;QACrD,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC9B,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAChC,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAChC,IAAI,YAAY,GAAG,KAAK,CAAC,OAAO,IAAI,YAAY,CAAC,KAAK,CAAC,CAAC;QACxD,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAClD,IAAI,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK;YAC/B,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE;gBACnH,IAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC;gBAChC,IAAI,KAAK,CAAC;gBAEV,IAAI,KAAK,KAAK,CAAC,EAAE;oBACf,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;iBAClB;qBAAM;oBACL,IAAI,UAAU,GAAG,CAAC,CAAC;oBACnB,IAAI,MAAM,GAAG,CAAC,CAAC;oBAEf,IAAI,YAAY,EAAE;wBAChB,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE;4BACvB,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC;yBAC5B;6BAAM;4BACL,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC;4BAC9C,MAAM,GAAG,CAAC,GAAG,KAAK,GAAG,UAAU,CAAC;4BAChC,KAAK,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,CAAC;yBACtC;qBACF;yBAAM;wBACL,MAAM,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;wBAE3B,KAAK,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC;qBAC9B;iBACF;gBAED,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;aACrB;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,CAAC,SAAS,GAAG,SAAS,SAAS;QACnC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAO9B,IAAI,MAAM,GAAG,IAAI,CAAC;QAElB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACxB,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;SAC/B;QAED,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU;QACrC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAK9B,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAE9B,IAAI,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;gBAC9C,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAClB;SACF;QAED,OAAO,GAAG,CAAC;IACb,CAAC,CAAC;IAQF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK,CAAC,IAAI;QAChC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAEnC,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAEnC,IAAI,CAAC,CAAC;QACN,IAAI,CAAC,CAAC;QAEN,KAAK,IAAI,KAAK,IAAI,IAAI,EAAE;YACtB,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;gBAClB,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACvC;YAED,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;gBAClB,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACvC;SACF;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YACpC,OAAO,KAAK,CAAC,OAAO,CAAC;gBACnB,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;aACL,CAAC,CAAC;SACJ;QAED,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAQF,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc,CAAC,KAAK;QACnD,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACtC,IAAI,MAAM,CAAC;YACX,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,IAAI;gBACjC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;gBACrC,MAAM,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,OAAO,GAAG,CAAC;IACb,CAAC,CAAC;IAQF,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO,CAAC,IAAI;QACpC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACvB,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC1C,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACjC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC,CAAC;IAQF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI;QAC1C,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC/B,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC,CAAC;IAEF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW,CAAC,KAAK,EAAE,IAAI;QACnD,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;QAE1B,IAAI,CAAC,IAAI,EAAE;YACT,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;YAE5C,IAAI,YAAY,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAI9C,IAAI,YAAY,CAAC,MAAM,IAAI,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;gBAC7D,IAAI,GAAG,YAAY,CAAC;aACrB;iBAAM;gBACL,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;aACzB;SACF;QAED,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAElD,IAAI,CAAC,KAAK,EAAE;YACV,KAAK,GAAG,eAAe,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAEjD,IAAI,KAAK,CAAC,IAAI,IAAI,MAAM,EAAE;gBACxB,IAAI,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;gBAClD,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;aAChD;YAED,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;SACvB;aAAM,IAAI,KAAK,CAAC,IAAI,EAAE;YAErB,IAAI,QAAQ,GAAG,eAAe,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAExD,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SAClC;QAED,OAAO,KAAK,CAAC;IACf,CAAC,CAAC;IAEF,MAAM,CAAC,mBAAmB,GAAG,SAAS,mBAAmB;QACvD,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,UAAU,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC3C,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC3B,CAAC,CAAC;IAGF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC,WAAW,EAAE,KAAK;QAC9D,IAAI,WAAW,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,EAAE;YACnC,OAAO,KAAK,CAAC;SACd;QAED,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAEpC,OAAO,WAAW,CAAC;IACrB,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,SAAS,EAAE,WAAW;QAC5D,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;QAEnE,IAAI,WAAW,CAAC,QAAQ,EAAE;YACxB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC;YACnD,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC;YAEnD,IAAI,SAAS,CAAC,GAAG,KAAK,GAAG,IAAI,SAAS,CAAC,GAAG,KAAK,GAAG,EAAE;gBAClD,SAAS,CAAC,MAAM,CAAC;oBACf,GAAG,EAAE,GAAG;oBACR,GAAG,EAAE,GAAG;oBACR,MAAM,EAAE,WAAW;iBACpB,CAAC,CAAC;aACJ;SACF;QAED,IAAI,WAAW,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE;YAClD,SAAS,CAAC,MAAM,CAAC;gBACf,MAAM,EAAE,WAAW;aACpB,CAAC,CAAC;SACJ;IACH,CAAC,CAAC;IASF,MAAM,CAAC,iBAAiB,GAAG,SAAS,iBAAiB,CAAC,KAAK;QACzD,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAE1B,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAEjC,IAAI,GAAG,CAAC;QAER,IAAI,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;YAC7B,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;SACrC;aAAM;YACL,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACvB;QAED,OAAO,GAAG,CAAC;IACb,CAAC,CAAC;IASF,MAAM,CAAC,oBAAoB,GAAG,SAAS,oBAAoB,CAAC,KAAK;QAC/D,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAE1B,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAEjC,IAAI,GAAG,CAAC;QAER,IAAI,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;YAC7B,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;gBAC7B,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,GAAG,GAAG,EAAE,CAAC;SACV;QAED,OAAO,GAAG,CAAC;IACb,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM,CAAC,KAAK,EAAE,SAAS;QAC9C,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAElC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;YACpB,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;SACtB;QAED,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;IACrC,CAAC,CAAC;IAGF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW;QACvC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,OAAO,OAAO,CAAC,OAAO,CAAC;IACzB,CAAC,CAAC;IAGF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI;QAC1C,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAEjC,IAAI,OAAO,EAAE;YACX,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG;gBAC9B,IAAI,GAAG,GAAG,IAAI,CAAC;gBACf,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,EAAE,EAAE,CAAC;oBAChC,IAAI,EAAE,EAAE;wBACN,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;wBAEtB,IAAI,CAAC,GAAG,EAAE;4BACR,OAAO,KAAK,CAAC;yBACd;qBACF;gBACH,CAAC,CAAC,CAAC;gBACH,OAAO,GAAG,CAAC;YACb,CAAC,CAAC,CAAC;SACJ;QAED,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,IAAI,GAAG,SAAS,IAAI,CAAC,KAAK,EAAE,GAAG;QACpC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAElC,IAAI,KAAK,KAAK,KAAK,EAAE;YACnB,OAAO,CAAC,IAAI,GAAG,KAAK,CAAC;SACtB;aAAM;YACL,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;gBACjB,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC;aACnB;YAED,IAAI,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC;YAC/B,WAAW,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;SAC1B;QAED,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK;QAC3B,OAAO,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;IACrC,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC,SAAS;QACrD,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,GAAG,EAAE,KAAK;YACvC,IAAI,GAAG,CAAC,GAAG,EAAE;gBACX,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACvB;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IACnC,CAAC,CAAC;IAEF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK,CAAC,KAAK,EAAE,GAAG;QACtC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,IAAI,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC;QAE/B,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACxB,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;SAC5B;aAAM;YACL,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;SACxB;QAED,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAE9B,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO,CAAC,OAAO;QACvC,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;QACnC,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO,CAAC,MAAM;QACtC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,OAAO,CAAC,OAAO,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAC5B,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC,OAAO;QACnD,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAE7B,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAE3B,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAQF,MAAM,CAAC,eAAe,GAAG,SAAS,eAAe,CAAC,KAAK;QACrD,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,KAAK,CAAC,EAAE;YAC5C,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAChB;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,KAAK,CAAC,EAAE;gBACnE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAChB;QACH,CAAC,CAAC,CAAC;QACH,OAAO,GAAG,CAAC;IACb,CAAC,CAAC;IAQF,MAAM,CAAC,SAAS,GAAG,SAAS,SAAS,CAAC,EAAE;QACtC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAC9B,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK;gBAC/B,IAAI,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAEjC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;oBACxB,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,SAAS;wBACtC,OAAO,SAAS,CAAC,YAAY,CAAC,CAAC;oBACjC,CAAC,CAAC,CAAC;oBACH,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;iBAC5B;qBAAM;oBACL,IAAI,GAAG,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;oBAC/B,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;iBAC5B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,EAAE,CAAC;QACd,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAQF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW,CAAC,EAAE;QAC1C,IAAI,QAAQ,GAAG,SAAS,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI;YACxD,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE;gBAClC,KAAK,CAAC,IAAI,EAAE,CAAC;aACd;iBAAM;gBACL,KAAK,CAAC,IAAI,EAAE,CAAC;aACd;QACH,CAAC,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACzB,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU;QACrC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QACvB,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;QAErB,IAAI,CAAC,WAAW,EAAE,CAAC;QAGnB,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,KAAK,EAAE,CAAC;QAEnE,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,CAAC;IACnE,CAAC,CAAC;IAOF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK;QAC3B,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,YAAY,EAAE,CAAC;QAIpB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,KAAK,EAAE,CAAC;QACnE,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;QAC5B,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QAC1B,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IASF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK,CAAC,IAAI,EAAE,GAAG;QACrC,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAClD,eAAe,CAAC,KAAK,CAAC;YACpB,IAAI,EAAE,IAAI;YACV,GAAG,EAAE,GAAG;SACT,CAAC,CAAC;QACH,OAAO,eAAe,CAAC;IACzB,CAAC,CAAC;IAOF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU;QACrC,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM,CAAC,IAAI,EAAE,MAAM;QAC1C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAErB,IAAI,MAAM,EAAE;YACV,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SACpB;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACrB,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI;QAC1C,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAE9B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAErB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,SAAS,GAAG,SAAS,SAAS,CAAC,IAAI;QACxC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAEpC,IAAI,QAAQ,EAAE;YACZ,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC,CAAC;YACpE,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;SAC5B;QAED,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;YAC3B,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC,CAAC;YAC5D,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAC3B,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;SAClB;QAED,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACzB,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC9B,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACpC,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC,CAAC;IAGF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC,CAAC;IAGF,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc;QAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC,CAAC;IAGF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,QAAQ;QAC9C,IAAI,CAAC,QAAQ,EAAE;YACb,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAC9B,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACpC,QAAQ,CAAC,IAAI,EAAE,CAAC;YAChB,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAChC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAElC,IAAI,OAAO,EAAE;gBACX,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACpC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;oBAC7B,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;gBACxC,CAAC,CAAC,CAAC;gBACH,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;aACvC;iBAAM;gBACL,MAAM,CAAC,IAAI,EAAE,CAAC;aACf;SACF;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM,CAAC,QAAQ;QACtC,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC1B,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACxB,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAC1B,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAC3B,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,MAAM,CAAC,QAAQ,GAAG,SAAS,QAAQ;QACjC,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QAClC,IAAI,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;QAEvC,IAAI,CAAC,YAAY,EAAE,CAAC;QAGpB,IAAI,CAAC,UAAU,EAAE,CAAC;QAElB,IAAI,CAAC,YAAY,EAAE,CAAC;IAEtB,CAAC,CAAC;IAEF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK;QAC3B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAC7B,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAE5B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACvB,IAAI,CAAC,UAAU,EAAE,CAAC;SACnB;QAGD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;YACxB,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SACjC;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC,OAAO,EAAE,QAAQ;QAC7D,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI;YAE7B,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAChF,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAElF,IAAI,CAAC,QAAQ,EAAE;YACb,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAChC,MAAM,CAAC,IAAI,EAAE,CAAC;SACf;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO;QAC/B,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC,CAAC;IAEF,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO;QAC/B,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACpC,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC,CAAC;QAChF,IAAI,CAAC,KAAK,EAAE,CAAC;QAEb,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC,CAAC;IAEF,OAAO,IAAI,CAAC;AACd,CAAC,CAAC,IAAI,CAAC,CAAC;AAER,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n/**\n * @fileOverview view\n * @author dxq613@gmail.com\n */\nvar Base = require('../base');\n\nvar Geom = require('../geom/base');\n\nvar Util = require('../util');\n\nvar Controller = require('./controller/index');\n\nvar Global = require('../global');\n\nvar Theme = require('../theme/index');\n\nvar FIELD_ORIGIN = '_origin';\n\nvar Animate = require('../animate/index');\n\nfunction isFullCircle(coord) {\n  var startAngle = coord.startAngle;\n  var endAngle = coord.endAngle;\n\n  if (!Util.isNil(startAngle) && !Util.isNil(endAngle) && endAngle - startAngle < Math.PI * 2) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isBetween(value, start, end) {\n  var tmp = (value - start) / (end - start);\n  return tmp >= 0 && tmp <= 1;\n}\n\nfunction isPointInCoord(coord, point) {\n  var result = false;\n\n  if (coord) {\n    var type = coord.type;\n\n    if (type === 'theta') {\n      var start = coord.start;\n      var end = coord.end;\n      result = isBetween(point.x, start.x, end.x) && isBetween(point.y, start.y, end.y);\n    } else {\n      var invertPoint = coord.invert(point);\n      result = invertPoint.x >= 0 && invertPoint.y >= 0 && invertPoint.x <= 1 && invertPoint.y <= 1;\n    }\n  }\n\n  return result;\n}\n\nvar ViewGeoms = {};\nUtil.each(Geom, function (geomConstructor, className) {\n  var methodName = Util.lowerFirst(className);\n\n  ViewGeoms[methodName] = function (cfg) {\n    var geom = new geomConstructor(cfg);\n    this.addGeom(geom);\n    return geom;\n  };\n});\n/**\n * 图表中的视图\n * @class View\n */\n\nvar View =\n/*#__PURE__*/\nfunction (_Base) {\n  _inheritsLoose(View, _Base);\n\n  var _proto = View.prototype;\n\n  /**\n   * 获取默认的配置属性\n   * @protected\n   * @return {Object} 默认属性\n   */\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    return {\n      viewContainer: null,\n      coord: null,\n      start: {\n        x: 0,\n        y: 0\n      },\n      end: {\n        x: 1,\n        y: 1\n      },\n      geoms: [],\n      scales: {},\n      options: {},\n      scaleController: null,\n      padding: 0,\n      theme: null,\n      parent: null,\n      tooltipEnable: true,\n      // 是否展示 tooltip\n      animate: Global.animate,\n      visible: true\n    };\n  };\n\n  function View(cfg) {\n    var _this;\n\n    _this = _Base.call(this, cfg) || this;\n\n    var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n    self._setTheme();\n\n    Util.each(Geom, function (GeomConstructor, className) {\n      var methodName = Util.lowerFirst(className);\n\n      self[methodName] = function (cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        cfg.viewTheme = self.get('viewTheme');\n        var geom = new GeomConstructor(cfg);\n        self.addGeom(geom);\n        return geom;\n      };\n    }); // Util.mix(this, ViewGeoms);\n\n    self.init();\n    return _this;\n  }\n\n  _proto._setTheme = function _setTheme() {\n    var self = this;\n    var theme = self.get('theme');\n    var viewTheme = {};\n    var newTheme = {};\n\n    if (Util.isObject(theme)) {\n      newTheme = theme;\n    } else if (Util.indexOf(Object.keys(Theme), theme) !== -1) {\n      newTheme = Theme[theme];\n    }\n\n    Util.deepMix(viewTheme, Global, newTheme);\n    self.set('viewTheme', viewTheme);\n  };\n  /**\n   * @protected\n   * 初始化\n   */\n\n\n  _proto.init = function init() {\n    this._initViewPlot(); // 先创建容器\n\n\n    if (this.get('data')) {\n      this._initData(this.get('data'));\n    }\n\n    this._initOptions();\n\n    this._initControllers();\n\n    this._bindEvents();\n  }; // 初始化配置项\n\n\n  _proto._initOptions = function _initOptions() {\n    var self = this;\n    var options = Util.mix({}, self.get('options')); // 防止修改原始值\n\n    if (!options.scales) {\n      options.scales = {};\n    }\n\n    if (!options.coord) {\n      options.coord = {};\n    }\n\n    if (options.animate === false) {\n      this.set('animate', false);\n    }\n\n    if (options.tooltip === false || Util.isNull(options.tooltip)) {\n      // 配置项方式关闭 tooltip\n      this.set('tooltipEnable', false);\n    }\n\n    if (options.geoms && options.geoms.length) {\n      Util.each(options.geoms, function (geomOption) {\n        self._createGeom(geomOption);\n      });\n    }\n\n    var scaleController = self.get('scaleController');\n\n    if (scaleController) {\n      scaleController.defs = options.scales;\n    }\n\n    var coordController = self.get('coordController');\n\n    if (coordController) {\n      coordController.reset(options.coord);\n    }\n\n    this.set('options', options);\n  };\n\n  _proto._createGeom = function _createGeom(cfg) {\n    var type = cfg.type;\n    var geom;\n\n    if (this[type]) {\n      geom = this[type]();\n      Util.each(cfg, function (v, k) {\n        if (geom[k]) {\n          if (Util.isObject(v) && v.field) {\n            // 配置项传入\n            if (v === 'label') {\n              geom[k](v.field, v.callback, v.cfg);\n            } else {\n              var _cfg;\n\n              Util.each(v, function (value, key) {\n                if (key !== 'field') {\n                  _cfg = value;\n                }\n              });\n              geom[k](v.field, _cfg);\n            }\n          } else {\n            geom[k](v);\n          }\n        }\n      });\n    }\n  }; // 初始化所有的控制器\n\n\n  _proto._initControllers = function _initControllers() {\n    var self = this;\n    var options = self.get('options');\n    var viewTheme = self.get('viewTheme');\n    var canvas = self.get('canvas');\n    var scaleController = new Controller.Scale({\n      viewTheme: viewTheme,\n      defs: options.scales\n    });\n    var coordController = new Controller.Coord(options.coord);\n    this.set('scaleController', scaleController);\n    this.set('coordController', coordController);\n    var axisController = new Controller.Axis({\n      canvas: canvas,\n      viewTheme: viewTheme\n    });\n    this.set('axisController', axisController);\n    var guideController = new Controller.Guide({\n      viewTheme: viewTheme,\n      options: options.guides || []\n    });\n    this.set('guideController', guideController);\n  };\n\n  _proto._initViewPlot = function _initViewPlot() {\n    if (!this.get('viewContainer')) {\n      // 用于 geom 的绘制\n      this.set('viewContainer', this.get('middlePlot'));\n    }\n  };\n\n  _proto._initGeoms = function _initGeoms() {\n    var geoms = this.get('geoms');\n    var filteredData = this.get('filteredData');\n    var coord = this.get('coord');\n    var viewId = this.get('_id');\n\n    for (var i = 0; i < geoms.length; i++) {\n      var geom = geoms[i];\n      geom.set('data', filteredData);\n      geom.set('coord', coord);\n      geom.set('_id', viewId + '-geom' + i);\n      geom.set('keyFields', this.get('keyFields'));\n      geom.init();\n    }\n  };\n\n  _proto._clearGeoms = function _clearGeoms() {\n    var self = this;\n    var geoms = self.get('geoms');\n\n    for (var i = 0; i < geoms.length; i++) {\n      var geom = geoms[i];\n      geom.clear();\n    }\n  };\n\n  _proto._removeGeoms = function _removeGeoms() {\n    var self = this;\n    var geoms = self.get('geoms');\n\n    while (geoms.length > 0) {\n      var geom = geoms.shift();\n      geom.destroy();\n    }\n  };\n\n  _proto._drawGeoms = function _drawGeoms() {\n    var geoms = this.get('geoms');\n    var coord = this.get('coord');\n\n    for (var i = 0; i < geoms.length; i++) {\n      var geom = geoms[i];\n      geom.setCoord(coord);\n      geom.paint();\n    }\n  };\n\n  _proto.isShapeInView = function isShapeInView(shape) {\n    var id = this.get('_id');\n    var shapeId = shape._id;\n\n    if (!shapeId) {\n      return shape.get('parent').get('viewId') === id;\n    }\n\n    return shapeId.split('-')[0] === id;\n  };\n  /**\n   * View 所在的范围\n   * @protected\n   * @return {Object} View 所在的范围\n   */\n\n\n  _proto.getViewRegion = function getViewRegion() {\n    var self = this;\n    var parent = self.get('parent');\n    var start;\n    var end;\n\n    if (parent) {\n      var region = parent.getViewRegion();\n\n      var viewRegion = self._getViewRegion(region.start, region.end);\n\n      start = viewRegion.start;\n      end = viewRegion.end;\n    } else {\n      start = self.get('start');\n      end = self.get('end');\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  }; // 获取 range 所在的范围\n\n\n  _proto._getViewRegion = function _getViewRegion(plotStart, plotEnd) {\n    var start = this.get('start');\n    var end = this.get('end');\n    var startX = start.x;\n    var startY = 1 - end.y;\n    var endX = end.x;\n    var endY = 1 - start.y;\n    var padding = this.get('padding'); // 转换成 上、右、下、左的模式\n\n    var allPadding = Util.toAllPadding(padding);\n    var top = allPadding[0];\n    var right = allPadding[1];\n    var bottom = allPadding[2];\n    var left = allPadding[3];\n    var startPoint = {\n      x: startX * (plotEnd.x - plotStart.x) + plotStart.x + left,\n      y: startY * (plotEnd.y - plotStart.y) + plotStart.y - bottom\n    };\n    var endPoint = {\n      x: endX * (plotEnd.x - plotStart.x) + plotStart.x - right,\n      y: endY * (plotEnd.y - plotStart.y) + plotStart.y + top\n    };\n    return {\n      start: startPoint,\n      end: endPoint\n    };\n  };\n\n  _proto._createCoord = function _createCoord() {\n    var coordController = this.get('coordController');\n    var region = this.getViewRegion();\n    var coord = coordController.createCoord(region.start, region.end);\n    this.set('coord', coord);\n  };\n\n  _proto._renderAxes = function _renderAxes() {\n    var options = this.get('options');\n    var axesOptions = options.axes;\n\n    if (axesOptions === false) {\n      // 不渲染坐标轴\n      return;\n    }\n\n    var axisController = this.get('axisController');\n    axisController.container = this.get('backPlot');\n    axisController.coord = this.get('coord');\n    axisController.options = axesOptions || {};\n    var xScale = this.getXScale();\n    var yScales = this.getYScales();\n    var viewId = this.get('_id');\n    axisController.createAxis(xScale, yScales, viewId);\n  };\n\n  _proto._renderGuides = function _renderGuides() {\n    var guideController = this.get('guideController');\n\n    if (!Util.isEmpty(guideController.options)) {\n      var coord = this.get('coord');\n      guideController.view = this;\n      guideController.backContainer = this.get('backPlot');\n      guideController.frontContainer = this.get('frontPlot');\n      guideController.xScales = this._getScales('x');\n      guideController.yScales = this._getScales('y');\n      guideController.render(coord);\n    }\n  }; // 注册事件\n\n\n  _proto._bindEvents = function _bindEvents() {\n    var eventController = new Controller.Event({\n      view: this,\n      canvas: this.get('canvas')\n    });\n    eventController.bindEvents();\n    this.set('eventController', eventController);\n  }; // 清理时间\n\n\n  _proto._clearEvents = function _clearEvents() {\n    var eventController = this.get('eventController');\n    eventController && eventController.clearEvents();\n  };\n\n  _proto._getScales = function _getScales(dimType) {\n    var geoms = this.get('geoms');\n    var result = {};\n\n    for (var i = 0; i < geoms.length; i++) {\n      var geom = geoms[i];\n      var scale = dimType === 'x' ? geom.getXScale() : geom.getYScale();\n\n      if (scale && !result[scale.field]) {\n        result[scale.field] = scale;\n      }\n    }\n\n    return result;\n  };\n\n  _proto._adjustScale = function _adjustScale() {\n    this._setCatScalesRange();\n\n    var geoms = this.get('geoms');\n    var scaleController = this.get('scaleController');\n    var colDefs = scaleController.defs;\n\n    for (var i = 0; i < geoms.length; i++) {\n      var geom = geoms[i];\n\n      if (geom.get('type') === 'interval') {\n        var yScale = geom.getYScale();\n        var field = yScale.field,\n            min = yScale.min,\n            max = yScale.max,\n            type = yScale.type;\n\n        if (!(colDefs[field] && colDefs[field].min) && type !== 'time') {\n          if (min > 0) {\n            yScale.change({\n              min: 0\n            });\n          } else if (max <= 0) {\n            // 当柱状图全为负值时也需要从 0 开始生长\n            yScale.change({\n              max: 0\n            });\n          }\n        }\n      }\n    }\n  };\n\n  _proto._setCatScalesRange = function _setCatScalesRange() {\n    var self = this;\n    var coord = self.get('coord');\n    var viewTheme = self.get('viewTheme');\n    var xScale = self.getXScale();\n    var yScales = self.getYScales();\n    var scales = [];\n    xScale && scales.push(xScale);\n    scales = scales.concat(yScales);\n    var inFullCircle = coord.isPolar && isFullCircle(coord);\n    var scaleController = self.get('scaleController');\n    var colDefs = scaleController.defs;\n    Util.each(scales, function (scale) {\n      if ((scale.isCategory || scale.isIdentity) && scale.values && !(colDefs[scale.field] && colDefs[scale.field].range)) {\n        var count = scale.values.length;\n        var range;\n\n        if (count === 1) {\n          range = [0.5, 1]; // 只有一个分类时,防止计算出现 [0.5,0.5]的状态\n        } else {\n          var widthRatio = 1;\n          var offset = 0;\n\n          if (inFullCircle) {\n            if (!coord.isTransposed) {\n              range = [0, 1 - 1 / count];\n            } else {\n              widthRatio = viewTheme.widthRatio.multiplePie;\n              offset = 1 / count * widthRatio;\n              range = [offset / 2, 1 - offset / 2];\n            }\n          } else {\n            offset = 1 / count * 1 / 2; // 两边留下分类空间的一半\n\n            range = [offset, 1 - offset]; // 坐标轴最前面和最后面留下空白防止绘制柱状图时\n          }\n        }\n\n        scale.range = range;\n      }\n    });\n  };\n\n  _proto.getXScale = function getXScale() {\n    var geoms = this.get('geoms'); // 如果进行过滤，那么 geom 默认隐藏时会出现不一致\n    // 默认隐藏时坐标轴不绘制，但是调用了 geom.show() 后，则图形显示了，坐标轴依然不见\n\n    /* .filter(function(geom) {\n      return geom.get('visible');\n    }); */\n\n    var xScale = null;\n\n    if (!Util.isEmpty(geoms)) {\n      xScale = geoms[0].getXScale();\n    }\n\n    return xScale;\n  };\n\n  _proto.getYScales = function getYScales() {\n    var geoms = this.get('geoms');\n    /* .filter(function(geom) {\n      return geom.get('visible');\n    }); */\n\n    var rst = [];\n\n    for (var i = 0; i < geoms.length; i++) {\n      var geom = geoms[i];\n      var yScale = geom.getYScale();\n\n      if (yScale && Util.indexOf(rst, yScale) === -1) {\n        rst.push(yScale);\n      }\n    }\n\n    return rst;\n  };\n  /**\n   * 获取数据对应在画布空间的坐标\n   * @param  {Object} item 原始数据\n   * @return {Object}      返回对应的画布上的坐标点\n   */\n\n\n  _proto.getXY = function getXY(item) {\n    var self = this;\n    var coord = self.get('coord');\n\n    var xScales = self._getScales('x');\n\n    var yScales = self._getScales('y');\n\n    var x;\n    var y;\n\n    for (var field in item) {\n      if (xScales[field]) {\n        x = xScales[field].scale(item[field]);\n      }\n\n      if (yScales[field]) {\n        y = yScales[field].scale(item[field]);\n      }\n    }\n\n    if (!Util.isNil(x) && !Util.isNil(y)) {\n      return coord.convert({\n        x: x,\n        y: y\n      });\n    }\n\n    return null;\n  };\n  /**\n   * 获取逼近的点的数据集合\n   * @param  {Object} point 画布上的像素点\n   * @return {Array} 数据\n   */\n\n\n  _proto.getSnapRecords = function getSnapRecords(point) {\n    var self = this;\n    var geoms = self.get('geoms');\n    var rst = [];\n    Util.each(geoms, function (geom) {\n      var dataArray = geom.get('dataArray');\n      var record;\n      Util.each(dataArray, function (data) {\n        record = geom.findPoint(point, data);\n        record && rst.push(record);\n      });\n    });\n    return rst;\n  };\n  /**\n   * @protected\n   * 添加几何标记\n   * @param {Geom} geom 几何标记\n   */\n\n\n  _proto.addGeom = function addGeom(geom) {\n    var self = this;\n    var geoms = self.get('geoms');\n    geoms.push(geom);\n    geom.set('view', self);\n    var container = self.get('viewContainer');\n    geom.set('container', container);\n    geom.set('animate', self.get('animate'));\n    geom.bindEvents();\n  };\n  /**\n   * @protected\n   * 移除几何标记\n   * @param {Geom} geom 几何标记\n   */\n\n\n  _proto.removeGeom = function removeGeom(geom) {\n    var geoms = this.get('geoms');\n    Util.Array.remove(geoms, geom);\n    geom.destroy();\n  };\n\n  _proto.createScale = function createScale(field, data) {\n    var scales = this.get('scales');\n    var parent = this.get('parent');\n    var scale = scales[field]; // const filters = this._getFilters();\n\n    if (!data) {\n      var filteredData = this.get('filteredData');\n\n      var legendFields = this._getFieldsForLegend(); // 过滤导致数据为空时，需要使用全局数据\n      // 参与过滤的字段的度量也根据全局数据来生成\n\n\n      if (filteredData.length && legendFields.indexOf(field) === -1) {\n        data = filteredData;\n      } else {\n        data = this.get('data');\n      }\n    }\n\n    var scaleController = this.get('scaleController');\n\n    if (!scale) {\n      scale = scaleController.createScale(field, data);\n\n      if (scale.sync && parent) {\n        var parentScale = parent.createScale(field, data);\n        scale = this._getSyncScale(parentScale, scale);\n      }\n\n      scales[field] = scale;\n    } else if (scale.sync) {\n      // 防止 view 内部创建的scale，Chart 上的scale 范围更大\n      var newScale = scaleController.createScale(field, data);\n\n      this._syncScale(scale, newScale);\n    }\n\n    return scale;\n  };\n\n  _proto._getFieldsForLegend = function _getFieldsForLegend() {\n    var fields = [];\n    var geoms = this.get('geoms');\n    Util.each(geoms, function (geom) {\n      var geomFields = geom.getFieldsForLegend();\n      fields = fields.concat(geomFields);\n    });\n    return Util.uniq(fields);\n  }; // 如果需要同步度量，则使得 values,min,max的范围最大\n\n\n  _proto._getSyncScale = function _getSyncScale(parentScale, scale) {\n    if (parentScale.type !== scale.type) {\n      return scale;\n    }\n\n    this._syncScale(parentScale, scale);\n\n    return parentScale;\n  };\n\n  _proto._syncScale = function _syncScale(distScale, sourceScale) {\n    var mergeValues = Util.union(distScale.values, sourceScale.values);\n\n    if (sourceScale.isLinear) {\n      var max = Math.max(distScale.max, sourceScale.max);\n      var min = Math.min(distScale.min, sourceScale.min);\n\n      if (distScale.max !== max || distScale.min !== min) {\n        distScale.change({\n          min: min,\n          max: max,\n          values: mergeValues\n        });\n      }\n    }\n\n    if (mergeValues.length !== distScale.values.length) {\n      distScale.change({\n        values: mergeValues\n      });\n    }\n  };\n  /**\n   * @protected\n   * 获取过滤后的值（需要显示的值）\n   * @param {String} field 度量\n   * @return {Array.<String>} 滤后的值\n   */\n\n\n  _proto.getFilteredValues = function getFilteredValues(field) {\n    var scale = this.get('scales')[field];\n    var values = scale.values;\n\n    var filters = this._getFilters();\n\n    var rst;\n\n    if (filters && filters[field]) {\n      rst = values.filter(filters[field]);\n    } else {\n      rst = values.slice(0);\n    }\n\n    return rst;\n  };\n  /**\n   * @protected\n   * 获取被过滤的值（不需显示的值）\n   * @param {String} field 度量\n   * @return {Array.<String>} 滤出的值\n   */\n\n\n  _proto.getFilteredOutValues = function getFilteredOutValues(field) {\n    var scale = this.get('scales')[field];\n    var values = scale.values;\n\n    var filters = this._getFilters();\n\n    var rst;\n\n    if (filters && filters[field]) {\n      rst = values.filter(function (v) {\n        return !filters[field](v);\n      });\n    } else {\n      rst = [];\n    }\n\n    return rst;\n  };\n\n  _proto.filter = function filter(field, condition) {\n    var options = this.get('options');\n\n    if (!options.filters) {\n      options.filters = {};\n    }\n\n    options.filters[field] = condition;\n  }; // 获取 filters\n\n\n  _proto._getFilters = function _getFilters() {\n    var options = this.get('options');\n    return options.filters;\n  }; // 执行 filter 数据\n\n\n  _proto.execFilter = function execFilter(data) {\n    var self = this;\n\n    var filters = self._getFilters();\n\n    if (filters) {\n      data = data.filter(function (obj) {\n        var rst = true;\n        Util.each(filters, function (fn, k) {\n          if (fn) {\n            rst = fn(obj[k], obj);\n\n            if (!rst) {\n              return false;\n            }\n          }\n        });\n        return rst;\n      });\n    }\n\n    return data;\n  };\n\n  _proto.axis = function axis(field, cfg) {\n    var options = this.get('options');\n\n    if (field === false) {\n      options.axes = false;\n    } else {\n      if (!options.axes) {\n        options.axes = {};\n      }\n\n      var axisOptions = options.axes;\n      axisOptions[field] = cfg;\n    }\n\n    return this;\n  };\n\n  _proto.guide = function guide() {\n    return this.get('guideController');\n  };\n\n  _proto._getKeyFields = function _getKeyFields(scaleDefs) {\n    var keyFields = [];\n    Util.each(scaleDefs, function (def, field) {\n      if (def.key) {\n        keyFields.push(field);\n      }\n    });\n    this.set('keyFields', keyFields);\n  };\n\n  _proto.scale = function scale(field, cfg) {\n    var options = this.get('options');\n    var scaleDefs = options.scales;\n\n    if (Util.isObject(field)) {\n      Util.mix(scaleDefs, field);\n    } else {\n      scaleDefs[field] = cfg;\n    }\n\n    this._getKeyFields(scaleDefs);\n\n    return this;\n  };\n\n  _proto.tooltip = function tooltip(visible) {\n    this.set('tooltipEnable', visible);\n    return this;\n  };\n\n  _proto.animate = function animate(enable) {\n    var options = this.get('options');\n    options.animate = enable;\n    this.set('animate', enable);\n    return this;\n  };\n\n  _proto.changeOptions = function changeOptions(options) {\n    this.set('options', options);\n\n    this._initOptions(options);\n\n    return this;\n  };\n  /**\n   * @internal 查找包含指定点的视图\n   * @param  {Object} point 点的位置\n   * @return {Array} 多个视图\n   */\n\n\n  _proto.getViewsByPoint = function getViewsByPoint(point) {\n    var rst = [];\n    var views = this.get('views');\n\n    if (isPointInCoord(this.get('coord'), point)) {\n      rst.push(this);\n    }\n\n    Util.each(views, function (view) {\n      if (view.get('visible') && isPointInCoord(view.get('coord'), point)) {\n        rst.push(view);\n      }\n    });\n    return rst;\n  };\n  /**\n   * 遍历所有的 shape ，用户更改 shape 后进行刷新\n   * @param  {Function} fn 回调函数包含参数：record,shape,geom,view\n   * @return {View} 当前视图\n   */\n\n\n  _proto.eachShape = function eachShape(fn) {\n    var self = this;\n    var views = self.get('views');\n    var canvas = self.get('canvas');\n    Util.each(views, function (view) {\n      view.eachShape(fn);\n    });\n    var geoms = this.get('geoms');\n    Util.each(geoms, function (geom) {\n      var shapes = geom.getShapes();\n      Util.each(shapes, function (shape) {\n        var origin = shape.get('origin');\n\n        if (Util.isArray(origin)) {\n          var arr = origin.map(function (subOrigin) {\n            return subOrigin[FIELD_ORIGIN];\n          });\n          fn(arr, shape, geom, self);\n        } else {\n          var obj = origin[FIELD_ORIGIN];\n          fn(obj, shape, geom, self);\n        }\n      });\n    });\n    canvas.draw();\n    return this;\n  };\n  /**\n   * 遍历所有的 shape ，回调函数中 true / false 控制图形是否显示\n   * @param  {Function} fn 回调函数包含参数：record,shape,geom,view\n   * @return {View} 当前视图\n   */\n\n\n  _proto.filterShape = function filterShape(fn) {\n    var callback = function callback(record, shape, geom, view) {\n      if (!fn(record, shape, geom, view)) {\n        shape.hide();\n      } else {\n        shape.show();\n      }\n    };\n\n    this.eachShape(callback);\n    return this;\n  };\n\n  _proto.clearInner = function clearInner() {\n    this.set('scales', {});\n    var options = this.get('options');\n    options.geoms = null;\n\n    this._clearGeoms(); // reset guide\n\n\n    this.get('guideController') && this.get('guideController').reset(); // clear axis\n\n    this.get('axisController') && this.get('axisController').clear();\n  };\n  /**\n   * 清除视图内容，包括 geoms\n   * @return {View} 当前视图\n   */\n\n\n  _proto.clear = function clear() {\n    var options = this.get('options');\n    options.filters = null;\n\n    this._removeGeoms(); // const container = this.get('viewContainer');\n    // container.clear();\n\n\n    this.clearInner();\n    this.get('guideController') && this.get('guideController').clear();\n    this.set('isUpdate', false);\n    this.set('keyFields', []);\n    return this;\n  };\n  /**\n   * 设置坐标系信息\n   * @param  {String} type 类型\n   * @param  {Object} cfg  配置项\n   * @return {Object} coordController 坐标系的管理器\n   */\n\n\n  _proto.coord = function coord(type, cfg) {\n    var coordController = this.get('coordController');\n    coordController.reset({\n      type: type,\n      cfg: cfg\n    });\n    return coordController;\n  };\n  /**\n   * 当父元素边框发生改变时坐标系需要重新调整\n   * @protected\n   */\n\n\n  _proto.resetCoord = function resetCoord() {\n    this._createCoord();\n  };\n\n  _proto.source = function source(data, scales) {\n    this._initData(data);\n\n    if (scales) {\n      this.scale(scales);\n    }\n\n    this.emit('setdata');\n    return this;\n  };\n\n  _proto.changeData = function changeData(data) {\n    this.emit('beforechangedata');\n\n    this._initData(data);\n\n    this.emit('afterchangedata');\n    this.repaint();\n    return this;\n  };\n\n  _proto._initData = function _initData(data) {\n    var dataView = this.get('dataView');\n\n    if (dataView) {\n      dataView.off('change', Util.getWrapBehavior(this, '_onViewChange'));\n      this.set('dataView', null);\n    }\n\n    if (data && data.isDataView) {\n      data.on('change', Util.wrapBehavior(this, '_onViewChange'));\n      this.set('dataView', data);\n      data = data.rows;\n    }\n\n    this.set('data', data);\n  };\n\n  _proto._onViewChange = function _onViewChange() {\n    this.emit('beforechangedata');\n    var dataView = this.get('dataView');\n    var rows = dataView.rows;\n    this.set('data', rows);\n    this.emit('afterchangedata');\n    this.repaint();\n  }; // 初始化各个 view 和绘制辅助元素\n\n\n  _proto.beforeRender = function beforeRender() {\n    var views = this.get('views'); // 如果存在 views 则初始化子 view 的方法\n\n    Util.each(views, function (view) {\n      view.beforeRender();\n    });\n    this.initView();\n  }; // 绘制坐标轴、图例、辅助元素等图表组件\n\n\n  _proto.drawComponents = function drawComponents() {\n    var views = this.get('views'); // 如果存在 views 则初始化子 view 的方法\n\n    Util.each(views, function (view) {\n      view.drawComponents();\n    });\n\n    this._renderAxes();\n\n    this._renderGuides();\n  }; // 绘制图形\n\n\n  _proto.drawCanvas = function drawCanvas(stopDraw) {\n    if (!stopDraw) {\n      var views = this.get('views');\n      var backPlot = this.get('backPlot');\n      backPlot.sort();\n      var canvas = this.get('canvas');\n      var animate = this.get('animate');\n\n      if (animate) {\n        var isUpdate = this.get('isUpdate');\n        Util.each(views, function (view) {\n          Animate.execAnimation(view, isUpdate);\n        });\n        Animate.execAnimation(this, isUpdate);\n      } else {\n        canvas.draw();\n      }\n    }\n  };\n\n  _proto.render = function render(stopDraw) {\n    this.clearInner();\n    this.emit('beforerender');\n    this.beforeRender();\n    this.emit('beforepaint');\n    this.drawComponents();\n    this.paint();\n    this.emit('afterpaint');\n    this.drawCanvas(stopDraw);\n    this.emit('afterrender');\n    this.set('rendered', true);\n    return this;\n  };\n\n  _proto.initView = function initView() {\n    var data = this.get('data') || [];\n    var filteredData = this.execFilter(data);\n    this.set('filteredData', filteredData); // if (!Util.isEmpty(data)) {\n\n    this._createCoord(); // draw geometry 前绘制区域可能会发生改变\n\n\n    this._initGeoms();\n\n    this._adjustScale(); // }\n\n  };\n\n  _proto.paint = function paint() {\n    var views = this.get('views'); // 绘制\n\n    Util.each(views, function (view) {\n      view.paint();\n    });\n    var data = this.get('data');\n\n    if (!Util.isEmpty(data)) {\n      this._drawGeoms();\n    } // 如果 view 隐藏了，隐藏所有的图形和坐标轴\n\n\n    if (!this.get('visible')) {\n      this.changeVisible(false, true); // 隐藏所有的图形，但是不绘制\n    }\n  };\n\n  _proto.changeVisible = function changeVisible(visible, stopDraw) {\n    var geoms = this.get('geoms');\n    Util.each(geoms, function (geom) {\n      // if (geom.get('visible')) { // geom 隐藏时不受\n      geom.changeVisible(visible, true); // }\n    });\n    this.get('axisController') && this.get('axisController').changeVisible(visible);\n    this.get('guideController') && this.get('guideController').changeVisible(visible);\n\n    if (!stopDraw) {\n      var canvas = this.get('canvas');\n      canvas.draw();\n    }\n  };\n\n  _proto.repaint = function repaint() {\n    this.set('isUpdate', true);\n    this.clearInner();\n    this.render();\n  };\n\n  _proto.destroy = function destroy() {\n    this._clearEvents();\n\n    var dataView = this.get('dataView');\n    dataView && dataView.off('change', Util.getWrapBehavior(this, '_onViewChange'));\n    this.clear();\n\n    _Base.prototype.destroy.call(this);\n  };\n\n  return View;\n}(Base);\n\nmodule.exports = View;"]}]}