{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/canvas.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/canvas.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar G = require('@antv/g/lib');\nvar Crosshair = require('./crosshair');\nvar MarkerGroupMixin = require('./mixin/marker-group');\nvar PositionMixin = require('./mixin/position');\nvar Tooltip = require('./base');\nvar Util = require('../util');\nvar _require = require('../const'), FONT_FAMILY = _require.FONT_FAMILY;\nvar DomUtil = Util.DomUtil;\nvar MatrixUtil = Util.MatrixUtil;\nvar CanvasTooltip = function (_Tooltip) {\n    _inheritsLoose(CanvasTooltip, _Tooltip);\n    var _super = _createSuper(CanvasTooltip);\n    var _proto = CanvasTooltip.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Tooltip.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            boardStyle: {\n                x: 0,\n                y: 0,\n                width: 100,\n                height: 100,\n                fill: 'rgba(255, 255, 255, 0.9)',\n                radius: 4,\n                stroke: '#e2e2e2',\n                lineWidth: 1\n            },\n            titleStyle: {\n                fontFamily: FONT_FAMILY,\n                text: '',\n                textBaseline: 'top',\n                fontSize: 12,\n                fill: 'rgb(87, 87, 87)',\n                lineHeight: 20,\n                padding: 20\n            },\n            markerStyle: {\n                radius: 4\n            },\n            nameStyle: {\n                fontFamily: FONT_FAMILY,\n                fontSize: 12,\n                fill: 'rgb(87, 87, 87)',\n                textBaseline: 'middle',\n                textAlign: 'start',\n                padding: 8\n            },\n            valueStyle: {\n                fontFamily: FONT_FAMILY,\n                fontSize: 12,\n                fill: 'rgb(87, 87, 87)',\n                textBaseline: 'middle',\n                textAlign: 'start',\n                padding: 30\n            },\n            padding: {\n                top: 20,\n                right: 20,\n                bottom: 20,\n                left: 20\n            },\n            itemGap: 10,\n            animationDuration: 200\n        });\n    };\n    function CanvasTooltip(cfg) {\n        var _this;\n        _this = _Tooltip.call(this, cfg) || this;\n        Util.assign(_assertThisInitialized(_this), PositionMixin);\n        Util.assign(_assertThisInitialized(_this), MarkerGroupMixin);\n        var crosshair = _this.get('crosshairs');\n        if (crosshair) {\n            var plot = crosshair.type === 'rect' ? _this.get('backPlot') : _this.get('frontPlot');\n            var crosshairGroup = new Crosshair(Util.mix({\n                plot: plot,\n                plotRange: _this.get('plotRange'),\n                canvas: _this.get('canvas')\n            }, _this.get('crosshairs')));\n            crosshairGroup.hide();\n            _this.set('crosshairGroup', crosshairGroup);\n        }\n        _this._init_();\n        if (_this.get('items')) {\n            _this.render();\n        }\n        return _this;\n    }\n    _proto._init_ = function _init_() {\n        var self = this;\n        var padding = self.get('padding');\n        var parent = self.get('frontPlot');\n        var markerGroup = parent.addGroup({\n            capture: false\n        });\n        self.set('markerGroup', markerGroup);\n        var container = parent.addGroup();\n        container.hide();\n        self.set('container', container);\n        var board = container.addShape('rect', {\n            attrs: Util.mix({}, self.get('boardStyle'))\n        });\n        self.set('board', board);\n        var titleStyle = self.get('titleStyle');\n        if (self.get('showTitle')) {\n            var titleShape = container.addShape('text', {\n                attrs: Util.mix({\n                    x: padding.left,\n                    y: padding.top\n                }, titleStyle)\n            });\n            self.set('titleShape', titleShape);\n            titleShape.name = 'tooltip-title';\n        }\n        var itemsGroup = container.addGroup();\n        itemsGroup.move(padding.left, padding.top + titleStyle.lineHeight + titleStyle.padding);\n        self.set('itemsGroup', itemsGroup);\n    };\n    _proto.render = function render() {\n        var self = this;\n        self.clear();\n        var container = self.get('container');\n        var board = self.get('board');\n        var showTitle = self.get('showTitle');\n        var titleContent = self.get('titleContent');\n        var titleShape = this.get('titleShape');\n        var itemsGroup = this.get('itemsGroup');\n        var items = self.get('items');\n        var padding = self.get('padding');\n        if (titleShape && showTitle) {\n            titleShape.attr('text', titleContent);\n        }\n        if (itemsGroup) {\n            var itemGap = self.get('itemGap');\n            var x = 0;\n            var y = 0;\n            Util.each(items, function (item) {\n                var itemGroup = self._addItem(item);\n                itemGroup.move(x, y);\n                itemsGroup.add(itemGroup);\n                var itemHeight = itemGroup.getBBox().height;\n                y += itemHeight + itemGap;\n            });\n        }\n        var bbox = container.getBBox();\n        var width = bbox.width + padding.right;\n        var height = bbox.height + padding.bottom;\n        board.attr('width', width);\n        board.attr('height', height);\n        self._alignToRight(width);\n    };\n    _proto.clear = function clear() {\n        var titleShape = this.get('titleShape');\n        var itemsGroup = this.get('itemsGroup');\n        var board = this.get('board');\n        titleShape.text = '';\n        itemsGroup.clear();\n        board.attr('width', 0);\n        board.attr('height', 0);\n    };\n    _proto.show = function show() {\n        var container = this.get('container');\n        container.show();\n        var crosshairGroup = this.get('crosshairGroup');\n        crosshairGroup && crosshairGroup.show();\n        var markerGroup = this.get('markerGroup');\n        markerGroup && markerGroup.show();\n        _Tooltip.prototype.show.call(this);\n        this.get('canvas').draw();\n    };\n    _proto.hide = function hide() {\n        var container = this.get('container');\n        container.hide();\n        var crosshairGroup = this.get('crosshairGroup');\n        crosshairGroup && crosshairGroup.hide();\n        var markerGroup = this.get('markerGroup');\n        markerGroup && markerGroup.hide();\n        _Tooltip.prototype.hide.call(this);\n        this.get('canvas').draw();\n    };\n    _proto.destroy = function destroy() {\n        var container = this.get('container');\n        var crosshairGroup = this.get('crosshairGroup');\n        crosshairGroup && crosshairGroup.destroy();\n        var markerGroup = this.get('markerGroup');\n        markerGroup && markerGroup.remove();\n        _Tooltip.prototype.destroy.call(this);\n        container.remove();\n    };\n    _proto.setPosition = function setPosition(x, y, target) {\n        var container = this.get('container');\n        var outterNode = this.get('canvas').get('el');\n        var viewWidth = DomUtil.getWidth(outterNode);\n        var viewHeight = DomUtil.getHeight(outterNode);\n        var bbox = container.getBBox();\n        var containerWidth = bbox.width;\n        var containerHeight = bbox.height;\n        var endx = x;\n        var endy = y;\n        var position;\n        if (this.get('position')) {\n            var _containerWidth = bbox.width;\n            var _containerHeight = bbox.height;\n            position = this._calcTooltipPosition(x, y, this.get('position'), _containerWidth, _containerHeight, target);\n            x = position[0];\n            y = position[1];\n        }\n        else {\n            position = this._constraintPositionInBoundary(x, y, containerWidth, containerHeight, viewWidth, viewHeight);\n            x = position[0];\n            y = position[1];\n        }\n        if (this.get('inPlot')) {\n            var plotRange = this.get('plotRange');\n            position = this._constraintPositionInPlot(x, y, containerWidth, containerHeight, plotRange, this.get('enterable'));\n            x = position[0];\n            y = position[1];\n        }\n        var markerItems = this.get('markerItems');\n        if (!Util.isEmpty(markerItems)) {\n            endx = markerItems[0].x;\n            endy = markerItems[0].y;\n        }\n        var ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        var mat = MatrixUtil.transform(ulMatrix, [['t', x, y]]);\n        container.stopAnimate();\n        container.animate({\n            matrix: mat\n        }, this.get('animationDuration'));\n        var crosshairGroup = this.get('crosshairGroup');\n        if (crosshairGroup) {\n            var items = this.get('items');\n            crosshairGroup.setPosition(endx, endy, items);\n        }\n        _Tooltip.prototype.setPosition.call(this, x, y);\n    };\n    _proto._addItem = function _addItem(item) {\n        var group = new G.Group();\n        var markerRadius = this.get('markerStyle').radius;\n        if (item.marker) {\n            var markerAttrs = Util.mix({}, item.marker, {\n                x: item.marker.radius / 2,\n                y: 0,\n                symbol: item.marker.activeSymbol || item.marker.symbol\n            });\n            group.addShape('marker', {\n                attrs: markerAttrs\n            });\n            markerRadius = item.marker.radius;\n        }\n        var nameStyle = this.get('nameStyle');\n        group.addShape('text', {\n            attrs: Util.mix({\n                x: markerRadius + nameStyle.padding,\n                y: 0,\n                text: item.name\n            }, nameStyle)\n        });\n        var valueStyle = this.get('valueStyle');\n        group.addShape('text', {\n            attrs: Util.mix({\n                x: group.getBBox().width + valueStyle.padding,\n                y: 0,\n                text: item.value\n            }, valueStyle)\n        });\n        return group;\n    };\n    _proto._alignToRight = function _alignToRight(width) {\n        var _this2 = this;\n        var itemsGroup = this.get('itemsGroup');\n        var groups = itemsGroup.get('children');\n        Util.each(groups, function (g) {\n            var children = g.get('children');\n            var valueText = children[2];\n            var w = valueText.getBBox().width;\n            var x = width - w - _this2.get('padding').right * 2;\n            valueText.attr('x', x);\n        });\n    };\n    return CanvasTooltip;\n}(Tooltip);\nmodule.exports = CanvasTooltip;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/canvas.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/canvas.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar G = require('@antv/g/lib');\n\nvar Crosshair = require('./crosshair');\n\nvar MarkerGroupMixin = require('./mixin/marker-group');\n\nvar PositionMixin = require('./mixin/position');\n\nvar Tooltip = require('./base');\n\nvar Util = require('../util');\n\nvar _require = require('../const'),\n    FONT_FAMILY = _require.FONT_FAMILY;\n\nvar DomUtil = Util.DomUtil;\nvar MatrixUtil = Util.MatrixUtil;\n\nvar CanvasTooltip = /*#__PURE__*/function (_Tooltip) {\n  _inheritsLoose(CanvasTooltip, _Tooltip);\n\n  var _super = _createSuper(CanvasTooltip);\n\n  var _proto = CanvasTooltip.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Tooltip.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * 默认背景板样式\n       * @type {Object}\n       */\n      boardStyle: {\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 100,\n        fill: 'rgba(255, 255, 255, 0.9)',\n        radius: 4,\n        stroke: '#e2e2e2',\n        lineWidth: 1\n      },\n\n      /**\n       * 默认title样式\n       * @type {Object}\n       */\n      titleStyle: {\n        fontFamily: FONT_FAMILY,\n        text: '',\n        textBaseline: 'top',\n        fontSize: 12,\n        fill: 'rgb(87, 87, 87)',\n        lineHeight: 20,\n        padding: 20\n      },\n\n      /**\n       * 默认marker样式\n       * @type {Object}\n       */\n      markerStyle: {\n        radius: 4\n      },\n\n      /**\n       * 默认name样式\n       * @type {Object}\n       */\n      nameStyle: {\n        fontFamily: FONT_FAMILY,\n        fontSize: 12,\n        fill: 'rgb(87, 87, 87)',\n        textBaseline: 'middle',\n        textAlign: 'start',\n        padding: 8\n      },\n\n      /**\n       * 默认value样式\n       * @type {Object}\n       */\n      valueStyle: {\n        fontFamily: FONT_FAMILY,\n        fontSize: 12,\n        fill: 'rgb(87, 87, 87)',\n        textBaseline: 'middle',\n        textAlign: 'start',\n        padding: 30\n      },\n\n      /**\n       * 默认padding值\n       * @type {Object}\n       */\n      padding: {\n        top: 20,\n        right: 20,\n        bottom: 20,\n        left: 20\n      },\n\n      /**\n       * 默认item之间的gap\n       * @type {Number}\n       */\n      itemGap: 10,\n\n      /**\n       * 默认tooltip位置移动动画的时长\n       * @type {Number}\n       */\n      animationDuration: 200\n    });\n  };\n\n  function CanvasTooltip(cfg) {\n    var _this;\n\n    _this = _Tooltip.call(this, cfg) || this;\n    Util.assign(_assertThisInitialized(_this), PositionMixin);\n    Util.assign(_assertThisInitialized(_this), MarkerGroupMixin); // crosshair\n\n    var crosshair = _this.get('crosshairs');\n\n    if (crosshair) {\n      var plot = crosshair.type === 'rect' ? _this.get('backPlot') : _this.get('frontPlot');\n      var crosshairGroup = new Crosshair(Util.mix({\n        plot: plot,\n        plotRange: _this.get('plotRange'),\n        canvas: _this.get('canvas')\n      }, _this.get('crosshairs')));\n      crosshairGroup.hide();\n\n      _this.set('crosshairGroup', crosshairGroup);\n    }\n\n    _this._init_();\n\n    if (_this.get('items')) {\n      _this.render();\n    }\n\n    return _this;\n  }\n\n  _proto._init_ = function _init_() {\n    var self = this;\n    var padding = self.get('padding');\n    var parent = self.get('frontPlot'); // marker group\n\n    var markerGroup = parent.addGroup({\n      capture: false\n    });\n    self.set('markerGroup', markerGroup); // container\n\n    var container = parent.addGroup();\n    container.hide();\n    self.set('container', container); // board\n\n    var board = container.addShape('rect', {\n      attrs: Util.mix({}, self.get('boardStyle'))\n    });\n    self.set('board', board); // title\n\n    var titleStyle = self.get('titleStyle');\n\n    if (self.get('showTitle')) {\n      var titleShape = container.addShape('text', {\n        attrs: Util.mix({\n          x: padding.left,\n          y: padding.top\n        }, titleStyle)\n      });\n      self.set('titleShape', titleShape);\n      titleShape.name = 'tooltip-title';\n    } // items\n\n\n    var itemsGroup = container.addGroup();\n    itemsGroup.move(padding.left, padding.top + titleStyle.lineHeight + titleStyle.padding);\n    self.set('itemsGroup', itemsGroup);\n  };\n\n  _proto.render = function render() {\n    var self = this;\n    self.clear();\n    var container = self.get('container');\n    var board = self.get('board');\n    var showTitle = self.get('showTitle');\n    var titleContent = self.get('titleContent');\n    var titleShape = this.get('titleShape');\n    var itemsGroup = this.get('itemsGroup');\n    var items = self.get('items');\n    var padding = self.get('padding');\n\n    if (titleShape && showTitle) {\n      titleShape.attr('text', titleContent);\n    }\n\n    if (itemsGroup) {\n      var itemGap = self.get('itemGap');\n      var x = 0;\n      var y = 0;\n      Util.each(items, function (item) {\n        var itemGroup = self._addItem(item);\n\n        itemGroup.move(x, y);\n        itemsGroup.add(itemGroup);\n        var itemHeight = itemGroup.getBBox().height;\n        y += itemHeight + itemGap;\n      });\n    } // update board based on bbox\n\n\n    var bbox = container.getBBox();\n    var width = bbox.width + padding.right;\n    var height = bbox.height + padding.bottom;\n    board.attr('width', width);\n    board.attr('height', height); // align value text to right\n\n    self._alignToRight(width);\n  };\n\n  _proto.clear = function clear() {\n    var titleShape = this.get('titleShape');\n    var itemsGroup = this.get('itemsGroup');\n    var board = this.get('board');\n    titleShape.text = '';\n    itemsGroup.clear();\n    board.attr('width', 0);\n    board.attr('height', 0);\n  };\n\n  _proto.show = function show() {\n    var container = this.get('container');\n    container.show();\n    var crosshairGroup = this.get('crosshairGroup');\n    crosshairGroup && crosshairGroup.show();\n    var markerGroup = this.get('markerGroup');\n    markerGroup && markerGroup.show();\n\n    _Tooltip.prototype.show.call(this);\n\n    this.get('canvas').draw();\n  };\n\n  _proto.hide = function hide() {\n    var container = this.get('container');\n    container.hide();\n    var crosshairGroup = this.get('crosshairGroup');\n    crosshairGroup && crosshairGroup.hide();\n    var markerGroup = this.get('markerGroup');\n    markerGroup && markerGroup.hide();\n\n    _Tooltip.prototype.hide.call(this);\n\n    this.get('canvas').draw();\n  };\n\n  _proto.destroy = function destroy() {\n    var container = this.get('container');\n    var crosshairGroup = this.get('crosshairGroup');\n    crosshairGroup && crosshairGroup.destroy();\n    var markerGroup = this.get('markerGroup');\n    markerGroup && markerGroup.remove();\n\n    _Tooltip.prototype.destroy.call(this);\n\n    container.remove();\n  };\n\n  _proto.setPosition = function setPosition(x, y, target) {\n    var container = this.get('container');\n    var outterNode = this.get('canvas').get('el');\n    var viewWidth = DomUtil.getWidth(outterNode);\n    var viewHeight = DomUtil.getHeight(outterNode);\n    var bbox = container.getBBox();\n    var containerWidth = bbox.width;\n    var containerHeight = bbox.height;\n    var endx = x;\n    var endy = y;\n    var position;\n\n    if (this.get('position')) {\n      var _containerWidth = bbox.width;\n      var _containerHeight = bbox.height;\n      position = this._calcTooltipPosition(x, y, this.get('position'), _containerWidth, _containerHeight, target);\n      x = position[0];\n      y = position[1];\n    } else {\n      position = this._constraintPositionInBoundary(x, y, containerWidth, containerHeight, viewWidth, viewHeight);\n      x = position[0];\n      y = position[1];\n    }\n\n    if (this.get('inPlot')) {\n      // tooltip 必须限制在绘图区域内\n      var plotRange = this.get('plotRange');\n      position = this._constraintPositionInPlot(x, y, containerWidth, containerHeight, plotRange, this.get('enterable'));\n      x = position[0];\n      y = position[1];\n    }\n\n    var markerItems = this.get('markerItems');\n\n    if (!Util.isEmpty(markerItems)) {\n      endx = markerItems[0].x;\n      endy = markerItems[0].y;\n    }\n\n    var ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var mat = MatrixUtil.transform(ulMatrix, [['t', x, y]]);\n    container.stopAnimate();\n    container.animate({\n      matrix: mat\n    }, this.get('animationDuration'));\n    var crosshairGroup = this.get('crosshairGroup');\n\n    if (crosshairGroup) {\n      var items = this.get('items');\n      crosshairGroup.setPosition(endx, endy, items);\n    }\n\n    _Tooltip.prototype.setPosition.call(this, x, y);\n  };\n\n  _proto._addItem = function _addItem(item) {\n    var group = new G.Group();\n    var markerRadius = this.get('markerStyle').radius; // marker\n\n    if (item.marker) {\n      var markerAttrs = Util.mix({}, item.marker, {\n        x: item.marker.radius / 2,\n        y: 0,\n        symbol: item.marker.activeSymbol || item.marker.symbol\n      });\n      group.addShape('marker', {\n        attrs: markerAttrs\n      });\n      markerRadius = item.marker.radius;\n    } // name\n\n\n    var nameStyle = this.get('nameStyle');\n    group.addShape('text', {\n      attrs: Util.mix({\n        x: markerRadius + nameStyle.padding,\n        y: 0,\n        text: item.name\n      }, nameStyle)\n    }); // value\n\n    var valueStyle = this.get('valueStyle');\n    group.addShape('text', {\n      attrs: Util.mix({\n        x: group.getBBox().width + valueStyle.padding,\n        y: 0,\n        text: item.value\n      }, valueStyle)\n    });\n    return group;\n  };\n\n  _proto._alignToRight = function _alignToRight(width) {\n    var _this2 = this;\n\n    var itemsGroup = this.get('itemsGroup');\n    var groups = itemsGroup.get('children');\n    Util.each(groups, function (g) {\n      var children = g.get('children');\n      var valueText = children[2];\n      var w = valueText.getBBox().width;\n      var x = width - w - _this2.get('padding').right * 2;\n      valueText.attr('x', x);\n    });\n  };\n\n  return CanvasTooltip;\n}(Tooltip);\n\nmodule.exports = CanvasTooltip;"]}]}