{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-canvas\\esm\\util\\parse.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-canvas\\esm\\util\\parse.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { isString, each, isArray } from './util';\r\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;\r\nvar regexDot = /[^\\s\\,]+/gi;\r\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\r\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\r\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\r\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\r\nfunction addStop(steps, gradient) {\r\n    var arr = steps.match(regexColorStop);\r\n    each(arr, function (item) {\r\n        var itemArr = item.split(':');\r\n        gradient.addColorStop(itemArr[0], itemArr[1]);\r\n    });\r\n}\r\nexport function parseLineGradient(context, element, gradientStr) {\r\n    var arr = regexLG.exec(gradientStr);\r\n    var angle = (parseFloat(arr[1]) % 360) * (Math.PI / 180);\r\n    var steps = arr[2];\r\n    var box = element.getBBox();\r\n    var start;\r\n    var end;\r\n    if (angle >= 0 && angle < (1 / 2) * Math.PI) {\r\n        start = {\r\n            x: box.minX,\r\n            y: box.minY,\r\n        };\r\n        end = {\r\n            x: box.maxX,\r\n            y: box.maxY,\r\n        };\r\n    }\r\n    else if ((1 / 2) * Math.PI <= angle && angle < Math.PI) {\r\n        start = {\r\n            x: box.maxX,\r\n            y: box.minY,\r\n        };\r\n        end = {\r\n            x: box.minX,\r\n            y: box.maxY,\r\n        };\r\n    }\r\n    else if (Math.PI <= angle && angle < (3 / 2) * Math.PI) {\r\n        start = {\r\n            x: box.maxX,\r\n            y: box.maxY,\r\n        };\r\n        end = {\r\n            x: box.minX,\r\n            y: box.minY,\r\n        };\r\n    }\r\n    else {\r\n        start = {\r\n            x: box.minX,\r\n            y: box.maxY,\r\n        };\r\n        end = {\r\n            x: box.maxX,\r\n            y: box.minY,\r\n        };\r\n    }\r\n    var tanTheta = Math.tan(angle);\r\n    var tanTheta2 = tanTheta * tanTheta;\r\n    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\r\n    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;\r\n    var gradient = context.createLinearGradient(start.x, start.y, x, y);\r\n    addStop(steps, gradient);\r\n    return gradient;\r\n}\r\nexport function parseRadialGradient(context, element, gradientStr) {\r\n    var arr = regexRG.exec(gradientStr);\r\n    var fx = parseFloat(arr[1]);\r\n    var fy = parseFloat(arr[2]);\r\n    var fr = parseFloat(arr[3]);\r\n    var steps = arr[4];\r\n    if (fr === 0) {\r\n        var colors = steps.match(regexColorStop);\r\n        return colors[colors.length - 1].split(':')[1];\r\n    }\r\n    var box = element.getBBox();\r\n    var width = box.maxX - box.minX;\r\n    var height = box.maxY - box.minY;\r\n    var r = Math.sqrt(width * width + height * height) / 2;\r\n    var gradient = context.createRadialGradient(box.minX + width * fx, box.minY + height * fy, 0, box.minX + width / 2, box.minY + height / 2, fr * r);\r\n    addStop(steps, gradient);\r\n    return gradient;\r\n}\r\nexport function parsePattern(context, element, patternStr) {\r\n    if (element.get('patternSource') && element.get('patternSource') === patternStr) {\r\n        return element.get('pattern');\r\n    }\r\n    var pattern;\r\n    var img;\r\n    var arr = regexPR.exec(patternStr);\r\n    var repeat = arr[1];\r\n    var source = arr[2];\r\n    function onload() {\r\n        pattern = context.createPattern(img, repeat);\r\n        element.set('pattern', pattern);\r\n        element.set('patternSource', patternStr);\r\n    }\r\n    switch (repeat) {\r\n        case 'a':\r\n            repeat = 'repeat';\r\n            break;\r\n        case 'x':\r\n            repeat = 'repeat-x';\r\n            break;\r\n        case 'y':\r\n            repeat = 'repeat-y';\r\n            break;\r\n        case 'n':\r\n            repeat = 'no-repeat';\r\n            break;\r\n        default:\r\n            repeat = 'no-repeat';\r\n    }\r\n    img = new Image();\r\n    if (!source.match(/^data:/i)) {\r\n        img.crossOrigin = 'Anonymous';\r\n    }\r\n    img.src = source;\r\n    if (img.complete) {\r\n        onload();\r\n    }\r\n    else {\r\n        img.onload = onload;\r\n        img.src = img.src;\r\n    }\r\n    return pattern;\r\n}\r\nexport function parseStyle(context, element, color) {\r\n    if (isString(color)) {\r\n        if (color[1] === '(' || color[2] === '(') {\r\n            if (color[0] === 'l') {\r\n                return parseLineGradient(context, element, color);\r\n            }\r\n            if (color[0] === 'r') {\r\n                return parseRadialGradient(context, element, color);\r\n            }\r\n            if (color[0] === 'p') {\r\n                return parsePattern(context, element, color);\r\n            }\r\n        }\r\n        return color;\r\n    }\r\n}\r\nexport function parseRadius(radius) {\r\n    var r1 = 0;\r\n    var r2 = 0;\r\n    var r3 = 0;\r\n    var r4 = 0;\r\n    if (isArray(radius)) {\r\n        if (radius.length === 1) {\r\n            r1 = r2 = r3 = r4 = radius[0];\r\n        }\r\n        else if (radius.length === 2) {\r\n            r1 = r3 = radius[0];\r\n            r2 = r4 = radius[1];\r\n        }\r\n        else if (radius.length === 3) {\r\n            r1 = radius[0];\r\n            r2 = r4 = radius[1];\r\n            r3 = radius[2];\r\n        }\r\n        else {\r\n            r1 = radius[0];\r\n            r2 = radius[1];\r\n            r3 = radius[2];\r\n            r4 = radius[3];\r\n        }\r\n    }\r\n    else {\r\n        r1 = r2 = r3 = r4 = radius;\r\n    }\r\n    return [r1, r2, r3, r4];\r\n}\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-canvas\\esm\\util\\parse.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-canvas\\esm\\util\\parse.js"],"names":[],"mappings":"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","sourcesContent":["import { isString, each, isArray } from './util';\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;\nvar regexDot = /[^\\s\\,]+/gi;\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction addStop(steps, gradient) {\n    var arr = steps.match(regexColorStop);\n    each(arr, function (item) {\n        var itemArr = item.split(':');\n        gradient.addColorStop(itemArr[0], itemArr[1]);\n    });\n}\n/**\n * 将边和填充设置的颜色转换成线性渐变对象\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   gradientStr   颜色\n * @returns {any} 渐变对象\n */\nexport function parseLineGradient(context, element, gradientStr) {\n    var arr = regexLG.exec(gradientStr);\n    var angle = (parseFloat(arr[1]) % 360) * (Math.PI / 180);\n    var steps = arr[2];\n    var box = element.getBBox();\n    var start;\n    var end;\n    if (angle >= 0 && angle < (1 / 2) * Math.PI) {\n        start = {\n            x: box.minX,\n            y: box.minY,\n        };\n        end = {\n            x: box.maxX,\n            y: box.maxY,\n        };\n    }\n    else if ((1 / 2) * Math.PI <= angle && angle < Math.PI) {\n        start = {\n            x: box.maxX,\n            y: box.minY,\n        };\n        end = {\n            x: box.minX,\n            y: box.maxY,\n        };\n    }\n    else if (Math.PI <= angle && angle < (3 / 2) * Math.PI) {\n        start = {\n            x: box.maxX,\n            y: box.maxY,\n        };\n        end = {\n            x: box.minX,\n            y: box.minY,\n        };\n    }\n    else {\n        start = {\n            x: box.minX,\n            y: box.maxY,\n        };\n        end = {\n            x: box.maxX,\n            y: box.minY,\n        };\n    }\n    var tanTheta = Math.tan(angle);\n    var tanTheta2 = tanTheta * tanTheta;\n    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;\n    var gradient = context.createLinearGradient(start.x, start.y, x, y);\n    addStop(steps, gradient);\n    return gradient;\n}\n/**\n * 将边和填充设置的颜色转换成圆形渐变对象\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   gradientStr   颜色\n * @returns {any} 渐变对象\n */\nexport function parseRadialGradient(context, element, gradientStr) {\n    var arr = regexRG.exec(gradientStr);\n    var fx = parseFloat(arr[1]);\n    var fy = parseFloat(arr[2]);\n    var fr = parseFloat(arr[3]);\n    var steps = arr[4];\n    // 环半径为0时，默认无渐变，取渐变序列的最后一个颜色\n    if (fr === 0) {\n        var colors = steps.match(regexColorStop);\n        return colors[colors.length - 1].split(':')[1];\n    }\n    var box = element.getBBox();\n    var width = box.maxX - box.minX;\n    var height = box.maxY - box.minY;\n    var r = Math.sqrt(width * width + height * height) / 2;\n    var gradient = context.createRadialGradient(box.minX + width * fx, box.minY + height * fy, 0, box.minX + width / 2, box.minY + height / 2, fr * r);\n    addStop(steps, gradient);\n    return gradient;\n}\n/**\n * 边和填充设置的颜色转换成 pattern\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   patternStr   生成 pattern 的字符串\n */\nexport function parsePattern(context, element, patternStr) {\n    // 在转换过程中进行了缓存\n    if (element.get('patternSource') && element.get('patternSource') === patternStr) {\n        return element.get('pattern');\n    }\n    var pattern;\n    var img;\n    var arr = regexPR.exec(patternStr);\n    var repeat = arr[1];\n    var source = arr[2];\n    // Function to be called when pattern loads\n    function onload() {\n        // Create pattern\n        pattern = context.createPattern(img, repeat);\n        element.set('pattern', pattern); // be a cache\n        element.set('patternSource', patternStr);\n    }\n    switch (repeat) {\n        case 'a':\n            repeat = 'repeat';\n            break;\n        case 'x':\n            repeat = 'repeat-x';\n            break;\n        case 'y':\n            repeat = 'repeat-y';\n            break;\n        case 'n':\n            repeat = 'no-repeat';\n            break;\n        default:\n            repeat = 'no-repeat';\n    }\n    img = new Image();\n    // If source URL is not a data URL\n    if (!source.match(/^data:/i)) {\n        // Set crossOrigin for this image\n        img.crossOrigin = 'Anonymous';\n    }\n    img.src = source;\n    if (img.complete) {\n        onload();\n    }\n    else {\n        img.onload = onload;\n        // Fix onload() bug in IE9\n        img.src = img.src;\n    }\n    return pattern;\n}\nexport function parseStyle(context, element, color) {\n    if (isString(color)) {\n        if (color[1] === '(' || color[2] === '(') {\n            if (color[0] === 'l') {\n                // regexLG.test(color)\n                return parseLineGradient(context, element, color);\n            }\n            if (color[0] === 'r') {\n                // regexRG.test(color)\n                return parseRadialGradient(context, element, color);\n            }\n            if (color[0] === 'p') {\n                // regexPR.test(color)\n                return parsePattern(context, element, color);\n            }\n        }\n        return color;\n    }\n}\nexport function parseRadius(radius) {\n    var r1 = 0;\n    var r2 = 0;\n    var r3 = 0;\n    var r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return [r1, r2, r3, r4];\n}\n//# sourceMappingURL=parse.js.map"]}]}