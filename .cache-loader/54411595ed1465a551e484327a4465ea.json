{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\size-circle.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\size-circle.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Util = require('../util');\r\nvar Continuous = require('./continuous');\r\nvar SLIDER_HEIGHT = 2;\r\nvar CIRCLE_GAP = 16;\r\nvar MAX_SIZE = 16;\r\nvar MIN_SIZE = 5;\r\nvar CircleSize = function (_Continuous) {\r\n    _inheritsLoose(CircleSize, _Continuous);\r\n    function CircleSize() {\r\n        return _Continuous.apply(this, arguments) || this;\r\n    }\r\n    var _proto = CircleSize.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Continuous.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            type: 'size-circle-legend',\r\n            width: 100,\r\n            height: 200,\r\n            _unslidableCircleStyle: {\r\n                stroke: 'rgb(99, 161, 248)',\r\n                fill: 'rgb(99, 161, 248)',\r\n                fillOpacity: 0.3,\r\n                lineWidth: 1.5\r\n            },\r\n            triggerAttr: {\r\n                fill: 'white',\r\n                shadowOffsetX: -2,\r\n                shadowOffsetY: 2,\r\n                shadowBlur: 10,\r\n                shadowColor: '#ccc'\r\n            },\r\n            frontMiddleBarStyle: {\r\n                fill: 'rgb(64, 141, 251)'\r\n            }\r\n        });\r\n    };\r\n    _proto._renderSliderShape = function _renderSliderShape() {\r\n        var minRadius = MIN_SIZE;\r\n        var slider = this.get('slider');\r\n        var backgroundElement = slider.get('backgroundElement');\r\n        var layout = this.get('layout');\r\n        var width = layout === 'vertical' ? SLIDER_HEIGHT : this.get('width');\r\n        var height = layout === 'vertical' ? this.get('height') : SLIDER_HEIGHT;\r\n        var x = minRadius;\r\n        var y = this.get('height') / 2;\r\n        var frontMiddleBarStyle = this.get('frontMiddleBarStyle');\r\n        var points = layout === 'vertical' ? [[0, 0], [width, 0], [width, height], [0, height]] : [[0, y + height], [0, y - height], [x + width - 4, y - height], [x + width - 4, y + height]];\r\n        return this._addMiddleBar(backgroundElement, 'Polygon', Util.mix({\r\n            points: points\r\n        }, frontMiddleBarStyle));\r\n    };\r\n    _proto._addHorizontalTrigger = function _addHorizontalTrigger(type, blockAttr, textAttr, radius) {\r\n        var slider = this.get('slider');\r\n        var trigger = slider.get(type + 'HandleElement');\r\n        var y = -this.get('height') / 2;\r\n        var button = trigger.addShape('circle', {\r\n            attrs: Util.mix({\r\n                x: 0,\r\n                y: y,\r\n                r: radius\r\n            }, blockAttr)\r\n        });\r\n        var text = trigger.addShape('text', {\r\n            attrs: Util.mix(textAttr, {\r\n                x: 0,\r\n                y: y + radius + 10,\r\n                textAlign: 'center',\r\n                textBaseline: 'middle'\r\n            })\r\n        });\r\n        var layout = this.get('layout');\r\n        var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\r\n        button.attr('cursor', trigerCursor);\r\n        text.attr('cursor', trigerCursor);\r\n        this.set(type + 'ButtonElement', button);\r\n        this.set(type + 'TextElement', text);\r\n    };\r\n    _proto._addVerticalTrigger = function _addVerticalTrigger(type, blockAttr, textAttr, radius) {\r\n        var slider = this.get('slider');\r\n        var trigger = slider.get(type + 'HandleElement');\r\n        var button = trigger.addShape('circle', {\r\n            attrs: Util.mix({\r\n                x: 0,\r\n                y: 0,\r\n                r: radius\r\n            }, blockAttr)\r\n        });\r\n        var text = trigger.addShape('text', {\r\n            attrs: Util.mix(textAttr, {\r\n                x: radius + 10,\r\n                y: 0,\r\n                textAlign: 'start',\r\n                textBaseline: 'middle'\r\n            })\r\n        });\r\n        var layout = this.get('layout');\r\n        var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\r\n        button.attr('cursor', trigerCursor);\r\n        text.attr('cursor', trigerCursor);\r\n        this.set(type + 'ButtonElement', button);\r\n        this.set(type + 'TextElement', text);\r\n    };\r\n    _proto._renderTrigger = function _renderTrigger() {\r\n        var min = this.get('firstItem');\r\n        var max = this.get('lastItem');\r\n        var layout = this.get('layout');\r\n        var textStyle = this.get('textStyle');\r\n        var triggerAttr = this.get('triggerAttr');\r\n        var minBlockAttr = Util.mix({}, triggerAttr);\r\n        var maxBlockAttr = Util.mix({}, triggerAttr);\r\n        var minRadius = MIN_SIZE;\r\n        var maxRadius = MAX_SIZE;\r\n        var minTextAttr = Util.mix({\r\n            text: this._formatItemValue(min.value) + ''\r\n        }, textStyle);\r\n        var maxTextAttr = Util.mix({\r\n            text: this._formatItemValue(max.value) + ''\r\n        }, textStyle);\r\n        if (layout === 'vertical') {\r\n            this._addVerticalTrigger('min', minBlockAttr, minTextAttr, minRadius);\r\n            this._addVerticalTrigger('max', maxBlockAttr, maxTextAttr, maxRadius);\r\n        }\r\n        else {\r\n            this._addHorizontalTrigger('min', minBlockAttr, minTextAttr, minRadius);\r\n            this._addHorizontalTrigger('max', maxBlockAttr, maxTextAttr, maxRadius);\r\n        }\r\n    };\r\n    _proto._bindEvents = function _bindEvents() {\r\n        var _this = this;\r\n        if (this.get('slidable')) {\r\n            var slider = this.get('slider');\r\n            slider.on('sliderchange', function (ev) {\r\n                var range = ev.range;\r\n                var firstItemValue = _this.get('firstItem').value;\r\n                var lastItemValue = _this.get('lastItem').value;\r\n                var minValue = firstItemValue + range[0] / 100 * (lastItemValue - firstItemValue);\r\n                var maxValue = firstItemValue + range[1] / 100 * (lastItemValue - firstItemValue);\r\n                var minRadius = MIN_SIZE + range[0] / 100 * (MAX_SIZE - MIN_SIZE);\r\n                var maxRadius = MIN_SIZE + range[1] / 100 * (MAX_SIZE - MIN_SIZE);\r\n                _this._updateElement(minValue, maxValue, minRadius, maxRadius);\r\n                var itemFiltered = new Event('itemfilter', ev, true, true);\r\n                itemFiltered.range = [minValue, maxValue];\r\n                _this.emit('itemfilter', itemFiltered);\r\n            });\r\n        }\r\n    };\r\n    _proto._updateElement = function _updateElement(min, max, minR, maxR) {\r\n        _Continuous.prototype._updateElement.call(this, min, max);\r\n        var minTextElement = this.get('minTextElement');\r\n        var maxTextElement = this.get('maxTextElement');\r\n        var minCircleElement = this.get('minButtonElement');\r\n        var maxCircleElement = this.get('maxButtonElement');\r\n        minCircleElement.attr('r', minR);\r\n        maxCircleElement.attr('r', maxR);\r\n        var layout = this.get('layout');\r\n        if (layout === 'vertical') {\r\n            minTextElement.attr('x', minR + 10);\r\n            maxTextElement.attr('x', maxR + 10);\r\n        }\r\n        else {\r\n            var y = -this.get('height') / 2;\r\n            minTextElement.attr('y', y + minR + 10);\r\n            maxTextElement.attr('y', y + maxR + 10);\r\n        }\r\n    };\r\n    _proto._addCircle = function _addCircle(x, y, r, text, maxWidth) {\r\n        var group = this.get('group');\r\n        var circleGroup = group.addGroup();\r\n        var circleStyle = this.get('_unslidableCircleStyle');\r\n        var textStyle = this.get('textStyle');\r\n        var titleShape = this.get('titleShape');\r\n        var titleGap = this.get('titleGap');\r\n        if (titleShape) {\r\n            titleGap += titleShape.getBBox().height;\r\n        }\r\n        circleGroup.addShape('circle', {\r\n            attrs: Util.mix({\r\n                x: x,\r\n                y: y + titleGap,\r\n                r: r === 0 ? 1 : r\r\n            }, circleStyle)\r\n        });\r\n        if (this.get('layout') === 'vertical') {\r\n            circleGroup.addShape('text', {\r\n                attrs: Util.mix({\r\n                    x: maxWidth + 20 + this.get('textOffset'),\r\n                    y: y + titleGap,\r\n                    text: text === 0 ? '0' : text\r\n                }, textStyle)\r\n            });\r\n        }\r\n        else {\r\n            circleGroup.addShape('text', {\r\n                attrs: Util.mix({\r\n                    x: x,\r\n                    y: y + titleGap + maxWidth + 13 + this.get('textOffset'),\r\n                    text: text === 0 ? '0' : text\r\n                }, textStyle)\r\n            });\r\n        }\r\n    };\r\n    _proto._renderUnslidable = function _renderUnslidable() {\r\n        var firstItemValue = this.get('firstItem').value;\r\n        var lastItemValue = this.get('lastItem').value;\r\n        if (firstItemValue > lastItemValue) {\r\n            var tmp = lastItemValue;\r\n            lastItemValue = firstItemValue;\r\n            firstItemValue = tmp;\r\n        }\r\n        var minText = this._formatItemValue(firstItemValue);\r\n        var maxText = this._formatItemValue(lastItemValue);\r\n        var minRadius = firstItemValue < MIN_SIZE ? MIN_SIZE : firstItemValue;\r\n        var maxRadius = lastItemValue > MAX_SIZE ? MAX_SIZE : lastItemValue;\r\n        if (minRadius > maxRadius) {\r\n            minRadius = MIN_SIZE;\r\n            maxRadius = MAX_SIZE;\r\n        }\r\n        if (this.get('layout') === 'vertical') {\r\n            this._addCircle(maxRadius, maxRadius, minRadius, minText, 2 * maxRadius);\r\n            this._addCircle(maxRadius, maxRadius * 2 + CIRCLE_GAP + minRadius, maxRadius, maxText, 2 * maxRadius);\r\n        }\r\n        else {\r\n            this._addCircle(maxRadius, maxRadius, minRadius, minText, 2 * maxRadius);\r\n            this._addCircle(maxRadius * 2 + CIRCLE_GAP + minRadius, maxRadius, maxRadius, maxText, 2 * maxRadius);\r\n        }\r\n    };\r\n    _proto.activate = function activate(value) {\r\n        if (!this.get('slidable')) {\r\n            return;\r\n        }\r\n        _Continuous.prototype.activate.call(this, value);\r\n    };\r\n    return CircleSize;\r\n}(Continuous);\r\nmodule.exports = CircleSize;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\size-circle.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\size-circle.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview The class of the size legend\n * @author sima.zhang\n * @author ye liu\n */\nvar Util = require('../util'); // const Global = require('../../global');\n\n\nvar Continuous = require('./continuous');\n\nvar SLIDER_HEIGHT = 2;\nvar CIRCLE_GAP = 16;\nvar MAX_SIZE = 16;\nvar MIN_SIZE = 5;\n\nvar CircleSize =\n/*#__PURE__*/\nfunction (_Continuous) {\n  _inheritsLoose(CircleSize, _Continuous);\n\n  function CircleSize() {\n    return _Continuous.apply(this, arguments) || this;\n  }\n\n  var _proto = CircleSize.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Continuous.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * 类型\n       * @type {String}\n       */\n      type: 'size-circle-legend',\n      width: 100,\n      height: 200,\n\n      /**\n       * 不能滑动时圈的样式\n       * @type {ATTRS}\n       */\n      _unslidableCircleStyle: {\n        stroke: 'rgb(99, 161, 248)',\n        fill: 'rgb(99, 161, 248)',\n        fillOpacity: 0.3,\n        lineWidth: 1.5\n      },\n\n      /**\n       * 滑块的样式\n       * @type {ATTRS}\n       */\n      triggerAttr: {\n        fill: 'white',\n        shadowOffsetX: -2,\n        shadowOffsetY: 2,\n        shadowBlur: 10,\n        shadowColor: '#ccc'\n      },\n\n      /**\n       * 中间 bar 的前景颜色\n       * @type {ATTRS}\n       */\n      frontMiddleBarStyle: {\n        fill: 'rgb(64, 141, 251)'\n      }\n    });\n  }; // render the slider shape\n\n\n  _proto._renderSliderShape = function _renderSliderShape() {\n    var minRadius = MIN_SIZE;\n    var slider = this.get('slider');\n    var backgroundElement = slider.get('backgroundElement');\n    var layout = this.get('layout');\n    var width = layout === 'vertical' ? SLIDER_HEIGHT : this.get('width');\n    var height = layout === 'vertical' ? this.get('height') : SLIDER_HEIGHT;\n    var x = minRadius;\n    var y = this.get('height') / 2;\n    var frontMiddleBarStyle = this.get('frontMiddleBarStyle'); // background of middle bar\n\n    var points = layout === 'vertical' ? [[0, 0], [width, 0], [width, height], [0, height]] : [[0, y + height], [0, y - height], [x + width - 4, y - height], [x + width - 4, y + height]];\n    return this._addMiddleBar(backgroundElement, 'Polygon', Util.mix({\n      points: points\n    }, frontMiddleBarStyle));\n  }; // triggers while layout === horizontal\n\n\n  _proto._addHorizontalTrigger = function _addHorizontalTrigger(type, blockAttr, textAttr, radius) {\n    var slider = this.get('slider');\n    var trigger = slider.get(type + 'HandleElement');\n    var y = -this.get('height') / 2;\n    var button = trigger.addShape('circle', {\n      attrs: Util.mix({\n        x: 0,\n        y: y,\n        r: radius\n      }, blockAttr)\n    });\n    var text = trigger.addShape('text', {\n      attrs: Util.mix(textAttr, {\n        x: 0,\n        y: y + radius + 10,\n        textAlign: 'center',\n        textBaseline: 'middle'\n      })\n    });\n    var layout = this.get('layout');\n    var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\n    button.attr('cursor', trigerCursor);\n    text.attr('cursor', trigerCursor);\n    this.set(type + 'ButtonElement', button);\n    this.set(type + 'TextElement', text);\n  }; // triggers while layout === vertical\n\n\n  _proto._addVerticalTrigger = function _addVerticalTrigger(type, blockAttr, textAttr, radius) {\n    var slider = this.get('slider');\n    var trigger = slider.get(type + 'HandleElement');\n    var button = trigger.addShape('circle', {\n      attrs: Util.mix({\n        x: 0,\n        y: 0,\n        r: radius\n      }, blockAttr)\n    });\n    var text = trigger.addShape('text', {\n      attrs: Util.mix(textAttr, {\n        x: radius + 10,\n        y: 0,\n        textAlign: 'start',\n        textBaseline: 'middle'\n      })\n    });\n    var layout = this.get('layout');\n    var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\n    button.attr('cursor', trigerCursor);\n    text.attr('cursor', trigerCursor);\n    this.set(type + 'ButtonElement', button);\n    this.set(type + 'TextElement', text);\n  }; // render the triggers\n\n\n  _proto._renderTrigger = function _renderTrigger() {\n    var min = this.get('firstItem');\n    var max = this.get('lastItem');\n    var layout = this.get('layout');\n    var textStyle = this.get('textStyle');\n    var triggerAttr = this.get('triggerAttr');\n    var minBlockAttr = Util.mix({}, triggerAttr);\n    var maxBlockAttr = Util.mix({}, triggerAttr);\n    var minRadius = MIN_SIZE;\n    var maxRadius = MAX_SIZE;\n    var minTextAttr = Util.mix({\n      text: this._formatItemValue(min.value) + ''\n    }, textStyle);\n    var maxTextAttr = Util.mix({\n      text: this._formatItemValue(max.value) + ''\n    }, textStyle);\n\n    if (layout === 'vertical') {\n      this._addVerticalTrigger('min', minBlockAttr, minTextAttr, minRadius);\n\n      this._addVerticalTrigger('max', maxBlockAttr, maxTextAttr, maxRadius);\n    } else {\n      this._addHorizontalTrigger('min', minBlockAttr, minTextAttr, minRadius);\n\n      this._addHorizontalTrigger('max', maxBlockAttr, maxTextAttr, maxRadius);\n    }\n  }; // user interactions\n\n\n  _proto._bindEvents = function _bindEvents() {\n    var _this = this;\n\n    if (this.get('slidable')) {\n      var slider = this.get('slider');\n      slider.on('sliderchange', function (ev) {\n        var range = ev.range;\n\n        var firstItemValue = _this.get('firstItem').value;\n\n        var lastItemValue = _this.get('lastItem').value;\n\n        var minValue = firstItemValue + range[0] / 100 * (lastItemValue - firstItemValue);\n        var maxValue = firstItemValue + range[1] / 100 * (lastItemValue - firstItemValue);\n        var minRadius = MIN_SIZE + range[0] / 100 * (MAX_SIZE - MIN_SIZE);\n        var maxRadius = MIN_SIZE + range[1] / 100 * (MAX_SIZE - MIN_SIZE);\n\n        _this._updateElement(minValue, maxValue, minRadius, maxRadius);\n\n        var itemFiltered = new Event('itemfilter', ev, true, true);\n        itemFiltered.range = [minValue, maxValue];\n\n        _this.emit('itemfilter', itemFiltered);\n      });\n    }\n  }; // update the triggers\n\n\n  _proto._updateElement = function _updateElement(min, max, minR, maxR) {\n    // update the text of the triggers\n    _Continuous.prototype._updateElement.call(this, min, max);\n\n    var minTextElement = this.get('minTextElement');\n    var maxTextElement = this.get('maxTextElement');\n    var minCircleElement = this.get('minButtonElement');\n    var maxCircleElement = this.get('maxButtonElement'); // update the radius of the triggers\n\n    minCircleElement.attr('r', minR);\n    maxCircleElement.attr('r', maxR); // update the text position of the triggers\n\n    var layout = this.get('layout');\n\n    if (layout === 'vertical') {\n      minTextElement.attr('x', minR + 10);\n      maxTextElement.attr('x', maxR + 10);\n    } else {\n      var y = -this.get('height') / 2;\n      minTextElement.attr('y', y + minR + 10);\n      maxTextElement.attr('y', y + maxR + 10);\n    }\n  }; // add a circle for slidable === false\n\n\n  _proto._addCircle = function _addCircle(x, y, r, text, maxWidth) {\n    var group = this.get('group');\n    var circleGroup = group.addGroup();\n    var circleStyle = this.get('_unslidableCircleStyle');\n    var textStyle = this.get('textStyle');\n    var titleShape = this.get('titleShape');\n    var titleGap = this.get('titleGap');\n\n    if (titleShape) {\n      titleGap += titleShape.getBBox().height;\n    }\n\n    circleGroup.addShape('circle', {\n      attrs: Util.mix({\n        x: x,\n        y: y + titleGap,\n        r: r === 0 ? 1 : r\n      }, circleStyle)\n    });\n\n    if (this.get('layout') === 'vertical') {\n      circleGroup.addShape('text', {\n        attrs: Util.mix({\n          x: maxWidth + 20 + this.get('textOffset'),\n          y: y + titleGap,\n          text: text === 0 ? '0' : text\n        }, textStyle)\n      });\n    } else {\n      circleGroup.addShape('text', {\n        attrs: Util.mix({\n          x: x,\n          y: y + titleGap + maxWidth + 13 + this.get('textOffset'),\n          text: text === 0 ? '0' : text\n        }, textStyle)\n      });\n    }\n  }; // the circles while slidable === false\n\n\n  _proto._renderUnslidable = function _renderUnslidable() {\n    var firstItemValue = this.get('firstItem').value;\n    var lastItemValue = this.get('lastItem').value;\n\n    if (firstItemValue > lastItemValue) {\n      var tmp = lastItemValue;\n      lastItemValue = firstItemValue;\n      firstItemValue = tmp;\n    }\n\n    var minText = this._formatItemValue(firstItemValue);\n\n    var maxText = this._formatItemValue(lastItemValue);\n\n    var minRadius = firstItemValue < MIN_SIZE ? MIN_SIZE : firstItemValue;\n    var maxRadius = lastItemValue > MAX_SIZE ? MAX_SIZE : lastItemValue;\n\n    if (minRadius > maxRadius) {\n      minRadius = MIN_SIZE;\n      maxRadius = MAX_SIZE;\n    }\n\n    if (this.get('layout') === 'vertical') {\n      this._addCircle(maxRadius, maxRadius, minRadius, minText, 2 * maxRadius); // min\n\n\n      this._addCircle(maxRadius, maxRadius * 2 + CIRCLE_GAP + minRadius, maxRadius, maxText, 2 * maxRadius); // max\n\n    } else {\n      this._addCircle(maxRadius, maxRadius, minRadius, minText, 2 * maxRadius); // min\n\n\n      this._addCircle(maxRadius * 2 + CIRCLE_GAP + minRadius, maxRadius, maxRadius, maxText, 2 * maxRadius); // max\n\n    }\n  };\n\n  _proto.activate = function activate(value) {\n    if (!this.get('slidable')) {\n      return;\n    }\n\n    _Continuous.prototype.activate.call(this, value);\n  };\n\n  return CircleSize;\n}(Continuous);\n\nmodule.exports = CircleSize;"]}]}