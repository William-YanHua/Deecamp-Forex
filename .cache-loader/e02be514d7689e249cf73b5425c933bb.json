{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\data\\filter.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\data\\filter.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { each } from '@antv/util';\r\nimport Action from '../base';\r\nimport { getDelegationObject, getScaleByField, isList, isSlider } from '../util';\r\nvar DataFilter = (function (_super) {\r\n    __extends(DataFilter, _super);\r\n    function DataFilter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DataFilter.prototype.filterView = function (view, field, filter) {\r\n        var _this = this;\r\n        if (view.getScaleByField(field)) {\r\n            view.filter(field, filter);\r\n        }\r\n        if (view.views && view.views.length) {\r\n            each(view.views, function (subView) {\r\n                _this.filterView(subView, field, filter);\r\n            });\r\n        }\r\n    };\r\n    DataFilter.prototype.filter = function () {\r\n        var delegateObject = getDelegationObject(this.context);\r\n        if (delegateObject) {\r\n            var view = this.context.view;\r\n            var component = delegateObject.component;\r\n            var field = component.get('field');\r\n            if (isList(delegateObject)) {\r\n                if (field) {\r\n                    var unCheckedItems = component.getItemsByState('unchecked');\r\n                    var scale_1 = getScaleByField(view, field);\r\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\r\n                    if (names_1.length) {\r\n                        this.filterView(view, field, function (value) {\r\n                            var text = scale_1.getText(value);\r\n                            return !names_1.includes(text);\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.filterView(view, field, null);\r\n                    }\r\n                    view.render(true);\r\n                }\r\n            }\r\n            else if (isSlider(delegateObject)) {\r\n                var range = component.getValue();\r\n                var min_1 = range[0], max_1 = range[1];\r\n                this.filterView(view, field, function (value) {\r\n                    return value >= min_1 && value <= max_1;\r\n                });\r\n                view.render(true);\r\n            }\r\n        }\r\n    };\r\n    return DataFilter;\r\n}(Action));\r\nexport default DataFilter;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\data\\filter.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\interaction\\action\\data\\filter.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getScaleByField, isList, isSlider } from '../util';\n/**\n * 数据过滤。\n * @ignore\n */\nvar DataFilter = /** @class */ (function (_super) {\n    __extends(DataFilter, _super);\n    function DataFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DataFilter.prototype.filterView = function (view, field, filter) {\n        var _this = this;\n        // 只有存在这个 scale 时才生效\n        if (view.getScaleByField(field)) {\n            view.filter(field, filter);\n        }\n        if (view.views && view.views.length) {\n            each(view.views, function (subView) {\n                _this.filterView(subView, field, filter);\n            });\n        }\n    };\n    /**\n     * 过滤数据\n     */\n    DataFilter.prototype.filter = function () {\n        var delegateObject = getDelegationObject(this.context);\n        if (delegateObject) {\n            var view = this.context.view;\n            var component = delegateObject.component;\n            var field = component.get('field');\n            // 列表类的组件能够触发\n            if (isList(delegateObject)) {\n                if (field) {\n                    var unCheckedItems = component.getItemsByState('unchecked');\n                    var scale_1 = getScaleByField(view, field);\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\n                    if (names_1.length) {\n                        this.filterView(view, field, function (value) {\n                            var text = scale_1.getText(value);\n                            return !names_1.includes(text);\n                        });\n                    }\n                    else {\n                        this.filterView(view, field, null);\n                    }\n                    view.render(true);\n                }\n            }\n            else if (isSlider(delegateObject)) {\n                var range = component.getValue();\n                var min_1 = range[0], max_1 = range[1];\n                this.filterView(view, field, function (value) {\n                    return value >= min_1 && value <= max_1;\n                });\n                view.render(true);\n            }\n        }\n    };\n    return DataFilter;\n}(Action));\nexport default DataFilter;\n//# sourceMappingURL=filter.js.map"]}]}