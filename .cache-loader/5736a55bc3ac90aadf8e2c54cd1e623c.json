{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-animate\\es\\CSSMotion.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-animate\\es\\CSSMotion.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\r\nimport _extends from 'babel-runtime/helpers/extends';\r\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\r\nimport _createClass from 'babel-runtime/helpers/createClass';\r\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\r\nimport _inherits from 'babel-runtime/helpers/inherits';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { polyfill } from 'react-lifecycles-compat';\r\nimport classNames from 'classnames';\r\nimport raf from 'raf';\r\nimport { getTransitionName, animationEndName, transitionEndName, supportTransition } from './util/motion';\r\nvar STATUS_NONE = 'none';\r\nvar STATUS_APPEAR = 'appear';\r\nvar STATUS_ENTER = 'enter';\r\nvar STATUS_LEAVE = 'leave';\r\nexport function genCSSMotion(transitionSupport) {\r\n    function isSupportTransition(props) {\r\n        return !!(props.motionName && transitionSupport);\r\n    }\r\n    var CSSMotion = function (_React$Component) {\r\n        _inherits(CSSMotion, _React$Component);\r\n        function CSSMotion() {\r\n            _classCallCheck(this, CSSMotion);\r\n            var _this = _possibleConstructorReturn(this, (CSSMotion.__proto__ || Object.getPrototypeOf(CSSMotion)).call(this));\r\n            _this.onDomUpdate = function () {\r\n                var _this$state = _this.state, status = _this$state.status, newStatus = _this$state.newStatus;\r\n                var _this$props = _this.props, onAppearStart = _this$props.onAppearStart, onEnterStart = _this$props.onEnterStart, onLeaveStart = _this$props.onLeaveStart, onAppearActive = _this$props.onAppearActive, onEnterActive = _this$props.onEnterActive, onLeaveActive = _this$props.onLeaveActive, motionAppear = _this$props.motionAppear, motionEnter = _this$props.motionEnter, motionLeave = _this$props.motionLeave;\r\n                if (!isSupportTransition(_this.props)) {\r\n                    return;\r\n                }\r\n                var $ele = ReactDOM.findDOMNode(_this);\r\n                if (_this.$ele !== $ele) {\r\n                    _this.removeEventListener(_this.$ele);\r\n                    _this.addEventListener($ele);\r\n                    _this.$ele = $ele;\r\n                }\r\n                if (newStatus && status === STATUS_APPEAR && motionAppear) {\r\n                    _this.updateStatus(onAppearStart, null, null, function () {\r\n                        _this.updateActiveStatus(onAppearActive, STATUS_APPEAR);\r\n                    });\r\n                }\r\n                else if (newStatus && status === STATUS_ENTER && motionEnter) {\r\n                    _this.updateStatus(onEnterStart, null, null, function () {\r\n                        _this.updateActiveStatus(onEnterActive, STATUS_ENTER);\r\n                    });\r\n                }\r\n                else if (newStatus && status === STATUS_LEAVE && motionLeave) {\r\n                    _this.updateStatus(onLeaveStart, null, null, function () {\r\n                        _this.updateActiveStatus(onLeaveActive, STATUS_LEAVE);\r\n                    });\r\n                }\r\n            };\r\n            _this.onMotionEnd = function (event) {\r\n                var _this$state2 = _this.state, status = _this$state2.status, statusActive = _this$state2.statusActive;\r\n                var _this$props2 = _this.props, onAppearEnd = _this$props2.onAppearEnd, onEnterEnd = _this$props2.onEnterEnd, onLeaveEnd = _this$props2.onLeaveEnd;\r\n                if (status === STATUS_APPEAR && statusActive) {\r\n                    _this.updateStatus(onAppearEnd, { status: STATUS_NONE }, event);\r\n                }\r\n                else if (status === STATUS_ENTER && statusActive) {\r\n                    _this.updateStatus(onEnterEnd, { status: STATUS_NONE }, event);\r\n                }\r\n                else if (status === STATUS_LEAVE && statusActive) {\r\n                    _this.updateStatus(onLeaveEnd, { status: STATUS_NONE }, event);\r\n                }\r\n            };\r\n            _this.addEventListener = function ($ele) {\r\n                if (!$ele)\r\n                    return;\r\n                $ele.addEventListener(transitionEndName, _this.onMotionEnd);\r\n                $ele.addEventListener(animationEndName, _this.onMotionEnd);\r\n            };\r\n            _this.removeEventListener = function ($ele) {\r\n                if (!$ele)\r\n                    return;\r\n                $ele.removeEventListener(transitionEndName, _this.onMotionEnd);\r\n                $ele.removeEventListener(animationEndName, _this.onMotionEnd);\r\n            };\r\n            _this.updateStatus = function (styleFunc, additionalState, event, callback) {\r\n                var statusStyle = styleFunc ? styleFunc(ReactDOM.findDOMNode(_this), event) : null;\r\n                if (statusStyle === false || _this._destroyed)\r\n                    return;\r\n                var nextStep = void 0;\r\n                if (callback) {\r\n                    nextStep = function nextStep() {\r\n                        _this.nextFrame(callback);\r\n                    };\r\n                }\r\n                _this.setState(_extends({\r\n                    statusStyle: typeof statusStyle === 'object' ? statusStyle : null,\r\n                    newStatus: false\r\n                }, additionalState), nextStep);\r\n            };\r\n            _this.updateActiveStatus = function (styleFunc, currentStatus) {\r\n                _this.nextFrame(function () {\r\n                    var status = _this.state.status;\r\n                    if (status !== currentStatus)\r\n                        return;\r\n                    _this.updateStatus(styleFunc, { statusActive: true });\r\n                });\r\n            };\r\n            _this.nextFrame = function (func) {\r\n                _this.cancelNextFrame();\r\n                _this.raf = raf(func);\r\n            };\r\n            _this.cancelNextFrame = function () {\r\n                if (_this.raf) {\r\n                    raf.cancel(_this.raf);\r\n                    _this.raf = null;\r\n                }\r\n            };\r\n            _this.state = {\r\n                status: STATUS_NONE,\r\n                statusActive: false,\r\n                newStatus: false,\r\n                statusStyle: null\r\n            };\r\n            _this.$ele = null;\r\n            _this.raf = null;\r\n            return _this;\r\n        }\r\n        _createClass(CSSMotion, [{\r\n                key: 'componentDidMount',\r\n                value: function componentDidMount() {\r\n                    this.onDomUpdate();\r\n                }\r\n            }, {\r\n                key: 'componentDidUpdate',\r\n                value: function componentDidUpdate() {\r\n                    this.onDomUpdate();\r\n                }\r\n            }, {\r\n                key: 'componentWillUnmount',\r\n                value: function componentWillUnmount() {\r\n                    this._destroyed = true;\r\n                    this.removeEventListener(this.$ele);\r\n                    this.cancelNextFrame();\r\n                }\r\n            }, {\r\n                key: 'render',\r\n                value: function render() {\r\n                    var _classNames;\r\n                    var _state = this.state, status = _state.status, statusActive = _state.statusActive, statusStyle = _state.statusStyle;\r\n                    var _props = this.props, children = _props.children, motionName = _props.motionName, visible = _props.visible, removeOnLeave = _props.removeOnLeave;\r\n                    if (!children)\r\n                        return null;\r\n                    if (status === STATUS_NONE || !isSupportTransition(this.props)) {\r\n                        return visible || !removeOnLeave ? children({}) : null;\r\n                    }\r\n                    return children({\r\n                        className: classNames((_classNames = {}, _defineProperty(_classNames, getTransitionName(motionName, status), status !== STATUS_NONE), _defineProperty(_classNames, getTransitionName(motionName, status + '-active'), status !== STATUS_NONE && statusActive), _defineProperty(_classNames, motionName, typeof motionName === 'string'), _classNames)),\r\n                        style: statusStyle\r\n                    });\r\n                }\r\n            }], [{\r\n                key: 'getDerivedStateFromProps',\r\n                value: function getDerivedStateFromProps(props, _ref) {\r\n                    var prevProps = _ref.prevProps;\r\n                    if (!isSupportTransition(props))\r\n                        return {};\r\n                    var visible = props.visible, motionAppear = props.motionAppear, motionEnter = props.motionEnter, motionLeave = props.motionLeave, motionLeaveImmediately = props.motionLeaveImmediately;\r\n                    var newState = {\r\n                        prevProps: props\r\n                    };\r\n                    if (!prevProps && visible && motionAppear) {\r\n                        newState.status = STATUS_APPEAR;\r\n                        newState.statusActive = false;\r\n                        newState.newStatus = true;\r\n                    }\r\n                    if (prevProps && !prevProps.visible && visible && motionEnter) {\r\n                        newState.status = STATUS_ENTER;\r\n                        newState.statusActive = false;\r\n                        newState.newStatus = true;\r\n                    }\r\n                    if (prevProps && prevProps.visible && !visible && motionLeave || !prevProps && motionLeaveImmediately && !visible && motionLeave) {\r\n                        newState.status = STATUS_LEAVE;\r\n                        newState.statusActive = false;\r\n                        newState.newStatus = true;\r\n                    }\r\n                    return newState;\r\n                }\r\n            }]);\r\n        return CSSMotion;\r\n    }(React.Component);\r\n    CSSMotion.propTypes = {\r\n        visible: PropTypes.bool,\r\n        children: PropTypes.func,\r\n        motionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\r\n        motionAppear: PropTypes.bool,\r\n        motionEnter: PropTypes.bool,\r\n        motionLeave: PropTypes.bool,\r\n        motionLeaveImmediately: PropTypes.bool,\r\n        removeOnLeave: PropTypes.bool,\r\n        onAppearStart: PropTypes.func,\r\n        onAppearActive: PropTypes.func,\r\n        onAppearEnd: PropTypes.func,\r\n        onEnterStart: PropTypes.func,\r\n        onEnterActive: PropTypes.func,\r\n        onEnterEnd: PropTypes.func,\r\n        onLeaveStart: PropTypes.func,\r\n        onLeaveActive: PropTypes.func,\r\n        onLeaveEnd: PropTypes.func\r\n    };\r\n    CSSMotion.defaultProps = {\r\n        visible: true,\r\n        motionEnter: true,\r\n        motionAppear: true,\r\n        motionLeave: true,\r\n        removeOnLeave: true\r\n    };\r\n    polyfill(CSSMotion);\r\n    return CSSMotion;\r\n}\r\nexport default genCSSMotion(supportTransition);\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-animate\\es\\CSSMotion.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-animate\\es\\CSSMotion.js"],"names":[],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport classNames from 'classnames';\nimport raf from 'raf';\nimport { getTransitionName, animationEndName, transitionEndName, supportTransition } from './util/motion';\n\nvar STATUS_NONE = 'none';\nvar STATUS_APPEAR = 'appear';\nvar STATUS_ENTER = 'enter';\nvar STATUS_LEAVE = 'leave';\n\n/**\n * `transitionSupport` is used for none transition test case.\n * Default we use browser transition event support check.\n */\nexport function genCSSMotion(transitionSupport) {\n  function isSupportTransition(props) {\n    return !!(props.motionName && transitionSupport);\n  }\n\n  var CSSMotion = function (_React$Component) {\n    _inherits(CSSMotion, _React$Component);\n\n    function CSSMotion() {\n      _classCallCheck(this, CSSMotion);\n\n      var _this = _possibleConstructorReturn(this, (CSSMotion.__proto__ || Object.getPrototypeOf(CSSMotion)).call(this));\n\n      _this.onDomUpdate = function () {\n        var _this$state = _this.state,\n            status = _this$state.status,\n            newStatus = _this$state.newStatus;\n        var _this$props = _this.props,\n            onAppearStart = _this$props.onAppearStart,\n            onEnterStart = _this$props.onEnterStart,\n            onLeaveStart = _this$props.onLeaveStart,\n            onAppearActive = _this$props.onAppearActive,\n            onEnterActive = _this$props.onEnterActive,\n            onLeaveActive = _this$props.onLeaveActive,\n            motionAppear = _this$props.motionAppear,\n            motionEnter = _this$props.motionEnter,\n            motionLeave = _this$props.motionLeave;\n\n\n        if (!isSupportTransition(_this.props)) {\n          return;\n        }\n\n        // Event injection\n        var $ele = ReactDOM.findDOMNode(_this);\n        if (_this.$ele !== $ele) {\n          _this.removeEventListener(_this.$ele);\n          _this.addEventListener($ele);\n          _this.$ele = $ele;\n        }\n\n        // Init status\n        if (newStatus && status === STATUS_APPEAR && motionAppear) {\n          _this.updateStatus(onAppearStart, null, null, function () {\n            _this.updateActiveStatus(onAppearActive, STATUS_APPEAR);\n          });\n        } else if (newStatus && status === STATUS_ENTER && motionEnter) {\n          _this.updateStatus(onEnterStart, null, null, function () {\n            _this.updateActiveStatus(onEnterActive, STATUS_ENTER);\n          });\n        } else if (newStatus && status === STATUS_LEAVE && motionLeave) {\n          _this.updateStatus(onLeaveStart, null, null, function () {\n            _this.updateActiveStatus(onLeaveActive, STATUS_LEAVE);\n          });\n        }\n      };\n\n      _this.onMotionEnd = function (event) {\n        var _this$state2 = _this.state,\n            status = _this$state2.status,\n            statusActive = _this$state2.statusActive;\n        var _this$props2 = _this.props,\n            onAppearEnd = _this$props2.onAppearEnd,\n            onEnterEnd = _this$props2.onEnterEnd,\n            onLeaveEnd = _this$props2.onLeaveEnd;\n\n        if (status === STATUS_APPEAR && statusActive) {\n          _this.updateStatus(onAppearEnd, { status: STATUS_NONE }, event);\n        } else if (status === STATUS_ENTER && statusActive) {\n          _this.updateStatus(onEnterEnd, { status: STATUS_NONE }, event);\n        } else if (status === STATUS_LEAVE && statusActive) {\n          _this.updateStatus(onLeaveEnd, { status: STATUS_NONE }, event);\n        }\n      };\n\n      _this.addEventListener = function ($ele) {\n        if (!$ele) return;\n\n        $ele.addEventListener(transitionEndName, _this.onMotionEnd);\n        $ele.addEventListener(animationEndName, _this.onMotionEnd);\n      };\n\n      _this.removeEventListener = function ($ele) {\n        if (!$ele) return;\n\n        $ele.removeEventListener(transitionEndName, _this.onMotionEnd);\n        $ele.removeEventListener(animationEndName, _this.onMotionEnd);\n      };\n\n      _this.updateStatus = function (styleFunc, additionalState, event, callback) {\n        var statusStyle = styleFunc ? styleFunc(ReactDOM.findDOMNode(_this), event) : null;\n\n        if (statusStyle === false || _this._destroyed) return;\n\n        var nextStep = void 0;\n        if (callback) {\n          nextStep = function nextStep() {\n            _this.nextFrame(callback);\n          };\n        }\n\n        _this.setState(_extends({\n          statusStyle: typeof statusStyle === 'object' ? statusStyle : null,\n          newStatus: false\n        }, additionalState), nextStep); // Trigger before next frame & after `componentDidMount`\n      };\n\n      _this.updateActiveStatus = function (styleFunc, currentStatus) {\n        // `setState` use `postMessage` to trigger at the end of frame.\n        // Let's use requestAnimationFrame to update new state in next frame.\n        _this.nextFrame(function () {\n          var status = _this.state.status;\n\n          if (status !== currentStatus) return;\n\n          _this.updateStatus(styleFunc, { statusActive: true });\n        });\n      };\n\n      _this.nextFrame = function (func) {\n        _this.cancelNextFrame();\n        _this.raf = raf(func);\n      };\n\n      _this.cancelNextFrame = function () {\n        if (_this.raf) {\n          raf.cancel(_this.raf);\n          _this.raf = null;\n        }\n      };\n\n      _this.state = {\n        status: STATUS_NONE,\n        statusActive: false,\n        newStatus: false,\n        statusStyle: null\n      };\n      _this.$ele = null;\n      _this.raf = null;\n      return _this;\n    }\n\n    _createClass(CSSMotion, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        this.onDomUpdate();\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate() {\n        this.onDomUpdate();\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this._destroyed = true;\n        this.removeEventListener(this.$ele);\n        this.cancelNextFrame();\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _classNames;\n\n        var _state = this.state,\n            status = _state.status,\n            statusActive = _state.statusActive,\n            statusStyle = _state.statusStyle;\n        var _props = this.props,\n            children = _props.children,\n            motionName = _props.motionName,\n            visible = _props.visible,\n            removeOnLeave = _props.removeOnLeave;\n\n\n        if (!children) return null;\n\n        if (status === STATUS_NONE || !isSupportTransition(this.props)) {\n          return visible || !removeOnLeave ? children({}) : null;\n        }\n\n        return children({\n          className: classNames((_classNames = {}, _defineProperty(_classNames, getTransitionName(motionName, status), status !== STATUS_NONE), _defineProperty(_classNames, getTransitionName(motionName, status + '-active'), status !== STATUS_NONE && statusActive), _defineProperty(_classNames, motionName, typeof motionName === 'string'), _classNames)),\n          style: statusStyle\n        });\n      }\n    }], [{\n      key: 'getDerivedStateFromProps',\n      value: function getDerivedStateFromProps(props, _ref) {\n        var prevProps = _ref.prevProps;\n\n        if (!isSupportTransition(props)) return {};\n\n        var visible = props.visible,\n            motionAppear = props.motionAppear,\n            motionEnter = props.motionEnter,\n            motionLeave = props.motionLeave,\n            motionLeaveImmediately = props.motionLeaveImmediately;\n\n        var newState = {\n          prevProps: props\n        };\n\n        // Appear\n        if (!prevProps && visible && motionAppear) {\n          newState.status = STATUS_APPEAR;\n          newState.statusActive = false;\n          newState.newStatus = true;\n        }\n\n        // Enter\n        if (prevProps && !prevProps.visible && visible && motionEnter) {\n          newState.status = STATUS_ENTER;\n          newState.statusActive = false;\n          newState.newStatus = true;\n        }\n\n        // Leave\n        if (prevProps && prevProps.visible && !visible && motionLeave || !prevProps && motionLeaveImmediately && !visible && motionLeave) {\n          newState.status = STATUS_LEAVE;\n          newState.statusActive = false;\n          newState.newStatus = true;\n        }\n\n        return newState;\n      }\n    }]);\n\n    return CSSMotion;\n  }(React.Component);\n\n  CSSMotion.propTypes = {\n    visible: PropTypes.bool,\n    children: PropTypes.func,\n    motionName: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    motionAppear: PropTypes.bool,\n    motionEnter: PropTypes.bool,\n    motionLeave: PropTypes.bool,\n    motionLeaveImmediately: PropTypes.bool, // Trigger leave motion immediately\n    removeOnLeave: PropTypes.bool,\n    onAppearStart: PropTypes.func,\n    onAppearActive: PropTypes.func,\n    onAppearEnd: PropTypes.func,\n    onEnterStart: PropTypes.func,\n    onEnterActive: PropTypes.func,\n    onEnterEnd: PropTypes.func,\n    onLeaveStart: PropTypes.func,\n    onLeaveActive: PropTypes.func,\n    onLeaveEnd: PropTypes.func\n  };\n  CSSMotion.defaultProps = {\n    visible: true,\n    motionEnter: true,\n    motionAppear: true,\n    motionLeave: true,\n    removeOnLeave: true\n  };\n\n\n  polyfill(CSSMotion);\n\n  return CSSMotion;\n}\n\nexport default genCSSMotion(supportTransition);"]}]}