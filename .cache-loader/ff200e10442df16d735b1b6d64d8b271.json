{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\axis\\base.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\axis\\base.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Component = require('../component');\r\nvar Util = require('../util');\r\nvar Grid = require('./grid');\r\nvar Label = require('../label/base');\r\nvar Axis = function (_Component) {\r\n    _inheritsLoose(Axis, _Component);\r\n    function Axis() {\r\n        return _Component.apply(this, arguments) || this;\r\n    }\r\n    var _proto = Axis.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Component.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            _id: null,\r\n            zIndex: 4,\r\n            ticks: null,\r\n            line: null,\r\n            tickLine: null,\r\n            subTickCount: 0,\r\n            subTickLine: null,\r\n            grid: null,\r\n            label: {\r\n                textStyle: {},\r\n                autoRotate: true,\r\n                formatter: null\r\n            },\r\n            labelItems: [],\r\n            title: {\r\n                autoRotate: true,\r\n                textStyle: {}\r\n            },\r\n            autoPaint: true\r\n        });\r\n    };\r\n    _proto.beforeRender = function beforeRender() {\r\n        var self = this;\r\n        var title = self.get('title');\r\n        var label = self.get('label');\r\n        var grid = self.get('grid');\r\n        var viewTheme = self.get('viewTheme') || {};\r\n        if (title) {\r\n            self.set('title', Util.deepMix({\r\n                autoRotate: true,\r\n                textStyle: {\r\n                    fontSize: 12,\r\n                    fill: '#ccc',\r\n                    textBaseline: 'middle',\r\n                    fontFamily: viewTheme.fontFamily,\r\n                    textAlign: 'center'\r\n                },\r\n                offset: 48\r\n            }, title));\r\n        }\r\n        if (label) {\r\n            self.set('label', Util.deepMix({\r\n                autoRotate: true,\r\n                textStyle: {\r\n                    fontSize: 12,\r\n                    fill: '#ccc',\r\n                    textBaseline: 'middle',\r\n                    fontFamily: viewTheme.fontFamily\r\n                },\r\n                offset: 10\r\n            }, label));\r\n        }\r\n        if (grid) {\r\n            self.set('grid', Util.deepMix({\r\n                lineStyle: {\r\n                    lineWidth: 1,\r\n                    stroke: '#C0D0E0'\r\n                }\r\n            }, grid));\r\n        }\r\n    };\r\n    _proto.render = function render() {\r\n        var self = this;\r\n        self.beforeRender();\r\n        var labelCfg = self.get('label');\r\n        if (labelCfg) {\r\n            self.renderLabels();\r\n        }\r\n        if (self.get('autoPaint')) {\r\n            self.paint();\r\n        }\r\n        if (!Util.isNil(self.get('title'))) {\r\n            self.renderTitle();\r\n        }\r\n        self.get('group').sort();\r\n    };\r\n    _proto.renderLabels = function renderLabels() {\r\n        var self = this;\r\n        var group = self.get('group');\r\n        var labelCfg = self.get('label');\r\n        var labelRenderer = new Label();\r\n        self.set('labelRenderer', labelRenderer);\r\n        labelRenderer.set('labelCfg', labelCfg);\r\n        var cfgs2copy = ['formatter', 'htmlTemplate', 'labelLine', 'textStyle', 'useHtml'];\r\n        Util.each(cfgs2copy, function (cfg) {\r\n            if (labelCfg[cfg]) {\r\n                labelRenderer.set(cfg, labelCfg[cfg]);\r\n            }\r\n        });\r\n        labelRenderer.set('coord', self.get('coord'));\r\n        labelRenderer.set('group', group.addGroup());\r\n        labelRenderer.set('canvas', self.get('canvas'));\r\n    };\r\n    _proto._parseTicks = function _parseTicks(ticks) {\r\n        ticks = ticks || [];\r\n        var ticksLength = ticks.length;\r\n        for (var i = 0; i < ticksLength; i++) {\r\n            var item = ticks[i];\r\n            if (!Util.isObject(item)) {\r\n                ticks[i] = this.parseTick(item, i, ticksLength);\r\n            }\r\n        }\r\n        this.set('ticks', ticks);\r\n        return ticks;\r\n    };\r\n    _proto._parseCatTicks = function _parseCatTicks(ticks) {\r\n        ticks = ticks || [];\r\n        var ticksLength = ticks.length;\r\n        for (var i = 0; i < ticksLength; i++) {\r\n            var item = ticks[i];\r\n            if (!Util.isObject(item)) {\r\n                ticks[i] = this.parseTick(item, i, ticksLength);\r\n            }\r\n        }\r\n        this.set('ticks', ticks);\r\n        return ticks;\r\n    };\r\n    _proto._addTickItem = function _addTickItem(index, point, length, type) {\r\n        if (type === void 0) {\r\n            type = '';\r\n        }\r\n        var tickItems = this.get('tickItems');\r\n        var subTickItems = this.get('subTickItems');\r\n        var end = this.getTickEnd(point, length, index);\r\n        var cfg = {\r\n            x1: point.x,\r\n            y1: point.y,\r\n            x2: end.x,\r\n            y2: end.y\r\n        };\r\n        if (!tickItems) {\r\n            tickItems = [];\r\n        }\r\n        if (!subTickItems) {\r\n            subTickItems = [];\r\n        }\r\n        if (type === 'sub') {\r\n            subTickItems.push(cfg);\r\n        }\r\n        else {\r\n            tickItems.push(cfg);\r\n        }\r\n        this.set('tickItems', tickItems);\r\n        this.set('subTickItems', subTickItems);\r\n    };\r\n    _proto._renderLine = function _renderLine() {\r\n        var self = this;\r\n        var lineCfg = self.get('line');\r\n        var path;\r\n        if (lineCfg) {\r\n            path = self.getLinePath();\r\n            lineCfg = Util.mix({\r\n                path: path\r\n            }, lineCfg);\r\n            var group = self.get('group');\r\n            var lineShape = group.addShape('path', {\r\n                attrs: lineCfg\r\n            });\r\n            lineShape.name = 'axis-line';\r\n            self.get('appendInfo') && lineShape.setSilent('appendInfo', self.get('appendInfo'));\r\n            self.set('lineShape', lineShape);\r\n        }\r\n    };\r\n    _proto._processCatTicks = function _processCatTicks() {\r\n        var self = this;\r\n        var labelCfg = self.get('label');\r\n        var tickLineCfg = self.get('tickLine');\r\n        var ticks = self.get('ticks');\r\n        ticks = self._parseTicks(ticks);\r\n        var new_ticks = self._getNormalizedTicks(ticks);\r\n        for (var i = 0; i < new_ticks.length; i += 3) {\r\n            var p = self.getTickPoint(new_ticks[i]);\r\n            var p0 = self.getTickPoint(new_ticks[i + 1]);\r\n            var p1 = self.getTickPoint(new_ticks[i + 2]);\r\n            var index = Math.floor(i / 3);\r\n            var tick = ticks[index];\r\n            if (tickLineCfg) {\r\n                if (index === 0) {\r\n                    self._addTickItem(index, p0, tickLineCfg.length);\r\n                }\r\n                self._addTickItem(index, p1, tickLineCfg.length);\r\n            }\r\n            if (labelCfg) {\r\n                self.addLabel(tick, p, index);\r\n            }\r\n        }\r\n    };\r\n    _proto._getNormalizedTicks = function _getNormalizedTicks(ticks) {\r\n        var tickSeg = 0;\r\n        if (ticks.length > 1) {\r\n            tickSeg = (ticks[1].value - ticks[0].value) / 2;\r\n        }\r\n        var points = [];\r\n        for (var i = 0; i < ticks.length; i++) {\r\n            var tick = ticks[i];\r\n            var p = tick.value;\r\n            var p0 = tick.value - tickSeg;\r\n            var p1 = tick.value + tickSeg;\r\n            points.push(p, p0, p1);\r\n        }\r\n        var range = Util.arrayUtil.getRange(points);\r\n        return points.map(function (p) {\r\n            var norm = (p - range.min) / (range.max - range.min);\r\n            return norm;\r\n        });\r\n    };\r\n    _proto.addLabel = function addLabel(tick, point, index) {\r\n        var self = this;\r\n        var labelItems = self.get('labelItems');\r\n        var labelRenderer = self.get('labelRenderer');\r\n        var label = Util.mix({}, self.get('label'));\r\n        var rst;\r\n        if (labelRenderer) {\r\n            var offset = self.get('_labelOffset');\r\n            if (!Util.isNil(self.get('label').offset)) {\r\n                offset = self.get('label').offset;\r\n            }\r\n            var vector = self.getSideVector(offset, point, index);\r\n            point = {\r\n                x: point.x + vector[0],\r\n                y: point.y + vector[1]\r\n            };\r\n            label.text = tick.text;\r\n            label.x = point.x;\r\n            label.y = point.y;\r\n            label.point = point;\r\n            label.textAlign = self.getTextAnchor(vector);\r\n            if (point.rotate) {\r\n                label.rotate = point.rotate;\r\n            }\r\n            labelItems.push(label);\r\n        }\r\n        return rst;\r\n    };\r\n    _proto._processTicks = function _processTicks() {\r\n        var self = this;\r\n        var labelCfg = self.get('label');\r\n        var subTickCount = self.get('subTickCount');\r\n        var tickLineCfg = self.get('tickLine');\r\n        var ticks = self.get('ticks');\r\n        ticks = self._parseTicks(ticks);\r\n        Util.each(ticks, function (tick, index) {\r\n            var tickPoint = self.getTickPoint(tick.value, index);\r\n            if (tickLineCfg) {\r\n                self._addTickItem(index, tickPoint, tickLineCfg.length);\r\n            }\r\n            if (labelCfg) {\r\n                self.addLabel(tick, tickPoint, index);\r\n            }\r\n        });\r\n        if (subTickCount) {\r\n            var subTickLineCfg = self.get('subTickLine');\r\n            Util.each(ticks, function (tick, index) {\r\n                if (index > 0) {\r\n                    var diff = tick.value - ticks[index - 1].value;\r\n                    diff = diff / (self.get('subTickCount') + 1);\r\n                    for (var i = 1; i <= subTickCount; i++) {\r\n                        var subTick = {\r\n                            text: '',\r\n                            value: index ? ticks[index - 1].value + i * diff : i * diff\r\n                        };\r\n                        var tickPoint = self.getTickPoint(subTick.value);\r\n                        var subTickLength = void 0;\r\n                        if (subTickLineCfg && subTickLineCfg.length) {\r\n                            subTickLength = subTickLineCfg.length;\r\n                        }\r\n                        else {\r\n                            subTickLength = parseInt(tickLineCfg.length * (3 / 5), 10);\r\n                        }\r\n                        self._addTickItem(i - 1, tickPoint, subTickLength, 'sub');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    _proto._addTickLine = function _addTickLine(ticks, lineCfg) {\r\n        var self = this;\r\n        var cfg = Util.mix({}, lineCfg);\r\n        var path = [];\r\n        Util.each(ticks, function (item) {\r\n            path.push(['M', item.x1, item.y1]);\r\n            path.push(['L', item.x2, item.y2]);\r\n        });\r\n        delete cfg.length;\r\n        cfg.path = path;\r\n        var group = self.get('group');\r\n        var tickShape = group.addShape('path', {\r\n            attrs: cfg\r\n        });\r\n        tickShape.name = 'axis-ticks';\r\n        tickShape._id = self.get('_id') + '-ticks';\r\n        tickShape.set('coord', self.get('coord'));\r\n        self.get('appendInfo') && tickShape.setSilent('appendInfo', self.get('appendInfo'));\r\n    };\r\n    _proto._renderTicks = function _renderTicks() {\r\n        var self = this;\r\n        var tickItems = self.get('tickItems');\r\n        var subTickItems = self.get('subTickItems');\r\n        if (!Util.isEmpty(tickItems)) {\r\n            var tickLineCfg = self.get('tickLine');\r\n            self._addTickLine(tickItems, tickLineCfg);\r\n        }\r\n        if (!Util.isEmpty(subTickItems)) {\r\n            var subTickLineCfg = self.get('subTickLine') || self.get('tickLine');\r\n            self._addTickLine(subTickItems, subTickLineCfg);\r\n        }\r\n    };\r\n    _proto._renderGrid = function _renderGrid() {\r\n        var grid = this.get('grid');\r\n        if (!grid) {\r\n            return;\r\n        }\r\n        grid.coord = this.get('coord');\r\n        grid.appendInfo = this.get('appendInfo');\r\n        var group = this.get('group');\r\n        this.set('gridGroup', group.addGroup(Grid, grid));\r\n    };\r\n    _proto._renderLabels = function _renderLabels() {\r\n        var self = this;\r\n        var labelRenderer = self.get('labelRenderer');\r\n        var labelItems = self.get('labelItems');\r\n        if (labelRenderer) {\r\n            labelRenderer.set('items', labelItems);\r\n            labelRenderer._dryDraw();\r\n        }\r\n    };\r\n    _proto.paint = function paint() {\r\n        var tickLineCfg = this.get('tickLine');\r\n        var alignWithLabel = true;\r\n        if (tickLineCfg && tickLineCfg.hasOwnProperty('alignWithLabel')) {\r\n            alignWithLabel = tickLineCfg.alignWithLabel;\r\n        }\r\n        this._renderLine();\r\n        var type = this.get('type');\r\n        var isCat = type === 'cat' || type === 'timeCat';\r\n        if (isCat && alignWithLabel === false) {\r\n            this._processCatTicks();\r\n        }\r\n        else {\r\n            this._processTicks();\r\n        }\r\n        this._renderTicks();\r\n        this._renderGrid();\r\n        this._renderLabels();\r\n        var labelCfg = this.get('label');\r\n        if (labelCfg && labelCfg.autoRotate) {\r\n            this.autoRotateLabels();\r\n        }\r\n    };\r\n    _proto.parseTick = function parseTick(tick, index, length) {\r\n        return {\r\n            text: tick,\r\n            value: index / (length - 1)\r\n        };\r\n    };\r\n    _proto.getTextAnchor = function getTextAnchor(vector) {\r\n        var ratio = Math.abs(vector[1] / vector[0]);\r\n        var align;\r\n        if (ratio >= 1) {\r\n            align = 'center';\r\n        }\r\n        else {\r\n            if (vector[0] > 0) {\r\n                align = 'start';\r\n            }\r\n            else {\r\n                align = 'end';\r\n            }\r\n        }\r\n        return align;\r\n    };\r\n    _proto.getMaxLabelWidth = function getMaxLabelWidth(labelRenderer) {\r\n        var labels = labelRenderer.get('group').get('children');\r\n        var max = 0;\r\n        Util.each(labels, function (label) {\r\n            var bbox = label.getBBox();\r\n            var width = bbox.width;\r\n            if (max < width) {\r\n                max = width;\r\n            }\r\n        });\r\n        return max;\r\n    };\r\n    _proto.destroy = function destroy() {\r\n        var self = this;\r\n        if (!self.destroyed) {\r\n            _Component.prototype.destroy.call(this);\r\n            var gridGroup = self.get('gridGroup');\r\n            gridGroup && gridGroup.remove();\r\n            var labelRenderer = this.get('labelRenderer');\r\n            labelRenderer && labelRenderer.destroy();\r\n            var group = self.get('group');\r\n            group.destroy();\r\n            self.destroyed = true;\r\n        }\r\n    };\r\n    _proto.clear = function clear() {\r\n        var self = this;\r\n        var group = self.get('group');\r\n        if (!group.get('destroyed') && group.get('children').length) {\r\n            var gridGroup = self.get('gridGroup');\r\n            gridGroup && gridGroup.clear();\r\n            var labelRenderer = this.get('labelRenderer');\r\n            labelRenderer && labelRenderer.clear();\r\n            var _group = self.get('group');\r\n            _group.clear();\r\n        }\r\n    };\r\n    _proto.autoRotateLabels = function autoRotateLabels() { };\r\n    _proto.renderTitle = function renderTitle() { };\r\n    _proto.getLinePath = function getLinePath() { };\r\n    _proto.getTickPoint = function getTickPoint() { };\r\n    _proto.getTickEnd = function getTickEnd() { };\r\n    _proto.getSideVector = function getSideVector() { };\r\n    return Axis;\r\n}(Component);\r\nmodule.exports = Axis;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\axis\\base.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\axis\\base.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Component = require('../component');\n\nvar Util = require('../util');\n\nvar Grid = require('./grid');\n\nvar Label = require('../label/base');\n\nvar Axis =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Axis, _Component);\n\n  function Axis() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Axis.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Component.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * 用于动画，唯一标识的 id\n       * @type {[type]}\n       */\n      _id: null,\n      zIndex: 4,\n\n      /**\n       * 坐标轴上的坐标点\n       * @type {Array}\n       */\n      ticks: null,\n\n      /**\n       * 坐标轴线的配置信息，如果设置成null，则不显示轴线\n       * @type {Object}\n       */\n      line: null,\n\n      /**\n       * 坐标轴刻度线的配置,如果设置成null，则不显示刻度线\n       * @type {Object}\n       */\n      tickLine: null,\n\n      /**\n       * 次刻度线个数配置\n       * @type {Number}\n       */\n      subTickCount: 0,\n\n      /**\n       * 次刻度线样式配置\n       * @type {Object}\n       */\n      subTickLine: null,\n\n      /**\n       * 网格线配置，如果值为 null，则不显示\n       * @type {Object}\n       */\n      grid: null,\n\n      /**\n       * 坐标轴文本配置\n       * @type {Object}\n       */\n      label: {\n        textStyle: {},\n        // 坐标轴文本样式\n        autoRotate: true,\n        formatter: null // 坐标轴文本格式化回调函数\n\n      },\n      labelItems: [],\n\n      /**\n       * 坐标轴标题配置\n       * @type {Object}\n       */\n      title: {\n        autoRotate: true,\n        // 文本是否自动旋转\n        textStyle: {} // 坐标轴标题样式\n\n      },\n      autoPaint: true\n    });\n  };\n\n  _proto.beforeRender = function beforeRender() {\n    var self = this;\n    var title = self.get('title');\n    var label = self.get('label');\n    var grid = self.get('grid');\n    var viewTheme = self.get('viewTheme') || {};\n\n    if (title) {\n      self.set('title', Util.deepMix({\n        autoRotate: true,\n        textStyle: {\n          fontSize: 12,\n          fill: '#ccc',\n          textBaseline: 'middle',\n          fontFamily: viewTheme.fontFamily,\n          textAlign: 'center'\n        },\n        offset: 48\n      }, title));\n    }\n\n    if (label) {\n      self.set('label', Util.deepMix({\n        autoRotate: true,\n        textStyle: {\n          fontSize: 12,\n          fill: '#ccc',\n          textBaseline: 'middle',\n          fontFamily: viewTheme.fontFamily\n        },\n        offset: 10\n      }, label));\n    }\n\n    if (grid) {\n      self.set('grid', Util.deepMix({\n        lineStyle: {\n          lineWidth: 1,\n          stroke: '#C0D0E0'\n        }\n      }, grid));\n    }\n  };\n\n  _proto.render = function render() {\n    var self = this;\n    self.beforeRender();\n    var labelCfg = self.get('label');\n\n    if (labelCfg) {\n      self.renderLabels();\n    }\n\n    if (self.get('autoPaint')) {\n      self.paint();\n    }\n\n    if (!Util.isNil(self.get('title'))) {\n      self.renderTitle();\n    }\n\n    self.get('group').sort();\n  };\n\n  _proto.renderLabels = function renderLabels() {\n    var self = this;\n    var group = self.get('group');\n    var labelCfg = self.get('label');\n    var labelRenderer = new Label();\n    self.set('labelRenderer', labelRenderer);\n    labelRenderer.set('labelCfg', labelCfg);\n    var cfgs2copy = ['formatter', 'htmlTemplate', 'labelLine', 'textStyle', 'useHtml'];\n    Util.each(cfgs2copy, function (cfg) {\n      if (labelCfg[cfg]) {\n        labelRenderer.set(cfg, labelCfg[cfg]);\n      }\n    });\n    labelRenderer.set('coord', self.get('coord'));\n    labelRenderer.set('group', group.addGroup());\n    labelRenderer.set('canvas', self.get('canvas'));\n  };\n\n  _proto._parseTicks = function _parseTicks(ticks) {\n    ticks = ticks || [];\n    var ticksLength = ticks.length;\n\n    for (var i = 0; i < ticksLength; i++) {\n      var item = ticks[i];\n\n      if (!Util.isObject(item)) {\n        ticks[i] = this.parseTick(item, i, ticksLength);\n      }\n    }\n\n    this.set('ticks', ticks);\n    return ticks;\n  };\n\n  _proto._parseCatTicks = function _parseCatTicks(ticks) {\n    ticks = ticks || [];\n    var ticksLength = ticks.length;\n\n    for (var i = 0; i < ticksLength; i++) {\n      var item = ticks[i];\n\n      if (!Util.isObject(item)) {\n        ticks[i] = this.parseTick(item, i, ticksLength);\n      }\n    }\n\n    this.set('ticks', ticks);\n    return ticks;\n  };\n\n  _proto._addTickItem = function _addTickItem(index, point, length, type) {\n    if (type === void 0) {\n      type = '';\n    }\n\n    var tickItems = this.get('tickItems');\n    var subTickItems = this.get('subTickItems');\n    var end = this.getTickEnd(point, length, index);\n    var cfg = {\n      x1: point.x,\n      y1: point.y,\n      x2: end.x,\n      y2: end.y\n    };\n\n    if (!tickItems) {\n      tickItems = [];\n    }\n\n    if (!subTickItems) {\n      subTickItems = [];\n    }\n\n    if (type === 'sub') {\n      subTickItems.push(cfg);\n    } else {\n      tickItems.push(cfg);\n    }\n\n    this.set('tickItems', tickItems);\n    this.set('subTickItems', subTickItems);\n  };\n\n  _proto._renderLine = function _renderLine() {\n    var self = this;\n    var lineCfg = self.get('line');\n    var path;\n\n    if (lineCfg) {\n      path = self.getLinePath();\n      lineCfg = Util.mix({\n        path: path\n      }, lineCfg);\n      var group = self.get('group');\n      var lineShape = group.addShape('path', {\n        attrs: lineCfg\n      });\n      lineShape.name = 'axis-line';\n      self.get('appendInfo') && lineShape.setSilent('appendInfo', self.get('appendInfo'));\n      self.set('lineShape', lineShape);\n    }\n  };\n\n  _proto._processCatTicks = function _processCatTicks() {\n    var self = this;\n    var labelCfg = self.get('label');\n    var tickLineCfg = self.get('tickLine');\n    var ticks = self.get('ticks');\n    ticks = self._parseTicks(ticks);\n\n    var new_ticks = self._getNormalizedTicks(ticks);\n\n    for (var i = 0; i < new_ticks.length; i += 3) {\n      var p = self.getTickPoint(new_ticks[i]);\n      var p0 = self.getTickPoint(new_ticks[i + 1]);\n      var p1 = self.getTickPoint(new_ticks[i + 2]);\n      var index = Math.floor(i / 3);\n      var tick = ticks[index];\n\n      if (tickLineCfg) {\n        if (index === 0) {\n          self._addTickItem(index, p0, tickLineCfg.length);\n        }\n\n        self._addTickItem(index, p1, tickLineCfg.length);\n      }\n\n      if (labelCfg) {\n        self.addLabel(tick, p, index);\n      }\n    }\n  };\n\n  _proto._getNormalizedTicks = function _getNormalizedTicks(ticks) {\n    var tickSeg = 0;\n\n    if (ticks.length > 1) {\n      tickSeg = (ticks[1].value - ticks[0].value) / 2;\n    }\n\n    var points = [];\n\n    for (var i = 0; i < ticks.length; i++) {\n      var tick = ticks[i];\n      var p = tick.value;\n      var p0 = tick.value - tickSeg;\n      var p1 = tick.value + tickSeg;\n      points.push(p, p0, p1);\n    }\n\n    var range = Util.arrayUtil.getRange(points);\n    return points.map(function (p) {\n      var norm = (p - range.min) / (range.max - range.min);\n      return norm;\n    });\n  };\n\n  _proto.addLabel = function addLabel(tick, point, index) {\n    var self = this;\n    var labelItems = self.get('labelItems');\n    var labelRenderer = self.get('labelRenderer');\n    var label = Util.mix({}, self.get('label'));\n    var rst;\n\n    if (labelRenderer) {\n      var offset = self.get('_labelOffset');\n\n      if (!Util.isNil(self.get('label').offset)) {\n        offset = self.get('label').offset;\n      }\n\n      var vector = self.getSideVector(offset, point, index);\n      point = {\n        x: point.x + vector[0],\n        y: point.y + vector[1]\n      };\n      label.text = tick.text;\n      label.x = point.x;\n      label.y = point.y;\n      label.point = point;\n      label.textAlign = self.getTextAnchor(vector);\n\n      if (point.rotate) {\n        label.rotate = point.rotate;\n      }\n\n      labelItems.push(label);\n    }\n\n    return rst;\n  };\n\n  _proto._processTicks = function _processTicks() {\n    var self = this;\n    var labelCfg = self.get('label');\n    var subTickCount = self.get('subTickCount');\n    var tickLineCfg = self.get('tickLine');\n    var ticks = self.get('ticks');\n    ticks = self._parseTicks(ticks);\n    Util.each(ticks, function (tick, index) {\n      var tickPoint = self.getTickPoint(tick.value, index);\n\n      if (tickLineCfg) {\n        self._addTickItem(index, tickPoint, tickLineCfg.length);\n      }\n\n      if (labelCfg) {\n        self.addLabel(tick, tickPoint, index);\n      }\n    });\n\n    if (subTickCount) {\n      // 如果有设置次级分点，添加次级tick\n      var subTickLineCfg = self.get('subTickLine');\n      Util.each(ticks, function (tick, index) {\n        if (index > 0) {\n          var diff = tick.value - ticks[index - 1].value;\n          diff = diff / (self.get('subTickCount') + 1);\n\n          for (var i = 1; i <= subTickCount; i++) {\n            var subTick = {\n              text: '',\n              value: index ? ticks[index - 1].value + i * diff : i * diff\n            };\n            var tickPoint = self.getTickPoint(subTick.value);\n            var subTickLength = void 0;\n\n            if (subTickLineCfg && subTickLineCfg.length) {\n              subTickLength = subTickLineCfg.length;\n            } else {\n              subTickLength = parseInt(tickLineCfg.length * (3 / 5), 10);\n            }\n\n            self._addTickItem(i - 1, tickPoint, subTickLength, 'sub');\n          }\n        }\n      });\n    }\n  };\n\n  _proto._addTickLine = function _addTickLine(ticks, lineCfg) {\n    var self = this;\n    var cfg = Util.mix({}, lineCfg);\n    var path = [];\n    Util.each(ticks, function (item) {\n      path.push(['M', item.x1, item.y1]);\n      path.push(['L', item.x2, item.y2]);\n    });\n    delete cfg.length;\n    cfg.path = path;\n    var group = self.get('group');\n    var tickShape = group.addShape('path', {\n      attrs: cfg\n    });\n    tickShape.name = 'axis-ticks';\n    tickShape._id = self.get('_id') + '-ticks';\n    tickShape.set('coord', self.get('coord'));\n    self.get('appendInfo') && tickShape.setSilent('appendInfo', self.get('appendInfo'));\n  };\n\n  _proto._renderTicks = function _renderTicks() {\n    var self = this;\n    var tickItems = self.get('tickItems');\n    var subTickItems = self.get('subTickItems');\n\n    if (!Util.isEmpty(tickItems)) {\n      var tickLineCfg = self.get('tickLine');\n\n      self._addTickLine(tickItems, tickLineCfg);\n    }\n\n    if (!Util.isEmpty(subTickItems)) {\n      var subTickLineCfg = self.get('subTickLine') || self.get('tickLine');\n\n      self._addTickLine(subTickItems, subTickLineCfg);\n    }\n  };\n\n  _proto._renderGrid = function _renderGrid() {\n    var grid = this.get('grid');\n\n    if (!grid) {\n      return;\n    }\n\n    grid.coord = this.get('coord');\n    grid.appendInfo = this.get('appendInfo');\n    var group = this.get('group');\n    this.set('gridGroup', group.addGroup(Grid, grid));\n  };\n\n  _proto._renderLabels = function _renderLabels() {\n    var self = this;\n    var labelRenderer = self.get('labelRenderer');\n    var labelItems = self.get('labelItems');\n\n    if (labelRenderer) {\n      labelRenderer.set('items', labelItems);\n\n      labelRenderer._dryDraw();\n    }\n  };\n\n  _proto.paint = function paint() {\n    var tickLineCfg = this.get('tickLine');\n    var alignWithLabel = true;\n\n    if (tickLineCfg && tickLineCfg.hasOwnProperty('alignWithLabel')) {\n      alignWithLabel = tickLineCfg.alignWithLabel;\n    }\n\n    this._renderLine();\n\n    var type = this.get('type');\n    var isCat = type === 'cat' || type === 'timeCat';\n\n    if (isCat && alignWithLabel === false) {\n      this._processCatTicks();\n    } else {\n      this._processTicks();\n    }\n\n    this._renderTicks();\n\n    this._renderGrid();\n\n    this._renderLabels();\n\n    var labelCfg = this.get('label');\n\n    if (labelCfg && labelCfg.autoRotate) {\n      this.autoRotateLabels();\n    }\n  };\n\n  _proto.parseTick = function parseTick(tick, index, length) {\n    return {\n      text: tick,\n      value: index / (length - 1)\n    };\n  };\n\n  _proto.getTextAnchor = function getTextAnchor(vector) {\n    var ratio = Math.abs(vector[1] / vector[0]);\n    var align;\n\n    if (ratio >= 1) {\n      // 上面或者下面\n      align = 'center';\n    } else {\n      if (vector[0] > 0) {\n        // 右侧\n        align = 'start';\n      } else {\n        // 左侧\n        align = 'end';\n      }\n    }\n\n    return align;\n  };\n\n  _proto.getMaxLabelWidth = function getMaxLabelWidth(labelRenderer) {\n    var labels = labelRenderer.get('group').get('children');\n    var max = 0;\n    Util.each(labels, function (label) {\n      var bbox = label.getBBox();\n      var width = bbox.width;\n\n      if (max < width) {\n        max = width;\n      }\n    });\n    return max;\n  };\n\n  _proto.destroy = function destroy() {\n    var self = this;\n\n    if (!self.destroyed) {\n      _Component.prototype.destroy.call(this);\n\n      var gridGroup = self.get('gridGroup');\n      gridGroup && gridGroup.remove();\n      var labelRenderer = this.get('labelRenderer');\n      labelRenderer && labelRenderer.destroy();\n      var group = self.get('group');\n      group.destroy();\n      self.destroyed = true;\n    }\n  };\n\n  _proto.clear = function clear() {\n    var self = this;\n    var group = self.get('group');\n\n    if (!group.get('destroyed') && group.get('children').length) {\n      var gridGroup = self.get('gridGroup');\n      gridGroup && gridGroup.clear();\n      var labelRenderer = this.get('labelRenderer');\n      labelRenderer && labelRenderer.clear();\n\n      var _group = self.get('group');\n\n      _group.clear();\n    }\n  };\n  /**\n   * 旋转文本\n   * @abstract\n   * @return {[type]} [description]\n   */\n\n\n  _proto.autoRotateLabels = function autoRotateLabels() {};\n  /**\n   * 渲染标题\n   * @abstract\n   * @return {[type]} [description]\n   */\n\n\n  _proto.renderTitle = function renderTitle() {};\n  /**\n   * 获取坐标轴线的 path\n   * @abstract\n   * @return {[type]} [description]\n   */\n\n\n  _proto.getLinePath = function getLinePath() {};\n  /**\n   * 获取 tick 在画布上的位置\n   * @abstract\n   * @return {[type]} [description]\n   */\n\n\n  _proto.getTickPoint = function getTickPoint() {};\n  /**\n   * 获取标示坐标点的线的终点\n   * @abstract\n   * @return {[type]} [description]\n   */\n\n\n  _proto.getTickEnd = function getTickEnd() {};\n  /**\n   * 获取距离坐标轴的向量\n   * @abstract\n   * @return {[type]} [description]\n   */\n\n\n  _proto.getSideVector = function getSideVector() {};\n\n  return Axis;\n}(Component);\n\nmodule.exports = Axis;"]}]}