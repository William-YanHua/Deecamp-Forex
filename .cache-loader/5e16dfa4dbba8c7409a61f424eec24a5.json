{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/mixin/animation.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/mixin/animation.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../../util/index');\nvar ReservedProps = {\n    delay: 'delay',\n    rotate: 'rotate'\n};\nvar colorRalaredProps = {\n    fill: 'fill',\n    stroke: 'stroke',\n    fillStyle: 'fillStyle',\n    strokeStyle: 'strokeStyle'\n};\nfunction getFromAttrs(toAttrs, shape) {\n    var rst = {};\n    var attrs = shape._attrs;\n    for (var k in toAttrs.attrs) {\n        rst[k] = attrs[k];\n    }\n    return rst;\n}\nfunction getFormatProps(props, shape) {\n    var rst = {\n        matrix: null,\n        attrs: {}\n    };\n    var attrs = shape._attrs;\n    for (var k in props) {\n        if (k === 'transform') {\n            rst.matrix = Util.transform(shape.getMatrix(), props[k]);\n        }\n        else if (k === 'rotate') {\n            rst.matrix = Util.transform(shape.getMatrix(), [['r', props[k]]]);\n        }\n        else if (k === 'matrix') {\n            rst.matrix = props[k];\n        }\n        else if (colorRalaredProps[k] && /^[r,R,L,l]{1}[\\s]*\\(/.test(props[k])) {\n            continue;\n        }\n        else if (!ReservedProps[k] && attrs[k] !== props[k]) {\n            rst.attrs[k] = props[k];\n        }\n    }\n    return rst;\n}\nfunction checkExistedAttrs(animators, animator) {\n    var delay = animator.delay;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    Util.each(animator.toAttrs, function (v, k) {\n        Util.each(animators, function (animator) {\n            if (delay < animator.startTime + animator.duration) {\n                if (hasOwnProperty.call(animator.toAttrs, k)) {\n                    delete animator.toAttrs[k];\n                    delete animator.fromAttrs[k];\n                }\n            }\n        });\n    });\n    if (animator.toMatrix) {\n        Util.each(animators, function (animator) {\n            if (delay < animator.startTime + animator.duration && animator.toMatrix) {\n                delete animator.toMatrix;\n            }\n        });\n    }\n    return animators;\n}\nmodule.exports = {\n    animate: function animate(toProps, duration, easing, callback, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var self = this;\n        self.set('animating', true);\n        var timeline = self.get('timeline');\n        if (!timeline) {\n            timeline = self.get('canvas').get('timeline');\n            self.setSilent('timeline', timeline);\n        }\n        var animators = self.get('animators') || [];\n        if (!timeline._timer) {\n            timeline.initTimer();\n        }\n        if (Util.isNumber(callback)) {\n            delay = callback;\n            callback = null;\n        }\n        if (Util.isFunction(easing)) {\n            callback = easing;\n            easing = 'easeLinear';\n        }\n        else {\n            easing = easing ? easing : 'easeLinear';\n        }\n        var formatProps = getFormatProps(toProps, self);\n        var animator = {\n            fromAttrs: getFromAttrs(formatProps, self),\n            toAttrs: formatProps.attrs,\n            fromMatrix: Util.clone(self.getMatrix()),\n            toMatrix: formatProps.matrix,\n            duration: duration,\n            easing: easing,\n            callback: callback,\n            delay: delay,\n            startTime: timeline.getTime(),\n            id: Util.uniqueId()\n        };\n        if (animators.length > 0) {\n            animators = checkExistedAttrs(animators, animator);\n        }\n        else {\n            timeline.addAnimator(self);\n        }\n        animators.push(animator);\n        self.setSilent('animators', animators);\n        self.setSilent('pause', {\n            isPaused: false\n        });\n    },\n    stopAnimate: function stopAnimate() {\n        var _this = this;\n        var animators = this.get('animators');\n        Util.each(animators, function (animator) {\n            _this.attr(animator.toAttrs);\n            if (animator.toMatrix) {\n                _this.attr('matrix', animator.toMatrix);\n            }\n            if (animator.callback) {\n                animator.callback();\n            }\n        });\n        this.setSilent('animating', false);\n        this.setSilent('animators', []);\n    },\n    pauseAnimate: function pauseAnimate() {\n        var self = this;\n        var timeline = self.get('timeline');\n        self.setSilent('pause', {\n            isPaused: true,\n            pauseTime: timeline.getTime()\n        });\n        return self;\n    },\n    resumeAnimate: function resumeAnimate() {\n        var self = this;\n        var timeline = self.get('timeline');\n        var current = timeline.getTime();\n        var animators = self.get('animators');\n        var pauseTime = self.get('pause').pauseTime;\n        Util.each(animators, function (animator) {\n            animator.startTime = animator.startTime + (current - pauseTime);\n            animator._paused = false;\n            animator._pauseTime = null;\n        });\n        self.setSilent('pause', {\n            isPaused: false\n        });\n        self.setSilent('animators', animators);\n        return self;\n    }\n};\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/mixin/animation.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/core/mixin/animation.js"],"names":[],"mappings":"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","sourcesContent":["var Util = require('../../util/index');\n\nvar ReservedProps = {\n  delay: 'delay',\n  rotate: 'rotate'\n};\nvar colorRalaredProps = {\n  fill: 'fill',\n  stroke: 'stroke',\n  fillStyle: 'fillStyle',\n  strokeStyle: 'strokeStyle'\n};\n\nfunction getFromAttrs(toAttrs, shape) {\n  var rst = {};\n  var attrs = shape._attrs;\n\n  for (var k in toAttrs.attrs) {\n    rst[k] = attrs[k];\n  }\n\n  return rst;\n}\n\nfunction getFormatProps(props, shape) {\n  var rst = {\n    matrix: null,\n    attrs: {}\n  };\n  var attrs = shape._attrs;\n\n  for (var k in props) {\n    if (k === 'transform') {\n      rst.matrix = Util.transform(shape.getMatrix(), props[k]);\n    } else if (k === 'rotate') {\n      rst.matrix = Util.transform(shape.getMatrix(), [['r', props[k]]]);\n    } else if (k === 'matrix') {\n      rst.matrix = props[k];\n    } else if (colorRalaredProps[k] && /^[r,R,L,l]{1}[\\s]*\\(/.test(props[k])) {\n      // 渐变色不支持动画\n      continue;\n    } else if (!ReservedProps[k] && attrs[k] !== props[k]) {\n      rst.attrs[k] = props[k];\n    }\n  }\n\n  return rst;\n}\n\nfunction checkExistedAttrs(animators, animator) {\n  var delay = animator.delay;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  Util.each(animator.toAttrs, function (v, k) {\n    Util.each(animators, function (animator) {\n      if (delay < animator.startTime + animator.duration) {\n        if (hasOwnProperty.call(animator.toAttrs, k)) {\n          delete animator.toAttrs[k];\n          delete animator.fromAttrs[k];\n        }\n      }\n    });\n  });\n\n  if (animator.toMatrix) {\n    Util.each(animators, function (animator) {\n      if (delay < animator.startTime + animator.duration && animator.toMatrix) {\n        delete animator.toMatrix;\n      }\n    });\n  }\n\n  return animators;\n}\n\nmodule.exports = {\n  /**\n   * 执行动画\n   * @param  {Object}   toProps  动画最终状态\n   * @param  {Number}   duration 动画执行时间\n   * @param  {String}   easing   动画缓动效果\n   * @param  {Function} callback 动画执行后的回调\n   * @param  {Number}   delay    动画延迟时间\n   */\n  animate: function animate(toProps, duration, easing, callback, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n\n    var self = this;\n    self.set('animating', true);\n    var timeline = self.get('timeline');\n\n    if (!timeline) {\n      timeline = self.get('canvas').get('timeline');\n      self.setSilent('timeline', timeline);\n    }\n\n    var animators = self.get('animators') || []; // 初始化tick\n\n    if (!timeline._timer) {\n      timeline.initTimer();\n    }\n\n    if (Util.isNumber(callback)) {\n      delay = callback;\n      callback = null;\n    }\n\n    if (Util.isFunction(easing)) {\n      callback = easing;\n      easing = 'easeLinear';\n    } else {\n      easing = easing ? easing : 'easeLinear';\n    }\n\n    var formatProps = getFormatProps(toProps, self); // 记录动画属性\n\n    var animator = {\n      fromAttrs: getFromAttrs(formatProps, self),\n      toAttrs: formatProps.attrs,\n      fromMatrix: Util.clone(self.getMatrix()),\n      toMatrix: formatProps.matrix,\n      duration: duration,\n      easing: easing,\n      callback: callback,\n      delay: delay,\n      startTime: timeline.getTime(),\n      id: Util.uniqueId()\n    }; // 如果动画队列中已经有这个图形了\n\n    if (animators.length > 0) {\n      // 先检查是否需要合并属性。若有相同的动画，将该属性从前一个动画中删除,直接用后一个动画中\n      animators = checkExistedAttrs(animators, animator);\n    } else {\n      // 否则将图形添加到队列\n      timeline.addAnimator(self);\n    }\n\n    animators.push(animator);\n    self.setSilent('animators', animators);\n    self.setSilent('pause', {\n      isPaused: false\n    });\n  },\n  stopAnimate: function stopAnimate() {\n    var _this = this;\n\n    var animators = this.get('animators'); // 将动画执行到最后一帧，执行回调\n\n    Util.each(animators, function (animator) {\n      _this.attr(animator.toAttrs);\n\n      if (animator.toMatrix) {\n        _this.attr('matrix', animator.toMatrix);\n      }\n\n      if (animator.callback) {\n        animator.callback();\n      }\n    });\n    this.setSilent('animating', false);\n    this.setSilent('animators', []);\n  },\n  pauseAnimate: function pauseAnimate() {\n    var self = this;\n    var timeline = self.get('timeline'); // 记录下是在什么时候暂停的\n\n    self.setSilent('pause', {\n      isPaused: true,\n      pauseTime: timeline.getTime()\n    });\n    return self;\n  },\n  resumeAnimate: function resumeAnimate() {\n    var self = this;\n    var timeline = self.get('timeline');\n    var current = timeline.getTime();\n    var animators = self.get('animators');\n    var pauseTime = self.get('pause').pauseTime; // 之后更新属性需要计算动画已经执行的时长，如果暂停了，就把初始时间调后\n\n    Util.each(animators, function (animator) {\n      animator.startTime = animator.startTime + (current - pauseTime);\n      animator._paused = false;\n      animator._pauseTime = null;\n    });\n    self.setSilent('pause', {\n      isPaused: false\n    });\n    self.setSilent('animators', animators);\n    return self;\n  }\n};"]}]}