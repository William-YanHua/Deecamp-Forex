{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\tooltip\\crosshair.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\tooltip\\crosshair.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Component = require('../component');\r\nvar Util = require('../util');\r\nvar Crosshair = function (_Component) {\r\n    _inheritsLoose(Crosshair, _Component);\r\n    var _proto = Crosshair.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Component.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            type: null,\r\n            plot: null,\r\n            plotRange: null,\r\n            rectStyle: {\r\n                fill: '#CCD6EC',\r\n                opacity: 0.3\r\n            },\r\n            lineStyle: {\r\n                stroke: 'rgba(0, 0, 0, 0.25)',\r\n                lineWidth: 1\r\n            },\r\n            isTransposed: false\r\n        });\r\n    };\r\n    function Crosshair(cfg) {\r\n        var _this;\r\n        _this = _Component.call(this, cfg) || this;\r\n        _this._init_();\r\n        _this.render();\r\n        return _this;\r\n    }\r\n    _proto._init_ = function _init_() {\r\n        var self = this;\r\n        var plot = self.get('plot');\r\n        var group;\r\n        if (self.type === 'rect') {\r\n            group = plot.addGroup({\r\n                zIndex: 0\r\n            });\r\n        }\r\n        else {\r\n            group = plot.addGroup();\r\n        }\r\n        this.set('container', group);\r\n    };\r\n    _proto._addLineShape = function _addLineShape(attrs, type) {\r\n        var container = this.get('container');\r\n        var shape = container.addShape('line', {\r\n            capture: false,\r\n            attrs: attrs\r\n        });\r\n        this.set('crossLineShape' + type, shape);\r\n        return shape;\r\n    };\r\n    _proto._renderHorizontalLine = function _renderHorizontalLine(canvas, plotRange) {\r\n        var style = this.get('lineStyle');\r\n        var attrs = Util.mix({\r\n            x1: plotRange ? plotRange.bl.x : canvas.get('width'),\r\n            y1: 0,\r\n            x2: plotRange ? plotRange.br.x : 0,\r\n            y2: 0\r\n        }, style);\r\n        this._addLineShape(attrs, 'X');\r\n    };\r\n    _proto._renderVerticalLine = function _renderVerticalLine(canvas, plotRange) {\r\n        var style = this.get('lineStyle');\r\n        var attrs = Util.mix({\r\n            x1: 0,\r\n            y1: plotRange ? plotRange.bl.y : canvas.get('height'),\r\n            x2: 0,\r\n            y2: plotRange ? plotRange.tl.y : 0\r\n        }, style);\r\n        this._addLineShape(attrs, 'Y');\r\n    };\r\n    _proto._renderBackground = function _renderBackground(canvas, plotRange) {\r\n        var style = this.get('rectStyle');\r\n        var container = this.get('container');\r\n        var attrs = Util.mix({\r\n            x: plotRange ? plotRange.tl.x : 0,\r\n            y: plotRange ? plotRange.tl.y : canvas.get('height'),\r\n            width: plotRange ? plotRange.br.x - plotRange.bl.x : canvas.get('width'),\r\n            height: plotRange ? Math.abs(plotRange.tl.y - plotRange.bl.y) : canvas.get('height')\r\n        }, style);\r\n        var shape = container.addShape('rect', {\r\n            attrs: attrs,\r\n            capture: false\r\n        });\r\n        this.set('crosshairsRectShape', shape);\r\n        return shape;\r\n    };\r\n    _proto._updateRectShape = function _updateRectShape(items) {\r\n        var offset;\r\n        var crosshairsRectShape = this.get('crosshairsRectShape');\r\n        var isTransposed = this.get('isTransposed');\r\n        var firstItem = items[0];\r\n        var lastItem = items[items.length - 1];\r\n        var dim = isTransposed ? 'y' : 'x';\r\n        var attr = isTransposed ? 'height' : 'width';\r\n        var startDim = firstItem[dim];\r\n        if (items.length > 1 && firstItem[dim] > lastItem[dim]) {\r\n            startDim = lastItem[dim];\r\n        }\r\n        if (this.get('width')) {\r\n            crosshairsRectShape.attr(dim, startDim - this.get('crosshairs').width / 2);\r\n            crosshairsRectShape.attr(attr, this.get('width'));\r\n        }\r\n        else {\r\n            if (Util.isArray(firstItem.point[dim]) && !firstItem.size) {\r\n                var width = firstItem.point[dim][1] - firstItem.point[dim][0];\r\n                crosshairsRectShape.attr(dim, firstItem.point[dim][0]);\r\n                crosshairsRectShape.attr(attr, width);\r\n            }\r\n            else {\r\n                offset = 3 * firstItem.size / 4;\r\n                crosshairsRectShape.attr(dim, startDim - offset);\r\n                if (items.length === 1) {\r\n                    crosshairsRectShape.attr(attr, 3 * firstItem.size / 2);\r\n                }\r\n                else {\r\n                    crosshairsRectShape.attr(attr, Math.abs(lastItem[dim] - firstItem[dim]) + 2 * offset);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    _proto.render = function render() {\r\n        var canvas = this.get('canvas');\r\n        var plotRange = this.get('plotRange');\r\n        var isTransposed = this.get('isTransposed');\r\n        this.clear();\r\n        switch (this.get('type')) {\r\n            case 'x':\r\n                this._renderHorizontalLine(canvas, plotRange);\r\n                break;\r\n            case 'y':\r\n                this._renderVerticalLine(canvas, plotRange);\r\n                break;\r\n            case 'cross':\r\n                this._renderHorizontalLine(canvas, plotRange);\r\n                this._renderVerticalLine(canvas, plotRange);\r\n                break;\r\n            case 'rect':\r\n                this._renderBackground(canvas, plotRange);\r\n                break;\r\n            default:\r\n                isTransposed ? this._renderHorizontalLine(canvas, plotRange) : this._renderVerticalLine(canvas, plotRange);\r\n        }\r\n    };\r\n    _proto.show = function show() {\r\n        var container = this.get('container');\r\n        _Component.prototype.show.call(this);\r\n        container.show();\r\n    };\r\n    _proto.hide = function hide() {\r\n        var container = this.get('container');\r\n        _Component.prototype.hide.call(this);\r\n        container.hide();\r\n    };\r\n    _proto.clear = function clear() {\r\n        var container = this.get('container');\r\n        this.set('crossLineShapeX', null);\r\n        this.set('crossLineShapeY', null);\r\n        this.set('crosshairsRectShape', null);\r\n        _Component.prototype.clear.call(this);\r\n        container.clear();\r\n    };\r\n    _proto.destroy = function destroy() {\r\n        var container = this.get('container');\r\n        _Component.prototype.destroy.call(this);\r\n        container.remove();\r\n    };\r\n    _proto.setPosition = function setPosition(x, y, items) {\r\n        var crossLineShapeX = this.get('crossLineShapeX');\r\n        var crossLineShapeY = this.get('crossLineShapeY');\r\n        var crosshairsRectShape = this.get('crosshairsRectShape');\r\n        if (crossLineShapeY) {\r\n            crossLineShapeY.move(x, 0);\r\n        }\r\n        if (crossLineShapeX) {\r\n            crossLineShapeX.move(0, y);\r\n        }\r\n        if (crosshairsRectShape) {\r\n            this._updateRectShape(items);\r\n        }\r\n    };\r\n    return Crosshair;\r\n}(Component);\r\nmodule.exports = Crosshair;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\tooltip\\crosshair.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\tooltip\\crosshair.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Component = require('../component');\n\nvar Util = require('../util');\n\nvar Crosshair =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Crosshair, _Component);\n\n  var _proto = Crosshair.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Component.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n        * crosshair的类型\n        * @type {String}\n        */\n      type: null,\n\n      /**\n       * 画在哪层视图\n       * @type {G-Element}\n       */\n      plot: null,\n\n      /**\n       * x轴上，移动到位置的偏移量\n       * @type {Number}\n       */\n      plotRange: null,\n\n      /**\n       * 默认rect crosshair样式\n       * @type {Object}\n       */\n      rectStyle: {\n        fill: '#CCD6EC',\n        opacity: 0.3\n      },\n\n      /**\n        * 默认line crosshair样式\n        * @type {Object}\n        */\n      lineStyle: {\n        stroke: 'rgba(0, 0, 0, 0.25)',\n        lineWidth: 1\n      },\n      isTransposed: false\n    });\n  };\n\n  function Crosshair(cfg) {\n    var _this;\n\n    _this = _Component.call(this, cfg) || this;\n\n    _this._init_();\n\n    _this.render();\n\n    return _this;\n  }\n\n  _proto._init_ = function _init_() {\n    var self = this;\n    var plot = self.get('plot');\n    var group;\n\n    if (self.type === 'rect') {\n      group = plot.addGroup({\n        zIndex: 0\n      });\n    } else {\n      group = plot.addGroup();\n    }\n\n    this.set('container', group);\n  };\n\n  _proto._addLineShape = function _addLineShape(attrs, type) {\n    var container = this.get('container');\n    var shape = container.addShape('line', {\n      capture: false,\n      attrs: attrs\n    }); // shape.hide();\n\n    this.set('crossLineShape' + type, shape);\n    return shape;\n  };\n\n  _proto._renderHorizontalLine = function _renderHorizontalLine(canvas, plotRange) {\n    var style = this.get('lineStyle');\n    var attrs = Util.mix({\n      x1: plotRange ? plotRange.bl.x : canvas.get('width'),\n      y1: 0,\n      x2: plotRange ? plotRange.br.x : 0,\n      y2: 0\n    }, style);\n\n    this._addLineShape(attrs, 'X');\n  };\n\n  _proto._renderVerticalLine = function _renderVerticalLine(canvas, plotRange) {\n    var style = this.get('lineStyle');\n    var attrs = Util.mix({\n      x1: 0,\n      y1: plotRange ? plotRange.bl.y : canvas.get('height'),\n      x2: 0,\n      y2: plotRange ? plotRange.tl.y : 0\n    }, style);\n\n    this._addLineShape(attrs, 'Y');\n  };\n\n  _proto._renderBackground = function _renderBackground(canvas, plotRange) {\n    var style = this.get('rectStyle');\n    var container = this.get('container');\n    var attrs = Util.mix({\n      x: plotRange ? plotRange.tl.x : 0,\n      y: plotRange ? plotRange.tl.y : canvas.get('height'),\n      width: plotRange ? plotRange.br.x - plotRange.bl.x : canvas.get('width'),\n      height: plotRange ? Math.abs(plotRange.tl.y - plotRange.bl.y) : canvas.get('height')\n    }, style);\n    var shape = container.addShape('rect', {\n      attrs: attrs,\n      capture: false\n    }); // shape.hide();\n\n    this.set('crosshairsRectShape', shape);\n    return shape;\n  };\n\n  _proto._updateRectShape = function _updateRectShape(items) {\n    var offset;\n    var crosshairsRectShape = this.get('crosshairsRectShape');\n    var isTransposed = this.get('isTransposed');\n    var firstItem = items[0];\n    var lastItem = items[items.length - 1];\n    var dim = isTransposed ? 'y' : 'x';\n    var attr = isTransposed ? 'height' : 'width';\n    var startDim = firstItem[dim];\n\n    if (items.length > 1 && firstItem[dim] > lastItem[dim]) {\n      startDim = lastItem[dim];\n    }\n\n    if (this.get('width')) {\n      // 用户定义了 width\n      crosshairsRectShape.attr(dim, startDim - this.get('crosshairs').width / 2);\n      crosshairsRectShape.attr(attr, this.get('width'));\n    } else {\n      if (Util.isArray(firstItem.point[dim]) && !firstItem.size) {\n        // 直方图\n        var width = firstItem.point[dim][1] - firstItem.point[dim][0];\n        crosshairsRectShape.attr(dim, firstItem.point[dim][0]);\n        crosshairsRectShape.attr(attr, width);\n      } else {\n        offset = 3 * firstItem.size / 4;\n        crosshairsRectShape.attr(dim, startDim - offset);\n\n        if (items.length === 1) {\n          crosshairsRectShape.attr(attr, 3 * firstItem.size / 2);\n        } else {\n          crosshairsRectShape.attr(attr, Math.abs(lastItem[dim] - firstItem[dim]) + 2 * offset);\n        }\n      }\n    }\n  };\n\n  _proto.render = function render() {\n    var canvas = this.get('canvas');\n    var plotRange = this.get('plotRange');\n    var isTransposed = this.get('isTransposed');\n    this.clear();\n\n    switch (this.get('type')) {\n      case 'x':\n        this._renderHorizontalLine(canvas, plotRange);\n\n        break;\n\n      case 'y':\n        this._renderVerticalLine(canvas, plotRange);\n\n        break;\n\n      case 'cross':\n        this._renderHorizontalLine(canvas, plotRange);\n\n        this._renderVerticalLine(canvas, plotRange);\n\n        break;\n\n      case 'rect':\n        this._renderBackground(canvas, plotRange);\n\n        break;\n\n      default:\n        isTransposed ? this._renderHorizontalLine(canvas, plotRange) : this._renderVerticalLine(canvas, plotRange);\n    }\n  };\n\n  _proto.show = function show() {\n    var container = this.get('container');\n\n    _Component.prototype.show.call(this);\n\n    container.show();\n  };\n\n  _proto.hide = function hide() {\n    var container = this.get('container');\n\n    _Component.prototype.hide.call(this);\n\n    container.hide();\n  };\n\n  _proto.clear = function clear() {\n    var container = this.get('container');\n    this.set('crossLineShapeX', null);\n    this.set('crossLineShapeY', null);\n    this.set('crosshairsRectShape', null);\n\n    _Component.prototype.clear.call(this);\n\n    container.clear();\n  };\n\n  _proto.destroy = function destroy() {\n    var container = this.get('container');\n\n    _Component.prototype.destroy.call(this);\n\n    container.remove();\n  };\n\n  _proto.setPosition = function setPosition(x, y, items) {\n    var crossLineShapeX = this.get('crossLineShapeX');\n    var crossLineShapeY = this.get('crossLineShapeY');\n    var crosshairsRectShape = this.get('crosshairsRectShape');\n\n    if (crossLineShapeY) {\n      // 第一次进入时，画布需要单独绘制，所以需要先设定corss的位置\n      crossLineShapeY.move(x, 0);\n    }\n\n    if (crossLineShapeX) {\n      crossLineShapeX.move(0, y);\n    }\n\n    if (crosshairsRectShape) {\n      this._updateRectShape(items);\n    }\n  };\n\n  return Crosshair;\n}(Component);\n\nmodule.exports = Crosshair;"]}]}