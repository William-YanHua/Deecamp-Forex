{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/data-set/src/transform/diagram/dagre.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/data-set/src/transform/diagram/dagre.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var assign = require('@antv/util/lib/mix');\nvar dagre = require('dagre');\nvar registerTransform = require('../../data-set').registerTransform;\nvar DEFAULT_OPTIONS = {\n    rankdir: 'TB',\n    align: 'TB',\n    nodesep: 50,\n    edgesep: 10,\n    ranksep: 50,\n    source: function (edge) { return edge.source; },\n    target: function (edge) { return edge.target; }\n};\nfunction transform(dv, options) {\n    options = assign({}, DEFAULT_OPTIONS, options);\n    var g = new dagre.graphlib.Graph();\n    g.setGraph({});\n    g.setDefaultEdgeLabel(function () {\n        return {};\n    });\n    dv.nodes.forEach(function (node) {\n        var nodeId = options.nodeId ? options.nodeId(node) : node.id;\n        if (!node.height && !node.width) {\n            node.height = node.width = options.edgesep;\n        }\n        g.setNode(nodeId, node);\n    });\n    dv.edges.forEach(function (edge) {\n        g.setEdge(options.source(edge), options.target(edge));\n    });\n    dagre.layout(g);\n    var nodes = [];\n    var edges = [];\n    g.nodes().forEach(function (node) {\n        var n = g.node(node);\n        var x = n.x, y = n.y, height = n.height, width = n.width;\n        n.x = [x - width / 2, x + width / 2, x + width / 2, x - width / 2];\n        n.y = [y + height / 2, y + height / 2, y - height / 2, y - height / 2];\n        nodes.push(n);\n    });\n    g.edges().forEach(function (edge) {\n        var points = g.edge(edge).points;\n        var e = {};\n        e.x = points.map(function (p) { return p.x; });\n        e.y = points.map(function (p) { return p.y; });\n        edges.push(e);\n    });\n    dv.nodes = nodes;\n    dv.edges = edges;\n}\nregisterTransform('diagram.dagre', transform);\nregisterTransform('dagre', transform);\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/data-set/src/transform/diagram/dagre.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/data-set/src/transform/diagram/dagre.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * for DAG\n * graph data required (nodes, edges)\n */\nconst assign = require('@antv/util/lib/mix');\nconst dagre = require('dagre');\nconst {\n  registerTransform\n} = require('../../data-set');\n\nconst DEFAULT_OPTIONS = {\n  // nodeId: node => node.index,\n  rankdir: 'TB',\n  align: 'TB',\n  nodesep: 50,\n  edgesep: 10,\n  ranksep: 50,\n  source: edge => edge.source,\n  target: edge => edge.target\n};\n\nfunction transform(dv, options) {\n  options = assign({}, DEFAULT_OPTIONS, options);\n  const g = new dagre.graphlib.Graph();\n  // Set an object for the graph label\n  g.setGraph({});\n  // Default to assigning a new object as a label for each new edge.\n  g.setDefaultEdgeLabel(function() {\n    return {};\n  });\n\n  dv.nodes.forEach(node => {\n    const nodeId = options.nodeId ? options.nodeId(node) : node.id;\n    if (!node.height && !node.width) {\n      node.height = node.width = options.edgesep;\n    }\n    g.setNode(nodeId, node);\n  });\n  dv.edges.forEach(edge => {\n    g.setEdge(options.source(edge), options.target(edge));\n  });\n  dagre.layout(g);\n\n  const nodes = [];\n  const edges = [];\n\n  g.nodes().forEach(node => {\n    const n = g.node(node);\n    const { x, y, height, width } = n;\n    /* points\n     * 3---2\n     * |   |\n     * 0---1\n     */\n    n.x = [ x - width / 2, x + width / 2, x + width / 2, x - width / 2 ];\n    n.y = [ y + height / 2, y + height / 2, y - height / 2, y - height / 2 ];\n    nodes.push(n);\n  });\n\n  g.edges().forEach(edge => {\n    const { points } = g.edge(edge);\n    const e = {};\n    e.x = points.map(p => p.x);\n    e.y = points.map(p => p.y);\n    edges.push(e);\n  });\n\n  dv.nodes = nodes;\n  dv.edges = edges;\n}\n\nregisterTransform('diagram.dagre', transform);\nregisterTransform('dagre', transform);\n"]}]}