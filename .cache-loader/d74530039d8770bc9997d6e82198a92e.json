{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/label/utils/position-adjust.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/label/utils/position-adjust.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Greedy = require('./greedy');\nfunction adjustLabelPosition(label, x, y, index) {\n    var bbox = label.getBBox();\n    var width = bbox.width;\n    var height = bbox.height;\n    var attrs = {\n        x: x,\n        y: y,\n        textAlign: 'center'\n    };\n    switch (index) {\n        case 0:\n            attrs.y -= height / 2;\n            attrs.textAlign = 'left';\n            break;\n        case 1:\n            attrs.y -= height / 2;\n            attrs.textAlign = 'right';\n            break;\n        case 2:\n            attrs.y += height / 2;\n            attrs.textAlign = 'right';\n            break;\n        case 3:\n            attrs.y += height / 2;\n            attrs.textAlign = 'left';\n            break;\n        case 5:\n            attrs.y -= height / 2;\n            break;\n        case 6:\n            attrs.y += height / 2;\n            break;\n        case 7:\n            attrs.x += width / 2;\n            attrs.textAlign = 'left';\n            break;\n        case 8:\n            attrs.x -= width / 2;\n            attrs.textAlign = 'right';\n            break;\n        default:\n            break;\n    }\n    label.attr(attrs);\n    return label.getBBox();\n}\nmodule.exports = function (labels) {\n    var greedy = new Greedy();\n    var toBeRemoved = [];\n    var bbox, label, x, y, canFill;\n    for (var i = 0; i < labels.length; i++) {\n        label = labels[i];\n        x = label.attr('x');\n        y = label.attr('y');\n        canFill = false;\n        for (var _i = 0; _i < 8; _i++) {\n            bbox = adjustLabelPosition(label, x, y, _i);\n            if (greedy.hasGap(bbox)) {\n                greedy.fillGap(bbox);\n                canFill = true;\n                break;\n            }\n        }\n        if (!canFill) {\n            toBeRemoved.push(label);\n        }\n    }\n    for (var _i2 = 0; _i2 < toBeRemoved.length; _i2++) {\n        toBeRemoved[_i2].remove();\n    }\n    return canFill;\n};\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/label/utils/position-adjust.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/label/utils/position-adjust.js"],"names":[],"mappings":"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","sourcesContent":["var Greedy = require('./greedy');\n/*\n   *  根据如下规则尝试放置label\n   *                5\n   *        ------------------\n   *        |    1   |   0   |\n   *    8   —————————4————————   7\n   *        |    2   |   3   |\n   *        ——————————————————\n   *                 6\n   */\n\n\nfunction adjustLabelPosition(label, x, y, index) {\n  var bbox = label.getBBox();\n  var width = bbox.width;\n  var height = bbox.height;\n  var attrs = {\n    x: x,\n    y: y,\n    textAlign: 'center'\n  };\n\n  switch (index) {\n    case 0:\n      attrs.y -= height / 2;\n      attrs.textAlign = 'left';\n      break;\n\n    case 1:\n      attrs.y -= height / 2;\n      attrs.textAlign = 'right';\n      break;\n\n    case 2:\n      attrs.y += height / 2;\n      attrs.textAlign = 'right';\n      break;\n\n    case 3:\n      attrs.y += height / 2;\n      attrs.textAlign = 'left';\n      break;\n\n    case 5:\n      attrs.y -= height / 2;\n      break;\n\n    case 6:\n      attrs.y += height / 2;\n      break;\n\n    case 7:\n      attrs.x += width / 2;\n      attrs.textAlign = 'left';\n      break;\n\n    case 8:\n      attrs.x -= width / 2;\n      attrs.textAlign = 'right';\n      break;\n\n    default:\n      break;\n  }\n\n  label.attr(attrs);\n  return label.getBBox();\n}\n\nmodule.exports = function (labels) {\n  var greedy = new Greedy();\n  var toBeRemoved = [];\n  var bbox, label, x, y, canFill;\n\n  for (var i = 0; i < labels.length; i++) {\n    label = labels[i];\n    x = label.attr('x');\n    y = label.attr('y');\n    canFill = false;\n\n    for (var _i = 0; _i < 8; _i++) {\n      bbox = adjustLabelPosition(label, x, y, _i);\n\n      if (greedy.hasGap(bbox)) {\n        greedy.fillGap(bbox);\n        canFill = true;\n        break;\n      }\n    }\n\n    if (!canFill) {\n      toBeRemoved.push(label);\n    }\n  }\n\n  for (var _i2 = 0; _i2 < toBeRemoved.length; _i2++) {\n    toBeRemoved[_i2].remove();\n  }\n\n  return canFill;\n};"]}]}