{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/point-at-length/index.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/point-at-length/index.js","mtime":1485871471000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var parse = require('parse-svg-path');\nvar isarray = require('isarray');\nvar abs = require('abs-svg-path');\nmodule.exports = Points;\nfunction Points(path) {\n    if (!(this instanceof Points))\n        return new Points(path);\n    this._path = isarray(path) ? path : parse(path);\n    this._path = abs(this._path);\n    this._path = zToL(this._path);\n}\nPoints.prototype.at = function (pos, opts) {\n    return this._walk(pos, opts).pos;\n};\nPoints.prototype.length = function () {\n    return this._walk(null).length;\n};\nPoints.prototype._walk = function (pos, opts) {\n    var cur = [0, 0];\n    var prev = [0, 0, 0];\n    var len = 0;\n    var fudge = 1.045;\n    if (typeof pos === 'number')\n        pos *= fudge;\n    for (var i = 0; i < this._path.length; i++) {\n        var p = this._path[i];\n        if (p[0] === 'M') {\n            cur[0] = p[1];\n            cur[1] = p[2];\n            if (pos === 0) {\n                return { length: len, pos: cur };\n            }\n        }\n        else if (p[0] === 'C') {\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n            var n = 100;\n            for (var j = 0; j <= n; j++) {\n                var t = j / n;\n                var x = xof_C(p, t);\n                var y = yof_C(p, t);\n                len += dist(cur[0], cur[1], x, y);\n                cur[0] = x;\n                cur[1] = y;\n                if (typeof pos === 'number' && len >= pos) {\n                    var dv = (len - pos) / (len - prev[2]);\n                    var npos = [\n                        cur[0] * (1 - dv) + prev[0] * dv,\n                        cur[1] * (1 - dv) + prev[1] * dv\n                    ];\n                    return { length: len, pos: npos };\n                }\n                prev[0] = cur[0];\n                prev[1] = cur[1];\n                prev[2] = len;\n            }\n        }\n        else if (p[0] === 'Q') {\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n            var n = 100;\n            for (var j = 0; j <= n; j++) {\n                var t = j / n;\n                var x = xof_Q(p, t);\n                var y = yof_Q(p, t);\n                len += dist(cur[0], cur[1], x, y);\n                cur[0] = x;\n                cur[1] = y;\n                if (typeof pos === 'number' && len >= pos) {\n                    var dv = (len - pos) / (len - prev[2]);\n                    var npos = [\n                        cur[0] * (1 - dv) + prev[0] * dv,\n                        cur[1] * (1 - dv) + prev[1] * dv\n                    ];\n                    return { length: len, pos: npos };\n                }\n                prev[0] = cur[0];\n                prev[1] = cur[1];\n                prev[2] = len;\n            }\n        }\n        else if (p[0] === 'L') {\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n            len += dist(cur[0], cur[1], p[1], p[2]);\n            cur[0] = p[1];\n            cur[1] = p[2];\n            if (typeof pos === 'number' && len >= pos) {\n                var dv = (len - pos) / (len - prev[2]);\n                var npos = [\n                    cur[0] * (1 - dv) + prev[0] * dv,\n                    cur[1] * (1 - dv) + prev[1] * dv\n                ];\n                return { length: len, pos: npos };\n            }\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n        }\n    }\n    return { length: len / fudge, pos: cur };\n    function xof_C(p, t) {\n        return Math.pow((1 - t), 3) * cur[0]\n            + 3 * Math.pow((1 - t), 2) * t * p[1]\n            + 3 * (1 - t) * Math.pow(t, 2) * p[3]\n            + Math.pow(t, 3) * p[5];\n    }\n    function yof_C(p, t) {\n        return Math.pow((1 - t), 3) * cur[1]\n            + 3 * Math.pow((1 - t), 2) * t * p[2]\n            + 3 * (1 - t) * Math.pow(t, 2) * p[4]\n            + Math.pow(t, 3) * p[6];\n    }\n    function xof_Q(p, t) {\n        return Math.pow((1 - t), 2) * cur[0]\n            + 2 * (1 - t) * t * p[1]\n            + Math.pow(t, 2) * p[3];\n    }\n    function yof_Q(p, t) {\n        return Math.pow((1 - t), 2) * cur[1]\n            + 2 * (1 - t) * t * p[2]\n            + Math.pow(t, 2) * p[4];\n    }\n};\nfunction dist(ax, ay, bx, by) {\n    var x = ax - bx;\n    var y = ay - by;\n    return Math.sqrt(x * x + y * y);\n}\nfunction zToL(path) {\n    var ret = [];\n    var startPoint = ['L', 0, 0];\n    for (var i = 0, len = path.length; i < len; i++) {\n        var pt = path[i];\n        switch (pt[0]) {\n            case 'M':\n                startPoint = ['L', pt[1], pt[2]];\n                ret.push(pt);\n                break;\n            case 'Z':\n                ret.push(startPoint);\n                break;\n            default:\n                ret.push(pt);\n        }\n    }\n    return ret;\n}\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/point-at-length/index.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/point-at-length/index.js"],"names":[],"mappings":"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","sourcesContent":["var parse = require('parse-svg-path');\nvar isarray = require('isarray');\nvar abs = require('abs-svg-path');\n\nmodule.exports = Points;\n\nfunction Points (path) {\n    if (!(this instanceof Points)) return new Points(path);\n    this._path = isarray(path) ? path : parse(path);\n    this._path = abs(this._path);\n    this._path = zToL(this._path);\n}\n\nPoints.prototype.at = function (pos, opts) {\n    return this._walk(pos, opts).pos;\n};\n\nPoints.prototype.length = function () {\n    return this._walk(null).length;\n};\n\nPoints.prototype._walk = function (pos, opts) {\n    var cur = [ 0, 0 ];\n    var prev = [ 0, 0, 0 ];\n    var len = 0;\n    var fudge = 1.045;\n    if (typeof pos === 'number') pos *= fudge;\n    \n    for (var i = 0; i < this._path.length; i++) {\n        var p = this._path[i];\n        if (p[0] === 'M') {\n            cur[0] = p[1];\n            cur[1] = p[2];\n            if (pos === 0) {\n                return { length: len, pos: cur };\n            }\n        }\n        else if (p[0] === 'C') {\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n            \n            var n = 100;\n            for (var j = 0; j <= n; j++) {\n                var t = j / n;\n                var x = xof_C(p, t);\n                var y = yof_C(p, t);\n                len += dist(cur[0], cur[1], x, y);\n                \n                cur[0] = x;\n                cur[1] = y;\n                \n                if (typeof pos === 'number' && len >= pos) {\n                    var dv = (len - pos) / (len - prev[2]);\n                    \n                    var npos = [\n                        cur[0] * (1 - dv) + prev[0] * dv,\n                        cur[1] * (1 - dv) + prev[1] * dv\n                    ];\n                    return { length: len, pos: npos };\n                }\n                prev[0] = cur[0];\n                prev[1] = cur[1];\n                prev[2] = len;\n            }\n        }\n        else if (p[0] === 'Q') {\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n            \n            var n = 100;\n            for (var j = 0; j <= n; j++) {\n                var t = j / n;\n                var x = xof_Q(p, t);\n                var y = yof_Q(p, t);\n                len += dist(cur[0], cur[1], x, y);\n                \n                cur[0] = x;\n                cur[1] = y;\n                \n                if (typeof pos === 'number' && len >= pos) {\n                    var dv = (len - pos) / (len - prev[2]);\n                    \n                    var npos = [\n                        cur[0] * (1 - dv) + prev[0] * dv,\n                        cur[1] * (1 - dv) + prev[1] * dv\n                    ];\n                    return { length: len, pos: npos };\n                }\n                prev[0] = cur[0];\n                prev[1] = cur[1];\n                prev[2] = len;\n            }\n        }\n        else if (p[0] === 'L') {\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n\n            len   += dist(cur[0], cur[1], p[1], p[2]);\n            cur[0] = p[1];\n            cur[1] = p[2];\n\n            if (typeof pos === 'number' && len >= pos) {\n                var dv = (len - pos) / (len - prev[2]);\n                var npos = [\n                    cur[0] * (1 - dv) + prev[0] * dv,\n                    cur[1] * (1 - dv) + prev[1] * dv\n                ];\n                return { length: len, pos: npos };\n            }\n            prev[0] = cur[0];\n            prev[1] = cur[1];\n            prev[2] = len;\n        }\n    }\n    return { length: len / fudge, pos: cur };\n    \n    function xof_C (p, t) {\n        return Math.pow((1-t), 3) * cur[0]\n            + 3 * Math.pow((1-t), 2) * t * p[1]\n            + 3 * (1-t) * Math.pow(t, 2) * p[3]\n            + Math.pow(t, 3) * p[5]\n        ;\n    }\n    function yof_C (p, t) {\n        return Math.pow((1-t), 3) * cur[1]\n            + 3 * Math.pow((1-t), 2) * t * p[2]\n            + 3 * (1-t) * Math.pow(t, 2) * p[4]\n            + Math.pow(t, 3) * p[6]\n        ;\n    }\n\n    function xof_Q (p, t) {\n        return Math.pow((1-t), 2) * cur[0]\n            + 2 * (1-t) * t * p[1]\n            + Math.pow(t, 2) * p[3]\n        ;\n    }\n    function yof_Q (p, t) {\n        return Math.pow((1-t), 2) * cur[1]\n            + 2 * (1-t) * t * p[2]\n            + Math.pow(t, 2) * p[4]\n        ;\n    }\n};\n\nfunction dist (ax, ay, bx, by) {\n    var x = ax - bx;\n    var y = ay - by;\n    return Math.sqrt(x*x + y*y);\n}\n\n// Convert 'Z' segments to 'L' segments\nfunction zToL(path){\n    var ret = [];\n    var startPoint = ['L',0,0];\n\n    for(var i=0, len=path.length; i<len; i++){\n        var pt = path[i];\n        switch(pt[0]){\n            case 'M':\n                startPoint = ['L', pt[1], pt[2]];\n                ret.push(pt);\n                break;\n            case 'Z':\n                ret.push(startPoint);\n                break;\n            default: \n                ret.push(pt);\n        }\n    }\n    return ret;\n}\n"]}]}