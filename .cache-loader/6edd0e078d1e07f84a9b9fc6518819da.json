{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\cat-page-html.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\cat-page-html.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Util = require('../util');\r\nvar CatHtml = require('./cat-html');\r\nvar DomUtil = Util.DomUtil;\r\nvar LIST_CLASS = 'g2-legend-list';\r\nvar CONTAINER_CLASS = 'g2-legend';\r\nvar SLIP_CLASS = 'g2-slip';\r\nvar CARET_UP_CLASS = 'g2-caret-up';\r\nvar CARET_DOWN_CLASS = 'g2-caret-down';\r\nvar ENABLED_CARET_COLOR = 'rgba(0,0,0,0.65)';\r\nvar DISABLED_CARET_COLOR = 'rgba(0,0,0,0.25)';\r\nfunction findNodeByClass(node, className) {\r\n    return node.getElementsByClassName(className)[0];\r\n}\r\nvar CatPageHtml = function (_CatHtml) {\r\n    _inheritsLoose(CatPageHtml, _CatHtml);\r\n    function CatPageHtml() {\r\n        return _CatHtml.apply(this, arguments) || this;\r\n    }\r\n    var _proto = CatPageHtml.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _CatHtml.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            type: 'category-page-legend',\r\n            container: null,\r\n            caretStyle: {\r\n                fill: 'rgba(0,0,0,0.65)'\r\n            },\r\n            pageNumStyle: {\r\n                display: 'inline-block',\r\n                fontSize: '12px',\r\n                fontFamily: this.fontFamily,\r\n                cursor: 'default'\r\n            },\r\n            slipDomStyle: {\r\n                width: 'auto',\r\n                height: 'auto',\r\n                position: 'absolute'\r\n            },\r\n            slipTpl: '<div class=\"' + SLIP_CLASS + '\" >' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-up\" data-icon=\"left\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"></path>' + '</svg>' + '<p class=\"cur-pagenum\" style = \"display:inline-block;\">1</p>' + '<p class=\"next-pagenum\" style = \"display:inline-block;\">/2</p>' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-down\" data-icon=\"right\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z\"></path>' + '</svg>' + '</div>',\r\n            slipWidth: 65,\r\n            legendOverflow: 'unset'\r\n        });\r\n    };\r\n    _proto.render = function render() {\r\n        _CatHtml.prototype._renderHTML.call(this);\r\n        this._renderFlipPage();\r\n    };\r\n    _proto._renderFlipPage = function _renderFlipPage() {\r\n        var legendWrapper = document.getElementsByClassName(CONTAINER_CLASS)[0];\r\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\r\n        var position = this.get('position');\r\n        var layout = this.get('layout');\r\n        var itemDisplay = position === 'right' || position === 'left' || layout === 'vertical' ? 'block' : 'inline-block';\r\n        if (legendWrapper.scrollHeight > legendWrapper.offsetHeight) {\r\n            var slipTpl = this.get('slipTpl');\r\n            var slipDom = DomUtil.createDom(slipTpl);\r\n            var caretUpDom = findNodeByClass(slipDom, CARET_UP_CLASS);\r\n            var caretDownDom = findNodeByClass(slipDom, CARET_DOWN_CLASS);\r\n            DomUtil.modifyCSS(caretUpDom, this.get('caretStyle'));\r\n            DomUtil.modifyCSS(caretUpDom, {\r\n                fill: 'rgba(0,0,0,0.25)'\r\n            });\r\n            DomUtil.modifyCSS(caretDownDom, this.get('caretStyle'));\r\n            var curPageNumDom = findNodeByClass(slipDom, 'cur-pagenum');\r\n            var totalPageNumDom = findNodeByClass(slipDom, 'next-pagenum');\r\n            var pageNumStyle = this.get('pageNumStyle');\r\n            DomUtil.modifyCSS(curPageNumDom, Util.mix({}, pageNumStyle, {\r\n                paddingLeft: '10px'\r\n            }));\r\n            DomUtil.modifyCSS(totalPageNumDom, Util.mix({}, pageNumStyle, {\r\n                opacity: 0.3,\r\n                paddingRight: '10px'\r\n            }));\r\n            DomUtil.modifyCSS(slipDom, Util.mix({}, this.get('slipDomStyle'), {\r\n                top: legendWrapper.offsetHeight + 'px'\r\n            }));\r\n            legendWrapper.style.overflow = this.get('legendOverflow');\r\n            legendWrapper.appendChild(slipDom);\r\n            var li = itemListDom.childNodes;\r\n            var curHeight = 0;\r\n            var pages = 1;\r\n            var blockLi = [];\r\n            for (var i = 0; i < li.length; i++) {\r\n                li[i].style.display = itemDisplay;\r\n                curHeight = li[i].offsetTop + li[i].offsetHeight;\r\n                if (curHeight >= legendWrapper.offsetHeight) {\r\n                    pages++;\r\n                    blockLi.forEach(function (bl) {\r\n                        bl.style.display = 'none';\r\n                    });\r\n                    blockLi = [];\r\n                }\r\n                blockLi.push(li[i]);\r\n            }\r\n            totalPageNumDom.innerText = '/' + pages;\r\n            li.forEach(function (l) {\r\n                l.style.display = itemDisplay;\r\n                curHeight = l.offsetTop + l.offsetHeight;\r\n                if (curHeight > legendWrapper.offsetHeight) {\r\n                    l.style.display = 'none';\r\n                }\r\n            });\r\n            caretUpDom.addEventListener('click', function () {\r\n                if (li[0].style.display === itemDisplay)\r\n                    return;\r\n                var firstDisplayItemIdx = -1;\r\n                li.forEach(function (l, i) {\r\n                    if (l.style.display === itemDisplay) {\r\n                        firstDisplayItemIdx = firstDisplayItemIdx === -1 ? i : firstDisplayItemIdx;\r\n                        l.style.display = 'none';\r\n                    }\r\n                });\r\n                for (var _i = firstDisplayItemIdx - 1; _i >= 0; _i--) {\r\n                    li[_i].style.display = itemDisplay;\r\n                    curHeight = li[firstDisplayItemIdx - 1].offsetTop + li[firstDisplayItemIdx - 1].offsetHeight;\r\n                    li[_i].style.display = 'none';\r\n                    if (curHeight < legendWrapper.offsetHeight) {\r\n                        li[_i].style.display = itemDisplay;\r\n                    }\r\n                    else\r\n                        break;\r\n                }\r\n                var currentPage = Number.parseInt(curPageNumDom.innerText, 10) - 1;\r\n                if (currentPage === 1) {\r\n                    caretUpDom.style.fill = DISABLED_CARET_COLOR;\r\n                }\r\n                else {\r\n                    caretUpDom.style.fill = ENABLED_CARET_COLOR;\r\n                }\r\n                caretDownDom.style.fill = ENABLED_CARET_COLOR;\r\n                curPageNumDom.innerText = currentPage;\r\n            });\r\n            caretDownDom.addEventListener('click', function () {\r\n                if (li[li.length - 1].style.display === itemDisplay)\r\n                    return;\r\n                var lastDisplayItemIdx = -1;\r\n                li.forEach(function (l, i) {\r\n                    if (l.style.display === itemDisplay) {\r\n                        lastDisplayItemIdx = i;\r\n                        l.style.display = 'none';\r\n                    }\r\n                });\r\n                for (var _i2 = lastDisplayItemIdx + 1; _i2 < li.length; _i2++) {\r\n                    li[_i2].style.display = itemDisplay;\r\n                    curHeight = li[_i2].offsetTop + li[_i2].offsetHeight;\r\n                    li[_i2].style.display = 'none';\r\n                    if (curHeight < legendWrapper.offsetHeight)\r\n                        li[_i2].style.display = itemDisplay;\r\n                    else\r\n                        break;\r\n                }\r\n                var currentPage = Number.parseInt(curPageNumDom.innerText, 10) + 1;\r\n                if (currentPage === itemDisplay) {\r\n                    caretDownDom.style.fill = DISABLED_CARET_COLOR;\r\n                }\r\n                else {\r\n                    caretDownDom.style.fill = ENABLED_CARET_COLOR;\r\n                }\r\n                caretUpDom.style.fill = ENABLED_CARET_COLOR;\r\n                curPageNumDom.innerText = currentPage;\r\n            });\r\n            this.set('slipDom', slipDom);\r\n        }\r\n    };\r\n    _proto.destroy = function destroy() {\r\n        _CatHtml.prototype.destroy.call(this);\r\n        var slipDom = this.get('slipDom');\r\n        if (slipDom && slipDom.parentNode) {\r\n            slipDom.parentNode.removeChild(slipDom);\r\n        }\r\n    };\r\n    return CatPageHtml;\r\n}(CatHtml);\r\nmodule.exports = CatPageHtml;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\cat-page-html.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\cat-page-html.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar CatHtml = require('./cat-html');\n\nvar DomUtil = Util.DomUtil;\nvar LIST_CLASS = 'g2-legend-list';\nvar CONTAINER_CLASS = 'g2-legend';\nvar SLIP_CLASS = 'g2-slip';\nvar CARET_UP_CLASS = 'g2-caret-up';\nvar CARET_DOWN_CLASS = 'g2-caret-down';\nvar ENABLED_CARET_COLOR = 'rgba(0,0,0,0.65)';\nvar DISABLED_CARET_COLOR = 'rgba(0,0,0,0.25)';\n\nfunction findNodeByClass(node, className) {\n  return node.getElementsByClassName(className)[0];\n}\n\nvar CatPageHtml =\n/*#__PURE__*/\nfunction (_CatHtml) {\n  _inheritsLoose(CatPageHtml, _CatHtml);\n\n  function CatPageHtml() {\n    return _CatHtml.apply(this, arguments) || this;\n  }\n\n  var _proto = CatPageHtml.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _CatHtml.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * type标识\n       * @type {String}\n       */\n      type: 'category-page-legend',\n\n      /**\n       * html 容器\n       * @type {DOM}\n       */\n      container: null,\n\n      /**\n       * 向上 / 下翻页图标的样式\n       * @type {ATTRS}\n       */\n      caretStyle: {\n        fill: 'rgba(0,0,0,0.65)'\n      },\n\n      /**\n       * 页码文字的样式\n       * @type {ATTRS}\n       */\n      pageNumStyle: {\n        display: 'inline-block',\n        fontSize: '12px',\n        fontFamily: this.fontFamily,\n        cursor: 'default'\n      },\n\n      /**\n       * 翻页块 DOM 的样式\n       * @type {ATTRS}\n       */\n      slipDomStyle: {\n        width: 'auto',\n        height: 'auto',\n        position: 'absolute'\n      },\n\n      /**\n       * 翻页块 DOM\n       * @type {String}\n       */\n      slipTpl: '<div class=\"' + SLIP_CLASS + '\" >' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-up\" data-icon=\"left\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"></path>' + '</svg>' + '<p class=\"cur-pagenum\" style = \"display:inline-block;\">1</p>' + '<p class=\"next-pagenum\" style = \"display:inline-block;\">/2</p>' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-down\" data-icon=\"right\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z\"></path>' + '</svg>' + '</div>',\n\n      /**\n       * 翻页块的宽度，用于设置翻页块相对于 legend 的位置\n       * @type {Number}\n       */\n      slipWidth: 65,\n\n      /**\n       * legend 内容超出容器的处理方式\n       * @type {String}\n       */\n      legendOverflow: 'unset'\n    });\n  };\n\n  _proto.render = function render() {\n    _CatHtml.prototype._renderHTML.call(this);\n\n    this._renderFlipPage();\n  };\n\n  _proto._renderFlipPage = function _renderFlipPage() {\n    var legendWrapper = document.getElementsByClassName(CONTAINER_CLASS)[0]; // ul\n\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n    var position = this.get('position');\n    var layout = this.get('layout');\n    var itemDisplay = position === 'right' || position === 'left' || layout === 'vertical' ? 'block' : 'inline-block'; // 翻页\n\n    if (legendWrapper.scrollHeight > legendWrapper.offsetHeight) {\n      // append a slip div\n      var slipTpl = this.get('slipTpl');\n      var slipDom = DomUtil.createDom(slipTpl);\n      var caretUpDom = findNodeByClass(slipDom, CARET_UP_CLASS);\n      var caretDownDom = findNodeByClass(slipDom, CARET_DOWN_CLASS);\n      DomUtil.modifyCSS(caretUpDom, this.get('caretStyle'));\n      DomUtil.modifyCSS(caretUpDom, {\n        fill: 'rgba(0,0,0,0.25)'\n      });\n      DomUtil.modifyCSS(caretDownDom, this.get('caretStyle'));\n      var curPageNumDom = findNodeByClass(slipDom, 'cur-pagenum');\n      var totalPageNumDom = findNodeByClass(slipDom, 'next-pagenum');\n      var pageNumStyle = this.get('pageNumStyle');\n      DomUtil.modifyCSS(curPageNumDom, Util.mix({}, pageNumStyle, {\n        paddingLeft: '10px'\n      }));\n      DomUtil.modifyCSS(totalPageNumDom, Util.mix({}, pageNumStyle, {\n        opacity: 0.3,\n        paddingRight: '10px'\n      })); // layout at the center-bottom of the legendWrapper\n\n      DomUtil.modifyCSS(slipDom, Util.mix({}, this.get('slipDomStyle'), {\n        top: legendWrapper.offsetHeight + 'px'\n      }));\n      legendWrapper.style.overflow = this.get('legendOverflow');\n      legendWrapper.appendChild(slipDom);\n      var li = itemListDom.childNodes;\n      var curHeight = 0; // find the total page number\n\n      var pages = 1;\n      var blockLi = [];\n\n      for (var i = 0; i < li.length; i++) {\n        li[i].style.display = itemDisplay;\n        curHeight = li[i].offsetTop + li[i].offsetHeight;\n\n        if (curHeight >= legendWrapper.offsetHeight) {\n          pages++;\n          blockLi.forEach(function (bl) {\n            bl.style.display = 'none';\n          });\n          blockLi = [];\n        }\n\n        blockLi.push(li[i]);\n      }\n\n      totalPageNumDom.innerText = '/' + pages; // initialize the page\n\n      li.forEach(function (l) {\n        l.style.display = itemDisplay;\n        curHeight = l.offsetTop + l.offsetHeight;\n\n        if (curHeight > legendWrapper.offsetHeight) {\n          l.style.display = 'none';\n        }\n      }); // 上翻事件\n\n      caretUpDom.addEventListener('click', function () {\n        // it is the 1st page\n        if (li[0].style.display === itemDisplay) return; // otherwise\n\n        var firstDisplayItemIdx = -1;\n        li.forEach(function (l, i) {\n          if (l.style.display === itemDisplay) {\n            firstDisplayItemIdx = firstDisplayItemIdx === -1 ? i : firstDisplayItemIdx;\n            l.style.display = 'none';\n          }\n        });\n\n        for (var _i = firstDisplayItemIdx - 1; _i >= 0; _i--) {\n          li[_i].style.display = itemDisplay;\n          curHeight = li[firstDisplayItemIdx - 1].offsetTop + li[firstDisplayItemIdx - 1].offsetHeight;\n          li[_i].style.display = 'none';\n\n          if (curHeight < legendWrapper.offsetHeight) {\n            li[_i].style.display = itemDisplay;\n          } else break;\n        } // change the page number\n\n\n        var currentPage = Number.parseInt(curPageNumDom.innerText, 10) - 1;\n\n        if (currentPage === 1) {\n          caretUpDom.style.fill = DISABLED_CARET_COLOR;\n        } else {\n          caretUpDom.style.fill = ENABLED_CARET_COLOR;\n        }\n\n        caretDownDom.style.fill = ENABLED_CARET_COLOR;\n        curPageNumDom.innerText = currentPage;\n      }); // 下翻事件\n\n      caretDownDom.addEventListener('click', function () {\n        // it is the last page\n        if (li[li.length - 1].style.display === itemDisplay) return; // otherwise\n\n        var lastDisplayItemIdx = -1;\n        li.forEach(function (l, i) {\n          if (l.style.display === itemDisplay) {\n            lastDisplayItemIdx = i;\n            l.style.display = 'none';\n          }\n        });\n\n        for (var _i2 = lastDisplayItemIdx + 1; _i2 < li.length; _i2++) {\n          li[_i2].style.display = itemDisplay;\n          curHeight = li[_i2].offsetTop + li[_i2].offsetHeight;\n          li[_i2].style.display = 'none';\n          if (curHeight < legendWrapper.offsetHeight) li[_i2].style.display = itemDisplay;else break;\n        } // change the page number\n\n\n        var currentPage = Number.parseInt(curPageNumDom.innerText, 10) + 1;\n\n        if (currentPage === itemDisplay) {\n          caretDownDom.style.fill = DISABLED_CARET_COLOR;\n        } else {\n          caretDownDom.style.fill = ENABLED_CARET_COLOR;\n        }\n\n        caretUpDom.style.fill = ENABLED_CARET_COLOR;\n        curPageNumDom.innerText = currentPage;\n      });\n      this.set('slipDom', slipDom);\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    _CatHtml.prototype.destroy.call(this);\n\n    var slipDom = this.get('slipDom');\n\n    if (slipDom && slipDom.parentNode) {\n      slipDom.parentNode.removeChild(slipDom);\n    }\n  };\n\n  return CatPageHtml;\n}(CatHtml);\n\nmodule.exports = CatPageHtml;"]}]}