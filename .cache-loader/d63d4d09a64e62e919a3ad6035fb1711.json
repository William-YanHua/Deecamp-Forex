{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\util\\dom.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\util\\dom.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { toArray } from '@antv/util';\r\nimport { SHAPE_TO_TAGS } from '../constant';\r\nexport function createSVGElement(type) {\r\n    return document.createElementNS('http://www.w3.org/2000/svg', type);\r\n}\r\nexport function createDom(shape) {\r\n    var type = SHAPE_TO_TAGS[shape.type];\r\n    var parent = shape.getParent();\r\n    if (!type) {\r\n        throw new Error(\"the type \" + shape.type + \" is not supported by svg\");\r\n    }\r\n    var element = createSVGElement(type);\r\n    if (shape.get('id')) {\r\n        element.id = shape.get('id');\r\n    }\r\n    shape.set('el', element);\r\n    shape.set('attrs', {});\r\n    if (parent) {\r\n        var parentNode = parent.get('el');\r\n        if (parentNode) {\r\n            parentNode.appendChild(element);\r\n        }\r\n        else {\r\n            parentNode = parent.createDom();\r\n            parent.set('el', parentNode);\r\n            parentNode.appendChild(element);\r\n        }\r\n    }\r\n    return element;\r\n}\r\nexport function sortDom(element, sorter) {\r\n    var el = element.get('el');\r\n    var childList = toArray(el.children).sort(sorter);\r\n    var fragment = document.createDocumentFragment();\r\n    childList.forEach(function (child) {\r\n        fragment.appendChild(child);\r\n    });\r\n    el.appendChild(fragment);\r\n}\r\nexport function moveTo(element, targetIndex) {\r\n    var parentNode = element.parentNode;\r\n    var siblings = Array.from(parentNode.childNodes).filter(function (node) { return node.nodeType === 1 && node.nodeName.toLowerCase() !== 'defs'; });\r\n    var target = siblings[targetIndex];\r\n    var currentIndex = siblings.indexOf(element);\r\n    if (target) {\r\n        if (currentIndex > targetIndex) {\r\n            parentNode.insertBefore(element, target);\r\n        }\r\n        else if (currentIndex < targetIndex) {\r\n            var targetNext = siblings[targetIndex + 1];\r\n            if (targetNext) {\r\n                parentNode.insertBefore(element, targetNext);\r\n            }\r\n            else {\r\n                parentNode.appendChild(element);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        parentNode.appendChild(element);\r\n    }\r\n}\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\util\\dom.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\util\\dom.js"],"names":[],"mappings":"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","sourcesContent":["import { toArray } from '@antv/util';\nimport { SHAPE_TO_TAGS } from '../constant';\n/**\n * 创建并返回图形的 svg 元素\n * @param type svg类型\n */\nexport function createSVGElement(type) {\n    return document.createElementNS('http://www.w3.org/2000/svg', type);\n}\n/**\n * 创建并返回图形的 dom 元素\n * @param  {IShape} shape 图形\n * @return {SVGElement}\n */\nexport function createDom(shape) {\n    var type = SHAPE_TO_TAGS[shape.type];\n    var parent = shape.getParent();\n    if (!type) {\n        throw new Error(\"the type \" + shape.type + \" is not supported by svg\");\n    }\n    var element = createSVGElement(type);\n    if (shape.get('id')) {\n        element.id = shape.get('id');\n    }\n    shape.set('el', element);\n    shape.set('attrs', {});\n    // 对于 defs 下的 dom 节点，parent 为空，通过 context 统一挂载到 defs 节点下\n    if (parent) {\n        var parentNode = parent.get('el');\n        if (parentNode) {\n            parentNode.appendChild(element);\n        }\n        else {\n            // parentNode maybe null for group\n            parentNode = parent.createDom();\n            parent.set('el', parentNode);\n            parentNode.appendChild(element);\n        }\n    }\n    return element;\n}\n/**\n * 对 dom 元素进行排序\n * @param {IElement} element  元素\n * @param {sorter}   function 排序函数\n */\nexport function sortDom(element, sorter) {\n    var el = element.get('el');\n    var childList = toArray(el.children).sort(sorter);\n    // create empty fragment\n    var fragment = document.createDocumentFragment();\n    childList.forEach(function (child) {\n        fragment.appendChild(child);\n    });\n    el.appendChild(fragment);\n}\n/**\n * 将 dom 元素移动到父元素下的指定位置\n * @param {SVGElement} element     dom 元素\n * @param {number}     targetIndex 目标位置(从 0 开始)\n */\nexport function moveTo(element, targetIndex) {\n    var parentNode = element.parentNode;\n    var siblings = Array.from(parentNode.childNodes).filter(\n    // 要求为元素节点，且不能为 defs 节点\n    function (node) { return node.nodeType === 1 && node.nodeName.toLowerCase() !== 'defs'; });\n    // 获取目标节点\n    var target = siblings[targetIndex];\n    var currentIndex = siblings.indexOf(element);\n    // 如果目标节点存在\n    if (target) {\n        // 当前索引 > 目标索引，直接插入到目标节点之前即可\n        if (currentIndex > targetIndex) {\n            parentNode.insertBefore(element, target);\n        }\n        else if (currentIndex < targetIndex) {\n            // 当前索引 < 目标索引\n            // 获取目标节点的下一个节点\n            var targetNext = siblings[targetIndex + 1];\n            // 如果目标节点的下一个节点存在，插入到该节点之前\n            if (targetNext) {\n                parentNode.insertBefore(element, targetNext);\n            }\n            else {\n                // 如果该节点不存在，则追加到末尾\n                parentNode.appendChild(element);\n            }\n        }\n    }\n    else {\n        parentNode.appendChild(element);\n    }\n}\n//# sourceMappingURL=dom.js.map"]}]}