{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\scale\\lib\\time-cat.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\scale\\lib\\time-cat.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Base = require('./base');\r\nvar Category = require('./category');\r\nvar fecha = require('fecha');\r\nvar catAuto = require('./auto/cat');\r\nvar TimeUtil = require('./time-util');\r\nvar each = require('@antv/util/lib/each');\r\nvar isNumber = require('@antv/util/lib/type/is-number');\r\nvar isObject = require('@antv/util/lib/type/is-object');\r\nvar isString = require('@antv/util/lib/type/is-string');\r\nvar TimeCategory = function (_Category) {\r\n    _inheritsLoose(TimeCategory, _Category);\r\n    function TimeCategory() {\r\n        return _Category.apply(this, arguments) || this;\r\n    }\r\n    var _proto = TimeCategory.prototype;\r\n    _proto._initDefaultCfg = function _initDefaultCfg() {\r\n        _Category.prototype._initDefaultCfg.call(this);\r\n        this.type = 'timeCat';\r\n        this.sortable = true;\r\n        this.tickCount = 5;\r\n        this.mask = 'YYYY-MM-DD';\r\n    };\r\n    _proto.init = function init() {\r\n        var self = this;\r\n        var values = this.values;\r\n        each(values, function (v, i) {\r\n            values[i] = self._toTimeStamp(v);\r\n        });\r\n        if (this.sortable) {\r\n            values.sort(function (v1, v2) {\r\n                return v1 - v2;\r\n            });\r\n        }\r\n        if (!self.ticks) {\r\n            self.ticks = this.calculateTicks();\r\n        }\r\n    };\r\n    _proto.calculateTicks = function calculateTicks() {\r\n        var self = this;\r\n        var count = self.tickCount;\r\n        var ticks;\r\n        if (count) {\r\n            var temp = catAuto({\r\n                maxCount: count,\r\n                data: self.values,\r\n                isRounding: self.isRounding\r\n            });\r\n            ticks = temp.ticks;\r\n        }\r\n        else {\r\n            ticks = self.values;\r\n        }\r\n        return ticks;\r\n    };\r\n    _proto.translate = function translate(value) {\r\n        value = this._toTimeStamp(value);\r\n        var index = this.values.indexOf(value);\r\n        if (index === -1) {\r\n            if (isNumber(value) && value < this.values.length) {\r\n                index = value;\r\n            }\r\n            else {\r\n                index = NaN;\r\n            }\r\n        }\r\n        return index;\r\n    };\r\n    _proto.scale = function scale(value) {\r\n        var rangeMin = this.rangeMin();\r\n        var rangeMax = this.rangeMax();\r\n        var index = this.translate(value);\r\n        var percent;\r\n        if (this.values.length === 1 || isNaN(index)) {\r\n            percent = index;\r\n        }\r\n        else if (index > -1) {\r\n            percent = index / (this.values.length - 1);\r\n        }\r\n        else {\r\n            percent = 0;\r\n        }\r\n        return rangeMin + percent * (rangeMax - rangeMin);\r\n    };\r\n    _proto.getText = function getText(value) {\r\n        var result = '';\r\n        var index = this.translate(value);\r\n        if (index > -1) {\r\n            result = this.values[index];\r\n        }\r\n        else {\r\n            result = value;\r\n        }\r\n        var formatter = this.formatter;\r\n        result = parseInt(result, 10);\r\n        result = formatter ? formatter(result) : fecha.format(result, this.mask);\r\n        return result;\r\n    };\r\n    _proto.getTicks = function getTicks() {\r\n        var self = this;\r\n        var ticks = this.ticks;\r\n        var rst = [];\r\n        each(ticks, function (tick) {\r\n            var obj;\r\n            if (isObject(tick)) {\r\n                obj = tick;\r\n            }\r\n            else {\r\n                obj = {\r\n                    text: isString(tick) ? tick : self.getText(tick),\r\n                    value: self.scale(tick),\r\n                    tickValue: tick\r\n                };\r\n            }\r\n            rst.push(obj);\r\n        });\r\n        return rst;\r\n    };\r\n    _proto._toTimeStamp = function _toTimeStamp(value) {\r\n        return TimeUtil.toTimeStamp(value);\r\n    };\r\n    return TimeCategory;\r\n}(Category);\r\nBase.TimeCat = TimeCategory;\r\nmodule.exports = TimeCategory;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\scale\\lib\\time-cat.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\scale\\lib\\time-cat.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview 时间数据作为分类类型\n * @author dxq613@gmail.com\n */\nvar Base = require('./base');\n\nvar Category = require('./category');\n\nvar fecha = require('fecha');\n\nvar catAuto = require('./auto/cat');\n\nvar TimeUtil = require('./time-util');\n\nvar each = require('@antv/util/lib/each');\n\nvar isNumber = require('@antv/util/lib/type/is-number');\n\nvar isObject = require('@antv/util/lib/type/is-object');\n\nvar isString = require('@antv/util/lib/type/is-string');\n/**\n * 度量的构造函数\n * @class Scale.TimeCategory\n */\n\n\nvar TimeCategory =\n/*#__PURE__*/\nfunction (_Category) {\n  _inheritsLoose(TimeCategory, _Category);\n\n  function TimeCategory() {\n    return _Category.apply(this, arguments) || this;\n  }\n\n  var _proto = TimeCategory.prototype;\n\n  _proto._initDefaultCfg = function _initDefaultCfg() {\n    _Category.prototype._initDefaultCfg.call(this);\n\n    this.type = 'timeCat';\n    /**\n     * 是否需要排序，默认进行排序\n     * @type {Boolean}\n     */\n\n    this.sortable = true;\n    this.tickCount = 5;\n    /**\n     * 时间格式化\n     * @type {String}\n     */\n\n    this.mask = 'YYYY-MM-DD';\n  };\n\n  _proto.init = function init() {\n    var self = this;\n    var values = this.values; // 针对时间分类类型，会将时间统一转换为时间戳\n\n    each(values, function (v, i) {\n      values[i] = self._toTimeStamp(v);\n    });\n\n    if (this.sortable) {\n      // 允许排序\n      values.sort(function (v1, v2) {\n        return v1 - v2;\n      });\n    }\n\n    if (!self.ticks) {\n      self.ticks = this.calculateTicks();\n    }\n  };\n  /**\n   * 计算 ticks\n   * @return {array} 返回 ticks 数组\n   */\n\n\n  _proto.calculateTicks = function calculateTicks() {\n    var self = this;\n    var count = self.tickCount;\n    var ticks;\n\n    if (count) {\n      var temp = catAuto({\n        maxCount: count,\n        data: self.values,\n        isRounding: self.isRounding\n      });\n      ticks = temp.ticks;\n    } else {\n      ticks = self.values;\n    }\n\n    return ticks;\n  };\n  /**\n   * @override\n   */\n\n\n  _proto.translate = function translate(value) {\n    value = this._toTimeStamp(value);\n    var index = this.values.indexOf(value);\n\n    if (index === -1) {\n      if (isNumber(value) && value < this.values.length) {\n        index = value;\n      } else {\n        index = NaN;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * @override\n   */\n\n\n  _proto.scale = function scale(value) {\n    var rangeMin = this.rangeMin();\n    var rangeMax = this.rangeMax();\n    var index = this.translate(value);\n    var percent;\n\n    if (this.values.length === 1 || isNaN(index)) {\n      // is index is NAN should not be set as 0\n      percent = index;\n    } else if (index > -1) {\n      percent = index / (this.values.length - 1);\n    } else {\n      percent = 0;\n    }\n\n    return rangeMin + percent * (rangeMax - rangeMin);\n  };\n  /**\n   * @override\n   */\n\n\n  _proto.getText = function getText(value) {\n    var result = '';\n    var index = this.translate(value);\n\n    if (index > -1) {\n      result = this.values[index];\n    } else {\n      result = value;\n    }\n\n    var formatter = this.formatter;\n    result = parseInt(result, 10);\n    result = formatter ? formatter(result) : fecha.format(result, this.mask);\n    return result;\n  };\n  /**\n   * @override\n   */\n\n\n  _proto.getTicks = function getTicks() {\n    var self = this;\n    var ticks = this.ticks;\n    var rst = [];\n    each(ticks, function (tick) {\n      var obj;\n\n      if (isObject(tick)) {\n        obj = tick;\n      } else {\n        obj = {\n          text: isString(tick) ? tick : self.getText(tick),\n          value: self.scale(tick),\n          tickValue: tick // 用于坐标轴上文本动画时确定前后帧的对应关系\n\n        };\n      }\n\n      rst.push(obj);\n    });\n    return rst;\n  }; // 将时间转换为时间戳\n\n\n  _proto._toTimeStamp = function _toTimeStamp(value) {\n    return TimeUtil.toTimeStamp(value);\n  };\n\n  return TimeCategory;\n}(Category);\n\nBase.TimeCat = TimeCategory;\nmodule.exports = TimeCategory;"]}]}