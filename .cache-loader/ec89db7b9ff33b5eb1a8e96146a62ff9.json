{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/area.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/area.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../../util');\nvar Shape = require('./shape');\nvar PathUtil = require('../util/path');\nvar ShapeUtil = require('../util/shape');\nvar Global = require('../../global');\nfunction getLineAttrs(cfg) {\n    var defaultAttrs = Global.shape.hollowArea;\n    var lineAttrs = Util.mix({}, defaultAttrs, cfg.style);\n    ShapeUtil.addStrokeAttrs(lineAttrs, cfg);\n    if (Util.isNumber(cfg.size)) {\n        lineAttrs.lineWidth = cfg.size;\n    }\n    return lineAttrs;\n}\nfunction getFillAttrs(cfg) {\n    var defaultAttrs = Global.shape.area;\n    var areaAttrs = Util.mix({}, defaultAttrs, cfg.style);\n    ShapeUtil.addFillAttrs(areaAttrs, cfg);\n    if (cfg.color) {\n        areaAttrs.stroke = areaAttrs.stroke || cfg.color;\n    }\n    if (Util.isNumber(cfg.size)) {\n        areaAttrs.lineWidth = cfg.size;\n    }\n    return areaAttrs;\n}\nfunction getPath(cfg, smooth, shape) {\n    var path = [];\n    var pointsArr = [];\n    var topLinePoints = [];\n    var bottomLinePoints = [];\n    var isInCircle = cfg.isInCircle;\n    Util.each(cfg.points, function (point) {\n        topLinePoints.push(point[1]);\n        bottomLinePoints.push(point[0]);\n    });\n    bottomLinePoints = bottomLinePoints.reverse();\n    pointsArr.push(topLinePoints, bottomLinePoints);\n    Util.each(pointsArr, function (points, index) {\n        var subPath = [];\n        points = shape.parsePoints(points);\n        var p1 = points[0];\n        if (isInCircle) {\n            points.push({\n                x: p1.x,\n                y: p1.y\n            });\n        }\n        if (smooth) {\n            subPath = PathUtil.getSplinePath(points, false, cfg.constraint);\n        }\n        else {\n            subPath = PathUtil.getLinePath(points, false);\n        }\n        if (index > 0) {\n            subPath[0][0] = 'L';\n        }\n        path = path.concat(subPath);\n    });\n    path.push(['Z']);\n    return path;\n}\nfunction _getMarkerCfg(cfg) {\n    return {\n        symbol: function symbol(x, y, r) {\n            return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n        },\n        radius: 5,\n        fill: cfg.color,\n        fillOpacity: 0.6\n    };\n}\nfunction _getActiveCfg(type, cfg) {\n    if (type === 'line' || type === 'smoothLine') {\n        var lineWidth = cfg.lineWidth || 0;\n        return {\n            lineWidth: lineWidth + 1\n        };\n    }\n    var opacity = cfg.fillOpacity || cfg.opacity || 1;\n    return {\n        fillOpacity: opacity - 0.15,\n        strokeOpacity: opacity - 0.15\n    };\n}\nfunction drawPointShape(shapeObj, cfg, container) {\n    var coord = shapeObj._coord;\n    var point = coord.convertPoint(cfg.points[0][1]);\n    return container.addShape('circle', {\n        attrs: Util.mix({\n            x: point.x,\n            y: point.y,\n            r: 2,\n            fill: cfg.color\n        }, cfg.style)\n    });\n}\nvar Area = Shape.registerFactory('area', {\n    defaultShapeType: 'area',\n    getDefaultPoints: function getDefaultPoints(pointInfo) {\n        var points = [];\n        var x = pointInfo.x;\n        var y = pointInfo.y;\n        var y0 = pointInfo.y0;\n        y = Util.isArray(y) ? y : [y0, y];\n        Util.each(y, function (yItem) {\n            points.push({\n                x: x,\n                y: yItem\n            });\n        });\n        return points;\n    },\n    getActiveCfg: function getActiveCfg(type, cfg) {\n        return _getActiveCfg(type, cfg);\n    },\n    drawShape: function drawShape(type, cfg, container) {\n        var shape = this.getShape(type);\n        var gShape;\n        if (cfg.points.length === 1 && Global.showSinglePoint) {\n            gShape = drawPointShape(this, cfg, container);\n        }\n        else {\n            gShape = shape.draw(cfg, container);\n        }\n        if (gShape) {\n            gShape.set('origin', cfg.origin);\n            gShape._id = cfg.splitedIndex ? cfg._id + cfg.splitedIndex : cfg._id;\n            gShape.name = this.name;\n        }\n        return gShape;\n    },\n    getSelectedCfg: function getSelectedCfg(type, cfg) {\n        if (cfg && cfg.style) {\n            return cfg.style;\n        }\n        return this.getActiveCfg(type, cfg);\n    }\n});\nShape.registerShape('area', 'area', {\n    draw: function draw(cfg, container) {\n        var attrs = getFillAttrs(cfg);\n        var path = getPath(cfg, false, this);\n        return container.addShape('path', {\n            attrs: Util.mix(attrs, {\n                path: path\n            })\n        });\n    },\n    getMarkerCfg: function getMarkerCfg(cfg) {\n        return _getMarkerCfg(cfg);\n    }\n});\nShape.registerShape('area', 'smooth', {\n    draw: function draw(cfg, container) {\n        var attrs = getFillAttrs(cfg);\n        var coord = this._coord;\n        cfg.constraint = [[coord.start.x, coord.end.y], [coord.end.x, coord.start.y]];\n        var path = getPath(cfg, true, this);\n        return container.addShape('path', {\n            attrs: Util.mix(attrs, {\n                path: path\n            })\n        });\n    },\n    getMarkerCfg: function getMarkerCfg(cfg) {\n        return _getMarkerCfg(cfg);\n    }\n});\nShape.registerShape('area', 'line', {\n    draw: function draw(cfg, container) {\n        var attrs = getLineAttrs(cfg);\n        var path = getPath(cfg, false, this);\n        return container.addShape('path', {\n            attrs: Util.mix(attrs, {\n                path: path\n            })\n        });\n    },\n    getMarkerCfg: function getMarkerCfg(cfg) {\n        return _getMarkerCfg(cfg);\n    }\n});\nShape.registerShape('area', 'smoothLine', {\n    draw: function draw(cfg, container) {\n        var attrs = getLineAttrs(cfg);\n        var path = getPath(cfg, true, this);\n        return container.addShape('path', {\n            attrs: Util.mix(attrs, {\n                path: path\n            })\n        });\n    },\n    getMarkerCfg: function getMarkerCfg(cfg) {\n        return _getMarkerCfg(cfg);\n    }\n});\nArea.spline = Area.smooth;\nmodule.exports = Area;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/area.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/area.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * @fileOverview area shape\n * @author dxq613@gmail.com\n * @author sima.zhang1990@gmail.com\n */\nvar Util = require('../../util');\n\nvar Shape = require('./shape');\n\nvar PathUtil = require('../util/path');\n\nvar ShapeUtil = require('../util/shape');\n\nvar Global = require('../../global');\n\nfunction getLineAttrs(cfg) {\n  var defaultAttrs = Global.shape.hollowArea;\n  var lineAttrs = Util.mix({}, defaultAttrs, cfg.style);\n  ShapeUtil.addStrokeAttrs(lineAttrs, cfg);\n\n  if (Util.isNumber(cfg.size)) {\n    lineAttrs.lineWidth = cfg.size;\n  }\n\n  return lineAttrs;\n}\n\nfunction getFillAttrs(cfg) {\n  var defaultAttrs = Global.shape.area;\n  var areaAttrs = Util.mix({}, defaultAttrs, cfg.style);\n  ShapeUtil.addFillAttrs(areaAttrs, cfg);\n\n  if (cfg.color) {\n    areaAttrs.stroke = areaAttrs.stroke || cfg.color;\n  }\n\n  if (Util.isNumber(cfg.size)) {\n    areaAttrs.lineWidth = cfg.size;\n  }\n\n  return areaAttrs;\n}\n\nfunction getPath(cfg, smooth, shape) {\n  var path = [];\n  var pointsArr = [];\n  var topLinePoints = []; // area 区域上部分\n\n  var bottomLinePoints = []; // area 区域下部分\n\n  var isInCircle = cfg.isInCircle;\n  Util.each(cfg.points, function (point) {\n    topLinePoints.push(point[1]);\n    bottomLinePoints.push(point[0]);\n  }); // if (!isInCircle) {\n\n  bottomLinePoints = bottomLinePoints.reverse(); // }\n\n  pointsArr.push(topLinePoints, bottomLinePoints);\n  Util.each(pointsArr, function (points, index) {\n    var subPath = [];\n    points = shape.parsePoints(points);\n    var p1 = points[0];\n\n    if (isInCircle) {\n      points.push({\n        x: p1.x,\n        y: p1.y\n      });\n    }\n\n    if (smooth) {\n      subPath = PathUtil.getSplinePath(points, false, cfg.constraint);\n    } else {\n      subPath = PathUtil.getLinePath(points, false);\n    }\n\n    if (index > 0) {\n      subPath[0][0] = 'L';\n    }\n\n    path = path.concat(subPath);\n  });\n  path.push(['Z']);\n  return path;\n} // get marker cfg\n\n\nfunction _getMarkerCfg(cfg) {\n  return {\n    symbol: function symbol(x, y, r) {\n      return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n    },\n    radius: 5,\n    fill: cfg.color,\n    fillOpacity: 0.6\n  };\n} // 鼠标悬浮触发active状态\n\n\nfunction _getActiveCfg(type, cfg) {\n  if (type === 'line' || type === 'smoothLine') {\n    // 线加粗\n    var lineWidth = cfg.lineWidth || 0;\n    return {\n      lineWidth: lineWidth + 1\n    };\n  }\n\n  var opacity = cfg.fillOpacity || cfg.opacity || 1;\n  return {\n    fillOpacity: opacity - 0.15,\n    strokeOpacity: opacity - 0.15\n  };\n} // 当只有一个数据时绘制点\n\n\nfunction drawPointShape(shapeObj, cfg, container) {\n  var coord = shapeObj._coord;\n  var point = coord.convertPoint(cfg.points[0][1]);\n  return container.addShape('circle', {\n    attrs: Util.mix({\n      x: point.x,\n      y: point.y,\n      r: 2,\n      fill: cfg.color\n    }, cfg.style)\n  });\n}\n\nvar Area = Shape.registerFactory('area', {\n  defaultShapeType: 'area',\n\n  /**\n   * @override\n   * @protected\n   * 计算点 如果存在多个点，分割成单个的点, 不考虑多个x对应一个y的情况\n   * 单点则补上y0点\n   */\n  getDefaultPoints: function getDefaultPoints(pointInfo) {\n    var points = [];\n    var x = pointInfo.x;\n    var y = pointInfo.y;\n    var y0 = pointInfo.y0;\n    y = Util.isArray(y) ? y : [y0, y];\n    Util.each(y, function (yItem) {\n      points.push({\n        x: x,\n        y: yItem\n      });\n    });\n    return points;\n  },\n  // 获取激活的图形属性\n  getActiveCfg: function getActiveCfg(type, cfg) {\n    return _getActiveCfg(type, cfg);\n  },\n  drawShape: function drawShape(type, cfg, container) {\n    var shape = this.getShape(type);\n    var gShape;\n\n    if (cfg.points.length === 1 && Global.showSinglePoint) {\n      gShape = drawPointShape(this, cfg, container);\n    } else {\n      gShape = shape.draw(cfg, container);\n    }\n\n    if (gShape) {\n      gShape.set('origin', cfg.origin);\n      gShape._id = cfg.splitedIndex ? cfg._id + cfg.splitedIndex : cfg._id;\n      gShape.name = this.name;\n    }\n\n    return gShape;\n  },\n  getSelectedCfg: function getSelectedCfg(type, cfg) {\n    if (cfg && cfg.style) {\n      return cfg.style;\n    }\n\n    return this.getActiveCfg(type, cfg);\n  }\n}); // 默认：填充区域图\n\nShape.registerShape('area', 'area', {\n  draw: function draw(cfg, container) {\n    var attrs = getFillAttrs(cfg);\n    var path = getPath(cfg, false, this); // path = this.parsePath(path, false);\n\n    return container.addShape('path', {\n      attrs: Util.mix(attrs, {\n        path: path\n      })\n    });\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return _getMarkerCfg(cfg);\n  }\n}); // 填充平滑区域图\n\nShape.registerShape('area', 'smooth', {\n  draw: function draw(cfg, container) {\n    var attrs = getFillAttrs(cfg);\n    var coord = this._coord; // 曲线的限制\n\n    cfg.constraint = [[coord.start.x, coord.end.y], [coord.end.x, coord.start.y]];\n    var path = getPath(cfg, true, this); // path = this.parsePath(path, false);\n\n    return container.addShape('path', {\n      attrs: Util.mix(attrs, {\n        path: path\n      })\n    });\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return _getMarkerCfg(cfg);\n  }\n}); // 封闭的折线\n\nShape.registerShape('area', 'line', {\n  draw: function draw(cfg, container) {\n    var attrs = getLineAttrs(cfg);\n    var path = getPath(cfg, false, this); // path = this.parsePath(path, false);\n\n    return container.addShape('path', {\n      attrs: Util.mix(attrs, {\n        path: path\n      })\n    });\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return _getMarkerCfg(cfg);\n  }\n}); // 封闭的平滑线\n\nShape.registerShape('area', 'smoothLine', {\n  draw: function draw(cfg, container) {\n    var attrs = getLineAttrs(cfg);\n    var path = getPath(cfg, true, this);\n    return container.addShape('path', {\n      attrs: Util.mix(attrs, {\n        path: path\n      })\n    });\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return _getMarkerCfg(cfg);\n  }\n});\nArea.spline = Area.smooth;\nmodule.exports = Area;"]}]}