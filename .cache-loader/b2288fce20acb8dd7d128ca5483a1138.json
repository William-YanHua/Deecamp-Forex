{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\d3-regression\\src\\quadratic.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\d3-regression\\src\\quadratic.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nimport { determination } from \"./utils/determination\";\r\nimport { interpose } from \"./utils/interpose\";\r\nimport { points, visitPoints } from \"./utils/points\";\r\nexport default function () {\r\n    var x = function (d) { return d[0]; }, y = function (d) { return d[1]; }, domain;\r\n    function quadratic(data) {\r\n        var _a = __read(points(data, x, y), 4), xv = _a[0], yv = _a[1], ux = _a[2], uy = _a[3], n = xv.length;\r\n        var X2 = 0, X3 = 0, X4 = 0, XY = 0, X2Y = 0, i, dx, dy, x2;\r\n        for (i = 0; i < n;) {\r\n            dx = xv[i];\r\n            dy = yv[i++];\r\n            x2 = dx * dx;\r\n            X2 += (x2 - X2) / i;\r\n            X3 += (x2 * dx - X3) / i;\r\n            X4 += (x2 * x2 - X4) / i;\r\n            XY += (dx * dy - XY) / i;\r\n            X2Y += (x2 * dy - X2Y) / i;\r\n        }\r\n        var Y = 0, n0 = 0, xmin = domain ? +domain[0] : Infinity, xmax = domain ? +domain[1] : -Infinity;\r\n        visitPoints(data, x, y, function (dx, dy) {\r\n            n0++;\r\n            Y += (dy - Y) / n0;\r\n            if (!domain) {\r\n                if (dx < xmin)\r\n                    xmin = dx;\r\n                if (dx > xmax)\r\n                    xmax = dx;\r\n            }\r\n        });\r\n        var X2X2 = X4 - (X2 * X2), d = (X2 * X2X2 - X3 * X3), a = (X2Y * X2 - XY * X3) / d, b = (XY * X2X2 - X2Y * X3) / d, c = -a * X2, fn = function (x) {\r\n            x = x - ux;\r\n            return a * x * x + b * x + c + uy;\r\n        };\r\n        var out = interpose(xmin, xmax, fn);\r\n        out.a = a;\r\n        out.b = b - 2 * a * ux;\r\n        out.c = c - b * ux + a * ux * ux + uy;\r\n        out.predict = fn;\r\n        out.rSquared = determination(data, x, y, Y, fn);\r\n        return out;\r\n    }\r\n    quadratic.domain = function (arr) {\r\n        return arguments.length ? (domain = arr, quadratic) : domain;\r\n    };\r\n    quadratic.x = function (fn) {\r\n        return arguments.length ? (x = fn, quadratic) : x;\r\n    };\r\n    quadratic.y = function (fn) {\r\n        return arguments.length ? (y = fn, quadratic) : y;\r\n    };\r\n    return quadratic;\r\n}\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\d3-regression\\src\\quadratic.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\d3-regression\\src\\quadratic.js"],"names":[],"mappings":"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","sourcesContent":["import { determination } from \"./utils/determination\";\nimport { interpose } from \"./utils/interpose\";\nimport { points, visitPoints } from \"./utils/points\";\n\nexport default function(){\n  let x = d => d[0],\n      y = d => d[1],\n      domain;\n\n  function quadratic(data){\n    const [xv, yv, ux, uy] = points(data, x, y),\n          n = xv.length;\n    \n    let X2 = 0,\n        X3 = 0,\n        X4 = 0,\n        XY = 0,\n        X2Y = 0,\n        i, dx, dy, x2;\n\n    for (i = 0; i < n;) {\n      dx = xv[i];\n      dy = yv[i++];\n      x2 = dx * dx;\n      X2 += (x2 - X2) / i;\n      X3 += (x2 * dx - X3) / i;\n      X4 += (x2 * x2 - X4) / i;\n      XY += (dx * dy - XY) / i;\n      X2Y += (x2 * dy - X2Y) / i;\n    }\n    \n    let Y = 0,\n        n0 = 0,\n        xmin = domain ? +domain[0] : Infinity,\n        xmax = domain ? +domain[1] : -Infinity;\n    \n    visitPoints(data, x, y, (dx, dy) => {\n      n0++;\n      Y += (dy - Y) / n0;\n      if (!domain){\n        if (dx < xmin) xmin = dx;\n        if (dx > xmax) xmax = dx;\n      }\n    });\n    \n    const X2X2 = X4 - (X2 * X2),\n          d = (X2 * X2X2 - X3 * X3),\n          a = (X2Y * X2 - XY * X3) / d,\n          b = (XY * X2X2 - X2Y * X3) / d,\n          c = -a * X2,\n          fn = x => {\n            x = x - ux;\n            return a * x * x + b * x + c + uy;\n          };\n    \n    const out = interpose(xmin, xmax, fn);\n\n    out.a = a;\n    out.b = b - 2 * a * ux;\n    out.c = c - b * ux + a * ux * ux + uy;\n    out.predict = fn;\n    out.rSquared = determination(data, x, y, Y, fn);\n\n    return out;\n  }\n  \n  quadratic.domain = function(arr){\n    return arguments.length ? (domain = arr, quadratic) : domain;\n  }\n\n  quadratic.x = function(fn){\n    return arguments.length ? (x = fn, quadratic) : x;\n  }\n\n  quadratic.y = function(fn){\n    return arguments.length ? (y = fn, quadratic) : y;\n  }\n  \n  return quadratic;\n}"]}]}