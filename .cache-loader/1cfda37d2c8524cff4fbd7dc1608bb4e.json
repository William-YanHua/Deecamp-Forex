{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-page-html.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-page-html.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar CatHtml = require('./cat-html');\nvar _require = require('../const'), FONT_FAMILY = _require.FONT_FAMILY;\nvar DomUtil = Util.DomUtil;\nvar LIST_CLASS = 'g2-legend-list';\nvar SLIP_CLASS = 'g2-slip';\nvar CARET_UP_CLASS = 'g2-caret-up';\nvar CARET_DOWN_CLASS = 'g2-caret-down';\nvar ENABLED_CARET_COLOR = 'rgba(0,0,0,0.65)';\nvar DISABLED_CARET_COLOR = 'rgba(0,0,0,0.25)';\nfunction findNodeByClass(node, className) {\n    return node.getElementsByClassName(className)[0];\n}\nvar CatPageHtml = function (_CatHtml) {\n    _inheritsLoose(CatPageHtml, _CatHtml);\n    var _super = _createSuper(CatPageHtml);\n    function CatPageHtml() {\n        return _CatHtml.apply(this, arguments) || this;\n    }\n    var _proto = CatPageHtml.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _CatHtml.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            type: 'category-page-legend',\n            container: null,\n            caretStyle: {\n                fill: 'rgba(0,0,0,0.65)'\n            },\n            pageNumStyle: {\n                display: 'inline-block',\n                fontSize: '12px',\n                fontFamily: FONT_FAMILY,\n                cursor: 'default'\n            },\n            slipDomStyle: {\n                width: 'auto',\n                height: 'auto',\n                position: 'absolute'\n            },\n            slipTpl: '<div class=\"' + SLIP_CLASS + '\" >' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-up\" data-icon=\"left\" style = \"display:inline-block;vertical-align:middle;\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"></path>' + '</svg>' + '<p class=\"cur-pagenum\" style = \"display:inline-block;vertical-align:middle;\">1</p>' + '<p class=\"next-pagenum\" style = \"display:inline-block;vertical-align:middle;\"\">/2</p>' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-down\" data-icon=\"right\" style = \"display:inline-block;vertical-align:middle;\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z\"></path>' + '</svg>' + '</div>',\n            slipWidth: 65,\n            legendOverflow: 'unset'\n        });\n    };\n    _proto.render = function render() {\n        _CatHtml.prototype._renderHTML.call(this);\n        this._renderFlipPage();\n    };\n    _proto._renderFlipPage = function _renderFlipPage() {\n        var legendWrapper = this.get('legendWrapper');\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n        var position = this.get('position');\n        var layout = this.get('layout');\n        var isVertical = position === 'right' || position === 'left' || layout === 'vertical';\n        var itemDisplay = isVertical ? 'block' : 'inline-block';\n        var legengWrapperHeight = legendWrapper.offsetHeight;\n        if (legendWrapper.scrollHeight > legengWrapperHeight) {\n            var slipTpl = this.get('slipTpl');\n            var slipDom = DomUtil.createDom(slipTpl);\n            var caretUpDom = findNodeByClass(slipDom, CARET_UP_CLASS);\n            var caretDownDom = findNodeByClass(slipDom, CARET_DOWN_CLASS);\n            DomUtil.modifyCSS(caretUpDom, this.get('caretStyle'));\n            DomUtil.modifyCSS(caretUpDom, {\n                fill: 'rgba(0,0,0,0.25)'\n            });\n            DomUtil.modifyCSS(caretDownDom, this.get('caretStyle'));\n            var curPageNumDom = findNodeByClass(slipDom, 'cur-pagenum');\n            var totalPageNumDom = findNodeByClass(slipDom, 'next-pagenum');\n            var pageNumStyle = this.get('pageNumStyle');\n            DomUtil.modifyCSS(curPageNumDom, Util.mix({}, pageNumStyle, {\n                paddingLeft: '10px'\n            }));\n            DomUtil.modifyCSS(totalPageNumDom, Util.mix({}, pageNumStyle, {\n                opacity: 0.3,\n                paddingRight: '10px'\n            }));\n            DomUtil.modifyCSS(slipDom, Util.mix({}, this.get('slipDomStyle'), isVertical ? {\n                top: legengWrapperHeight + 'px'\n            } : {\n                right: 0,\n                top: '50%',\n                transform: 'translate(0, -50%)'\n            }));\n            legendWrapper.style.overflow = this.get('legendOverflow');\n            legendWrapper.appendChild(slipDom);\n            if (!isVertical) {\n                var legendListMaxWidth = Math.max(legendWrapper.offsetWidth - 10 - slipDom.offsetWidth, 0);\n                DomUtil.modifyCSS(itemListDom, {\n                    maxWidth: legendListMaxWidth + \"px\"\n                });\n            }\n            var li = itemListDom.childNodes;\n            var curHeight = 0;\n            var pages = 1;\n            var blockLi = [];\n            for (var i = 0; i < li.length; i++) {\n                li[i].style.display = itemDisplay;\n                curHeight = li[i].offsetTop + li[i].offsetHeight;\n                if (curHeight > legengWrapperHeight) {\n                    pages++;\n                    blockLi.forEach(function (bl) {\n                        bl.style.display = 'none';\n                    });\n                    blockLi = [];\n                }\n                blockLi.push(li[i]);\n            }\n            totalPageNumDom.innerText = '/' + pages;\n            li.forEach(function (l) {\n                l.style.display = itemDisplay;\n                curHeight = l.offsetTop + l.offsetHeight;\n                if (curHeight > legengWrapperHeight) {\n                    l.style.display = 'none';\n                }\n            });\n            caretUpDom.addEventListener('click', function () {\n                if (li[0].style.display === itemDisplay)\n                    return;\n                var firstDisplayItemIdx = -1;\n                li.forEach(function (l, i) {\n                    if (l.style.display === itemDisplay) {\n                        firstDisplayItemIdx = firstDisplayItemIdx === -1 ? i : firstDisplayItemIdx;\n                        l.style.display = 'none';\n                    }\n                });\n                for (var _i = firstDisplayItemIdx - 1; _i >= 0; _i--) {\n                    li[_i].style.display = itemDisplay;\n                    curHeight = li[firstDisplayItemIdx - 1].offsetTop + li[firstDisplayItemIdx - 1].offsetHeight;\n                    li[_i].style.display = 'none';\n                    if (curHeight <= legengWrapperHeight) {\n                        li[_i].style.display = itemDisplay;\n                    }\n                    else\n                        break;\n                }\n                var currentPage = Number.parseInt(curPageNumDom.innerText, 10) - 1;\n                if (currentPage === 1) {\n                    caretUpDom.style.fill = DISABLED_CARET_COLOR;\n                }\n                else {\n                    caretUpDom.style.fill = ENABLED_CARET_COLOR;\n                }\n                caretDownDom.style.fill = ENABLED_CARET_COLOR;\n                curPageNumDom.innerText = currentPage;\n            });\n            caretDownDom.addEventListener('click', function () {\n                if (li[li.length - 1].style.display === itemDisplay)\n                    return;\n                var lastDisplayItemIdx = -1;\n                li.forEach(function (l, i) {\n                    if (l.style.display === itemDisplay) {\n                        lastDisplayItemIdx = i;\n                        l.style.display = 'none';\n                    }\n                });\n                for (var _i2 = lastDisplayItemIdx + 1; _i2 < li.length; _i2++) {\n                    li[_i2].style.display = itemDisplay;\n                    curHeight = li[_i2].offsetTop + li[_i2].offsetHeight;\n                    li[_i2].style.display = 'none';\n                    if (curHeight <= legengWrapperHeight)\n                        li[_i2].style.display = itemDisplay;\n                    else\n                        break;\n                }\n                var currentPage = Number.parseInt(curPageNumDom.innerText, 10) + 1;\n                if (currentPage === pages) {\n                    caretDownDom.style.fill = DISABLED_CARET_COLOR;\n                }\n                else {\n                    caretDownDom.style.fill = ENABLED_CARET_COLOR;\n                }\n                caretUpDom.style.fill = ENABLED_CARET_COLOR;\n                curPageNumDom.innerText = currentPage;\n            });\n            this.set('slipDom', slipDom);\n        }\n    };\n    _proto.destroy = function destroy() {\n        var slipDom = this.get('slipDom');\n        if (slipDom && slipDom.parentNode) {\n            slipDom.parentNode.removeChild(slipDom);\n        }\n        _CatHtml.prototype.destroy.call(this);\n    };\n    return CatPageHtml;\n}(CatHtml);\nmodule.exports = CatPageHtml;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-page-html.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-page-html.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar CatHtml = require('./cat-html');\n\nvar _require = require('../const'),\n    FONT_FAMILY = _require.FONT_FAMILY;\n\nvar DomUtil = Util.DomUtil;\nvar LIST_CLASS = 'g2-legend-list';\nvar SLIP_CLASS = 'g2-slip';\nvar CARET_UP_CLASS = 'g2-caret-up';\nvar CARET_DOWN_CLASS = 'g2-caret-down';\nvar ENABLED_CARET_COLOR = 'rgba(0,0,0,0.65)';\nvar DISABLED_CARET_COLOR = 'rgba(0,0,0,0.25)';\n\nfunction findNodeByClass(node, className) {\n  return node.getElementsByClassName(className)[0];\n}\n\nvar CatPageHtml = /*#__PURE__*/function (_CatHtml) {\n  _inheritsLoose(CatPageHtml, _CatHtml);\n\n  var _super = _createSuper(CatPageHtml);\n\n  function CatPageHtml() {\n    return _CatHtml.apply(this, arguments) || this;\n  }\n\n  var _proto = CatPageHtml.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _CatHtml.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * type标识\n       * @type {String}\n       */\n      type: 'category-page-legend',\n\n      /**\n       * html 容器\n       * @type {DOM}\n       */\n      container: null,\n\n      /**\n       * 向上 / 下翻页图标的样式\n       * @type {ATTRS}\n       */\n      caretStyle: {\n        fill: 'rgba(0,0,0,0.65)'\n      },\n\n      /**\n       * 页码文字的样式\n       * @type {ATTRS}\n       */\n      pageNumStyle: {\n        display: 'inline-block',\n        fontSize: '12px',\n        fontFamily: FONT_FAMILY,\n        cursor: 'default'\n      },\n\n      /**\n       * 翻页块 DOM 的样式\n       * @type {ATTRS}\n       */\n      slipDomStyle: {\n        width: 'auto',\n        height: 'auto',\n        position: 'absolute'\n      },\n\n      /**\n       * 翻页块 DOM\n       * @type {String}\n       */\n      slipTpl: '<div class=\"' + SLIP_CLASS + '\" >' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-up\" data-icon=\"left\" style = \"display:inline-block;vertical-align:middle;\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"></path>' + '</svg>' + '<p class=\"cur-pagenum\" style = \"display:inline-block;vertical-align:middle;\">1</p>' + '<p class=\"next-pagenum\" style = \"display:inline-block;vertical-align:middle;\"\">/2</p>' + '<svg viewBox=\"64 64 896 896\" class=\"g2-caret-down\" data-icon=\"right\" style = \"display:inline-block;vertical-align:middle;\" width=\"1em\" height=\"1em\" aria-hidden=\"true\">' + '<path d=\"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z\"></path>' + '</svg>' + '</div>',\n\n      /**\n       * 翻页块的宽度，用于设置翻页块相对于 legend 的位置\n       * @type {Number}\n       */\n      slipWidth: 65,\n\n      /**\n       * legend 内容超出容器的处理方式\n       * @type {String}\n       */\n      legendOverflow: 'unset'\n    });\n  };\n\n  _proto.render = function render() {\n    _CatHtml.prototype._renderHTML.call(this);\n\n    this._renderFlipPage();\n  };\n\n  _proto._renderFlipPage = function _renderFlipPage() {\n    var legendWrapper = this.get('legendWrapper'); // ul\n\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n    var position = this.get('position');\n    var layout = this.get('layout');\n    var isVertical = position === 'right' || position === 'left' || layout === 'vertical';\n    var itemDisplay = isVertical ? 'block' : 'inline-block';\n    var legengWrapperHeight = legendWrapper.offsetHeight; // 翻页\n\n    if (legendWrapper.scrollHeight > legengWrapperHeight) {\n      // append a slip div\n      var slipTpl = this.get('slipTpl');\n      var slipDom = DomUtil.createDom(slipTpl);\n      var caretUpDom = findNodeByClass(slipDom, CARET_UP_CLASS);\n      var caretDownDom = findNodeByClass(slipDom, CARET_DOWN_CLASS);\n      DomUtil.modifyCSS(caretUpDom, this.get('caretStyle'));\n      DomUtil.modifyCSS(caretUpDom, {\n        fill: 'rgba(0,0,0,0.25)'\n      });\n      DomUtil.modifyCSS(caretDownDom, this.get('caretStyle'));\n      var curPageNumDom = findNodeByClass(slipDom, 'cur-pagenum');\n      var totalPageNumDom = findNodeByClass(slipDom, 'next-pagenum');\n      var pageNumStyle = this.get('pageNumStyle');\n      DomUtil.modifyCSS(curPageNumDom, Util.mix({}, pageNumStyle, {\n        paddingLeft: '10px'\n      }));\n      DomUtil.modifyCSS(totalPageNumDom, Util.mix({}, pageNumStyle, {\n        opacity: 0.3,\n        paddingRight: '10px'\n      })); // layout at the center-bottom of the legendWrapper\n\n      DomUtil.modifyCSS(slipDom, Util.mix({}, this.get('slipDomStyle'), isVertical ? {\n        top: legengWrapperHeight + 'px'\n      } : {\n        right: 0,\n        top: '50%',\n        // 横向布局的时候，分页在右侧居中对齐\n        transform: 'translate(0, -50%)'\n      }));\n      legendWrapper.style.overflow = this.get('legendOverflow');\n      legendWrapper.appendChild(slipDom);\n\n      if (!isVertical) {\n        var legendListMaxWidth = Math.max(legendWrapper.offsetWidth - 10 - slipDom.offsetWidth, 0); // 横向布局的时候更新list的宽度\n\n        DomUtil.modifyCSS(itemListDom, {\n          maxWidth: legendListMaxWidth + \"px\"\n        });\n      }\n\n      var li = itemListDom.childNodes;\n      var curHeight = 0; // find the total page number\n\n      var pages = 1;\n      var blockLi = [];\n\n      for (var i = 0; i < li.length; i++) {\n        li[i].style.display = itemDisplay;\n        curHeight = li[i].offsetTop + li[i].offsetHeight;\n\n        if (curHeight > legengWrapperHeight) {\n          pages++;\n          blockLi.forEach(function (bl) {\n            bl.style.display = 'none';\n          });\n          blockLi = [];\n        }\n\n        blockLi.push(li[i]);\n      }\n\n      totalPageNumDom.innerText = '/' + pages; // initialize the page\n\n      li.forEach(function (l) {\n        l.style.display = itemDisplay;\n        curHeight = l.offsetTop + l.offsetHeight;\n\n        if (curHeight > legengWrapperHeight) {\n          l.style.display = 'none';\n        }\n      }); // 上翻事件\n\n      caretUpDom.addEventListener('click', function () {\n        // it is the 1st page\n        if (li[0].style.display === itemDisplay) return; // otherwise\n\n        var firstDisplayItemIdx = -1;\n        li.forEach(function (l, i) {\n          if (l.style.display === itemDisplay) {\n            firstDisplayItemIdx = firstDisplayItemIdx === -1 ? i : firstDisplayItemIdx;\n            l.style.display = 'none';\n          }\n        });\n\n        for (var _i = firstDisplayItemIdx - 1; _i >= 0; _i--) {\n          li[_i].style.display = itemDisplay;\n          curHeight = li[firstDisplayItemIdx - 1].offsetTop + li[firstDisplayItemIdx - 1].offsetHeight;\n          li[_i].style.display = 'none';\n\n          if (curHeight <= legengWrapperHeight) {\n            li[_i].style.display = itemDisplay;\n          } else break;\n        } // change the page number\n\n\n        var currentPage = Number.parseInt(curPageNumDom.innerText, 10) - 1;\n\n        if (currentPage === 1) {\n          caretUpDom.style.fill = DISABLED_CARET_COLOR;\n        } else {\n          caretUpDom.style.fill = ENABLED_CARET_COLOR;\n        }\n\n        caretDownDom.style.fill = ENABLED_CARET_COLOR;\n        curPageNumDom.innerText = currentPage;\n      }); // 下翻事件\n\n      caretDownDom.addEventListener('click', function () {\n        // it is the last page\n        if (li[li.length - 1].style.display === itemDisplay) return; // otherwise\n\n        var lastDisplayItemIdx = -1;\n        li.forEach(function (l, i) {\n          if (l.style.display === itemDisplay) {\n            lastDisplayItemIdx = i;\n            l.style.display = 'none';\n          }\n        });\n\n        for (var _i2 = lastDisplayItemIdx + 1; _i2 < li.length; _i2++) {\n          li[_i2].style.display = itemDisplay;\n          curHeight = li[_i2].offsetTop + li[_i2].offsetHeight;\n          li[_i2].style.display = 'none';\n          if (curHeight <= legengWrapperHeight) li[_i2].style.display = itemDisplay;else break;\n        } // change the page number\n\n\n        var currentPage = Number.parseInt(curPageNumDom.innerText, 10) + 1;\n\n        if (currentPage === pages) {\n          caretDownDom.style.fill = DISABLED_CARET_COLOR;\n        } else {\n          caretDownDom.style.fill = ENABLED_CARET_COLOR;\n        }\n\n        caretUpDom.style.fill = ENABLED_CARET_COLOR;\n        curPageNumDom.innerText = currentPage;\n      });\n      this.set('slipDom', slipDom);\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    var slipDom = this.get('slipDom');\n\n    if (slipDom && slipDom.parentNode) {\n      slipDom.parentNode.removeChild(slipDom);\n    }\n\n    _CatHtml.prototype.destroy.call(this);\n  };\n\n  return CatPageHtml;\n}(CatHtml);\n\nmodule.exports = CatPageHtml;"]}]}