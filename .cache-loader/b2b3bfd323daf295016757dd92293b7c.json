{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\component\\guide\\region-filter.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\component\\guide\\region-filter.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Util = require('../../util');\r\nvar Guide = require('@antv/component/lib/guide/base');\r\nvar _require = require('@antv/g/lib'), Path = _require.Path;\r\nvar RegionFilter = function (_Guide) {\r\n    _inheritsLoose(RegionFilter, _Guide);\r\n    function RegionFilter() {\r\n        return _Guide.apply(this, arguments) || this;\r\n    }\r\n    var _proto = RegionFilter.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Guide.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            name: 'regionFilter',\r\n            zIndex: 1,\r\n            top: true,\r\n            start: null,\r\n            end: null,\r\n            color: null,\r\n            apply: null,\r\n            style: {\r\n                opacity: 1\r\n            }\r\n        });\r\n    };\r\n    _proto.render = function render(coord, group, viewData, view) {\r\n        var self = this;\r\n        var layer = group.addGroup();\r\n        layer.name = 'guide-region-filter';\r\n        view.once('afterpaint', function () {\r\n            if (layer.get('destroyed'))\r\n                return;\r\n            self._drawShapes(view, layer);\r\n            var clip = self._drawClip(coord);\r\n            layer.attr({\r\n                clip: clip\r\n            });\r\n            self.set('clip', clip);\r\n            self.get('appendInfo') && layer.setSilent('appendInfo', self.get('appendInfo'));\r\n            self.set('el', layer);\r\n        });\r\n    };\r\n    _proto._drawShapes = function _drawShapes(view, layer) {\r\n        var self = this;\r\n        var output = [];\r\n        var geoms = view.getAllGeoms();\r\n        geoms.map(function (geom) {\r\n            var shapes = geom.getShapes();\r\n            var geomType = geom.get('type');\r\n            var filter = self._geomFilter(geomType);\r\n            if (filter) {\r\n                shapes.map(function (shape) {\r\n                    var shapeType = shape.type;\r\n                    var shapeAttr = Util.cloneDeep(shape.attr());\r\n                    self._adjustDisplay(shapeAttr);\r\n                    var s = layer.addShape(shapeType, {\r\n                        attrs: shapeAttr\r\n                    });\r\n                    output.push(s);\r\n                    return shape;\r\n                });\r\n            }\r\n            return geom;\r\n        });\r\n        return output;\r\n    };\r\n    _proto._drawClip = function _drawClip(coord) {\r\n        var self = this;\r\n        var start = self.parsePoint(coord, self.get('start'));\r\n        var end = self.parsePoint(coord, self.get('end'));\r\n        var path = [['M', start.x, start.y], ['L', end.x, start.y], ['L', end.x, end.y], ['L', start.x, end.y], ['z']];\r\n        var clip = new Path({\r\n            attrs: {\r\n                path: path,\r\n                opacity: 1\r\n            }\r\n        });\r\n        return clip;\r\n    };\r\n    _proto._adjustDisplay = function _adjustDisplay(attr) {\r\n        var self = this;\r\n        var color = self.get('color');\r\n        if (attr.fill) {\r\n            attr.fill = attr.fillStyle = color;\r\n        }\r\n        attr.stroke = attr.strokeStyle = color;\r\n    };\r\n    _proto._geomFilter = function _geomFilter(geomType) {\r\n        var self = this;\r\n        var apply = self.get('apply');\r\n        if (apply) {\r\n            return Util.contains(apply, geomType);\r\n        }\r\n        return true;\r\n    };\r\n    _proto.clear = function clear() {\r\n        _Guide.prototype.clear.call(this);\r\n        var clip = this.get('clip');\r\n        clip && clip.remove();\r\n    };\r\n    return RegionFilter;\r\n}(Guide);\r\nmodule.exports = RegionFilter;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\component\\guide\\region-filter.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\component\\guide\\region-filter.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../../util');\n\nvar Guide = require('@antv/component/lib/guide/base');\n\nvar _require = require('@antv/g/lib'),\n    Path = _require.Path;\n\nvar RegionFilter =\n/*#__PURE__*/\nfunction (_Guide) {\n  _inheritsLoose(RegionFilter, _Guide);\n\n  function RegionFilter() {\n    return _Guide.apply(this, arguments) || this;\n  }\n\n  var _proto = RegionFilter.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Guide.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      name: 'regionFilter',\n      zIndex: 1,\n      top: true,\n      start: null,\n      end: null,\n      color: null,\n      apply: null,\n      style: {\n        opacity: 1\n      }\n    });\n  };\n\n  _proto.render = function render(coord, group, viewData, view) {\n    var self = this;\n    var layer = group.addGroup();\n    layer.name = 'guide-region-filter';\n    view.once('afterpaint', function () {\n      // 2018-08-08 by blue.lb padding为auto时，会导致重新绘制一次，这时候layer已经被销毁了\n      if (layer.get('destroyed')) return;\n\n      self._drawShapes(view, layer);\n\n      var clip = self._drawClip(coord);\n\n      layer.attr({\n        clip: clip\n      });\n      self.set('clip', clip);\n      self.get('appendInfo') && layer.setSilent('appendInfo', self.get('appendInfo'));\n      self.set('el', layer);\n    });\n  };\n\n  _proto._drawShapes = function _drawShapes(view, layer) {\n    var self = this;\n    var output = [];\n    var geoms = view.getAllGeoms();\n    geoms.map(function (geom) {\n      var shapes = geom.getShapes();\n      var geomType = geom.get('type');\n\n      var filter = self._geomFilter(geomType);\n\n      if (filter) {\n        shapes.map(function (shape) {\n          var shapeType = shape.type; // const shapeAttr = Util.mix({}, shape.attr());\n\n          var shapeAttr = Util.cloneDeep(shape.attr());\n\n          self._adjustDisplay(shapeAttr);\n\n          var s = layer.addShape(shapeType, {\n            attrs: shapeAttr\n          });\n          output.push(s);\n          return shape;\n        });\n      }\n\n      return geom;\n    });\n    return output;\n  };\n\n  _proto._drawClip = function _drawClip(coord) {\n    var self = this;\n    var start = self.parsePoint(coord, self.get('start'));\n    var end = self.parsePoint(coord, self.get('end'));\n    var path = [['M', start.x, start.y], ['L', end.x, start.y], ['L', end.x, end.y], ['L', start.x, end.y], ['z']];\n    var clip = new Path({\n      attrs: {\n        path: path,\n        opacity: 1\n      }\n    });\n    return clip;\n  };\n\n  _proto._adjustDisplay = function _adjustDisplay(attr) {\n    var self = this;\n    var color = self.get('color');\n\n    if (attr.fill) {\n      attr.fill = attr.fillStyle = color;\n    }\n\n    attr.stroke = attr.strokeStyle = color;\n  };\n\n  _proto._geomFilter = function _geomFilter(geomType) {\n    var self = this;\n    var apply = self.get('apply');\n\n    if (apply) {\n      return Util.contains(apply, geomType);\n    }\n\n    return true;\n  };\n\n  _proto.clear = function clear() {\n    _Guide.prototype.clear.call(this);\n\n    var clip = this.get('clip');\n    clip && clip.remove();\n  };\n\n  return RegionFilter;\n}(Guide);\n\nmodule.exports = RegionFilter;"]}]}