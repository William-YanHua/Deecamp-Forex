{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\slider.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\slider.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { deepMix, get, isObject, size } from '@antv/util';\r\nimport { COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\r\nimport { Slider as SliderComponent } from '../../dependents';\r\nimport { BBox } from '../../util/bbox';\r\nimport { directionToPosition } from '../../util/direction';\r\nimport { isBetween, omit } from '../../util/helper';\r\nimport { Controller } from './base';\r\nvar Slider = (function (_super) {\r\n    __extends(Slider, _super);\r\n    function Slider(view) {\r\n        var _this = _super.call(this, view) || this;\r\n        _this.onValueChanged = function (v) {\r\n            var min = v[0], max = v[1];\r\n            _this.updateMinMaxText(min, max);\r\n            _this.view.render(true);\r\n        };\r\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Slider.prototype, \"name\", {\r\n        get: function () {\r\n            return 'slider';\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Slider.prototype.init = function () { };\r\n    Slider.prototype.render = function () {\r\n        this.option = this.view.getOptions().slider;\r\n        if (this.option) {\r\n            if (this.slider) {\r\n                this.slider = this.updateSlider();\r\n            }\r\n            else {\r\n                this.slider = this.createSlider();\r\n                this.slider.component.on('sliderchange', this.onValueChanged);\r\n            }\r\n            var min = this.slider.component.get('start') || 0;\r\n            var max = this.slider.component.get('end') || 1;\r\n            this.updateMinMaxText(min, max);\r\n        }\r\n        else {\r\n            if (this.slider) {\r\n                this.slider.component.destroy();\r\n                this.slider = undefined;\r\n            }\r\n            else {\r\n            }\r\n        }\r\n    };\r\n    Slider.prototype.layout = function () {\r\n        if (this.slider) {\r\n            var width = this.view.coordinateBBox.width;\r\n            var bboxObject = this.slider.component.getLayoutBBox();\r\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height);\r\n            var _a = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _a[0], y1 = _a[1];\r\n            var _b = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _b[0], y2 = _b[1];\r\n            this.slider.component.update({\r\n                x: x2,\r\n                y: y1,\r\n                width: width,\r\n            });\r\n        }\r\n    };\r\n    Slider.prototype.update = function () {\r\n        this.render();\r\n    };\r\n    Slider.prototype.createSlider = function () {\r\n        var cfg = this.getSliderCfg();\r\n        var component = new SliderComponent(__assign({ container: this.container }, cfg));\r\n        component.init();\r\n        return {\r\n            component: component,\r\n            layer: LAYER.FORE,\r\n            direction: DIRECTION.BOTTOM,\r\n            type: COMPONENT_TYPE.OTHER,\r\n        };\r\n    };\r\n    Slider.prototype.updateSlider = function () {\r\n        var cfg = this.getSliderCfg();\r\n        omit(cfg, ['x', 'y', 'width', 'start', 'end', 'minText', 'maxText']);\r\n        this.slider.component.update(cfg);\r\n        return this.slider;\r\n    };\r\n    Slider.prototype.getSliderCfg = function () {\r\n        if (isObject(this.option)) {\r\n            var trendCfg = __assign({ data: this.getData() }, get(this.option, 'trendCfg', {}));\r\n            var x = 0;\r\n            var y = 0;\r\n            var width = this.view.coordinateBBox.width;\r\n            var cfg = deepMix({}, { x: x, y: y, width: width }, this.option);\r\n            return __assign(__assign({}, cfg), { trendCfg: trendCfg });\r\n        }\r\n        return {};\r\n    };\r\n    Slider.prototype.getData = function () {\r\n        var data = this.view.getOptions().data;\r\n        var yScale = this.view.getYScales()[0];\r\n        return data.map(function (datum) { return datum[yScale.field] || 0; });\r\n    };\r\n    Slider.prototype.updateMinMaxText = function (min, max) {\r\n        var data = this.view.getOptions().data;\r\n        var dataSize = size(data);\r\n        var xScale = this.view.getXScale();\r\n        if (!xScale || !dataSize) {\r\n            return;\r\n        }\r\n        var x = xScale.field;\r\n        var xData = data.map(function (datum) { return datum[x] || ''; });\r\n        var minIndex = Math.floor(min * (dataSize - 1));\r\n        var maxIndex = Math.floor(max * (dataSize - 1));\r\n        var minText = get(xData, [minIndex]);\r\n        var maxText = get(xData, [maxIndex]);\r\n        var formatter = this.getSliderCfg().formatter;\r\n        if (formatter) {\r\n            minText = formatter(minText, data[minIndex], minIndex);\r\n            maxText = formatter(maxText, data[maxIndex], maxIndex);\r\n        }\r\n        this.slider.component.update({\r\n            minText: minText,\r\n            maxText: maxText,\r\n            start: min,\r\n            end: max,\r\n        });\r\n        this.view.filter(xScale.field, function (value, datum, idx) { return isBetween(idx, minIndex, maxIndex); });\r\n    };\r\n    Slider.prototype.getComponents = function () {\r\n        return this.slider ? [this.slider] : [];\r\n    };\r\n    return Slider;\r\n}(Controller));\r\nexport default Slider;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\slider.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\slider.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isObject, size } from '@antv/util';\nimport { COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { Slider as SliderComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { isBetween, omit } from '../../util/helper';\nimport { Controller } from './base';\n/**\n * @ignore\n * slider Controller\n */\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider(view) {\n        var _this = _super.call(this, view) || this;\n        /**\n         * 滑块滑动的时候出发\n         * @param v\n         */\n        _this.onValueChanged = function (v) {\n            var min = v[0], max = v[1];\n            _this.updateMinMaxText(min, max);\n            _this.view.render(true);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"name\", {\n        get: function () {\n            return 'slider';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * 初始化\n     */\n    Slider.prototype.init = function () { };\n    /**\n     * 渲染\n     */\n    Slider.prototype.render = function () {\n        this.option = this.view.getOptions().slider;\n        if (this.option) {\n            if (this.slider) {\n                // exist, update\n                this.slider = this.updateSlider();\n            }\n            else {\n                // not exist, create\n                this.slider = this.createSlider();\n                // 监听事件，绑定交互\n                this.slider.component.on('sliderchange', this.onValueChanged);\n            }\n            // changeData 的时候同样需要更新\n            // 设置初始的 text\n            var min = this.slider.component.get('start') || 0;\n            var max = this.slider.component.get('end') || 1;\n            this.updateMinMaxText(min, max);\n        }\n        else {\n            if (this.slider) {\n                // exist, destroy\n                this.slider.component.destroy();\n                this.slider = undefined;\n            }\n            else {\n                // do nothing\n            }\n        }\n    };\n    /**\n     * 布局\n     */\n    Slider.prototype.layout = function () {\n        if (this.slider) {\n            var width = this.view.coordinateBBox.width;\n            // 获取组件的 layout bbox\n            var bboxObject = this.slider.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height);\n            var _a = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _a[0], y1 = _a[1];\n            var _b = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _b[0], y2 = _b[1];\n            // 默认放在 bottom\n            this.slider.component.update({\n                x: x2,\n                y: y1,\n                width: width,\n            });\n        }\n    };\n    /**\n     * 更新\n     */\n    Slider.prototype.update = function () {\n        // 逻辑和 render 保持一致\n        this.render();\n    };\n    /**\n     * 创建 slider 组件\n     */\n    Slider.prototype.createSlider = function () {\n        var cfg = this.getSliderCfg();\n        // 添加 slider 组件\n        var component = new SliderComponent(__assign({ container: this.container }, cfg));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: DIRECTION.BOTTOM,\n            type: COMPONENT_TYPE.OTHER,\n        };\n    };\n    /**\n     * 更新配置\n     */\n    Slider.prototype.updateSlider = function () {\n        var cfg = this.getSliderCfg();\n        omit(cfg, ['x', 'y', 'width', 'start', 'end', 'minText', 'maxText']);\n        this.slider.component.update(cfg);\n        return this.slider;\n    };\n    /**\n     * 生成 slider 配置\n     */\n    Slider.prototype.getSliderCfg = function () {\n        if (isObject(this.option)) {\n            // 用户配置的数据，优先级更高\n            var trendCfg = __assign({ data: this.getData() }, get(this.option, 'trendCfg', {}));\n            // 初始的位置大小信息\n            var x = 0;\n            var y = 0;\n            var width = this.view.coordinateBBox.width;\n            // 因为有样式，所以深层覆盖\n            var cfg = deepMix({}, { x: x, y: y, width: width }, this.option);\n            // trendCfg 因为有数据数组，所以使用浅替换\n            return __assign(__assign({}, cfg), { trendCfg: trendCfg });\n        }\n        return {};\n    };\n    /**\n     * 从 view 中获取数据，缩略轴使用全量的数据\n     */\n    Slider.prototype.getData = function () {\n        var data = this.view.getOptions().data;\n        var yScale = this.view.getYScales()[0];\n        return data.map(function (datum) { return datum[yScale.field] || 0; });\n    };\n    Slider.prototype.updateMinMaxText = function (min, max) {\n        var data = this.view.getOptions().data;\n        var dataSize = size(data);\n        var xScale = this.view.getXScale();\n        if (!xScale || !dataSize) {\n            return;\n        }\n        var x = xScale.field;\n        // x 轴数据\n        var xData = data.map(function (datum) { return datum[x] || ''; });\n        var minIndex = Math.floor(min * (dataSize - 1));\n        var maxIndex = Math.floor(max * (dataSize - 1));\n        var minText = get(xData, [minIndex]);\n        var maxText = get(xData, [maxIndex]);\n        var formatter = this.getSliderCfg().formatter;\n        if (formatter) {\n            minText = formatter(minText, data[minIndex], minIndex);\n            maxText = formatter(maxText, data[maxIndex], maxIndex);\n        }\n        // 更新文本\n        this.slider.component.update({\n            minText: minText,\n            maxText: maxText,\n            start: min,\n            end: max,\n        });\n        // 增加 x 轴的过滤器\n        this.view.filter(xScale.field, function (value, datum, idx) { return isBetween(idx, minIndex, maxIndex); });\n    };\n    /**\n     * 覆写父类方法\n     */\n    Slider.prototype.getComponents = function () {\n        return this.slider ? [this.slider] : [];\n    };\n    return Slider;\n}(Controller));\nexport default Slider;\n//# sourceMappingURL=slider.js.map"]}]}