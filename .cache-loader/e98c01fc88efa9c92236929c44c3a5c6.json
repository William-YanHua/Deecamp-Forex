{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\description.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\description.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign } from \"tslib\";\r\nimport { assign, isArray, each, mix } from '@antv/util';\r\nimport { breakText } from '../util/common';\r\nimport BBox from '../util/bbox';\r\nvar TextDescription = (function () {\r\n    function TextDescription(cfg) {\r\n        this.position = 'top';\r\n        this.destroyed = false;\r\n        assign(this, cfg);\r\n        this.init();\r\n    }\r\n    TextDescription.prototype.getBBox = function () {\r\n        var _this = this;\r\n        if (this.shape) {\r\n            var bbox = this.shape.getBBox();\r\n            if (this.index === 0) {\r\n                return BBox.fromBBoxObject(bbox);\r\n            }\r\n            var padding_1 = this.plot.theme.description.padding;\r\n            if (isArray(padding_1)) {\r\n                each(padding_1, function (it, index) {\r\n                    if (typeof padding_1[index] === 'function') {\r\n                        padding_1[index] = padding_1[index](_this.plot.options.legend.position);\r\n                    }\r\n                });\r\n            }\r\n            return new BBox(bbox.maxX, bbox.minY, bbox.width, bbox.height);\r\n        }\r\n        return null;\r\n    };\r\n    TextDescription.prototype.clear = function () {\r\n        if (this.shape) {\r\n            this.shape.attr('text', '');\r\n        }\r\n    };\r\n    TextDescription.prototype.destroy = function () {\r\n        if (this.shape) {\r\n            this.shape.remove();\r\n        }\r\n        this.destroyed = true;\r\n    };\r\n    TextDescription.prototype.init = function () {\r\n        var content = this.textWrapper();\r\n        var _a = this.getPosition(), x = _a.x, y = _a.y;\r\n        this.shape = this.container.addShape('text', {\r\n            attrs: mix({\r\n                x: x,\r\n                y: y,\r\n                text: content,\r\n            }, this.style, {\r\n                textAlign: this.getTextAlign(),\r\n            }),\r\n        });\r\n        this.shape.name = this.name;\r\n    };\r\n    TextDescription.prototype.getPosition = function () {\r\n        if (this.alignTo === 'left') {\r\n            return { x: this.leftMargin, y: this.topMargin };\r\n        }\r\n        else if (this.alignTo === 'middle') {\r\n            return { x: this.leftMargin + this.wrapperWidth / 2, y: this.topMargin };\r\n        }\r\n        else {\r\n            return { x: this.rightMargin, y: this.topMargin };\r\n        }\r\n    };\r\n    TextDescription.prototype.getTextAlign = function () {\r\n        if (this.alignTo === 'left') {\r\n            return 'left';\r\n        }\r\n        else if (this.alignTo === 'middle') {\r\n            return 'center';\r\n        }\r\n        else {\r\n            return 'right';\r\n        }\r\n    };\r\n    TextDescription.prototype.textWrapper = function () {\r\n        var width = this.wrapperWidth;\r\n        var style = this.style;\r\n        var textContent = this.text;\r\n        var tShape = this.container.addShape('text', {\r\n            attrs: __assign({ text: '', x: 0, y: 0 }, style),\r\n        });\r\n        var textArr = textContent.split('\\n');\r\n        var wrappedTextArr = textArr.map(function (wrappedText) {\r\n            var text = '';\r\n            var chars = wrappedText.split('');\r\n            var breakIndex = [];\r\n            for (var i = 0; i < chars.length; i++) {\r\n                var item = chars[i];\r\n                tShape.attr('text', (text += item));\r\n                var currentWidth = tShape.getBBox().width - 1;\r\n                if (currentWidth > width) {\r\n                    if (i === 0) {\r\n                        break;\r\n                    }\r\n                    breakIndex.push(i);\r\n                    text = '';\r\n                }\r\n            }\r\n            return breakText(chars, breakIndex);\r\n        });\r\n        tShape.remove();\r\n        return wrappedTextArr.join('\\n');\r\n    };\r\n    return TextDescription;\r\n}());\r\nexport default TextDescription;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\description.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\description.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport { assign, isArray, each, mix } from '@antv/util';\nimport { breakText } from '../util/common';\nimport BBox from '../util/bbox';\n/**\n * 图表的文字描述，一般用于生成图表的标题和副标题\n */\nvar TextDescription = /** @class */ (function () {\n    function TextDescription(cfg) {\n        this.position = 'top';\n        this.destroyed = false;\n        assign(this, cfg);\n        this.init();\n    }\n    TextDescription.prototype.getBBox = function () {\n        var _this = this;\n        if (this.shape) {\n            // @ts-ignore\n            var bbox = this.shape.getBBox();\n            if (this.index === 0) {\n                return BBox.fromBBoxObject(bbox);\n            }\n            var padding_1 = this.plot.theme.description.padding;\n            if (isArray(padding_1)) {\n                each(padding_1, function (it, index) {\n                    if (typeof padding_1[index] === 'function') {\n                        padding_1[index] = padding_1[index](_this.plot.options.legend.position);\n                    }\n                });\n            }\n            return new BBox(bbox.maxX, bbox.minY, bbox.width, bbox.height);\n        }\n        return null;\n    };\n    TextDescription.prototype.clear = function () {\n        if (this.shape) {\n            // @ts-ignore\n            this.shape.attr('text', '');\n        }\n    };\n    TextDescription.prototype.destroy = function () {\n        if (this.shape) {\n            this.shape.remove();\n        }\n        this.destroyed = true;\n    };\n    TextDescription.prototype.init = function () {\n        var content = this.textWrapper();\n        var _a = this.getPosition(), x = _a.x, y = _a.y;\n        this.shape = this.container.addShape('text', {\n            attrs: mix({\n                x: x,\n                y: y,\n                text: content,\n            }, this.style, {\n                textAlign: this.getTextAlign(),\n            }),\n        });\n        // @ts-ignore\n        this.shape.name = this.name;\n    };\n    TextDescription.prototype.getPosition = function () {\n        if (this.alignTo === 'left') {\n            return { x: this.leftMargin, y: this.topMargin };\n        }\n        else if (this.alignTo === 'middle') {\n            return { x: this.leftMargin + this.wrapperWidth / 2, y: this.topMargin };\n        }\n        else {\n            return { x: this.rightMargin, y: this.topMargin };\n        }\n    };\n    TextDescription.prototype.getTextAlign = function () {\n        if (this.alignTo === 'left') {\n            return 'left';\n        }\n        else if (this.alignTo === 'middle') {\n            return 'center';\n        }\n        else {\n            return 'right';\n        }\n    };\n    /**\n     * 当text过长时，默认换行\n     * 1. 注意初始text带换行符的场景\n     */\n    TextDescription.prototype.textWrapper = function () {\n        var width = this.wrapperWidth;\n        var style = this.style;\n        var textContent = this.text;\n        var tShape = this.container.addShape('text', {\n            attrs: __assign({ text: '', x: 0, y: 0 }, style),\n        });\n        var textArr = textContent.split('\\n');\n        var wrappedTextArr = textArr.map(function (wrappedText) {\n            var text = '';\n            var chars = wrappedText.split('');\n            var breakIndex = [];\n            for (var i = 0; i < chars.length; i++) {\n                var item = chars[i];\n                tShape.attr('text', (text += item));\n                var currentWidth = tShape.getBBox().width - 1;\n                if (currentWidth > width) {\n                    // 如果是第一个字符就大于宽度不做任何换行处理\n                    if (i === 0) {\n                        break;\n                    }\n                    breakIndex.push(i);\n                    text = '';\n                }\n            }\n            return breakText(chars, breakIndex);\n        });\n        tShape.remove();\n        return wrappedTextArr.join('\\n');\n    };\n    return TextDescription;\n}());\nexport default TextDescription;\n//# sourceMappingURL=description.js.map"]}]}