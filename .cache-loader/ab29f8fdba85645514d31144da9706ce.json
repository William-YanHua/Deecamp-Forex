{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\guide\\base.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\guide\\base.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Util = require('../util');\r\nvar Helper = require('./util/helper');\r\nvar Component = require('../component');\r\nvar KEYWORDS = ['min', 'max', 'median', 'start', 'end'];\r\nvar Guide = function (_Component) {\r\n    _inheritsLoose(Guide, _Component);\r\n    function Guide() {\r\n        return _Component.apply(this, arguments) || this;\r\n    }\r\n    var _proto = Guide.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Component.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            xScales: null,\r\n            yScales: null,\r\n            el: null\r\n        });\r\n    };\r\n    _proto.render = function render() { };\r\n    _proto.clear = function clear() {\r\n        var self = this;\r\n        var el = self.get('el');\r\n        el && el.remove();\r\n    };\r\n    _proto.changeVisible = function changeVisible(visible) {\r\n        var self = this;\r\n        self.set('visible', visible);\r\n        var el = self.get('el');\r\n        if (!el)\r\n            return;\r\n        if (el.set) {\r\n            el.set('visible', visible);\r\n        }\r\n        else {\r\n            el.style.display = visible ? '' : 'none';\r\n        }\r\n    };\r\n    _proto.parsePoint = function parsePoint(coord, position) {\r\n        var self = this;\r\n        var xScales = self.get('xScales');\r\n        var yScales = self.get('yScales');\r\n        if (Util.isFunction(position)) {\r\n            position = position(xScales, yScales);\r\n        }\r\n        var x;\r\n        var y;\r\n        if (Util.isArray(position) && Util.isString(position[0]) && position[0].indexOf('%') !== -1) {\r\n            return this._parsePercentPoint(coord, position);\r\n        }\r\n        if (Util.isArray(position)) {\r\n            x = self._getNormalizedValue(position[0], Helper.getFirstScale(xScales));\r\n            y = self._getNormalizedValue(position[1], Helper.getFirstScale(yScales));\r\n        }\r\n        else {\r\n            for (var field in position) {\r\n                var value = position[field];\r\n                if (xScales[field]) {\r\n                    x = self._getNormalizedValue(value, xScales[field]);\r\n                }\r\n                if (yScales[field]) {\r\n                    y = self._getNormalizedValue(value, yScales[field], 'y');\r\n                }\r\n            }\r\n        }\r\n        if (!Util.isNil(x) && !Util.isNil(y)) {\r\n            return coord.convert({\r\n                x: x,\r\n                y: y\r\n            });\r\n        }\r\n    };\r\n    _proto._getNormalizedValue = function _getNormalizedValue(val, scale) {\r\n        var result;\r\n        if (Util.indexOf(KEYWORDS, val) !== -1) {\r\n            var scaleValue;\r\n            if (val === 'start') {\r\n                result = 0;\r\n            }\r\n            else if (val === 'end') {\r\n                result = 1;\r\n            }\r\n            else if (val === 'median') {\r\n                scaleValue = scale.isCategory ? (scale.values.length - 1) / 2 : (scale.min + scale.max) / 2;\r\n                result = scale.scale(scaleValue);\r\n            }\r\n            else {\r\n                if (scale.isCategory) {\r\n                    scaleValue = val === 'min' ? 0 : scale.values.length - 1;\r\n                }\r\n                else {\r\n                    scaleValue = scale[val];\r\n                }\r\n                result = scale.scale(scaleValue);\r\n            }\r\n        }\r\n        else {\r\n            result = scale.scale(val);\r\n        }\r\n        return result;\r\n    };\r\n    _proto._parsePercentPoint = function _parsePercentPoint(coord, position) {\r\n        var xPercent = parseFloat(position[0]) / 100;\r\n        var yPercent = parseFloat(position[1]) / 100;\r\n        var start = coord.start, end = coord.end;\r\n        var topLeft = {\r\n            x: Math.min(start.x, end.x),\r\n            y: Math.min(start.y, end.y)\r\n        };\r\n        var x = coord.width * xPercent + topLeft.x;\r\n        var y = coord.height * yPercent + topLeft.y;\r\n        return {\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    return Guide;\r\n}(Component);\r\nmodule.exports = Guide;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\guide\\base.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\guide\\base.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Helper = require('./util/helper');\n\nvar Component = require('../component');\n\nvar KEYWORDS = ['min', 'max', 'median', 'start', 'end'];\n\nvar Guide =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Guide, _Component);\n\n  function Guide() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Guide.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Component.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      xScales: null,\n      yScales: null,\n      el: null\n    });\n  };\n\n  _proto.render = function render() {};\n  /**\n   * clear container\n   * @override\n   */\n\n\n  _proto.clear = function clear() {\n    var self = this;\n    var el = self.get('el');\n    el && el.remove();\n  };\n  /**\n   * show or hide\n   * @protected\n   * @param {Boolean} visible true means show, false means hide\n   */\n\n\n  _proto.changeVisible = function changeVisible(visible) {\n    var self = this;\n    self.set('visible', visible);\n    var el = self.get('el');\n    if (!el) return;\n\n    if (el.set) {\n      el.set('visible', visible);\n    } else {\n      el.style.display = visible ? '' : 'none';\n    }\n  };\n  /**\n   * calculate the canvas coordinate value\n   * @protected\n   * @param  {Coordinate} coord  the instance of Coordinate class\n   * @param  {Object | Array | Function} position the value need to convert\n   * @return {Object} return the result\n   */\n\n\n  _proto.parsePoint = function parsePoint(coord, position) {\n    var self = this;\n    var xScales = self.get('xScales');\n    var yScales = self.get('yScales');\n\n    if (Util.isFunction(position)) {\n      position = position(xScales, yScales);\n    }\n\n    var x;\n    var y; // 如果数据格式是 ['50%', '50%'] 的格式\n\n    if (Util.isArray(position) && Util.isString(position[0]) && position[0].indexOf('%') !== -1) {\n      return this._parsePercentPoint(coord, position);\n    }\n\n    if (Util.isArray(position)) {\n      // Array，suuport for mixing of keyword, percent and value\n      x = self._getNormalizedValue(position[0], Helper.getFirstScale(xScales));\n      y = self._getNormalizedValue(position[1], Helper.getFirstScale(yScales));\n    } else {\n      for (var field in position) {\n        var value = position[field];\n\n        if (xScales[field]) {\n          x = self._getNormalizedValue(value, xScales[field]);\n        }\n\n        if (yScales[field]) {\n          y = self._getNormalizedValue(value, yScales[field], 'y');\n        }\n      }\n    }\n\n    if (!Util.isNil(x) && !Util.isNil(y)) {\n      return coord.convert({\n        x: x,\n        y: y\n      });\n    }\n  };\n  /**\n   * Normalized the value\n   * @param  {String | Number} val   param\n   * @param  {Scale} scale the instance of Scale\n   * @return {Number}       return the normalized value\n   */\n\n\n  _proto._getNormalizedValue = function _getNormalizedValue(val, scale) {\n    var result;\n\n    if (Util.indexOf(KEYWORDS, val) !== -1) {\n      // keyword\n      var scaleValue;\n\n      if (val === 'start') {\n        // the start of coordinate\n        result = 0;\n      } else if (val === 'end') {\n        result = 1;\n      } else if (val === 'median') {\n        scaleValue = scale.isCategory ? (scale.values.length - 1) / 2 : (scale.min + scale.max) / 2;\n        result = scale.scale(scaleValue);\n      } else {\n        if (scale.isCategory) {\n          scaleValue = val === 'min' ? 0 : scale.values.length - 1;\n        } else {\n          scaleValue = scale[val];\n        }\n\n        result = scale.scale(scaleValue);\n      }\n    } else {\n      // 数值\n      result = scale.scale(val);\n    }\n\n    return result;\n  };\n\n  _proto._parsePercentPoint = function _parsePercentPoint(coord, position) {\n    var xPercent = parseFloat(position[0]) / 100;\n    var yPercent = parseFloat(position[1]) / 100;\n    var start = coord.start,\n        end = coord.end;\n    var topLeft = {\n      x: Math.min(start.x, end.x),\n      y: Math.min(start.y, end.y)\n    };\n    var x = coord.width * xPercent + topLeft.x;\n    var y = coord.height * yPercent + topLeft.y;\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  return Guide;\n}(Component);\n\nmodule.exports = Guide;"]}]}