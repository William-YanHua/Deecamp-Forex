{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip-indicator.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip-indicator.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { clamp, deepMix } from '@antv/util';\r\nimport BaseComponent from './base';\r\nimport { GM, Wheel } from '../dependents';\r\nimport { translate, move } from '../util/g-util';\r\nimport { getEllipsisText } from '../util/text';\r\nimport BBox from '../util/bbox';\r\nexport var ELEMENT_NAMES;\r\n(function (ELEMENT_NAMES) {\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_INNER\"] = \"tooltip_indicator-inner\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_TITLE\"] = \"tooltip_indicator-title\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_BODY\"] = \"tooltip_indicator-body\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_GROUP\"] = \"tooltip_indicator-item-group\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_BACKGROUND\"] = \"tooltip_indicator-item-background\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_LINE\"] = \"tooltip_indicator-item-line\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_TITLE\"] = \"tooltip_indicator-item-title\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_BODY\"] = \"tooltip_indicator-item-body\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_VALUE_GROUP\"] = \"tooltip_indicator-item-value-group\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_NAME\"] = \"tooltip_indicator-item-name\";\r\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_VALUE\"] = \"tooltip_indicator-item-value\";\r\n})(ELEMENT_NAMES || (ELEMENT_NAMES = {}));\r\nexport var EVENTS;\r\n(function (EVENTS) {\r\n    EVENTS[\"ON_SELECT_ITEM\"] = \"onSelectItem\";\r\n})(EVENTS || (EVENTS = {}));\r\nvar PADDING;\r\n(function (PADDING) {\r\n    PADDING[PADDING[\"LARGE\"] = 12] = \"LARGE\";\r\n    PADDING[PADDING[\"NORMAL\"] = 8] = \"NORMAL\";\r\n    PADDING[PADDING[\"SMALL\"] = 4] = \"SMALL\";\r\n})(PADDING || (PADDING = {}));\r\nvar MAX_ITEM_TITLE_WIDTH = 160;\r\nvar TooltipIndicator = (function (_super) {\r\n    __extends(TooltipIndicator, _super);\r\n    function TooltipIndicator() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.curX = 0;\r\n        _this.curY = 0;\r\n        _this.offsetX = 0;\r\n        _this.scrollWidth = 0;\r\n        _this.onBodyGroupMousemove = function (evt) {\r\n            var itemGroup = findTargetAncestor(evt.target, function (target) { return target.get('name') === ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP; });\r\n            if (itemGroup) {\r\n                var itemData = itemGroup.get('delegateObject');\r\n                _this.doSelectItem(itemData.item.id);\r\n            }\r\n        };\r\n        _this.onWheel = function (evt) {\r\n            var _a = _this.config.width, width = _a === void 0 ? 0 : _a;\r\n            var deltaX = evt.deltaX;\r\n            var offsetMin = Math.min(_this.scrollWidth - width, 0) - (_this.scrollWidth / 2 + Math.max(0, (_this.scrollWidth - width) / 2));\r\n            var offsetMax = Math.max(_this.scrollWidth - width, 0) + _this.scrollWidth / 2 + Math.max(0, (_this.scrollWidth - width) / 2);\r\n            var newOffsetX = clamp(_this.offsetX + deltaX, offsetMin, offsetMax);\r\n            if (newOffsetX !== _this.offsetX) {\r\n                translate(_this.bodyGroup, _this.offsetX - newOffsetX, 0);\r\n                _this.offsetX = newOffsetX;\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    TooltipIndicator.prototype.destroy = function () {\r\n        this.offEvents();\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    TooltipIndicator.prototype.selectItem = function (id) {\r\n        this.doSelectItem(id);\r\n    };\r\n    TooltipIndicator.prototype.resetSelect = function () {\r\n        this.doSelectItem(this.selectedItemId);\r\n    };\r\n    TooltipIndicator.prototype.initConfig = function (config) {\r\n        var _a;\r\n        var _b = config.theme, theme = _b === void 0 ? {} : _b;\r\n        var defaultCfg = {\r\n            x: 0,\r\n            y: 0,\r\n            title: {\r\n                text: '',\r\n                spacingY: PADDING.NORMAL,\r\n                style: {},\r\n            },\r\n            line: {\r\n                spacingX: PADDING.SMALL,\r\n                width: 2,\r\n                style: {},\r\n            },\r\n            itemTitle: {\r\n                spacingX: 0,\r\n                spacingY: PADDING.SMALL,\r\n                style: {},\r\n            },\r\n            itemName: {\r\n                spacingX: PADDING.NORMAL,\r\n                spacingY: PADDING.SMALL,\r\n                style: {},\r\n            },\r\n            itemValue: {\r\n                style: {},\r\n            },\r\n            itemBackground: {\r\n                style: {\r\n                    opacity: 0,\r\n                    fill: '#000',\r\n                },\r\n            },\r\n            itemSpacing: PADDING.LARGE,\r\n        };\r\n        this.config = deepMix({}, (_a = theme === null || theme === void 0 ? void 0 : theme.components) === null || _a === void 0 ? void 0 : _a.tooltipIndicator, defaultCfg, config);\r\n        this.selectedItemId = this.config.selectedItem;\r\n    };\r\n    TooltipIndicator.prototype.renderInner = function (group) {\r\n        var _this = this;\r\n        this.resetRender();\r\n        var _a = this.config, items = _a.items, x = _a.x, y = _a.y;\r\n        var itemGroups = [];\r\n        var innerGroup = group.addGroup({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_INNER,\r\n        });\r\n        this.renderTitle(innerGroup);\r\n        this.bodyGroup = innerGroup.addGroup({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_BODY,\r\n        });\r\n        items === null || items === void 0 ? void 0 : items.forEach(function (item, index) {\r\n            itemGroups.push(_this.renderItem(_this.bodyGroup, item, index));\r\n        });\r\n        this.layoutItems(innerGroup);\r\n        move(innerGroup, x, y);\r\n        this.applyClip(group);\r\n        this.bindEvents(innerGroup);\r\n    };\r\n    TooltipIndicator.prototype.renderTitle = function (group) {\r\n        var title = this.config.title;\r\n        if (title === null || title === void 0 ? void 0 : title.text) {\r\n            var shape = group.addShape({\r\n                type: 'text',\r\n                name: ELEMENT_NAMES.TOOLTIP_INDICATOR_TITLE,\r\n                attrs: __assign({ text: title === null || title === void 0 ? void 0 : title.text, textAlign: 'left', textBaseline: 'top' }, ((title === null || title === void 0 ? void 0 : title.style) || {})),\r\n            });\r\n            var bbox = shape.getBBox();\r\n            this.curY += bbox.height;\r\n            this.curY += title.spacingY || 0;\r\n            return shape;\r\n        }\r\n    };\r\n    TooltipIndicator.prototype.renderItem = function (group, item, index) {\r\n        var itemBackground = this.config.itemBackground;\r\n        var itemGroup = group.addGroup({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP,\r\n            delegateObject: {\r\n                item: item,\r\n                index: index,\r\n            },\r\n        });\r\n        var oldX = this.curX;\r\n        var oldY = this.curY;\r\n        var background = itemGroup.addShape({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_BACKGROUND,\r\n            type: 'rect',\r\n            attrs: __assign({ x: this.curX, y: this.curY, width: 1, height: 1 }, (itemBackground.style || {})),\r\n        });\r\n        var line = this.renderLine(itemGroup, item);\r\n        this.renderItemTitle(itemGroup, item);\r\n        this.renderItemValues(itemGroup, item);\r\n        var itemGroupBBox = itemGroup.getBBox();\r\n        line.attr({\r\n            y2: line.attr('y1') + itemGroupBBox.height,\r\n        });\r\n        this.curX = oldX + itemGroupBBox.width;\r\n        this.curX += this.config.itemSpacing || 0;\r\n        background.attr({\r\n            width: this.curX - oldX - background.attr('lineWidth') * 2,\r\n            height: this.curY - oldY - background.attr('lineWidth') * 2,\r\n        });\r\n        this.curY = oldY;\r\n        return itemGroup;\r\n    };\r\n    TooltipIndicator.prototype.renderLine = function (group, item) {\r\n        var line = this.config.line;\r\n        var width = line.width || 2;\r\n        var attrs = __assign({ x1: this.curX + width / 2, y1: this.curY, x2: this.curX + width / 2, y2: this.curY, lineWidth: width, stroke: item.color }, ((line === null || line === void 0 ? void 0 : line.style) || {}));\r\n        var shape = group.addShape({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_LINE,\r\n            type: 'line',\r\n            attrs: attrs,\r\n        });\r\n        var bbox = shape.getBBox();\r\n        this.curX += bbox.width;\r\n        this.curX += line.spacingX || 0;\r\n        return shape;\r\n    };\r\n    TooltipIndicator.prototype.renderItemTitle = function (group, item) {\r\n        var itemTitle = this.config.itemTitle;\r\n        var text = getEllipsisText(item.title, MAX_ITEM_TITLE_WIDTH, itemTitle.style || {});\r\n        var shape = group.addShape({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_TITLE,\r\n            type: 'text',\r\n            attrs: __assign({ x: this.curX, y: this.curY, textAlign: 'left', textBaseline: 'top', text: text }, (itemTitle.style || {})),\r\n        });\r\n        var bbox = shape.getBBox();\r\n        this.curY += bbox.height;\r\n        this.curY += itemTitle.spacingY || 0;\r\n        return shape;\r\n    };\r\n    TooltipIndicator.prototype.renderItemValues = function (group, item) {\r\n        var _this = this;\r\n        var _a;\r\n        var itemBodyGroup = group.addGroup({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_BODY,\r\n        });\r\n        var oldX = this.curX;\r\n        (_a = item.values) === null || _a === void 0 ? void 0 : _a.forEach(function (value, valueIndex) {\r\n            var valueGroup = itemBodyGroup.addGroup({\r\n                name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP,\r\n                delegateObject: {\r\n                    item: item,\r\n                    valueIndex: valueIndex,\r\n                },\r\n            });\r\n            _this.curX = oldX;\r\n            _this.renderItemValueName(valueGroup, value);\r\n            _this.renderItemValueValue(valueGroup, value);\r\n        });\r\n        this.layoutItemValues(itemBodyGroup);\r\n        return itemBodyGroup;\r\n    };\r\n    TooltipIndicator.prototype.renderItemValueName = function (group, value) {\r\n        var itemName = this.config.itemName;\r\n        if (value.name) {\r\n            var shape = group.addShape({\r\n                name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_NAME,\r\n                type: 'text',\r\n                attrs: __assign({ x: this.curX, y: this.curY, textAlign: 'left', textBaseline: 'top', text: value.name }, (itemName.style || {})),\r\n            });\r\n            var bbox = shape.getBBox();\r\n            if (value.wrapLine) {\r\n                this.curY += bbox.height;\r\n                this.curY += itemName.spacingY || 0;\r\n            }\r\n            else {\r\n                this.curX += bbox.width;\r\n                this.curX += itemName.spacingX || 0;\r\n            }\r\n            return shape;\r\n        }\r\n    };\r\n    TooltipIndicator.prototype.renderItemValueValue = function (group, value) {\r\n        var _a = this.config, itemName = _a.itemName, itemValue = _a.itemValue;\r\n        var shape = group.addShape({\r\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE,\r\n            type: 'text',\r\n            attrs: __assign({ x: this.curX, y: this.curY, textAlign: 'left', textBaseline: 'top', text: value.value }, (itemValue.style || {})),\r\n        });\r\n        var bbox = shape.getBBox();\r\n        this.curY += bbox.height;\r\n        this.curY += itemName.spacingY || 0;\r\n        return shape;\r\n    };\r\n    TooltipIndicator.prototype.layoutItems = function (group) {\r\n        var bodyGroup = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_BODY)[0];\r\n        var itemGroups = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP);\r\n        if (!bodyGroup || itemGroups.length === 0) {\r\n            return;\r\n        }\r\n        var bodyGroupBBox = bodyGroup.getBBox();\r\n        this.scrollWidth = bodyGroupBBox.width;\r\n    };\r\n    TooltipIndicator.prototype.layoutItemValues = function (group) {\r\n        var valueGroups = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP);\r\n        var valueGroupBBoxes = valueGroups.map(function (item) { return BBox.fromBBoxObject(item.getBBox()); });\r\n        var valueShapes = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE);\r\n        var valueShapeBBoxes = valueShapes.map(function (shape) { return BBox.fromBBoxObject(shape.getBBox()); });\r\n        var maxX = Math.max.apply(Math, valueShapeBBoxes.map(function (bbox) { return bbox.maxX; }));\r\n        valueGroups.forEach(function (valueGroup, index) {\r\n            var bbox = valueGroupBBoxes[index];\r\n            var nameShape = valueGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_NAME)[0];\r\n            var valueShape = valueGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE)[0];\r\n            if (nameShape && valueShape) {\r\n                var nameShapeBBox = BBox.fromBBoxObject(nameShape.getBBox());\r\n                var valueShapeBBox = BBox.fromBBoxObject(valueShape.getBBox());\r\n                if (nameShapeBBox.height < bbox.height) {\r\n                    nameShape.attr('y', nameShape.attr('y') + (bbox.height - nameShapeBBox.height) / 2);\r\n                }\r\n                if (valueShapeBBox.height < bbox.height) {\r\n                    valueShape.attr('y', valueShape.attr('y') + (bbox.height - valueShapeBBox.height) / 2);\r\n                }\r\n                if (valueShapeBBox.maxX < maxX) {\r\n                    valueShape.attr('x', valueShape.attr('x') + maxX - valueShapeBBox.maxX);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    TooltipIndicator.prototype.applyClip = function (group) {\r\n        var _a = this.config, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n        var bbox = group.getBBox();\r\n        if (width || height) {\r\n            group.setClip({\r\n                type: 'rect',\r\n                attrs: {\r\n                    x: x,\r\n                    y: y,\r\n                    width: width || bbox.width,\r\n                    height: height || bbox.height,\r\n                },\r\n            });\r\n        }\r\n    };\r\n    TooltipIndicator.prototype.doSelectItem = function (id) {\r\n        var _this = this;\r\n        var group = this.getGroup();\r\n        var itemGroups = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP);\r\n        if (id !== this.selectedItemId) {\r\n            itemGroups.forEach(function (itemGroup) {\r\n                var curItemData = itemGroup.get('delegateObject');\r\n                if (curItemData) {\r\n                    _this.applyItemStyle(itemGroup, curItemData.item.id === id ? 'selected' : 'inactive');\r\n                }\r\n            });\r\n            this.selectedItemId = id;\r\n        }\r\n        else {\r\n            itemGroups.forEach(function (itemGroup) {\r\n                _this.applyItemStyle(itemGroup);\r\n            });\r\n            this.selectedItemId = undefined;\r\n        }\r\n        this.emit(EVENTS.ON_SELECT_ITEM, this.selectedItemId);\r\n    };\r\n    TooltipIndicator.prototype.applyItemStyle = function (itemGroup, state) {\r\n        var _a = this.config, line = _a.line, itemTitle = _a.itemTitle, itemName = _a.itemName, itemValue = _a.itemValue;\r\n        var lineShape = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_LINE)[0];\r\n        var titleShape = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_TITLE)[0];\r\n        var itemNameShapes = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_NAME);\r\n        var itemValueShapes = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE);\r\n        var styleName = state && state + \"Style\";\r\n        if (lineShape) {\r\n            lineShape.attr(line.style);\r\n            lineShape.attr(line[styleName] || {});\r\n        }\r\n        if (titleShape) {\r\n            titleShape.attr(itemTitle.style);\r\n            titleShape.attr(itemTitle[styleName] || {});\r\n        }\r\n        itemNameShapes.forEach(function (itemNameShape) {\r\n            itemNameShape.attr(itemName.style);\r\n            itemNameShape.attr(itemName[styleName] || {});\r\n        });\r\n        itemValueShapes.forEach(function (itemValueShape) {\r\n            itemValueShape.attr(itemValue.style);\r\n            itemValueShape.attr(itemValue[styleName] || {});\r\n        });\r\n    };\r\n    TooltipIndicator.prototype.bindEvents = function (group) {\r\n        var _this = this;\r\n        this.offEvents();\r\n        var bodyGroup = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_BODY)[0];\r\n        bodyGroup.on('mousemove', this.onBodyGroupMousemove);\r\n        this.addDisposable(function () {\r\n            bodyGroup.off('mousemove', _this.onBodyGroupMousemove);\r\n        });\r\n        this.gm = new GM(bodyGroup);\r\n        this.wheel = new Wheel(bodyGroup);\r\n        this.wheel.on('wheel', this.onWheel);\r\n    };\r\n    TooltipIndicator.prototype.offEvents = function () {\r\n        if (this.gm) {\r\n            this.gm.destroy();\r\n        }\r\n        if (this.wheel) {\r\n            this.wheel.destroy();\r\n        }\r\n    };\r\n    TooltipIndicator.prototype.resetRender = function () {\r\n        this.curX = 0;\r\n        this.curY = 0;\r\n        this.offsetX = 0;\r\n    };\r\n    return TooltipIndicator;\r\n}(BaseComponent));\r\nexport default TooltipIndicator;\r\nfunction findTargetAncestor(element, predicate) {\r\n    var cur = element;\r\n    while (cur) {\r\n        if (predicate(cur)) {\r\n            return cur;\r\n        }\r\n        cur = cur.getParent();\r\n    }\r\n}\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip-indicator.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip-indicator.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { clamp, deepMix } from '@antv/util';\nimport BaseComponent from './base';\nimport { GM, Wheel } from '../dependents';\nimport { translate, move } from '../util/g-util';\nimport { getEllipsisText } from '../util/text';\nimport BBox from '../util/bbox';\nexport var ELEMENT_NAMES;\n(function (ELEMENT_NAMES) {\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_INNER\"] = \"tooltip_indicator-inner\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_TITLE\"] = \"tooltip_indicator-title\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_BODY\"] = \"tooltip_indicator-body\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_GROUP\"] = \"tooltip_indicator-item-group\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_BACKGROUND\"] = \"tooltip_indicator-item-background\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_LINE\"] = \"tooltip_indicator-item-line\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_TITLE\"] = \"tooltip_indicator-item-title\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_BODY\"] = \"tooltip_indicator-item-body\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_VALUE_GROUP\"] = \"tooltip_indicator-item-value-group\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_NAME\"] = \"tooltip_indicator-item-name\";\n    ELEMENT_NAMES[\"TOOLTIP_INDICATOR_ITEM_VALUE\"] = \"tooltip_indicator-item-value\";\n})(ELEMENT_NAMES || (ELEMENT_NAMES = {}));\nexport var EVENTS;\n(function (EVENTS) {\n    EVENTS[\"ON_SELECT_ITEM\"] = \"onSelectItem\";\n})(EVENTS || (EVENTS = {}));\nvar PADDING;\n(function (PADDING) {\n    PADDING[PADDING[\"LARGE\"] = 12] = \"LARGE\";\n    PADDING[PADDING[\"NORMAL\"] = 8] = \"NORMAL\";\n    PADDING[PADDING[\"SMALL\"] = 4] = \"SMALL\";\n})(PADDING || (PADDING = {}));\nvar MAX_ITEM_TITLE_WIDTH = 160;\n/** 指标卡图例组件 */\nvar TooltipIndicator = /** @class */ (function (_super) {\n    __extends(TooltipIndicator, _super);\n    function TooltipIndicator() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.curX = 0;\n        _this.curY = 0;\n        _this.offsetX = 0;\n        _this.scrollWidth = 0;\n        _this.onBodyGroupMousemove = function (evt) {\n            var itemGroup = findTargetAncestor(evt.target, function (target) { return target.get('name') === ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP; });\n            if (itemGroup) {\n                var itemData = itemGroup.get('delegateObject');\n                _this.doSelectItem(itemData.item.id);\n            }\n        };\n        _this.onWheel = function (evt) {\n            var _a = _this.config.width, width = _a === void 0 ? 0 : _a;\n            var deltaX = evt.deltaX;\n            var offsetMin = Math.min(_this.scrollWidth - width, 0) - (_this.scrollWidth / 2 + Math.max(0, (_this.scrollWidth - width) / 2));\n            var offsetMax = Math.max(_this.scrollWidth - width, 0) + _this.scrollWidth / 2 + Math.max(0, (_this.scrollWidth - width) / 2);\n            var newOffsetX = clamp(_this.offsetX + deltaX, offsetMin, offsetMax);\n            if (newOffsetX !== _this.offsetX) {\n                translate(_this.bodyGroup, _this.offsetX - newOffsetX, 0);\n                _this.offsetX = newOffsetX;\n            }\n        };\n        return _this;\n    }\n    TooltipIndicator.prototype.destroy = function () {\n        this.offEvents();\n        _super.prototype.destroy.call(this);\n    };\n    /** 选中某一项 */\n    TooltipIndicator.prototype.selectItem = function (id) {\n        this.doSelectItem(id);\n    };\n    /** 重置选中状态 */\n    TooltipIndicator.prototype.resetSelect = function () {\n        this.doSelectItem(this.selectedItemId);\n    };\n    TooltipIndicator.prototype.initConfig = function (config) {\n        var _a;\n        var _b = config.theme, theme = _b === void 0 ? {} : _b;\n        var defaultCfg = {\n            x: 0,\n            y: 0,\n            title: {\n                text: '',\n                spacingY: PADDING.NORMAL,\n                style: {},\n            },\n            line: {\n                spacingX: PADDING.SMALL,\n                width: 2,\n                style: {},\n            },\n            itemTitle: {\n                spacingX: 0,\n                spacingY: PADDING.SMALL,\n                style: {},\n            },\n            itemName: {\n                spacingX: PADDING.NORMAL,\n                spacingY: PADDING.SMALL,\n                style: {},\n            },\n            itemValue: {\n                style: {},\n            },\n            itemBackground: {\n                style: {\n                    opacity: 0,\n                    fill: '#000',\n                },\n            },\n            itemSpacing: PADDING.LARGE,\n        };\n        this.config = deepMix({}, (_a = theme === null || theme === void 0 ? void 0 : theme.components) === null || _a === void 0 ? void 0 : _a.tooltipIndicator, defaultCfg, config);\n        this.selectedItemId = this.config.selectedItem;\n    };\n    TooltipIndicator.prototype.renderInner = function (group) {\n        var _this = this;\n        this.resetRender();\n        var _a = this.config, items = _a.items, x = _a.x, y = _a.y;\n        var itemGroups = [];\n        var innerGroup = group.addGroup({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_INNER,\n        });\n        this.renderTitle(innerGroup);\n        this.bodyGroup = innerGroup.addGroup({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_BODY,\n        });\n        items === null || items === void 0 ? void 0 : items.forEach(function (item, index) {\n            itemGroups.push(_this.renderItem(_this.bodyGroup, item, index));\n        });\n        this.layoutItems(innerGroup);\n        move(innerGroup, x, y);\n        this.applyClip(group);\n        this.bindEvents(innerGroup);\n    };\n    TooltipIndicator.prototype.renderTitle = function (group) {\n        var title = this.config.title;\n        if (title === null || title === void 0 ? void 0 : title.text) {\n            var shape = group.addShape({\n                type: 'text',\n                name: ELEMENT_NAMES.TOOLTIP_INDICATOR_TITLE,\n                attrs: __assign({ text: title === null || title === void 0 ? void 0 : title.text, textAlign: 'left', textBaseline: 'top' }, ((title === null || title === void 0 ? void 0 : title.style) || {})),\n            });\n            var bbox = shape.getBBox();\n            this.curY += bbox.height;\n            this.curY += title.spacingY || 0;\n            return shape;\n        }\n    };\n    TooltipIndicator.prototype.renderItem = function (group, item, index) {\n        var itemBackground = this.config.itemBackground;\n        var itemGroup = group.addGroup({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP,\n            delegateObject: {\n                item: item,\n                index: index,\n            },\n        });\n        var oldX = this.curX;\n        var oldY = this.curY;\n        var background = itemGroup.addShape({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_BACKGROUND,\n            type: 'rect',\n            attrs: __assign({ x: this.curX, y: this.curY, width: 1, height: 1 }, (itemBackground.style || {})),\n        });\n        var line = this.renderLine(itemGroup, item);\n        this.renderItemTitle(itemGroup, item);\n        this.renderItemValues(itemGroup, item);\n        var itemGroupBBox = itemGroup.getBBox();\n        // update line height\n        line.attr({\n            y2: line.attr('y1') + itemGroupBBox.height,\n        });\n        // spacing\n        this.curX = oldX + itemGroupBBox.width;\n        this.curX += this.config.itemSpacing || 0;\n        // update background\n        background.attr({\n            width: this.curX - oldX - background.attr('lineWidth') * 2,\n            height: this.curY - oldY - background.attr('lineWidth') * 2,\n        });\n        // reset Y\n        this.curY = oldY;\n        return itemGroup;\n    };\n    TooltipIndicator.prototype.renderLine = function (group, item) {\n        var line = this.config.line;\n        var width = line.width || 2;\n        var attrs = __assign({ x1: this.curX + width / 2, y1: this.curY, x2: this.curX + width / 2, y2: this.curY, lineWidth: width, stroke: item.color }, ((line === null || line === void 0 ? void 0 : line.style) || {}));\n        var shape = group.addShape({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_LINE,\n            type: 'line',\n            attrs: attrs,\n        });\n        var bbox = shape.getBBox();\n        this.curX += bbox.width;\n        this.curX += line.spacingX || 0;\n        return shape;\n    };\n    TooltipIndicator.prototype.renderItemTitle = function (group, item) {\n        var itemTitle = this.config.itemTitle;\n        var text = getEllipsisText(item.title, MAX_ITEM_TITLE_WIDTH, itemTitle.style || {});\n        var shape = group.addShape({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_TITLE,\n            type: 'text',\n            attrs: __assign({ x: this.curX, y: this.curY, textAlign: 'left', textBaseline: 'top', text: text }, (itemTitle.style || {})),\n        });\n        var bbox = shape.getBBox();\n        this.curY += bbox.height;\n        this.curY += itemTitle.spacingY || 0;\n        return shape;\n    };\n    TooltipIndicator.prototype.renderItemValues = function (group, item) {\n        var _this = this;\n        var _a;\n        var itemBodyGroup = group.addGroup({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_BODY,\n        });\n        var oldX = this.curX;\n        (_a = item.values) === null || _a === void 0 ? void 0 : _a.forEach(function (value, valueIndex) {\n            var valueGroup = itemBodyGroup.addGroup({\n                name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP,\n                delegateObject: {\n                    item: item,\n                    valueIndex: valueIndex,\n                },\n            });\n            // reset x\n            _this.curX = oldX;\n            _this.renderItemValueName(valueGroup, value);\n            _this.renderItemValueValue(valueGroup, value);\n        });\n        this.layoutItemValues(itemBodyGroup);\n        return itemBodyGroup;\n    };\n    TooltipIndicator.prototype.renderItemValueName = function (group, value) {\n        var itemName = this.config.itemName;\n        if (value.name) {\n            var shape = group.addShape({\n                name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_NAME,\n                type: 'text',\n                attrs: __assign({ x: this.curX, y: this.curY, textAlign: 'left', textBaseline: 'top', text: value.name }, (itemName.style || {})),\n            });\n            var bbox = shape.getBBox();\n            if (value.wrapLine) {\n                this.curY += bbox.height;\n                this.curY += itemName.spacingY || 0;\n            }\n            else {\n                this.curX += bbox.width;\n                this.curX += itemName.spacingX || 0;\n            }\n            return shape;\n        }\n    };\n    TooltipIndicator.prototype.renderItemValueValue = function (group, value) {\n        var _a = this.config, itemName = _a.itemName, itemValue = _a.itemValue;\n        var shape = group.addShape({\n            name: ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE,\n            type: 'text',\n            attrs: __assign({ x: this.curX, y: this.curY, textAlign: 'left', textBaseline: 'top', text: value.value }, (itemValue.style || {})),\n        });\n        var bbox = shape.getBBox();\n        this.curY += bbox.height;\n        this.curY += itemName.spacingY || 0;\n        return shape;\n    };\n    TooltipIndicator.prototype.layoutItems = function (group) {\n        var bodyGroup = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_BODY)[0];\n        var itemGroups = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP);\n        if (!bodyGroup || itemGroups.length === 0) {\n            return;\n        }\n        var bodyGroupBBox = bodyGroup.getBBox();\n        this.scrollWidth = bodyGroupBBox.width;\n    };\n    TooltipIndicator.prototype.layoutItemValues = function (group) {\n        var valueGroups = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP);\n        var valueGroupBBoxes = valueGroups.map(function (item) { return BBox.fromBBoxObject(item.getBBox()); });\n        var valueShapes = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE);\n        var valueShapeBBoxes = valueShapes.map(function (shape) { return BBox.fromBBoxObject(shape.getBBox()); });\n        var maxX = Math.max.apply(Math, valueShapeBBoxes.map(function (bbox) { return bbox.maxX; }));\n        valueGroups.forEach(function (valueGroup, index) {\n            var bbox = valueGroupBBoxes[index];\n            var nameShape = valueGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_NAME)[0];\n            var valueShape = valueGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE)[0];\n            if (nameShape && valueShape) {\n                var nameShapeBBox = BBox.fromBBoxObject(nameShape.getBBox());\n                var valueShapeBBox = BBox.fromBBoxObject(valueShape.getBBox());\n                // horizontal align: name & value\n                if (nameShapeBBox.height < bbox.height) {\n                    nameShape.attr('y', nameShape.attr('y') + (bbox.height - nameShapeBBox.height) / 2);\n                }\n                if (valueShapeBBox.height < bbox.height) {\n                    valueShape.attr('y', valueShape.attr('y') + (bbox.height - valueShapeBBox.height) / 2);\n                }\n                // vertical align values\n                if (valueShapeBBox.maxX < maxX) {\n                    valueShape.attr('x', valueShape.attr('x') + maxX - valueShapeBBox.maxX);\n                }\n            }\n        });\n    };\n    TooltipIndicator.prototype.applyClip = function (group) {\n        var _a = this.config, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var bbox = group.getBBox();\n        if (width || height) {\n            group.setClip({\n                type: 'rect',\n                attrs: {\n                    x: x,\n                    y: y,\n                    width: width || bbox.width,\n                    height: height || bbox.height,\n                },\n            });\n        }\n    };\n    TooltipIndicator.prototype.doSelectItem = function (id) {\n        var _this = this;\n        var group = this.getGroup();\n        var itemGroups = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_GROUP);\n        if (id !== this.selectedItemId) {\n            itemGroups.forEach(function (itemGroup) {\n                var curItemData = itemGroup.get('delegateObject');\n                if (curItemData) {\n                    _this.applyItemStyle(itemGroup, curItemData.item.id === id ? 'selected' : 'inactive');\n                }\n            });\n            this.selectedItemId = id;\n        }\n        else {\n            // 取消选中\n            itemGroups.forEach(function (itemGroup) {\n                _this.applyItemStyle(itemGroup);\n            });\n            this.selectedItemId = undefined;\n        }\n        this.emit(EVENTS.ON_SELECT_ITEM, this.selectedItemId);\n    };\n    TooltipIndicator.prototype.applyItemStyle = function (itemGroup, state) {\n        var _a = this.config, line = _a.line, itemTitle = _a.itemTitle, itemName = _a.itemName, itemValue = _a.itemValue;\n        var lineShape = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_LINE)[0];\n        var titleShape = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_TITLE)[0];\n        var itemNameShapes = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_NAME);\n        var itemValueShapes = itemGroup.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_ITEM_VALUE);\n        var styleName = state && state + \"Style\";\n        if (lineShape) {\n            lineShape.attr(line.style);\n            lineShape.attr(line[styleName] || {});\n        }\n        if (titleShape) {\n            titleShape.attr(itemTitle.style);\n            titleShape.attr(itemTitle[styleName] || {});\n        }\n        itemNameShapes.forEach(function (itemNameShape) {\n            itemNameShape.attr(itemName.style);\n            itemNameShape.attr(itemName[styleName] || {});\n        });\n        itemValueShapes.forEach(function (itemValueShape) {\n            itemValueShape.attr(itemValue.style);\n            itemValueShape.attr(itemValue[styleName] || {});\n        });\n    };\n    TooltipIndicator.prototype.bindEvents = function (group) {\n        var _this = this;\n        this.offEvents();\n        var bodyGroup = group.findAllByName(ELEMENT_NAMES.TOOLTIP_INDICATOR_BODY)[0];\n        bodyGroup.on('mousemove', this.onBodyGroupMousemove);\n        this.addDisposable(function () {\n            bodyGroup.off('mousemove', _this.onBodyGroupMousemove);\n        });\n        this.gm = new GM(bodyGroup);\n        this.wheel = new Wheel(bodyGroup);\n        this.wheel.on('wheel', this.onWheel);\n    };\n    TooltipIndicator.prototype.offEvents = function () {\n        if (this.gm) {\n            this.gm.destroy();\n        }\n        if (this.wheel) {\n            this.wheel.destroy();\n        }\n    };\n    TooltipIndicator.prototype.resetRender = function () {\n        this.curX = 0;\n        this.curY = 0;\n        this.offsetX = 0;\n    };\n    return TooltipIndicator;\n}(BaseComponent));\nexport default TooltipIndicator;\nfunction findTargetAncestor(element, predicate) {\n    var cur = element;\n    while (cur) {\n        if (predicate(cur)) {\n            return cur;\n        }\n        cur = cur.getParent();\n    }\n}\n//# sourceMappingURL=tooltip-indicator.js.map"]}]}