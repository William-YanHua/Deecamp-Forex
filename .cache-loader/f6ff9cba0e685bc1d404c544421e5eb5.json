{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/shapes/image.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/shapes/image.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../util/index');\nvar Shape = require('../core/shape');\nvar CImage = function CImage(cfg) {\n    CImage.superclass.constructor.call(this, cfg);\n};\nCImage.ATTRS = {\n    x: 0,\n    y: 0,\n    img: undefined,\n    width: 0,\n    height: 0,\n    sx: null,\n    sy: null,\n    swidth: null,\n    sheight: null\n};\nUtil.extend(CImage, Shape);\nUtil.augment(CImage, {\n    type: 'image',\n    isHitBox: function isHitBox() {\n        return false;\n    },\n    calculateBox: function calculateBox() {\n        var attrs = this._attrs;\n        if (!this._cfg.attrs || this._cfg.attrs.img !== attrs.img) {\n            this._setAttrImg();\n        }\n        var x = attrs.x;\n        var y = attrs.y;\n        var width = attrs.width;\n        var height = attrs.height;\n        return {\n            minX: x,\n            minY: y,\n            maxX: x + width,\n            maxY: y + height\n        };\n    },\n    _beforeSetLoading: function _beforeSetLoading(loading) {\n        var canvas = this.get('canvas');\n        if (loading === false && this.get('toDraw') === true) {\n            this._cfg.loading = false;\n            canvas.draw();\n        }\n        return loading;\n    },\n    _setAttrImg: function _setAttrImg() {\n        var self = this;\n        var attrs = self._attrs;\n        var img = attrs.img;\n        if (Util.isString(img)) {\n            var image = new Image();\n            image.onload = function () {\n                if (self.get('destroyed'))\n                    return false;\n                self.attr('imgSrc', img);\n                self.attr('img', image);\n                var callback = self.get('callback');\n                if (callback) {\n                    callback.call(self);\n                }\n                self.set('loading', false);\n            };\n            image.src = img;\n            image.crossOrigin = 'Anonymous';\n            self.set('loading', true);\n        }\n        else if (img instanceof Image) {\n            if (!attrs.width) {\n                self.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                self.attr('height', img.height);\n            }\n            return img;\n        }\n        else if (img instanceof HTMLElement && Util.isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n            if (!attrs.width) {\n                self.attr('width', Number(img.getAttribute('width')));\n            }\n            if (!attrs.height) {\n                self.attr('height', Number(img.getAttribute('height')));\n            }\n            return img;\n        }\n        else if (img instanceof ImageData) {\n            if (!attrs.width) {\n                self.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                self.attr('height', img.height);\n            }\n            return img;\n        }\n        else {\n            return null;\n        }\n    },\n    drawInner: function drawInner(context) {\n        if (this._cfg.hasUpdate) {\n            this._setAttrImg();\n        }\n        if (this.get('loading')) {\n            this.set('toDraw', true);\n            return;\n        }\n        this._drawImage(context);\n        this._cfg.hasUpdate = false;\n    },\n    _drawImage: function _drawImage(context) {\n        var attrs = this._attrs;\n        var x = attrs.x;\n        var y = attrs.y;\n        var image = attrs.img;\n        var width = attrs.width;\n        var height = attrs.height;\n        var sx = attrs.sx;\n        var sy = attrs.sy;\n        var swidth = attrs.swidth;\n        var sheight = attrs.sheight;\n        this.set('toDraw', false);\n        var img = image;\n        if (img instanceof ImageData) {\n            img = new Image();\n            img.src = image;\n        }\n        if (img instanceof Image || img instanceof HTMLElement && Util.isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n            if (Util.isNil(sx) || Util.isNil(sy) || Util.isNil(swidth) || Util.isNil(sheight)) {\n                context.drawImage(img, x, y, width, height);\n                return;\n            }\n            if (!Util.isNil(sx) && !Util.isNil(sy) && !Util.isNil(swidth) && !Util.isNil(sheight)) {\n                context.drawImage(img, sx, sy, swidth, sheight, x, y, width, height);\n                return;\n            }\n        }\n        return;\n    }\n});\nmodule.exports = CImage;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/shapes/image.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g/lib/shapes/image.js"],"names":[],"mappings":"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","sourcesContent":["var Util = require('../util/index');\n\nvar Shape = require('../core/shape');\n\nvar CImage = function CImage(cfg) {\n  CImage.superclass.constructor.call(this, cfg);\n};\n\nCImage.ATTRS = {\n  x: 0,\n  y: 0,\n  img: undefined,\n  width: 0,\n  height: 0,\n  sx: null,\n  sy: null,\n  swidth: null,\n  sheight: null\n};\nUtil.extend(CImage, Shape);\nUtil.augment(CImage, {\n  type: 'image',\n  isHitBox: function isHitBox() {\n    return false;\n  },\n  calculateBox: function calculateBox() {\n    var attrs = this._attrs;\n\n    if (!this._cfg.attrs || this._cfg.attrs.img !== attrs.img) {\n      this._setAttrImg();\n    }\n\n    var x = attrs.x;\n    var y = attrs.y;\n    var width = attrs.width;\n    var height = attrs.height;\n    return {\n      minX: x,\n      minY: y,\n      maxX: x + width,\n      maxY: y + height\n    };\n  },\n  _beforeSetLoading: function _beforeSetLoading(loading) {\n    var canvas = this.get('canvas');\n\n    if (loading === false && this.get('toDraw') === true) {\n      this._cfg.loading = false;\n      canvas.draw();\n    }\n\n    return loading;\n  },\n  _setAttrImg: function _setAttrImg() {\n    var self = this;\n    var attrs = self._attrs;\n    var img = attrs.img;\n\n    if (Util.isString(img)) {\n      var image = new Image();\n\n      image.onload = function () {\n        if (self.get('destroyed')) return false;\n        self.attr('imgSrc', img);\n        self.attr('img', image);\n        var callback = self.get('callback');\n\n        if (callback) {\n          callback.call(self);\n        }\n\n        self.set('loading', false);\n      };\n\n      image.src = img;\n      image.crossOrigin = 'Anonymous';\n      self.set('loading', true);\n    } else if (img instanceof Image) {\n      if (!attrs.width) {\n        self.attr('width', img.width);\n      }\n\n      if (!attrs.height) {\n        self.attr('height', img.height);\n      }\n\n      return img;\n    } else if (img instanceof HTMLElement && Util.isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n      if (!attrs.width) {\n        self.attr('width', Number(img.getAttribute('width')));\n      }\n\n      if (!attrs.height) {\n        self.attr('height', Number(img.getAttribute('height')));\n      }\n\n      return img;\n    } else if (img instanceof ImageData) {\n      if (!attrs.width) {\n        self.attr('width', img.width);\n      }\n\n      if (!attrs.height) {\n        self.attr('height', img.height);\n      }\n\n      return img;\n    } else {\n      return null;\n    }\n  },\n  drawInner: function drawInner(context) {\n    if (this._cfg.hasUpdate) {\n      this._setAttrImg();\n    }\n\n    if (this.get('loading')) {\n      this.set('toDraw', true);\n      return;\n    }\n\n    this._drawImage(context);\n\n    this._cfg.hasUpdate = false;\n  },\n  _drawImage: function _drawImage(context) {\n    var attrs = this._attrs;\n    var x = attrs.x;\n    var y = attrs.y;\n    var image = attrs.img;\n    var width = attrs.width;\n    var height = attrs.height;\n    var sx = attrs.sx;\n    var sy = attrs.sy;\n    var swidth = attrs.swidth;\n    var sheight = attrs.sheight;\n    this.set('toDraw', false);\n    var img = image;\n\n    if (img instanceof ImageData) {\n      img = new Image();\n      img.src = image;\n    }\n\n    if (img instanceof Image || img instanceof HTMLElement && Util.isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n      if (Util.isNil(sx) || Util.isNil(sy) || Util.isNil(swidth) || Util.isNil(sheight)) {\n        context.drawImage(img, x, y, width, height);\n        return;\n      }\n\n      if (!Util.isNil(sx) && !Util.isNil(sy) && !Util.isNil(swidth) && !Util.isNil(sheight)) {\n        context.drawImage(img, sx, sy, swidth, sheight, x, y, width, height);\n        return;\n      }\n    }\n\n    return;\n  }\n});\nmodule.exports = CImage;"]}]}