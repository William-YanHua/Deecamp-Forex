{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/shape-select.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/shape-select.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar Interaction = require('./base');\nfunction getOriginalAttrs(attrs, styles) {\n    var origin = {};\n    for (var style in styles) {\n        origin[style] = attrs[style];\n    }\n    return origin;\n}\nvar Select = function (_Interaction) {\n    _inheritsLoose(Select, _Interaction);\n    function Select() {\n        return _Interaction.apply(this, arguments) || this;\n    }\n    var _proto = Select.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var defaultCfg = _Interaction.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, defaultCfg, {\n            startEvent: 'mouseup',\n            processEvent: null,\n            selectStyle: {\n                fillOpacity: 1\n            },\n            unSelectStyle: {\n                fillOpacity: 0.1\n            },\n            cancelable: true\n        });\n    };\n    _proto.start = function start(ev) {\n        var self = this;\n        var chart = self.view;\n        var selectedShape;\n        var unSelectedShapes = [];\n        chart.eachShape(function (obj, shape) {\n            if (shape.isPointInPath(ev.x, ev.y)) {\n                selectedShape = shape;\n            }\n            else {\n                unSelectedShapes.push(shape);\n            }\n        });\n        if (!selectedShape) {\n            self.reset();\n            return;\n        }\n        if (selectedShape.get('_selected')) {\n            if (!self.cancelable) {\n                return;\n            }\n            self.reset();\n        }\n        else {\n            var selectStyle = self.selectStyle, unSelectStyle = self.unSelectStyle;\n            var originAttrs = getOriginalAttrs(selectedShape.attr(), selectedShape);\n            selectedShape.set('_originAttrs', originAttrs);\n            selectedShape.attr(selectStyle);\n            Util.each(unSelectedShapes, function (child) {\n                var originAttrs = child.get('_originAttrs');\n                if (originAttrs) {\n                    child.attr(originAttrs);\n                }\n                child.set('_selected', false);\n                if (unSelectStyle) {\n                    originAttrs = getOriginalAttrs(child.attr(), unSelectStyle);\n                    child.set('_originAttrs', originAttrs);\n                    child.attr(unSelectStyle);\n                }\n            });\n            selectedShape.set('_selected', true);\n            self.selectedShape = selectedShape;\n            self.canvas.draw();\n        }\n    };\n    _proto.end = function end(ev) {\n        var selectedShape = this.selectedShape;\n        if (selectedShape && !selectedShape.get('destroyed') && selectedShape.get('origin')) {\n            ev.data = selectedShape.get('origin')._origin;\n            ev.shapeInfo = selectedShape.get('origin');\n            ev.shape = selectedShape;\n            ev.selected = !!selectedShape.get('_selected');\n        }\n    };\n    _proto.reset = function reset() {\n        var self = this;\n        if (!self.selectedShape) {\n            return;\n        }\n        var chart = self.view;\n        var geom = chart.get('geoms')[0];\n        var container = geom.get('container').get('children')[0];\n        var children = container.get('children');\n        Util.each(children, function (child) {\n            var originAttrs = child.get('_originAttrs');\n            if (originAttrs) {\n                child._attrs = originAttrs;\n                child.set('_originAttrs', null);\n            }\n            child.set('_selected', false);\n        });\n        self.canvas.draw();\n    };\n    return Select;\n}(Interaction);\nmodule.exports = Select;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/shape-select.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/interaction/shape-select.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Interaction = require('./base');\n\nfunction getOriginalAttrs(attrs, styles) {\n  var origin = {};\n\n  for (var style in styles) {\n    origin[style] = attrs[style];\n  }\n\n  return origin;\n}\n\nvar Select = /*#__PURE__*/function (_Interaction) {\n  _inheritsLoose(Select, _Interaction);\n\n  function Select() {\n    return _Interaction.apply(this, arguments) || this;\n  }\n\n  var _proto = Select.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var defaultCfg = _Interaction.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, defaultCfg, {\n      startEvent: 'mouseup',\n      processEvent: null,\n      selectStyle: {\n        fillOpacity: 1\n      },\n      unSelectStyle: {\n        fillOpacity: 0.1\n      },\n      cancelable: true\n    });\n  };\n\n  _proto.start = function start(ev) {\n    var self = this;\n    var chart = self.view;\n    var selectedShape;\n    var unSelectedShapes = [];\n    chart.eachShape(function (obj, shape) {\n      if (shape.isPointInPath(ev.x, ev.y)) {\n        selectedShape = shape;\n      } else {\n        unSelectedShapes.push(shape);\n      }\n    });\n\n    if (!selectedShape) {\n      self.reset();\n      return;\n    }\n\n    if (selectedShape.get('_selected')) {\n      // 已经被选中\n      if (!self.cancelable) {\n        // 不允许取消选中则不处理\n        return;\n      }\n\n      self.reset(); // 允许取消选中\n    } else {\n      // 未被选中\n      var selectStyle = self.selectStyle,\n          unSelectStyle = self.unSelectStyle; // 获取选中效果对应的本来效果,保存下来\n\n      var originAttrs = getOriginalAttrs(selectedShape.attr(), selectedShape);\n      selectedShape.set('_originAttrs', originAttrs);\n      selectedShape.attr(selectStyle);\n      Util.each(unSelectedShapes, function (child) {\n        var originAttrs = child.get('_originAttrs'); // 先恢复到默认状态下\n\n        if (originAttrs) {\n          child.attr(originAttrs);\n        }\n\n        child.set('_selected', false); // 保存未选中效果对应的原始效果\n\n        if (unSelectStyle) {\n          originAttrs = getOriginalAttrs(child.attr(), unSelectStyle);\n          child.set('_originAttrs', originAttrs);\n          child.attr(unSelectStyle);\n        }\n      });\n      selectedShape.set('_selected', true);\n      self.selectedShape = selectedShape;\n      self.canvas.draw();\n    }\n  };\n\n  _proto.end = function end(ev) {\n    var selectedShape = this.selectedShape;\n\n    if (selectedShape && !selectedShape.get('destroyed') && selectedShape.get('origin')) {\n      ev.data = selectedShape.get('origin')._origin; // 绘制数据，包含原始数据啊\n\n      ev.shapeInfo = selectedShape.get('origin');\n      ev.shape = selectedShape;\n      ev.selected = !!selectedShape.get('_selected'); // 返回选中的状态\n    }\n  };\n\n  _proto.reset = function reset() {\n    var self = this;\n\n    if (!self.selectedShape) {\n      return;\n    }\n\n    var chart = self.view;\n    var geom = chart.get('geoms')[0];\n    var container = geom.get('container').get('children')[0];\n    var children = container.get('children');\n    Util.each(children, function (child) {\n      var originAttrs = child.get('_originAttrs');\n\n      if (originAttrs) {\n        child._attrs = originAttrs;\n        child.set('_originAttrs', null);\n      }\n\n      child.set('_selected', false);\n    });\n    self.canvas.draw();\n  };\n\n  return Select;\n}(Interaction);\n\nmodule.exports = Select;"]}]}