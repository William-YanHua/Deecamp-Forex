{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/base/view-layer.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/base/view-layer.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __extends, __spreadArrays } from \"tslib\";\nimport { deepMix, isEmpty, mapValues, get, each, assign, isFunction, mix, map, flatten, reduce, findIndex, isString, contains, hasKey, } from '@antv/util';\nimport { View, VIEW_LIFE_CIRCLE } from '../dependents';\nimport TextDescription from '../components/description';\nimport { getLabelComponent } from '../components/label/base';\nimport { getComponent } from '../components/factory';\nimport BaseInteraction from '../interaction/index';\nimport { EVENT_MAP, onEvent } from '../util/event';\nimport PaddingController from './controller/padding';\nimport StateController from './controller/state';\nimport ThemeController from './controller/theme';\nimport Layer from './layer';\nimport { isTextUsable } from '../util/common';\nimport BBox, { DIRECTION } from '../util/bbox';\nimport { VIEW_LAYER_LIFE_CYCLE } from './constants';\nvar ViewLayer = (function (_super) {\n    __extends(ViewLayer, _super);\n    function ViewLayer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.interactions = [];\n        _this.labels = [];\n        _this.options = _this.getOptions(props);\n        _this.initialOptions = deepMix({}, _this.options);\n        _this.paddingController = new PaddingController({\n            plot: _this,\n        });\n        _this.stateController = new StateController({\n            plot: _this,\n        });\n        _this.themeController = new ThemeController();\n        return _this;\n    }\n    ViewLayer.getDefaultOptions = function () {\n        return {\n            renderer: 'canvas',\n            title: {\n                visible: false,\n                alignTo: 'left',\n                text: '',\n            },\n            description: {\n                visible: false,\n                text: '',\n                alignTo: 'left',\n            },\n            padding: 'auto',\n            legend: {\n                visible: true,\n                position: 'bottom-center',\n            },\n            tooltip: {\n                visible: true,\n                shared: true,\n                showCrosshairs: true,\n                crosshairs: {\n                    type: 'x',\n                },\n                offset: 20,\n            },\n            xAxis: {\n                visible: true,\n                grid: {\n                    visible: false,\n                },\n                line: {\n                    visible: true,\n                },\n                tickLine: {\n                    visible: true,\n                },\n                label: {\n                    visible: true,\n                    autoRotate: true,\n                    autoHide: true,\n                },\n                title: {\n                    visible: false,\n                    spacing: 12,\n                },\n            },\n            yAxis: {\n                visible: true,\n                grid: {\n                    visible: true,\n                },\n                line: {\n                    visible: false,\n                },\n                tickLine: {\n                    visible: false,\n                },\n                label: {\n                    visible: true,\n                    autoHide: true,\n                    autoRotate: false,\n                },\n                title: {\n                    autoRotate: true,\n                    visible: false,\n                    spacing: 12,\n                },\n            },\n            label: {\n                visible: false,\n            },\n            interactions: [{ type: 'tooltip' }, { type: 'legend-active' }, { type: 'legend-filter' }],\n            animation: true,\n        };\n    };\n    ViewLayer.prototype.getOptions = function (props) {\n        var curOptions = this.options || {};\n        var options = _super.prototype.getOptions.call(this, props);\n        var defaultOptions = this.constructor.getDefaultOptions(props);\n        var interactions = reduce(flatten(map([options, defaultOptions, hasKey(props, 'interactions') ? props : curOptions], function (src) {\n            return get(src, 'interactions', []);\n        })), function (result, cur) {\n            var idx = findIndex(result, function (item) { return item.type === cur.type; });\n            if (idx >= 0) {\n                result.splice(idx, 1);\n            }\n            return __spreadArrays(result, [cur]);\n        }, []);\n        return deepMix({}, options, defaultOptions, curOptions, props, { interactions: interactions });\n    };\n    ViewLayer.prototype.beforeInit = function () {\n        this.emit(VIEW_LAYER_LIFE_CYCLE.BEFORE_INIT);\n        _super.prototype.beforeInit.call(this);\n    };\n    ViewLayer.prototype.init = function () {\n        var _this = this;\n        _super.prototype.init.call(this);\n        this.theme = this.themeController.getTheme(this.options, this.type);\n        this.config = {\n            data: this.processData(this.options.data),\n            scales: {},\n            legends: {},\n            tooltip: {\n                showTitle: true,\n            },\n            axes: {},\n            coordinate: { type: 'cartesian' },\n            geometries: [],\n            annotations: [],\n            interactions: [],\n            theme: this.theme,\n            panelRange: {},\n            animate: {},\n            views: [],\n        };\n        this.paddingController.clear();\n        this.drawTitle();\n        this.drawDescription();\n        this.interaction();\n        this.coord();\n        this.scale();\n        this.axis();\n        this.tooltip();\n        this.legend();\n        this.addGeometry();\n        this.annotation();\n        this.animation();\n        this.viewRange = this.getViewRange();\n        var region = this.viewRangeToRegion(this.viewRange);\n        this.view = new View({\n            parent: null,\n            canvas: this.canvas,\n            backgroundGroup: this.container.addGroup(),\n            middleGroup: this.container.addGroup(),\n            foregroundGroup: this.container.addGroup(),\n            padding: this.paddingController.getPadding(),\n            theme: this.theme,\n            options: this.config,\n            limitInPlot: this.isLimitInPlot(),\n            region: region,\n        });\n        this.applyInteractions();\n        this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, function () {\n            _this.afterRender();\n        });\n    };\n    ViewLayer.prototype.afterInit = function () {\n        _super.prototype.afterInit.call(this);\n        if (!this.view || this.view.destroyed) {\n            return;\n        }\n        if (this.options.padding !== 'auto') {\n            this.parseEvents();\n        }\n        this.emit(VIEW_LAYER_LIFE_CYCLE.AFTER_INIT);\n    };\n    ViewLayer.prototype.afterRender = function () {\n        var _a, _b;\n        if (!this.view || this.view.destroyed) {\n            return;\n        }\n        var options = this.options;\n        var padding = options.padding ? options.padding : this.config.theme.padding;\n        if (options.defaultState && padding !== 'auto') {\n            this.stateController.defaultStates(options.defaultState);\n        }\n        if (padding === 'auto') {\n            this.paddingController.processAutoPadding();\n        }\n        if (((_b = (_a = options.tooltip) === null || _a === void 0 ? void 0 : _a.custom) === null || _b === void 0 ? void 0 : _b.onChange) && options.padding !== 'auto') {\n            this.customTooltip();\n        }\n    };\n    ViewLayer.prototype.render = function () {\n        this.emit(VIEW_LAYER_LIFE_CYCLE.BEFORE_RENDER);\n        _super.prototype.render.call(this);\n        var data = this.options.data;\n        if (!isEmpty(data)) {\n            this.view.render();\n        }\n        this.emit(VIEW_LAYER_LIFE_CYCLE.AFTER_RENDER);\n    };\n    ViewLayer.prototype.repaint = function () {\n        if (this.canvas) {\n            this.canvas.draw();\n        }\n    };\n    ViewLayer.prototype.getScaleByField = function (field) {\n        return this.view.getScaleByField(field);\n    };\n    ViewLayer.prototype.getXScale = function () {\n        var xField = this.options.xField;\n        if (xField) {\n            return this.view.getScaleByField(xField);\n        }\n    };\n    ViewLayer.prototype.getYScale = function () {\n        var yField = this.options.yField;\n        if (yField) {\n            return this.view.getScaleByField(yField);\n        }\n    };\n    ViewLayer.prototype.getColorScale = function () {\n        var options = this.options;\n        if (contains(options, 'colorField')) {\n            return this.view.getScaleByField(options);\n        }\n    };\n    ViewLayer.prototype.getShapes = function () {\n        var geometries = this.view.geometries;\n        var shapes = {};\n        each(geometries, function (geom) {\n            var type = geom.type;\n            shapes[type] = geom.getShapes();\n        });\n        return shapes;\n    };\n    ViewLayer.prototype.destroy = function () {\n        this.doDestroy();\n        _super.prototype.destroy.call(this);\n    };\n    ViewLayer.prototype.updateConfig = function (cfg) {\n        this.doDestroy();\n        if (!cfg.padding && this.initialOptions.padding && this.initialOptions.padding === 'auto') {\n            cfg.padding = 'auto';\n        }\n        this.options = this.getOptions(cfg);\n        this.processOptions(this.options);\n    };\n    ViewLayer.prototype.changeData = function (data) {\n        this.emit(VIEW_LAYER_LIFE_CYCLE.BEFORE_CHANGE_DATA);\n        var isEmptyBefore = isEmpty(this.options.data);\n        this.options.data = this.processData(data);\n        if (isEmptyBefore) {\n            this.options.padding = this.initialOptions.padding || 'auto';\n            this.view.data(this.options.data);\n            this.view.render();\n        }\n        else {\n            this.view.changeData(this.options.data);\n        }\n        this.emit(VIEW_LAYER_LIFE_CYCLE.AFTER_CHANGE_DATA);\n    };\n    ViewLayer.prototype.getPlot = function () {\n        return this.view;\n    };\n    ViewLayer.prototype.getLabels = function () {\n        return this.labels;\n    };\n    ViewLayer.prototype.getTheme = function () {\n        if (!this.theme) {\n            return this.themeController.getTheme(this.options, this.type);\n        }\n        return this.theme;\n    };\n    ViewLayer.prototype.getResponsiveTheme = function () {\n        return this.themeController.getResponsiveTheme(this.type);\n    };\n    ViewLayer.prototype.getPlotTheme = function () {\n        return this.themeController.getPlotTheme(this.options, this.type);\n    };\n    ViewLayer.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    ViewLayer.prototype.bindStateManager = function (stateManager, cfg) {\n        this.stateController.bindStateManager(stateManager, cfg);\n    };\n    ViewLayer.prototype.setActive = function (condition, style) {\n        this.stateController.setState({ type: 'active', condition: condition, style: style });\n    };\n    ViewLayer.prototype.setSelected = function (condition, style) {\n        this.stateController.setState({ type: 'selected', condition: condition, style: style });\n    };\n    ViewLayer.prototype.setDisable = function (condition, style) {\n        this.stateController.setState({ type: 'disable', condition: condition, style: style });\n    };\n    ViewLayer.prototype.setDefault = function (condition, style) {\n        this.stateController.setState({ type: 'default', condition: condition, style: style });\n    };\n    ViewLayer.prototype.getData = function (start, end) {\n        return this.processData((this.options.data || []).slice(start, end));\n    };\n    ViewLayer.prototype.processData = function (data) {\n        return data;\n    };\n    ViewLayer.prototype.scale = function () {\n        var scaleTypes = mapValues(this.config.scales, function (scaleConfig) {\n            var type = scaleConfig.type;\n            return type ? { type: type } : {};\n        });\n        var scales = deepMix({}, this.config.scales, this.options.meta || {}, scaleTypes);\n        this.setConfig('scales', scales);\n    };\n    ViewLayer.prototype.axis = function () {\n        var xAxis_parser = getComponent('axis', {\n            plot: this,\n            dim: 'x',\n        });\n        var yAxis_parser = getComponent('axis', {\n            plot: this,\n            dim: 'y',\n        });\n        var axesConfig = {};\n        axesConfig[this.options.xField] = xAxis_parser;\n        axesConfig[this.options.yField] = yAxis_parser;\n        this.setConfig('axes', axesConfig);\n    };\n    ViewLayer.prototype.tooltip = function () {\n        var _a, _b;\n        if (this.options.tooltip.visible === false) {\n            this.setConfig('tooltip', false);\n            return;\n        }\n        var tooltipOptions = get(this.options, 'tooltip');\n        if ((_a = tooltipOptions.custom) === null || _a === void 0 ? void 0 : _a.container) {\n            tooltipOptions.container = tooltipOptions.custom.container;\n        }\n        if ((_b = tooltipOptions.custom) === null || _b === void 0 ? void 0 : _b.customContent) {\n            tooltipOptions.customContent = tooltipOptions.custom.customContent;\n        }\n        this.setConfig('tooltip', deepMix({}, tooltipOptions));\n        deepMix(this.config.theme.tooltip, this.options.tooltip.domStyles);\n    };\n    ViewLayer.prototype.customTooltip = function () {\n        var _this = this;\n        var customContentCfg = this.options.tooltip.custom;\n        var container;\n        if (customContentCfg.container) {\n            container = isString(customContentCfg.container)\n                ? document.getElementById(customContentCfg.container)\n                : customContentCfg.container;\n        }\n        this.view.on('tooltip:show', function () {\n            if (!customContentCfg.container) {\n                container = _this.canvas.cfg.container.getElementsByClassName('g2-tooltip')[0];\n            }\n        });\n        this.view.hideTooltip();\n        this.view.on('tooltip:change', function (ev) {\n            if (container) {\n                customContentCfg.onChange(container, ev);\n            }\n        });\n    };\n    ViewLayer.prototype.getLegendPosition = function (position) {\n        var positionList = position.split('-');\n        if (positionList && positionList.length > 1 && positionList[1] === 'center') {\n            return positionList[0];\n        }\n        return position;\n    };\n    ViewLayer.prototype.legend = function () {\n        var _a;\n        if (this.options.legend.visible === false) {\n            this.setConfig('legends', false);\n            return;\n        }\n        var options = deepMix({}, this.theme.legend, this.options.legend);\n        var legendConfig = {\n            position: this.getLegendPosition(get(options, 'position')),\n            offsetX: get(options, 'offsetX'),\n            offsetY: get(options, 'offsetY'),\n            flipPage: get(options, 'flipPage'),\n            marker: get(options, 'marker'),\n            title: ((_a = options.title) === null || _a === void 0 ? void 0 : _a.visible) ? get(options, 'title') : null,\n            itemName: get(options, 'text'),\n        };\n        this.setConfig('legends', legendConfig);\n    };\n    ViewLayer.prototype.annotation = function () {\n        var _this = this;\n        var config = [];\n        if (this.config.coordinate.type === 'cartesian' && this.options.guideLine) {\n            each(this.options.guideLine, function (line) {\n                var guideLine = getComponent('guideLine', {\n                    plot: _this,\n                    cfg: line,\n                });\n                config.push(guideLine);\n            });\n        }\n        this.setConfig('annotations', config);\n    };\n    ViewLayer.prototype.interaction = function () {\n        var _this = this;\n        var _a = this.options.interactions, interactions = _a === void 0 ? [] : _a;\n        each(interactions, function (interaction) {\n            var type = interaction.type;\n            if (type === 'slider' || type === 'scrollbar') {\n                var axisConfig = {\n                    label: {\n                        autoHide: true,\n                        autoRotate: false,\n                    },\n                };\n                _this.options.xAxis = deepMix({}, _this.options.xAxis, axisConfig);\n            }\n            _this.setConfig('interaction', interaction);\n        });\n    };\n    ViewLayer.prototype.animation = function () {\n        if (this.options.animation === false) {\n            this.setConfig('animate', false);\n        }\n    };\n    ViewLayer.prototype.applyInteractions = function () {\n        var _this = this;\n        var range = BBox.fromBBoxObject(this.layerBBox);\n        var titleOrDesc = this.title || this.description;\n        var extraBBox = new BBox(range.minX, range.minY, range.width, titleOrDesc ? titleOrDesc.getBBox().maxY : 0);\n        range = range.cut(extraBBox, DIRECTION.TOP);\n        var _a = this.options.interactions, interactions = _a === void 0 ? [] : _a;\n        if (this.interactions) {\n            this.interactions.forEach(function (inst) {\n                inst.destroy();\n            });\n        }\n        this.interactions = [];\n        interactions.forEach(function (interaction) {\n            var Ctor = BaseInteraction.getInteraction(interaction.type, _this.type);\n            if (Ctor) {\n                var inst = new Ctor({ view: _this.view }, _this, Ctor.getInteractionRange(range, interaction.cfg), interaction.cfg);\n                inst.render();\n                _this.interactions.push(inst);\n            }\n        });\n    };\n    ViewLayer.prototype.setConfig = function (key, config) {\n        if (key === 'geometry') {\n            this.config.geometries.push(config);\n            return;\n        }\n        if (key === 'interaction') {\n            this.config.interactions.push(config);\n            return;\n        }\n        if (config === false) {\n            this.config[key] = false;\n            return;\n        }\n        assign(this.config[key], config);\n    };\n    ViewLayer.prototype.parseEvents = function (eventParser) {\n        var _this = this;\n        var options = this.options;\n        if (options.events) {\n            _super.prototype.parseEvents.call(this, options.events);\n            var eventmap_1 = eventParser ? eventParser.EVENT_MAP : EVENT_MAP;\n            each(options.events, function (e, k) {\n                if (isFunction(e)) {\n                    var eventName = eventmap_1[k] || k;\n                    var handler = e;\n                    onEvent(_this, eventName, handler);\n                }\n            });\n        }\n    };\n    ViewLayer.prototype.drawTitle = function () {\n        var props = this.options;\n        var range = this.layerBBox;\n        if (this.title) {\n            this.title.destroy();\n            this.title = null;\n        }\n        if (isTextUsable(props.title)) {\n            var width = this.width;\n            var theme = this.config.theme;\n            var title = new TextDescription({\n                leftMargin: range.minX + theme.title.padding[3],\n                rightMargin: range.maxX - theme.title.padding[1],\n                topMargin: range.minY + theme.title.padding[0],\n                text: props.title.text,\n                style: mix(theme.title, props.title.style),\n                wrapperWidth: width - theme.title.padding[3] - theme.title.padding[1],\n                container: this.container.addGroup(),\n                theme: theme,\n                index: isTextUsable(props.description) ? 0 : 1,\n                plot: this,\n                alignTo: props.title.alignTo,\n                name: 'title',\n            });\n            this.title = title;\n            this.paddingController.registerPadding(title, 'outer');\n        }\n    };\n    ViewLayer.prototype.drawDescription = function () {\n        var props = this.options;\n        var range = this.layerBBox;\n        if (this.description) {\n            this.description.destroy();\n            this.description = null;\n        }\n        if (isTextUsable(props.description)) {\n            var width = this.width;\n            var theme = this.config.theme;\n            var topMargin = 0;\n            if (this.title) {\n                var titleBBox = this.title.getBBox();\n                topMargin += titleBBox.minY + titleBBox.height;\n                topMargin += theme.description.padding[0];\n            }\n            else {\n                topMargin += range.minY + theme.title.padding[0];\n            }\n            var description = new TextDescription({\n                leftMargin: range.minX + theme.description.padding[3],\n                topMargin: topMargin,\n                rightMargin: range.maxX - theme.title.padding[1],\n                text: props.description.text,\n                style: mix(theme.description, props.description.style),\n                wrapperWidth: width - theme.description.padding[3] - theme.description.padding[1],\n                container: this.container.addGroup(),\n                theme: theme,\n                index: 1,\n                plot: this,\n                alignTo: props.description.alignTo,\n                name: 'description',\n            });\n            this.description = description;\n            this.paddingController.registerPadding(description, 'outer');\n        }\n    };\n    ViewLayer.prototype.doRenderLabel = function (geometry, label) {\n        each(this.labels, function (item) {\n            item.destroy();\n        });\n        this.labels = [];\n        var config = {\n            layer: this,\n            container: geometry.labelsContainer,\n            geometry: geometry,\n            label: label,\n        };\n        var Ctor = getLabelComponent(label.type);\n        if (Ctor) {\n            var label_1 = new Ctor(config);\n            label_1.init();\n            label_1.render();\n            this.labels.push(label_1);\n        }\n    };\n    ViewLayer.prototype.doDestroy = function () {\n        this.doDestroyInteractions();\n        this.doDestroyLabels();\n        if (!this.view.destroyed) {\n            this.view.destroy();\n        }\n    };\n    ViewLayer.prototype.doDestroyInteractions = function () {\n        if (this.interactions) {\n            this.interactions.forEach(function (inst) {\n                inst.destroy();\n            });\n        }\n        this.interactions = [];\n    };\n    ViewLayer.prototype.doDestroyLabels = function () {\n        each(this.labels, function (label) {\n            label.destroy();\n        });\n        this.labels = [];\n    };\n    ViewLayer.prototype.getViewRange = function () {\n        var _this = this;\n        var _a = this.options.interactions, interactions = _a === void 0 ? [] : _a;\n        var layerBBox = this.paddingController.processOuterPadding();\n        interactions.forEach(function (interaction) {\n            var Ctor = BaseInteraction.getInteraction(interaction.type, _this.type);\n            var range = Ctor && Ctor.getInteractionRange(layerBBox, interaction.cfg);\n            var position = '';\n            if (range) {\n                if (range.maxY === layerBBox.maxY && range.minY > layerBBox.minY) {\n                    position = 'bottom';\n                }\n                else if (range.maxX === layerBBox.maxX && range.minX > layerBBox.minX) {\n                    position = 'right';\n                }\n                else if (range.minX === layerBBox.minX && range.maxX > layerBBox.maxX) {\n                    position = 'left';\n                }\n                else if (range.minY === layerBBox.minY && range.maxY < layerBBox.maxY) {\n                    position = 'top';\n                }\n                _this.paddingController.registerPadding({\n                    interaction: interaction.type,\n                    name: interaction.type,\n                    getBBox: function () {\n                        return range;\n                    },\n                    position: position,\n                }, 'outer');\n            }\n        });\n        var viewRange = this.paddingController.processOuterPadding();\n        return viewRange;\n    };\n    ViewLayer.prototype.isLimitInPlot = function () {\n        var yAxisOptions = this.options.yAxis;\n        if (hasKey(yAxisOptions, 'max') ||\n            hasKey(yAxisOptions, 'min') ||\n            hasKey(yAxisOptions, 'maxLimit') ||\n            hasKey(yAxisOptions, 'minLimit')) {\n            return true;\n        }\n        return false;\n    };\n    ViewLayer.prototype.viewRangeToRegion = function (viewRange) {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var start = { x: 0, y: 0 }, end = { x: 1, y: 1 };\n        start.x = viewRange.minX / (x + width);\n        start.y = viewRange.minY / (y + height);\n        end.x = viewRange.maxX / (x + width);\n        end.y = viewRange.maxY / (y + height);\n        return {\n            start: start,\n            end: end,\n        };\n    };\n    return ViewLayer;\n}(Layer));\nexport default ViewLayer;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/base/view-layer.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/base/view-layer.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends, __spreadArrays } from \"tslib\";\nimport { deepMix, isEmpty, mapValues, get, each, assign, isFunction, mix, map, flatten, reduce, findIndex, isString, contains, hasKey, } from '@antv/util';\nimport { View, VIEW_LIFE_CIRCLE } from '../dependents';\nimport TextDescription from '../components/description';\nimport { getLabelComponent } from '../components/label/base';\nimport { getComponent } from '../components/factory';\nimport BaseInteraction from '../interaction/index';\nimport { EVENT_MAP, onEvent } from '../util/event';\nimport PaddingController from './controller/padding';\nimport StateController from './controller/state';\nimport ThemeController from './controller/theme';\nimport Layer from './layer';\nimport { isTextUsable } from '../util/common';\nimport BBox, { DIRECTION } from '../util/bbox';\nimport { VIEW_LAYER_LIFE_CYCLE } from './constants';\nvar ViewLayer = /** @class */ (function (_super) {\n    __extends(ViewLayer, _super);\n    function ViewLayer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.interactions = [];\n        _this.labels = [];\n        _this.options = _this.getOptions(props);\n        _this.initialOptions = deepMix({}, _this.options);\n        _this.paddingController = new PaddingController({\n            plot: _this,\n        });\n        _this.stateController = new StateController({\n            plot: _this,\n        });\n        _this.themeController = new ThemeController();\n        return _this;\n    }\n    ViewLayer.getDefaultOptions = function () {\n        return {\n            renderer: 'canvas',\n            title: {\n                visible: false,\n                alignTo: 'left',\n                text: '',\n            },\n            description: {\n                visible: false,\n                text: '',\n                alignTo: 'left',\n            },\n            padding: 'auto',\n            legend: {\n                visible: true,\n                position: 'bottom-center',\n            },\n            tooltip: {\n                visible: true,\n                shared: true,\n                showCrosshairs: true,\n                crosshairs: {\n                    type: 'x',\n                },\n                offset: 20,\n            },\n            xAxis: {\n                visible: true,\n                grid: {\n                    visible: false,\n                },\n                line: {\n                    visible: true,\n                },\n                tickLine: {\n                    visible: true,\n                },\n                label: {\n                    visible: true,\n                    autoRotate: true,\n                    autoHide: true,\n                },\n                title: {\n                    visible: false,\n                    spacing: 12,\n                },\n            },\n            yAxis: {\n                visible: true,\n                grid: {\n                    visible: true,\n                },\n                line: {\n                    visible: false,\n                },\n                tickLine: {\n                    visible: false,\n                },\n                label: {\n                    visible: true,\n                    autoHide: true,\n                    autoRotate: false,\n                },\n                title: {\n                    autoRotate: true,\n                    visible: false,\n                    spacing: 12,\n                },\n            },\n            label: {\n                visible: false,\n            },\n            interactions: [{ type: 'tooltip' }, { type: 'legend-active' }, { type: 'legend-filter' }],\n            animation: true,\n        };\n    };\n    ViewLayer.prototype.getOptions = function (props) {\n        var curOptions = this.options || {};\n        var options = _super.prototype.getOptions.call(this, props);\n        // @ts-ignore\n        var defaultOptions = this.constructor.getDefaultOptions(props);\n        // interactions 需要合并去重下，如果有更新 interactions，需要去掉当前的 interactions 配置\n        var interactions = reduce(flatten(map([options, defaultOptions, hasKey(props, 'interactions') ? props : curOptions], function (src) {\n            return get(src, 'interactions', []);\n        })), function (result, cur) {\n            var idx = findIndex(result, function (item) { return item.type === cur.type; });\n            if (idx >= 0) {\n                result.splice(idx, 1);\n            }\n            return __spreadArrays(result, [cur]);\n        }, []);\n        return deepMix({}, options, defaultOptions, curOptions, props, { interactions: interactions });\n    };\n    ViewLayer.prototype.beforeInit = function () {\n        this.emit(VIEW_LAYER_LIFE_CYCLE.BEFORE_INIT);\n        _super.prototype.beforeInit.call(this);\n    };\n    ViewLayer.prototype.init = function () {\n        var _this = this;\n        _super.prototype.init.call(this);\n        this.theme = this.themeController.getTheme(this.options, this.type);\n        this.config = {\n            data: this.processData(this.options.data),\n            scales: {},\n            legends: {},\n            tooltip: {\n                showTitle: true,\n            },\n            axes: {},\n            coordinate: { type: 'cartesian' },\n            geometries: [],\n            annotations: [],\n            interactions: [],\n            theme: this.theme,\n            panelRange: {},\n            animate: {},\n            views: [],\n        };\n        this.paddingController.clear();\n        this.drawTitle();\n        this.drawDescription();\n        // 有些interaction要调整配置项，所以顺序提前\n        this.interaction();\n        this.coord();\n        this.scale();\n        this.axis();\n        this.tooltip();\n        this.legend();\n        this.addGeometry();\n        this.annotation();\n        this.animation();\n        this.viewRange = this.getViewRange();\n        var region = this.viewRangeToRegion(this.viewRange);\n        this.view = new View({\n            parent: null,\n            canvas: this.canvas,\n            backgroundGroup: this.container.addGroup(),\n            middleGroup: this.container.addGroup(),\n            foregroundGroup: this.container.addGroup(),\n            padding: this.paddingController.getPadding(),\n            theme: this.theme,\n            options: this.config,\n            limitInPlot: this.isLimitInPlot(),\n            region: region,\n        });\n        this.applyInteractions();\n        this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, function () {\n            _this.afterRender();\n        });\n    };\n    ViewLayer.prototype.afterInit = function () {\n        _super.prototype.afterInit.call(this);\n        if (!this.view || this.view.destroyed) {\n            return;\n        }\n        if (this.options.padding !== 'auto') {\n            this.parseEvents();\n        }\n        this.emit(VIEW_LAYER_LIFE_CYCLE.AFTER_INIT);\n    };\n    ViewLayer.prototype.afterRender = function () {\n        var _a, _b;\n        if (!this.view || this.view.destroyed) {\n            return;\n        }\n        var options = this.options;\n        var padding = options.padding ? options.padding : this.config.theme.padding;\n        /** defaultState */\n        if (options.defaultState && padding !== 'auto') {\n            this.stateController.defaultStates(options.defaultState);\n        }\n        /** autopadding */\n        if (padding === 'auto') {\n            this.paddingController.processAutoPadding();\n        }\n        if (((_b = (_a = options.tooltip) === null || _a === void 0 ? void 0 : _a.custom) === null || _b === void 0 ? void 0 : _b.onChange) && options.padding !== 'auto') {\n            this.customTooltip();\n        }\n    };\n    /** 完整生命周期渲染 */\n    ViewLayer.prototype.render = function () {\n        this.emit(VIEW_LAYER_LIFE_CYCLE.BEFORE_RENDER);\n        _super.prototype.render.call(this);\n        var data = this.options.data;\n        if (!isEmpty(data)) {\n            this.view.render();\n        }\n        this.emit(VIEW_LAYER_LIFE_CYCLE.AFTER_RENDER);\n    };\n    /** 画布重绘 */\n    ViewLayer.prototype.repaint = function () {\n        if (this.canvas) {\n            this.canvas.draw();\n        }\n    };\n    ViewLayer.prototype.getScaleByField = function (field) {\n        return this.view.getScaleByField(field);\n    };\n    ViewLayer.prototype.getXScale = function () {\n        var xField = this.options.xField;\n        if (xField) {\n            return this.view.getScaleByField(xField);\n        }\n    };\n    ViewLayer.prototype.getYScale = function () {\n        var yField = this.options.yField;\n        if (yField) {\n            return this.view.getScaleByField(yField);\n        }\n    };\n    ViewLayer.prototype.getColorScale = function () {\n        var options = this.options;\n        if (contains(options, 'colorField')) {\n            return this.view.getScaleByField(options);\n        }\n    };\n    ViewLayer.prototype.getShapes = function () {\n        var geometries = this.view.geometries;\n        var shapes = {};\n        // todo: geometry 类型转译\n        each(geometries, function (geom) {\n            var type = geom.type;\n            shapes[type] = geom.getShapes();\n        });\n        return shapes;\n    };\n    /** 销毁 */\n    ViewLayer.prototype.destroy = function () {\n        this.doDestroy();\n        _super.prototype.destroy.call(this);\n    };\n    /** 更新配置项 */\n    ViewLayer.prototype.updateConfig = function (cfg) {\n        this.doDestroy();\n        if (!cfg.padding && this.initialOptions.padding && this.initialOptions.padding === 'auto') {\n            cfg.padding = 'auto';\n        }\n        this.options = this.getOptions(cfg);\n        this.processOptions(this.options);\n    };\n    ViewLayer.prototype.changeData = function (data) {\n        this.emit(VIEW_LAYER_LIFE_CYCLE.BEFORE_CHANGE_DATA);\n        var isEmptyBefore = isEmpty(this.options.data);\n        this.options.data = this.processData(data);\n        // 如果之前没有 data\n        if (isEmptyBefore) {\n            this.options.padding = this.initialOptions.padding || 'auto';\n            this.view.data(this.options.data);\n            this.view.render();\n        }\n        else {\n            this.view.changeData(this.options.data);\n        }\n        this.emit(VIEW_LAYER_LIFE_CYCLE.AFTER_CHANGE_DATA);\n    };\n    // plot 不断销毁重建，需要一个api获取最新的plot\n    ViewLayer.prototype.getPlot = function () {\n        return this.view;\n    };\n    /**\n     * 获取已渲染的数据标签组件\n     */\n    ViewLayer.prototype.getLabels = function () {\n        return this.labels;\n    };\n    // 获取对应的G2 Theme\n    ViewLayer.prototype.getTheme = function () {\n        if (!this.theme) {\n            return this.themeController.getTheme(this.options, this.type);\n        }\n        return this.theme;\n    };\n    ViewLayer.prototype.getResponsiveTheme = function () {\n        return this.themeController.getResponsiveTheme(this.type);\n    };\n    // 获取对应的Plot Theme\n    ViewLayer.prototype.getPlotTheme = function () {\n        return this.themeController.getPlotTheme(this.options, this.type);\n    };\n    ViewLayer.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    // 绑定一个外部的stateManager\n    ViewLayer.prototype.bindStateManager = function (stateManager, cfg) {\n        this.stateController.bindStateManager(stateManager, cfg);\n    };\n    // 响应状态量更新的快捷方法\n    ViewLayer.prototype.setActive = function (condition, style) {\n        this.stateController.setState({ type: 'active', condition: condition, style: style });\n    };\n    ViewLayer.prototype.setSelected = function (condition, style) {\n        this.stateController.setState({ type: 'selected', condition: condition, style: style });\n    };\n    ViewLayer.prototype.setDisable = function (condition, style) {\n        this.stateController.setState({ type: 'disable', condition: condition, style: style });\n    };\n    ViewLayer.prototype.setDefault = function (condition, style) {\n        this.stateController.setState({ type: 'default', condition: condition, style: style });\n    };\n    // 获取 ViewLayer 的数据项\n    ViewLayer.prototype.getData = function (start, end) {\n        return this.processData((this.options.data || []).slice(start, end));\n    };\n    ViewLayer.prototype.processData = function (data) {\n        return data;\n    };\n    ViewLayer.prototype.scale = function () {\n        /** scale meta配置 */\n        // 1. this.config.scales中已有子图形在处理xAxis/yAxis是写入的xField/yField对应的scale信息，这里再检查用户设置的meta，将meta信息合并到默认的scale中\n        // 2. 同时xAxis/yAxis中的type优先级更高，覆盖meta中的type配置\n        var scaleTypes = mapValues(this.config.scales, function (scaleConfig) {\n            var type = scaleConfig.type;\n            return type ? { type: type } : {};\n        });\n        var scales = deepMix({}, this.config.scales, this.options.meta || {}, scaleTypes);\n        this.setConfig('scales', scales);\n    };\n    ViewLayer.prototype.axis = function () {\n        var xAxis_parser = getComponent('axis', {\n            plot: this,\n            dim: 'x',\n        });\n        var yAxis_parser = getComponent('axis', {\n            plot: this,\n            dim: 'y',\n        });\n        var axesConfig = {};\n        axesConfig[this.options.xField] = xAxis_parser;\n        axesConfig[this.options.yField] = yAxis_parser;\n        /** 存储坐标轴配置项到config */\n        this.setConfig('axes', axesConfig);\n    };\n    ViewLayer.prototype.tooltip = function () {\n        var _a, _b;\n        if (this.options.tooltip.visible === false) {\n            this.setConfig('tooltip', false);\n            return;\n        }\n        var tooltipOptions = get(this.options, 'tooltip');\n        if ((_a = tooltipOptions.custom) === null || _a === void 0 ? void 0 : _a.container) {\n            tooltipOptions.container = tooltipOptions.custom.container;\n        }\n        if ((_b = tooltipOptions.custom) === null || _b === void 0 ? void 0 : _b.customContent) {\n            tooltipOptions.customContent = tooltipOptions.custom.customContent;\n        }\n        this.setConfig('tooltip', deepMix({}, tooltipOptions));\n        deepMix(this.config.theme.tooltip, this.options.tooltip.domStyles);\n    };\n    ViewLayer.prototype.customTooltip = function () {\n        var _this = this;\n        var customContentCfg = this.options.tooltip.custom;\n        var container;\n        if (customContentCfg.container) {\n            container = isString(customContentCfg.container)\n                ? document.getElementById(customContentCfg.container)\n                : customContentCfg.container;\n        }\n        this.view.on('tooltip:show', function () {\n            if (!customContentCfg.container) {\n                container = _this.canvas.cfg.container.getElementsByClassName('g2-tooltip')[0];\n            }\n        });\n        this.view.hideTooltip();\n        this.view.on('tooltip:change', function (ev) {\n            if (container) {\n                customContentCfg.onChange(container, ev);\n            }\n        });\n    };\n    ViewLayer.prototype.getLegendPosition = function (position) {\n        var positionList = position.split('-');\n        // G2 4.0 兼容 XXX-center 到 XXX 的场景\n        if (positionList && positionList.length > 1 && positionList[1] === 'center') {\n            return positionList[0];\n        }\n        return position;\n    };\n    ViewLayer.prototype.legend = function () {\n        var _a;\n        if (this.options.legend.visible === false) {\n            this.setConfig('legends', false);\n            return;\n        }\n        var options = deepMix({}, this.theme.legend, this.options.legend);\n        var legendConfig = {\n            position: this.getLegendPosition(get(options, 'position')),\n            offsetX: get(options, 'offsetX'),\n            offsetY: get(options, 'offsetY'),\n            flipPage: get(options, 'flipPage'),\n            marker: get(options, 'marker'),\n            title: ((_a = options.title) === null || _a === void 0 ? void 0 : _a.visible) ? get(options, 'title') : null,\n            itemName: get(options, 'text'),\n        };\n        this.setConfig('legends', legendConfig);\n    };\n    ViewLayer.prototype.annotation = function () {\n        var _this = this;\n        var config = [];\n        if (this.config.coordinate.type === 'cartesian' && this.options.guideLine) {\n            each(this.options.guideLine, function (line) {\n                var guideLine = getComponent('guideLine', {\n                    plot: _this,\n                    cfg: line,\n                });\n                config.push(guideLine);\n            });\n        }\n        this.setConfig('annotations', config);\n    };\n    ViewLayer.prototype.interaction = function () {\n        var _this = this;\n        var _a = this.options.interactions, interactions = _a === void 0 ? [] : _a;\n        each(interactions, function (interaction) {\n            var type = interaction.type;\n            if (type === 'slider' || type === 'scrollbar') {\n                var axisConfig = {\n                    label: {\n                        autoHide: true,\n                        autoRotate: false,\n                    },\n                };\n                _this.options.xAxis = deepMix({}, _this.options.xAxis, axisConfig);\n            }\n            _this.setConfig('interaction', interaction);\n        });\n    };\n    ViewLayer.prototype.animation = function () {\n        if (this.options.animation === false) {\n            this.setConfig('animate', false);\n        }\n    };\n    ViewLayer.prototype.applyInteractions = function () {\n        var _this = this;\n        var range = BBox.fromBBoxObject(this.layerBBox);\n        // 临时去掉 title/description 的占用\n        var titleOrDesc = this.title || this.description;\n        var extraBBox = new BBox(range.minX, range.minY, range.width, titleOrDesc ? titleOrDesc.getBBox().maxY : 0);\n        range = range.cut(extraBBox, DIRECTION.TOP);\n        var _a = this.options.interactions, interactions = _a === void 0 ? [] : _a;\n        if (this.interactions) {\n            this.interactions.forEach(function (inst) {\n                inst.destroy();\n            });\n        }\n        this.interactions = [];\n        interactions.forEach(function (interaction) {\n            var Ctor = BaseInteraction.getInteraction(interaction.type, _this.type);\n            if (Ctor) {\n                var inst = new Ctor({ view: _this.view }, _this, Ctor.getInteractionRange(range, interaction.cfg), interaction.cfg);\n                inst.render();\n                _this.interactions.push(inst);\n            }\n        });\n    };\n    /** 设置G2 config，带有类型推导 */\n    ViewLayer.prototype.setConfig = function (key, config) {\n        if (key === 'geometry') {\n            this.config.geometries.push(config);\n            return;\n        }\n        if (key === 'interaction') {\n            this.config.interactions.push(config);\n            return;\n        }\n        if (config === false) {\n            this.config[key] = false;\n            return;\n        }\n        assign(this.config[key], config);\n    };\n    ViewLayer.prototype.parseEvents = function (eventParser) {\n        var _this = this;\n        var options = this.options;\n        if (options.events) {\n            _super.prototype.parseEvents.call(this, options.events);\n            var eventmap_1 = eventParser ? eventParser.EVENT_MAP : EVENT_MAP;\n            each(options.events, function (e, k) {\n                if (isFunction(e)) {\n                    var eventName = eventmap_1[k] || k;\n                    var handler = e;\n                    onEvent(_this, eventName, handler);\n                }\n            });\n        }\n    };\n    ViewLayer.prototype.drawTitle = function () {\n        var props = this.options;\n        var range = this.layerBBox;\n        if (this.title) {\n            this.title.destroy();\n            this.title = null;\n        }\n        if (isTextUsable(props.title)) {\n            var width = this.width;\n            var theme = this.config.theme;\n            var title = new TextDescription({\n                leftMargin: range.minX + theme.title.padding[3],\n                rightMargin: range.maxX - theme.title.padding[1],\n                topMargin: range.minY + theme.title.padding[0],\n                text: props.title.text,\n                style: mix(theme.title, props.title.style),\n                wrapperWidth: width - theme.title.padding[3] - theme.title.padding[1],\n                container: this.container.addGroup(),\n                theme: theme,\n                index: isTextUsable(props.description) ? 0 : 1,\n                plot: this,\n                alignTo: props.title.alignTo,\n                name: 'title',\n            });\n            this.title = title;\n            this.paddingController.registerPadding(title, 'outer');\n        }\n    };\n    ViewLayer.prototype.drawDescription = function () {\n        var props = this.options;\n        var range = this.layerBBox;\n        if (this.description) {\n            this.description.destroy();\n            this.description = null;\n        }\n        if (isTextUsable(props.description)) {\n            var width = this.width;\n            var theme = this.config.theme;\n            var topMargin = 0;\n            if (this.title) {\n                var titleBBox = this.title.getBBox();\n                topMargin += titleBBox.minY + titleBBox.height;\n                topMargin += theme.description.padding[0];\n            }\n            else {\n                // 无title的情况下使用title的上padding\n                topMargin += range.minY + theme.title.padding[0];\n            }\n            var description = new TextDescription({\n                leftMargin: range.minX + theme.description.padding[3],\n                topMargin: topMargin,\n                rightMargin: range.maxX - theme.title.padding[1],\n                text: props.description.text,\n                style: mix(theme.description, props.description.style),\n                wrapperWidth: width - theme.description.padding[3] - theme.description.padding[1],\n                container: this.container.addGroup(),\n                theme: theme,\n                index: 1,\n                plot: this,\n                alignTo: props.description.alignTo,\n                name: 'description',\n            });\n            this.description = description;\n            this.paddingController.registerPadding(description, 'outer');\n        }\n    };\n    ViewLayer.prototype.doRenderLabel = function (geometry, label) {\n        each(this.labels, function (item) {\n            item.destroy();\n        });\n        this.labels = [];\n        var config = {\n            layer: this,\n            container: geometry.labelsContainer,\n            geometry: geometry,\n            label: label,\n        };\n        var Ctor = getLabelComponent(label.type);\n        if (Ctor) {\n            var label_1 = new Ctor(config);\n            label_1.init();\n            label_1.render();\n            this.labels.push(label_1);\n        }\n    };\n    /** 抽取destroy和updateConfig共有代码为_destroy方法 */\n    ViewLayer.prototype.doDestroy = function () {\n        this.doDestroyInteractions();\n        this.doDestroyLabels();\n        /** 销毁g2.view实例 */\n        if (!this.view.destroyed) {\n            this.view.destroy();\n        }\n    };\n    ViewLayer.prototype.doDestroyInteractions = function () {\n        // 移除注册的 interactions\n        if (this.interactions) {\n            this.interactions.forEach(function (inst) {\n                inst.destroy();\n            });\n        }\n        this.interactions = [];\n    };\n    ViewLayer.prototype.doDestroyLabels = function () {\n        // 移除各 geometry 的 label\n        each(this.labels, function (label) {\n            label.destroy();\n        });\n        this.labels = [];\n    };\n    ViewLayer.prototype.getViewRange = function () {\n        var _this = this;\n        // 有 Range 的 Interaction 参与 ViewMargin 计算\n        var _a = this.options.interactions, interactions = _a === void 0 ? [] : _a;\n        // const layerBBox = this.layerBBox;\n        var layerBBox = this.paddingController.processOuterPadding();\n        interactions.forEach(function (interaction) {\n            var Ctor = BaseInteraction.getInteraction(interaction.type, _this.type);\n            var range = Ctor && Ctor.getInteractionRange(layerBBox, interaction.cfg);\n            var position = '';\n            if (range) {\n                // 先只考虑 Range 靠边的情况\n                if (range.maxY === layerBBox.maxY && range.minY > layerBBox.minY) {\n                    // margin[2] += range.height;\n                    position = 'bottom';\n                }\n                else if (range.maxX === layerBBox.maxX && range.minX > layerBBox.minX) {\n                    // margin[1] += range.width;\n                    position = 'right';\n                }\n                else if (range.minX === layerBBox.minX && range.maxX > layerBBox.maxX) {\n                    // margin[3] += range.width;\n                    position = 'left';\n                }\n                else if (range.minY === layerBBox.minY && range.maxY < layerBBox.maxY) {\n                    // margin[0] += range.height;\n                    position = 'top';\n                }\n                _this.paddingController.registerPadding({\n                    interaction: interaction.type,\n                    name: interaction.type,\n                    getBBox: function () {\n                        return range;\n                    },\n                    position: position,\n                }, 'outer');\n            }\n        });\n        var viewRange = this.paddingController.processOuterPadding();\n        return viewRange;\n    };\n    ViewLayer.prototype.isLimitInPlot = function () {\n        var yAxisOptions = this.options.yAxis;\n        if (hasKey(yAxisOptions, 'max') ||\n            hasKey(yAxisOptions, 'min') ||\n            hasKey(yAxisOptions, 'maxLimit') ||\n            hasKey(yAxisOptions, 'minLimit')) {\n            return true;\n        }\n        return false;\n    };\n    ViewLayer.prototype.viewRangeToRegion = function (viewRange) {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var start = { x: 0, y: 0 }, end = { x: 1, y: 1 };\n        start.x = viewRange.minX / (x + width);\n        start.y = viewRange.minY / (y + height);\n        end.x = viewRange.maxX / (x + width);\n        end.y = viewRange.maxY / (y + height);\n        return {\n            start: start,\n            end: end,\n        };\n    };\n    return ViewLayer;\n}(Layer));\nexport default ViewLayer;\n//# sourceMappingURL=view-layer.js.map"]}]}