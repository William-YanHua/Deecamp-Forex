{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\adjust\\esm\\adjusts\\adjust.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\adjust\\esm\\adjusts\\adjust.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import * as _ from '@antv/util';\r\nimport { DEFAULT_Y } from '../constant';\r\nvar Adjust = (function () {\r\n    function Adjust(cfg) {\r\n        var xField = cfg.xField, yField = cfg.yField, _a = cfg.adjustNames, adjustNames = _a === void 0 ? ['x', 'y'] : _a;\r\n        this.adjustNames = adjustNames;\r\n        this.xField = xField;\r\n        this.yField = yField;\r\n    }\r\n    Adjust.prototype.isAdjust = function (dim) {\r\n        return this.adjustNames.indexOf(dim) >= 0;\r\n    };\r\n    Adjust.prototype.getAdjustRange = function (dim, dimValue, values) {\r\n        var yField = this.yField;\r\n        var index = values.indexOf(dimValue);\r\n        var length = values.length;\r\n        var pre;\r\n        var next;\r\n        if (!yField && this.isAdjust('y')) {\r\n            pre = 0;\r\n            next = 1;\r\n        }\r\n        else if (length > 1) {\r\n            pre = values[index === 0 ? 0 : index - 1];\r\n            next = values[index === length - 1 ? length - 1 : index + 1];\r\n            if (index !== 0) {\r\n                pre += (dimValue - pre) / 2;\r\n            }\r\n            else {\r\n                pre -= (next - dimValue) / 2;\r\n            }\r\n            if (index !== length - 1) {\r\n                next -= (next - dimValue) / 2;\r\n            }\r\n            else {\r\n                next += (dimValue - values[length - 2]) / 2;\r\n            }\r\n        }\r\n        else {\r\n            pre = dimValue === 0 ? 0 : dimValue - 0.5;\r\n            next = dimValue === 0 ? 1 : dimValue + 0.5;\r\n        }\r\n        return {\r\n            pre: pre,\r\n            next: next,\r\n        };\r\n    };\r\n    Adjust.prototype.adjustData = function (groupedDataArray, mergedData) {\r\n        var _this = this;\r\n        var dimValuesMap = this.getDimValues(mergedData);\r\n        _.each(groupedDataArray, function (dataArray, index) {\r\n            _.each(dimValuesMap, function (values, dim) {\r\n                _this.adjustDim(dim, values, dataArray, index);\r\n            });\r\n        });\r\n    };\r\n    Adjust.prototype.groupData = function (data, dim) {\r\n        _.each(data, function (record) {\r\n            if (record[dim] === undefined) {\r\n                record[dim] = DEFAULT_Y;\r\n            }\r\n        });\r\n        return _.groupBy(data, dim);\r\n    };\r\n    Adjust.prototype.adjustDim = function (dim, values, data, index) { };\r\n    Adjust.prototype.getDimValues = function (mergedData) {\r\n        var _a = this, xField = _a.xField, yField = _a.yField;\r\n        var dimValuesMap = {};\r\n        var dims = [];\r\n        if (xField && this.isAdjust('x')) {\r\n            dims.push(xField);\r\n        }\r\n        if (yField && this.isAdjust('y')) {\r\n            dims.push(yField);\r\n        }\r\n        dims.forEach(function (dim) {\r\n            dimValuesMap[dim] = _.valuesOfKey(mergedData, dim).sort(function (v1, v2) { return v1 - v2; });\r\n        });\r\n        if (!yField && this.isAdjust('y')) {\r\n            var dim = 'y';\r\n            dimValuesMap[dim] = [DEFAULT_Y, 1];\r\n        }\r\n        return dimValuesMap;\r\n    };\r\n    return Adjust;\r\n}());\r\nexport default Adjust;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\adjust\\esm\\adjusts\\adjust.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\adjust\\esm\\adjusts\\adjust.js"],"names":[],"mappings":"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","sourcesContent":["import * as _ from '@antv/util';\nimport { DEFAULT_Y } from '../constant';\nvar Adjust = /** @class */ (function () {\n    function Adjust(cfg) {\n        var xField = cfg.xField, yField = cfg.yField, _a = cfg.adjustNames, adjustNames = _a === void 0 ? ['x', 'y'] : _a;\n        this.adjustNames = adjustNames;\n        this.xField = xField;\n        this.yField = yField;\n    }\n    /**\n     * 查看维度是否是 adjust 字段\n     * @param dim\n     */\n    Adjust.prototype.isAdjust = function (dim) {\n        return this.adjustNames.indexOf(dim) >= 0;\n    };\n    Adjust.prototype.getAdjustRange = function (dim, dimValue, values) {\n        var yField = this.yField;\n        var index = values.indexOf(dimValue);\n        var length = values.length;\n        var pre;\n        var next;\n        // 没有 y 字段，但是需要根据 y 调整\n        if (!yField && this.isAdjust('y')) {\n            pre = 0;\n            next = 1;\n        }\n        else if (length > 1) {\n            // 如果以其开头，则取之，否则取他前面一个\n            pre = values[index === 0 ? 0 : index - 1];\n            // 如果以其结尾，则取之，否则取他后面一个\n            next = values[index === length - 1 ? length - 1 : index + 1];\n            if (index !== 0) {\n                pre += (dimValue - pre) / 2;\n            }\n            else {\n                pre -= (next - dimValue) / 2;\n            }\n            if (index !== length - 1) {\n                next -= (next - dimValue) / 2;\n            }\n            else {\n                next += (dimValue - values[length - 2]) / 2;\n            }\n        }\n        else {\n            pre = dimValue === 0 ? 0 : dimValue - 0.5;\n            next = dimValue === 0 ? 1 : dimValue + 0.5;\n        }\n        return {\n            pre: pre,\n            next: next,\n        };\n    };\n    Adjust.prototype.adjustData = function (groupedDataArray, mergedData) {\n        var _this = this;\n        // 所有调整维度的值数组\n        var dimValuesMap = this.getDimValues(mergedData);\n        // 按照每一个分组来进行调整\n        _.each(groupedDataArray, function (dataArray, index) {\n            // 遍历所有数据集合\n            // 每个分组中，分别按照不同的 dim 进行调整\n            _.each(dimValuesMap, function (values, dim) {\n                // 根据不同的度量分别调整位置\n                _this.adjustDim(dim, values, dataArray, index);\n            });\n        });\n    };\n    /**\n     * 对数据进行分组adjustData\n     * @param data 数据\n     * @param dim 分组的字段\n     * @return 分组结果\n     */\n    Adjust.prototype.groupData = function (data, dim) {\n        // 补齐数据空数据为默认值\n        _.each(data, function (record) {\n            if (record[dim] === undefined) {\n                record[dim] = DEFAULT_Y;\n            }\n        });\n        // 按照 dim 维度分组\n        return _.groupBy(data, dim);\n    };\n    /** @override */\n    Adjust.prototype.adjustDim = function (dim, values, data, index) { };\n    /**\n     * 获取可调整度量对应的值\n     * @param mergedData 数据\n     * @return 值的映射\n     */\n    Adjust.prototype.getDimValues = function (mergedData) {\n        var _a = this, xField = _a.xField, yField = _a.yField;\n        var dimValuesMap = {};\n        // 所有的维度\n        var dims = [];\n        if (xField && this.isAdjust('x')) {\n            dims.push(xField);\n        }\n        if (yField && this.isAdjust('y')) {\n            dims.push(yField);\n        }\n        dims.forEach(function (dim) {\n            // 在每个维度上，所有的值\n            dimValuesMap[dim] = _.valuesOfKey(mergedData, dim).sort(function (v1, v2) { return v1 - v2; });\n        });\n        // 只有一维的情况下，同时调整 y，赋予默认值\n        if (!yField && this.isAdjust('y')) {\n            var dim = 'y';\n            dimValuesMap[dim] = [DEFAULT_Y, 1]; // 默认分布在 y 轴的 0 与 1 之间\n        }\n        return dimValuesMap;\n    };\n    return Adjust;\n}());\nexport default Adjust;\n//# sourceMappingURL=adjust.js.map"]}]}