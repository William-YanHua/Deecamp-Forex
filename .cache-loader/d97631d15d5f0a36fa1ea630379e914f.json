{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\path-util\\lib\\path-2-segments.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\path-util\\lib\\path-2-segments.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar get_arc_params_1 = require(\"./get-arc-params\");\r\nvar get_arc_params_2 = require(\"./get-arc-params\");\r\nvar parse_path_1 = require(\"./parse-path\");\r\nfunction toSymmetry(point, center) {\r\n    return [center[0] + (center[0] - point[0]), center[1] + (center[1] - point[1])];\r\n}\r\nfunction getSegments(path) {\r\n    path = parse_path_1.default(path);\r\n    var segments = [];\r\n    var currentPoint = null;\r\n    var nextParams = null;\r\n    var startMovePoint = null;\r\n    var lastStartMovePointIndex = 0;\r\n    var count = path.length;\r\n    for (var i = 0; i < count; i++) {\r\n        var params = path[i];\r\n        nextParams = path[i + 1];\r\n        var command = params[0];\r\n        var segment = {\r\n            command: command,\r\n            prePoint: currentPoint,\r\n            params: params,\r\n            startTangent: null,\r\n            endTangent: null,\r\n        };\r\n        switch (command) {\r\n            case 'M':\r\n                startMovePoint = [params[1], params[2]];\r\n                lastStartMovePointIndex = i;\r\n                break;\r\n            case 'A':\r\n                var arcParams = get_arc_params_1.default(currentPoint, params);\r\n                segment['arcParams'] = arcParams;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (command === 'Z') {\r\n            currentPoint = startMovePoint;\r\n            nextParams = path[lastStartMovePointIndex + 1];\r\n        }\r\n        else {\r\n            var len = params.length;\r\n            currentPoint = [params[len - 2], params[len - 1]];\r\n        }\r\n        if (nextParams && nextParams[0] === 'Z') {\r\n            nextParams = path[lastStartMovePointIndex];\r\n            if (segments[lastStartMovePointIndex]) {\r\n                segments[lastStartMovePointIndex].prePoint = currentPoint;\r\n            }\r\n        }\r\n        segment['currentPoint'] = currentPoint;\r\n        if (segments[lastStartMovePointIndex] &&\r\n            get_arc_params_2.isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {\r\n            segments[lastStartMovePointIndex].prePoint = segment.prePoint;\r\n        }\r\n        var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;\r\n        segment['nextPoint'] = nextPoint;\r\n        var prePoint = segment.prePoint;\r\n        if (['L', 'H', 'V'].includes(command)) {\r\n            segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\r\n            segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\r\n        }\r\n        else if (command === 'Q') {\r\n            var cp = [params[1], params[2]];\r\n            segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\r\n            segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\r\n        }\r\n        else if (command === 'T') {\r\n            var preSegment = segments[i - 1];\r\n            var cp = toSymmetry(preSegment.currentPoint, prePoint);\r\n            if (preSegment.command === 'Q') {\r\n                segment.command = 'Q';\r\n                segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\r\n                segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\r\n            }\r\n            else {\r\n                segment.command = 'TL';\r\n                segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\r\n                segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\r\n            }\r\n        }\r\n        else if (command === 'C') {\r\n            var cp1 = [params[1], params[2]];\r\n            var cp2 = [params[3], params[4]];\r\n            segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\r\n            segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\r\n        }\r\n        else if (command === 'S') {\r\n            var preSegment = segments[i - 1];\r\n            var cp1 = toSymmetry(preSegment.currentPoint, prePoint);\r\n            var cp2 = [params[1], params[2]];\r\n            if (preSegment.command === 'C') {\r\n                segment.command = 'C';\r\n                segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\r\n                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\r\n            }\r\n            else {\r\n                segment.command = 'SQ';\r\n                segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];\r\n                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\r\n            }\r\n        }\r\n        else if (command === 'A') {\r\n            var d = 0.001;\r\n            var _a = segment['arcParams'] || {}, _b = _a.cx, cx = _b === void 0 ? 0 : _b, _c = _a.cy, cy = _c === void 0 ? 0 : _c, _d = _a.rx, rx = _d === void 0 ? 0 : _d, _e = _a.ry, ry = _e === void 0 ? 0 : _e, _f = _a.sweepFlag, sweepFlag = _f === void 0 ? 0 : _f, _g = _a.startAngle, startAngle = _g === void 0 ? 0 : _g, _h = _a.endAngle, endAngle = _h === void 0 ? 0 : _h;\r\n            if (sweepFlag === 0) {\r\n                d *= -1;\r\n            }\r\n            var dx1 = rx * Math.cos(startAngle - d) + cx;\r\n            var dy1 = ry * Math.sin(startAngle - d) + cy;\r\n            segment.startTangent = [dx1 - startMovePoint[0], dy1 - startMovePoint[1]];\r\n            var dx2 = rx * Math.cos(startAngle + endAngle + d) + cx;\r\n            var dy2 = ry * Math.sin(startAngle + endAngle - d) + cy;\r\n            segment.endTangent = [prePoint[0] - dx2, prePoint[1] - dy2];\r\n        }\r\n        segments.push(segment);\r\n    }\r\n    return segments;\r\n}\r\nexports.default = getSegments;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\path-util\\lib\\path-2-segments.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\path-util\\lib\\path-2-segments.js"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar get_arc_params_1 = require(\"./get-arc-params\");\nvar get_arc_params_2 = require(\"./get-arc-params\");\nvar parse_path_1 = require(\"./parse-path\");\n// 点对称\nfunction toSymmetry(point, center) {\n    return [center[0] + (center[0] - point[0]), center[1] + (center[1] - point[1])];\n}\nfunction getSegments(path) {\n    path = parse_path_1.default(path);\n    var segments = [];\n    var currentPoint = null; // 当前图形\n    var nextParams = null; // 下一节点的 path 参数\n    var startMovePoint = null; // 开始 M 的点，可能会有多个\n    var lastStartMovePointIndex = 0; // 最近一个开始点 M 的索引\n    var count = path.length;\n    for (var i = 0; i < count; i++) {\n        var params = path[i];\n        nextParams = path[i + 1];\n        var command = params[0];\n        // 数学定义上的参数，便于后面的计算\n        var segment = {\n            command: command,\n            prePoint: currentPoint,\n            params: params,\n            startTangent: null,\n            endTangent: null,\n        };\n        switch (command) {\n            case 'M':\n                startMovePoint = [params[1], params[2]];\n                lastStartMovePointIndex = i;\n                break;\n            case 'A':\n                var arcParams = get_arc_params_1.default(currentPoint, params);\n                segment['arcParams'] = arcParams;\n                break;\n            default:\n                break;\n        }\n        if (command === 'Z') {\n            // 有了 Z 后，当前节点从开始 M 的点开始\n            currentPoint = startMovePoint;\n            // 如果当前点的命令为 Z，相当于当前点为最近一个 M 点，则下一个点直接指向最近一个 M 点的下一个点\n            nextParams = path[lastStartMovePointIndex + 1];\n        }\n        else {\n            var len = params.length;\n            currentPoint = [params[len - 2], params[len - 1]];\n        }\n        if (nextParams && nextParams[0] === 'Z') {\n            // 如果下一个点的命令为 Z，则下一个点直接指向最近一个 M 点\n            nextParams = path[lastStartMovePointIndex];\n            if (segments[lastStartMovePointIndex]) {\n                // 如果下一个点的命令为 Z，则最近一个 M 点的前一个点为当前点\n                segments[lastStartMovePointIndex].prePoint = currentPoint;\n            }\n        }\n        segment['currentPoint'] = currentPoint;\n        // 如果当前点与最近一个 M 点相同，则最近一个 M 点的前一个点为当前点的前一个点\n        if (segments[lastStartMovePointIndex] &&\n            get_arc_params_2.isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {\n            segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n        }\n        var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;\n        segment['nextPoint'] = nextPoint;\n        // Add startTangent and endTangent\n        var prePoint = segment.prePoint;\n        if (['L', 'H', 'V'].includes(command)) {\n            segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n            segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n        }\n        else if (command === 'Q') {\n            // 二次贝塞尔曲线只有一个控制点\n            var cp = [params[1], params[2]];\n            // 二次贝塞尔曲线的终点为 currentPoint\n            segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n            segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n        }\n        else if (command === 'T') {\n            var preSegment = segments[i - 1];\n            var cp = toSymmetry(preSegment.currentPoint, prePoint);\n            if (preSegment.command === 'Q') {\n                segment.command = 'Q';\n                segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n                segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n            }\n            else {\n                segment.command = 'TL';\n                segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n                segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n            }\n        }\n        else if (command === 'C') {\n            // 三次贝塞尔曲线有两个控制点\n            var cp1 = [params[1], params[2]];\n            var cp2 = [params[3], params[4]];\n            segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n            segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n        }\n        else if (command === 'S') {\n            var preSegment = segments[i - 1];\n            var cp1 = toSymmetry(preSegment.currentPoint, prePoint);\n            var cp2 = [params[1], params[2]];\n            if (preSegment.command === 'C') {\n                segment.command = 'C'; // 将 S 命令变换为 C 命令\n                segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n            }\n            else {\n                segment.command = 'SQ'; // 将 S 命令变换为 SQ 命令\n                segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];\n                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n            }\n        }\n        else if (command === 'A') {\n            var d = 0.001;\n            var _a = segment['arcParams'] || {}, _b = _a.cx, cx = _b === void 0 ? 0 : _b, _c = _a.cy, cy = _c === void 0 ? 0 : _c, _d = _a.rx, rx = _d === void 0 ? 0 : _d, _e = _a.ry, ry = _e === void 0 ? 0 : _e, _f = _a.sweepFlag, sweepFlag = _f === void 0 ? 0 : _f, _g = _a.startAngle, startAngle = _g === void 0 ? 0 : _g, _h = _a.endAngle, endAngle = _h === void 0 ? 0 : _h;\n            if (sweepFlag === 0) {\n                d *= -1;\n            }\n            var dx1 = rx * Math.cos(startAngle - d) + cx;\n            var dy1 = ry * Math.sin(startAngle - d) + cy;\n            segment.startTangent = [dx1 - startMovePoint[0], dy1 - startMovePoint[1]];\n            var dx2 = rx * Math.cos(startAngle + endAngle + d) + cx;\n            var dy2 = ry * Math.sin(startAngle + endAngle - d) + cy;\n            segment.endTangent = [prePoint[0] - dx2, prePoint[1] - dy2];\n        }\n        segments.push(segment);\n    }\n    return segments;\n}\nexports.default = getSegments;\n//# sourceMappingURL=path-2-segments.js.map"]}]}