{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-calendar/lib/date/DateInput.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-calendar/lib/date/DateInput.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["'use strict';\nexports.__esModule = true;\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\nvar _inherits2 = require('babel-runtime/helpers/inherits');\nvar _inherits3 = _interopRequireDefault(_inherits2);\nvar _react = require('react');\nvar _react2 = _interopRequireDefault(_react);\nvar _reactDom = require('react-dom');\nvar _reactDom2 = _interopRequireDefault(_reactDom);\nvar _propTypes = require('prop-types');\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar _KeyCode = require('rc-util/lib/KeyCode');\nvar _KeyCode2 = _interopRequireDefault(_KeyCode);\nvar _reactLifecyclesCompat = require('react-lifecycles-compat');\nvar _moment = require('moment');\nvar _moment2 = _interopRequireDefault(_moment);\nvar _util = require('../util');\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\nvar cachedSelectionStart = void 0;\nvar cachedSelectionEnd = void 0;\nvar dateInputInstance = void 0;\nvar DateInput = function (_React$Component) {\n    (0, _inherits3['default'])(DateInput, _React$Component);\n    function DateInput(props) {\n        (0, _classCallCheck3['default'])(this, DateInput);\n        var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n        _initialiseProps.call(_this);\n        var selectedValue = props.selectedValue;\n        _this.state = {\n            str: (0, _util.formatDate)(selectedValue, _this.props.format),\n            invalid: false,\n            hasFocus: false\n        };\n        return _this;\n    }\n    DateInput.prototype.componentDidUpdate = function componentDidUpdate() {\n        if (dateInputInstance && this.state.hasFocus && !this.state.invalid && !(cachedSelectionStart === 0 && cachedSelectionEnd === 0)) {\n            dateInputInstance.setSelectionRange(cachedSelectionStart, cachedSelectionEnd);\n        }\n    };\n    DateInput.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n        var newState = {};\n        if (dateInputInstance) {\n            cachedSelectionStart = dateInputInstance.selectionStart;\n            cachedSelectionEnd = dateInputInstance.selectionEnd;\n        }\n        var selectedValue = nextProps.selectedValue;\n        if (!state.hasFocus) {\n            newState = {\n                str: (0, _util.formatDate)(selectedValue, nextProps.format),\n                invalid: false\n            };\n        }\n        return newState;\n    };\n    DateInput.getInstance = function getInstance() {\n        return dateInputInstance;\n    };\n    DateInput.prototype.render = function render() {\n        var props = this.props;\n        var _state = this.state, invalid = _state.invalid, str = _state.str;\n        var locale = props.locale, prefixCls = props.prefixCls, placeholder = props.placeholder, clearIcon = props.clearIcon, inputMode = props.inputMode;\n        var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n        return _react2['default'].createElement('div', { className: prefixCls + '-input-wrap' }, _react2['default'].createElement('div', { className: prefixCls + '-date-input-wrap' }, _react2['default'].createElement('input', {\n            ref: this.saveDateInput,\n            className: prefixCls + '-input ' + invalidClass,\n            value: str,\n            disabled: props.disabled,\n            placeholder: placeholder,\n            onChange: this.onInputChange,\n            onKeyDown: this.onKeyDown,\n            onFocus: this.onFocus,\n            onBlur: this.onBlur,\n            inputMode: inputMode\n        })), props.showClear ? _react2['default'].createElement('a', {\n            role: 'button',\n            title: locale.clear,\n            onClick: this.onClear\n        }, clearIcon || _react2['default'].createElement('span', { className: prefixCls + '-clear-btn' })) : null);\n    };\n    return DateInput;\n}(_react2['default'].Component);\nDateInput.propTypes = {\n    prefixCls: _propTypes2['default'].string,\n    timePicker: _propTypes2['default'].object,\n    value: _propTypes2['default'].object,\n    disabledTime: _propTypes2['default'].any,\n    format: _propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].arrayOf(_propTypes2['default'].string)]),\n    locale: _propTypes2['default'].object,\n    disabledDate: _propTypes2['default'].func,\n    onChange: _propTypes2['default'].func,\n    onClear: _propTypes2['default'].func,\n    placeholder: _propTypes2['default'].string,\n    onSelect: _propTypes2['default'].func,\n    selectedValue: _propTypes2['default'].object,\n    clearIcon: _propTypes2['default'].node,\n    inputMode: _propTypes2['default'].string\n};\nvar _initialiseProps = function _initialiseProps() {\n    var _this2 = this;\n    this.onClear = function () {\n        _this2.setState({\n            str: ''\n        });\n        _this2.props.onClear(null);\n    };\n    this.onInputChange = function (event) {\n        var str = event.target.value;\n        var _props = _this2.props, disabledDate = _props.disabledDate, format = _props.format, onChange = _props.onChange, selectedValue = _props.selectedValue;\n        if (!str) {\n            onChange(null);\n            _this2.setState({\n                invalid: false,\n                str: str\n            });\n            return;\n        }\n        var parsed = (0, _moment2['default'])(str, format, true);\n        if (!parsed.isValid()) {\n            _this2.setState({\n                invalid: true,\n                str: str\n            });\n            return;\n        }\n        var value = _this2.props.value.clone();\n        value.year(parsed.year()).month(parsed.month()).date(parsed.date()).hour(parsed.hour()).minute(parsed.minute()).second(parsed.second());\n        if (!value || disabledDate && disabledDate(value)) {\n            _this2.setState({\n                invalid: true,\n                str: str\n            });\n            return;\n        }\n        if (selectedValue !== value || selectedValue && value && !selectedValue.isSame(value)) {\n            _this2.setState({\n                invalid: false,\n                str: str\n            });\n            onChange(value);\n        }\n    };\n    this.onFocus = function () {\n        _this2.setState({ hasFocus: true });\n    };\n    this.onBlur = function () {\n        _this2.setState(function (prevState, prevProps) {\n            return {\n                hasFocus: false,\n                str: (0, _util.formatDate)(prevProps.value, prevProps.format)\n            };\n        });\n    };\n    this.onKeyDown = function (event) {\n        var keyCode = event.keyCode;\n        var _props2 = _this2.props, onSelect = _props2.onSelect, value = _props2.value, disabledDate = _props2.disabledDate;\n        if (keyCode === _KeyCode2['default'].ENTER && onSelect) {\n            var validateDate = !disabledDate || !disabledDate(value);\n            if (validateDate) {\n                onSelect(value.clone());\n            }\n            event.preventDefault();\n        }\n    };\n    this.getRootDOMNode = function () {\n        return _reactDom2['default'].findDOMNode(_this2);\n    };\n    this.focus = function () {\n        if (dateInputInstance) {\n            dateInputInstance.focus();\n        }\n    };\n    this.saveDateInput = function (dateInput) {\n        dateInputInstance = dateInput;\n    };\n};\n(0, _reactLifecyclesCompat.polyfill)(DateInput);\nexports['default'] = DateInput;\nmodule.exports = exports['default'];\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-calendar/lib/date/DateInput.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/rc-calendar/lib/date/DateInput.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _KeyCode = require('rc-util/lib/KeyCode');\n\nvar _KeyCode2 = _interopRequireDefault(_KeyCode);\n\nvar _reactLifecyclesCompat = require('react-lifecycles-compat');\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _util = require('../util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar cachedSelectionStart = void 0;\nvar cachedSelectionEnd = void 0;\nvar dateInputInstance = void 0;\n\nvar DateInput = function (_React$Component) {\n  (0, _inherits3['default'])(DateInput, _React$Component);\n\n  function DateInput(props) {\n    (0, _classCallCheck3['default'])(this, DateInput);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue;\n\n    _this.state = {\n      str: (0, _util.formatDate)(selectedValue, _this.props.format),\n      invalid: false,\n      hasFocus: false\n    };\n    return _this;\n  }\n\n  DateInput.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (dateInputInstance && this.state.hasFocus && !this.state.invalid && !(cachedSelectionStart === 0 && cachedSelectionEnd === 0)) {\n      dateInputInstance.setSelectionRange(cachedSelectionStart, cachedSelectionEnd);\n    }\n  };\n\n  DateInput.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n\n    if (dateInputInstance) {\n      cachedSelectionStart = dateInputInstance.selectionStart;\n      cachedSelectionEnd = dateInputInstance.selectionEnd;\n    }\n    // when popup show, click body will call this, bug!\n    var selectedValue = nextProps.selectedValue;\n    if (!state.hasFocus) {\n      newState = {\n        str: (0, _util.formatDate)(selectedValue, nextProps.format),\n        invalid: false\n      };\n    }\n\n    return newState;\n  };\n\n  DateInput.getInstance = function getInstance() {\n    return dateInputInstance;\n  };\n\n  DateInput.prototype.render = function render() {\n    var props = this.props;\n    var _state = this.state,\n        invalid = _state.invalid,\n        str = _state.str;\n    var locale = props.locale,\n        prefixCls = props.prefixCls,\n        placeholder = props.placeholder,\n        clearIcon = props.clearIcon,\n        inputMode = props.inputMode;\n\n    var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n    return _react2['default'].createElement(\n      'div',\n      { className: prefixCls + '-input-wrap' },\n      _react2['default'].createElement(\n        'div',\n        { className: prefixCls + '-date-input-wrap' },\n        _react2['default'].createElement('input', {\n          ref: this.saveDateInput,\n          className: prefixCls + '-input ' + invalidClass,\n          value: str,\n          disabled: props.disabled,\n          placeholder: placeholder,\n          onChange: this.onInputChange,\n          onKeyDown: this.onKeyDown,\n          onFocus: this.onFocus,\n          onBlur: this.onBlur,\n          inputMode: inputMode\n        })\n      ),\n      props.showClear ? _react2['default'].createElement(\n        'a',\n        {\n          role: 'button',\n          title: locale.clear,\n          onClick: this.onClear\n        },\n        clearIcon || _react2['default'].createElement('span', { className: prefixCls + '-clear-btn' })\n      ) : null\n    );\n  };\n\n  return DateInput;\n}(_react2['default'].Component);\n\nDateInput.propTypes = {\n  prefixCls: _propTypes2['default'].string,\n  timePicker: _propTypes2['default'].object,\n  value: _propTypes2['default'].object,\n  disabledTime: _propTypes2['default'].any,\n  format: _propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].arrayOf(_propTypes2['default'].string)]),\n  locale: _propTypes2['default'].object,\n  disabledDate: _propTypes2['default'].func,\n  onChange: _propTypes2['default'].func,\n  onClear: _propTypes2['default'].func,\n  placeholder: _propTypes2['default'].string,\n  onSelect: _propTypes2['default'].func,\n  selectedValue: _propTypes2['default'].object,\n  clearIcon: _propTypes2['default'].node,\n  inputMode: _propTypes2['default'].string\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onClear = function () {\n    _this2.setState({\n      str: ''\n    });\n    _this2.props.onClear(null);\n  };\n\n  this.onInputChange = function (event) {\n    var str = event.target.value;\n    var _props = _this2.props,\n        disabledDate = _props.disabledDate,\n        format = _props.format,\n        onChange = _props.onChange,\n        selectedValue = _props.selectedValue;\n\n    // 没有内容，合法并直接退出\n\n    if (!str) {\n      onChange(null);\n      _this2.setState({\n        invalid: false,\n        str: str\n      });\n      return;\n    }\n\n    // 不合法直接退出\n    var parsed = (0, _moment2['default'])(str, format, true);\n    if (!parsed.isValid()) {\n      _this2.setState({\n        invalid: true,\n        str: str\n      });\n      return;\n    }\n\n    var value = _this2.props.value.clone();\n    value.year(parsed.year()).month(parsed.month()).date(parsed.date()).hour(parsed.hour()).minute(parsed.minute()).second(parsed.second());\n\n    if (!value || disabledDate && disabledDate(value)) {\n      _this2.setState({\n        invalid: true,\n        str: str\n      });\n      return;\n    }\n\n    if (selectedValue !== value || selectedValue && value && !selectedValue.isSame(value)) {\n      _this2.setState({\n        invalid: false,\n        str: str\n      });\n      onChange(value);\n    }\n  };\n\n  this.onFocus = function () {\n    _this2.setState({ hasFocus: true });\n  };\n\n  this.onBlur = function () {\n    _this2.setState(function (prevState, prevProps) {\n      return {\n        hasFocus: false,\n        str: (0, _util.formatDate)(prevProps.value, prevProps.format)\n      };\n    });\n  };\n\n  this.onKeyDown = function (event) {\n    var keyCode = event.keyCode;\n    var _props2 = _this2.props,\n        onSelect = _props2.onSelect,\n        value = _props2.value,\n        disabledDate = _props2.disabledDate;\n\n    if (keyCode === _KeyCode2['default'].ENTER && onSelect) {\n      var validateDate = !disabledDate || !disabledDate(value);\n      if (validateDate) {\n        onSelect(value.clone());\n      }\n      event.preventDefault();\n    }\n  };\n\n  this.getRootDOMNode = function () {\n    return _reactDom2['default'].findDOMNode(_this2);\n  };\n\n  this.focus = function () {\n    if (dateInputInstance) {\n      dateInputInstance.focus();\n    }\n  };\n\n  this.saveDateInput = function (dateInput) {\n    dateInputInstance = dateInput;\n  };\n};\n\n(0, _reactLifecyclesCompat.polyfill)(DateInput);\n\nexports['default'] = DateInput;\nmodule.exports = exports['default'];"]}]}