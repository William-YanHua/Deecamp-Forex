{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\rect.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\rect.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { deepMix, each, filter } from '@antv/util';\r\nimport { DIRECTION } from '../constant';\r\nimport { getFactTitleConfig } from '../util/facet';\r\nimport { Facet } from './facet';\r\nvar Rect = (function (_super) {\r\n    __extends(Rect, _super);\r\n    function Rect() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Rect.prototype.afterEachView = function (view, facet) {\r\n        this.processAxis(view, facet);\r\n    };\r\n    Rect.prototype.beforeEachView = function (view, facet) {\r\n    };\r\n    Rect.prototype.getDefaultCfg = function () {\r\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\r\n            type: 'rect',\r\n            columnTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\r\n            rowTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\r\n        });\r\n    };\r\n    Rect.prototype.render = function () {\r\n        _super.prototype.render.call(this);\r\n        if (this.cfg.showTitle) {\r\n            this.renderTitle();\r\n        }\r\n    };\r\n    Rect.prototype.generateFacets = function (data) {\r\n        var _this = this;\r\n        var _a = this.cfg.fields, columnField = _a[0], rowField = _a[1];\r\n        var rst = [];\r\n        var columnValuesLength = 1;\r\n        var rowValuesLength = 1;\r\n        var columnValues = [''];\r\n        var rowValues = [''];\r\n        if (columnField) {\r\n            columnValues = this.getFieldValues(data, columnField);\r\n            columnValuesLength = columnValues.length;\r\n        }\r\n        if (rowField) {\r\n            rowValues = this.getFieldValues(data, rowField);\r\n            rowValuesLength = rowValues.length;\r\n        }\r\n        columnValues.forEach(function (xVal, xIndex) {\r\n            rowValues.forEach(function (yVal, yIndex) {\r\n                var conditions = [\r\n                    { field: columnField, value: xVal, values: columnValues },\r\n                    { field: rowField, value: yVal, values: rowValues },\r\n                ];\r\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\r\n                var facet = {\r\n                    type: _this.cfg.type,\r\n                    data: facetData,\r\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\r\n                    columnValue: xVal,\r\n                    rowValue: yVal,\r\n                    columnField: columnField,\r\n                    rowField: rowField,\r\n                    columnIndex: xIndex,\r\n                    rowIndex: yIndex,\r\n                    columnValuesLength: columnValuesLength,\r\n                    rowValuesLength: rowValuesLength,\r\n                };\r\n                rst.push(facet);\r\n            });\r\n        });\r\n        return rst;\r\n    };\r\n    Rect.prototype.renderTitle = function () {\r\n        var _this = this;\r\n        each(this.facets, function (facet, facetIndex) {\r\n            var columnIndex = facet.columnIndex, rowIndex = facet.rowIndex, columnValuesLength = facet.columnValuesLength, rowValuesLength = facet.rowValuesLength, columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\r\n            if (rowIndex === 0) {\r\n                var config = deepMix({\r\n                    position: ['50%', '0%'],\r\n                    content: columnValue,\r\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.columnTitle);\r\n                view.annotation().text(config);\r\n            }\r\n            if (columnIndex === columnValuesLength - 1) {\r\n                var config = deepMix({\r\n                    position: ['100%', '50%'],\r\n                    content: rowValue,\r\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.rowTitle);\r\n                view.annotation().text(config);\r\n            }\r\n        });\r\n    };\r\n    Rect.prototype.getXAxisOption = function (x, axes, option, facet) {\r\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\r\n            return __assign(__assign({}, option), { title: null, label: null });\r\n        }\r\n        else if (facet.columnIndex !== Math.floor((facet.columnValuesLength - 1) / 2)) {\r\n            return __assign(__assign({}, option), { title: null });\r\n        }\r\n        return option;\r\n    };\r\n    Rect.prototype.getYAxisOption = function (y, axes, option, facet) {\r\n        if (facet.columnIndex !== 0) {\r\n            return __assign(__assign({}, option), { title: null, label: null });\r\n        }\r\n        else if (facet.rowIndex !== Math.floor((facet.rowValuesLength - 1) / 2)) {\r\n            return __assign(__assign({}, option), { title: null });\r\n        }\r\n        return option;\r\n    };\r\n    return Rect;\r\n}(Facet));\r\nexport default Rect;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\rect.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\rect.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 矩阵分面\n */\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rect.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Rect.prototype.beforeEachView = function (view, facet) {\n        // do nothing\n    };\n    Rect.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'rect',\n            columnTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n            rowTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n        });\n    };\n    Rect.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    /**\n     * 生成矩阵分面的分面数据\n     * @param data\n     */\n    Rect.prototype.generateFacets = function (data) {\n        var _this = this;\n        var _a = this.cfg.fields, columnField = _a[0], rowField = _a[1];\n        var rst = [];\n        var columnValuesLength = 1;\n        var rowValuesLength = 1;\n        var columnValues = [''];\n        var rowValues = [''];\n        if (columnField) {\n            columnValues = this.getFieldValues(data, columnField);\n            columnValuesLength = columnValues.length;\n        }\n        if (rowField) {\n            rowValues = this.getFieldValues(data, rowField);\n            rowValuesLength = rowValues.length;\n        }\n        // 获取每个维度对应的数据配置片段\n        columnValues.forEach(function (xVal, xIndex) {\n            rowValues.forEach(function (yVal, yIndex) {\n                var conditions = [\n                    { field: columnField, value: xVal, values: columnValues },\n                    { field: rowField, value: yVal, values: rowValues },\n                ];\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\n                var facet = {\n                    type: _this.cfg.type,\n                    data: facetData,\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\n                    columnValue: xVal,\n                    rowValue: yVal,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: xIndex,\n                    rowIndex: yIndex,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            });\n        });\n        return rst;\n    };\n    Rect.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnIndex = facet.columnIndex, rowIndex = facet.rowIndex, columnValuesLength = facet.columnValuesLength, rowValuesLength = facet.rowValuesLength, columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            // top\n            if (rowIndex === 0) {\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.columnTitle);\n                view.annotation().text(config);\n            }\n            // right\n            if (columnIndex === columnValuesLength - 1) {\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.rowTitle);\n                view.annotation().text(config);\n            }\n        });\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Rect.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 非最后一行\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        else if (facet.columnIndex !== Math.floor((facet.columnValuesLength - 1) / 2)) {\n            // 不是中间列\n            return __assign(__assign({}, option), { title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Rect.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        else if (facet.rowIndex !== Math.floor((facet.rowValuesLength - 1) / 2)) {\n            return __assign(__assign({}, option), { title: null });\n        }\n        return option;\n    };\n    return Rect;\n}(Facet));\nexport default Rect;\n//# sourceMappingURL=rect.js.map"]}]}