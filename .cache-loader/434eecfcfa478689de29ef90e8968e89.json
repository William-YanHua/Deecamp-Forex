{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\time.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\time.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { each, isDate, isNil, isNumber, isString } from '@antv/util';\r\nimport { timeFormat, toTimeStamp } from '../util/time';\r\nimport Linear from './linear';\r\nvar Time = (function (_super) {\r\n    __extends(Time, _super);\r\n    function Time() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.type = 'time';\r\n        return _this;\r\n    }\r\n    Time.prototype.getText = function (value, index) {\r\n        var numberValue = this.translate(value);\r\n        var formatter = this.formatter;\r\n        return formatter ? formatter(numberValue, index) : timeFormat(numberValue, this.mask);\r\n    };\r\n    Time.prototype.scale = function (value) {\r\n        var v = value;\r\n        if (isString(v) || isDate(v)) {\r\n            v = this.translate(v);\r\n        }\r\n        return _super.prototype.scale.call(this, v);\r\n    };\r\n    Time.prototype.translate = function (v) {\r\n        return toTimeStamp(v);\r\n    };\r\n    Time.prototype.initCfg = function () {\r\n        this.tickMethod = 'time-pretty';\r\n        this.mask = 'YYYY-MM-DD';\r\n        this.tickCount = 7;\r\n        this.nice = false;\r\n    };\r\n    Time.prototype.setDomain = function () {\r\n        var values = this.values;\r\n        var minConfig = this.getConfig('min');\r\n        var maxConfig = this.getConfig('max');\r\n        if (!isNil(minConfig) || !isNumber(minConfig)) {\r\n            this.min = this.translate(this.min);\r\n        }\r\n        if (!isNil(maxConfig) || !isNumber(maxConfig)) {\r\n            this.max = this.translate(this.max);\r\n        }\r\n        if (values && values.length) {\r\n            var timeStamps_1 = [];\r\n            var min_1 = Infinity;\r\n            var secondMin_1 = min_1;\r\n            var max_1 = 0;\r\n            each(values, function (v) {\r\n                var timeStamp = toTimeStamp(v);\r\n                if (isNaN(timeStamp)) {\r\n                    throw new TypeError(\"Invalid Time: \" + v + \" in time scale!\");\r\n                }\r\n                if (min_1 > timeStamp) {\r\n                    secondMin_1 = min_1;\r\n                    min_1 = timeStamp;\r\n                }\r\n                else if (secondMin_1 > timeStamp) {\r\n                    secondMin_1 = timeStamp;\r\n                }\r\n                if (max_1 < timeStamp) {\r\n                    max_1 = timeStamp;\r\n                }\r\n                timeStamps_1.push(timeStamp);\r\n            });\r\n            if (values.length > 1) {\r\n                this.minTickInterval = secondMin_1 - min_1;\r\n            }\r\n            if (isNil(minConfig)) {\r\n                this.min = min_1;\r\n            }\r\n            if (isNil(maxConfig)) {\r\n                this.max = max_1;\r\n            }\r\n        }\r\n    };\r\n    return Time;\r\n}(Linear));\r\nexport default Time;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\time.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\time.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { each, isDate, isNil, isNumber, isString } from '@antv/util';\nimport { timeFormat, toTimeStamp } from '../util/time';\nimport Linear from './linear';\n/**\n * 时间度量\n * @class\n */\nvar Time = /** @class */ (function (_super) {\n    __extends(Time, _super);\n    function Time() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'time';\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Time.prototype.getText = function (value, index) {\n        var numberValue = this.translate(value);\n        var formatter = this.formatter;\n        return formatter ? formatter(numberValue, index) : timeFormat(numberValue, this.mask);\n    };\n    /**\n     * @override\n     */\n    Time.prototype.scale = function (value) {\n        var v = value;\n        if (isString(v) || isDate(v)) {\n            v = this.translate(v);\n        }\n        return _super.prototype.scale.call(this, v);\n    };\n    /**\n     * 将时间转换成数字\n     * @override\n     */\n    Time.prototype.translate = function (v) {\n        return toTimeStamp(v);\n    };\n    Time.prototype.initCfg = function () {\n        this.tickMethod = 'time-pretty';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7;\n        this.nice = false;\n    };\n    Time.prototype.setDomain = function () {\n        var values = this.values;\n        // 是否设置了 min, max，而不是直接取 this.min, this.max\n        var minConfig = this.getConfig('min');\n        var maxConfig = this.getConfig('max');\n        // 如果设置了 min,max 则转换成时间戳\n        if (!isNil(minConfig) || !isNumber(minConfig)) {\n            this.min = this.translate(this.min);\n        }\n        if (!isNil(maxConfig) || !isNumber(maxConfig)) {\n            this.max = this.translate(this.max);\n        }\n        // 没有设置 min, max 时\n        if (values && values.length) {\n            // 重新计算最大最小值\n            var timeStamps_1 = [];\n            var min_1 = Infinity; // 最小值\n            var secondMin_1 = min_1; // 次小值\n            var max_1 = 0;\n            // 使用一个循环，计算min,max,secondMin\n            each(values, function (v) {\n                var timeStamp = toTimeStamp(v);\n                if (isNaN(timeStamp)) {\n                    throw new TypeError(\"Invalid Time: \" + v + \" in time scale!\");\n                }\n                if (min_1 > timeStamp) {\n                    secondMin_1 = min_1;\n                    min_1 = timeStamp;\n                }\n                else if (secondMin_1 > timeStamp) {\n                    secondMin_1 = timeStamp;\n                }\n                if (max_1 < timeStamp) {\n                    max_1 = timeStamp;\n                }\n                timeStamps_1.push(timeStamp);\n            });\n            // 存在多个值时，设置最小间距\n            if (values.length > 1) {\n                this.minTickInterval = secondMin_1 - min_1;\n            }\n            if (isNil(minConfig)) {\n                this.min = min_1;\n            }\n            if (isNil(maxConfig)) {\n                this.max = max_1;\n            }\n        }\n    };\n    return Time;\n}(Linear));\nexport default Time;\n//# sourceMappingURL=time.js.map"]}]}