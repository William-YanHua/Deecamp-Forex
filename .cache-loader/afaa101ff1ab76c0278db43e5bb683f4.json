{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\circle.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\circle.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Base = require('./base');\r\nfunction getPoint(center, r, angle) {\r\n    return {\r\n        x: center.x + r * Math.cos(angle),\r\n        y: center.y + r * Math.sin(angle)\r\n    };\r\n}\r\nvar Circle = function (_Base) {\r\n    _inheritsLoose(Circle, _Base);\r\n    function Circle() {\r\n        return _Base.apply(this, arguments) || this;\r\n    }\r\n    var _proto = Circle.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Base.prototype.getDefaultCfg.call(this);\r\n        cfg.type = 'circle';\r\n        return cfg;\r\n    };\r\n    _proto.getRegion = function getRegion(count, index) {\r\n        var r = 1 / 2;\r\n        var avgAngle = Math.PI * 2 / count;\r\n        var angle = -1 * Math.PI / 2 + avgAngle * index;\r\n        var facetR = r / (1 + 1 / Math.sin(avgAngle / 2));\r\n        var center = {\r\n            x: 0.5,\r\n            y: 0.5\r\n        };\r\n        var middle = getPoint(center, r - facetR, angle);\r\n        var startAngle = Math.PI * 5 / 4;\r\n        var endAngle = Math.PI * 1 / 4;\r\n        return {\r\n            start: getPoint(middle, facetR, startAngle),\r\n            end: getPoint(middle, facetR, endAngle)\r\n        };\r\n    };\r\n    _proto.generateFacets = function generateFacets(data) {\r\n        var self = this;\r\n        var fields = self.fields;\r\n        var field = fields[0];\r\n        if (!field) {\r\n            throw 'Please specify for the field for facet!';\r\n        }\r\n        var values = self.getFieldValues(field, data);\r\n        var count = values.length;\r\n        var rst = [];\r\n        values.forEach(function (value, index) {\r\n            var conditions = [{\r\n                    field: field,\r\n                    value: value,\r\n                    values: values\r\n                }];\r\n            var filter = self.getFilter(conditions);\r\n            var subData = data.filter(filter);\r\n            var facet = {\r\n                type: self.type,\r\n                colValue: value,\r\n                colField: field,\r\n                colIndex: index,\r\n                cols: count,\r\n                rows: 1,\r\n                rowIndex: 0,\r\n                data: subData,\r\n                region: self.getRegion(count, index)\r\n            };\r\n            rst.push(facet);\r\n        });\r\n        return rst;\r\n    };\r\n    return Circle;\r\n}(Base);\r\nmodule.exports = Circle;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\circle.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\lib\\facet\\circle.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview circle facets\n * @author dxq613@gmail.com\n */\nvar Base = require('./base');\n\nfunction getPoint(center, r, angle) {\n  return {\n    x: center.x + r * Math.cos(angle),\n    y: center.y + r * Math.sin(angle)\n  };\n}\n\nvar Circle =\n/*#__PURE__*/\nfunction (_Base) {\n  _inheritsLoose(Circle, _Base);\n\n  function Circle() {\n    return _Base.apply(this, arguments) || this;\n  }\n\n  var _proto = Circle.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Base.prototype.getDefaultCfg.call(this);\n\n    cfg.type = 'circle';\n    return cfg;\n  };\n\n  _proto.getRegion = function getRegion(count, index) {\n    var r = 1 / 2; // 画布半径\n\n    var avgAngle = Math.PI * 2 / count;\n    var angle = -1 * Math.PI / 2 + avgAngle * index; // 当前分面所在的弧度\n\n    var facetR = r / (1 + 1 / Math.sin(avgAngle / 2));\n    var center = {\n      x: 0.5,\n      y: 0.5\n    }; // 画布圆心\n\n    var middle = getPoint(center, r - facetR, angle); // 分面的中心点\n\n    var startAngle = Math.PI * 5 / 4; // 右上角\n\n    var endAngle = Math.PI * 1 / 4; // 左下角\n\n    return {\n      start: getPoint(middle, facetR, startAngle),\n      end: getPoint(middle, facetR, endAngle)\n    };\n  };\n\n  _proto.generateFacets = function generateFacets(data) {\n    var self = this;\n    var fields = self.fields;\n    var field = fields[0];\n\n    if (!field) {\n      throw 'Please specify for the field for facet!';\n    }\n\n    var values = self.getFieldValues(field, data);\n    var count = values.length;\n    var rst = [];\n    values.forEach(function (value, index) {\n      var conditions = [{\n        field: field,\n        value: value,\n        values: values\n      }];\n      var filter = self.getFilter(conditions);\n      var subData = data.filter(filter);\n      var facet = {\n        type: self.type,\n        colValue: value,\n        colField: field,\n        colIndex: index,\n        cols: count,\n        rows: 1,\n        rowIndex: 0,\n        data: subData,\n        region: self.getRegion(count, index)\n      };\n      rst.push(facet);\n    });\n    return rst;\n  };\n\n  return Circle;\n}(Base);\n\nmodule.exports = Circle;"]}]}