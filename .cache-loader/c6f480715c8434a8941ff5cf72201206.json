{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\dagre\\lib\\order\\sort-subgraph.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\dagre\\lib\\order\\sort-subgraph.js","mtime":1517934108000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var _ = require(\"../lodash\"), barycenter = require(\"./barycenter\"), resolveConflicts = require(\"./resolve-conflicts\"), sort = require(\"./sort\");\r\nmodule.exports = sortSubgraph;\r\nfunction sortSubgraph(g, v, cg, biasRight) {\r\n    var movable = g.children(v), node = g.node(v), bl = node ? node.borderLeft : undefined, br = node ? node.borderRight : undefined, subgraphs = {};\r\n    if (bl) {\r\n        movable = _.filter(movable, function (w) {\r\n            return w !== bl && w !== br;\r\n        });\r\n    }\r\n    var barycenters = barycenter(g, movable);\r\n    _.forEach(barycenters, function (entry) {\r\n        if (g.children(entry.v).length) {\r\n            var subgraphResult = sortSubgraph(g, entry.v, cg, biasRight);\r\n            subgraphs[entry.v] = subgraphResult;\r\n            if (_.has(subgraphResult, \"barycenter\")) {\r\n                mergeBarycenters(entry, subgraphResult);\r\n            }\r\n        }\r\n    });\r\n    var entries = resolveConflicts(barycenters, cg);\r\n    expandSubgraphs(entries, subgraphs);\r\n    var result = sort(entries, biasRight);\r\n    if (bl) {\r\n        result.vs = _.flatten([bl, result.vs, br], true);\r\n        if (g.predecessors(bl).length) {\r\n            var blPred = g.node(g.predecessors(bl)[0]), brPred = g.node(g.predecessors(br)[0]);\r\n            if (!_.has(result, \"barycenter\")) {\r\n                result.barycenter = 0;\r\n                result.weight = 0;\r\n            }\r\n            result.barycenter = (result.barycenter * result.weight +\r\n                blPred.order + brPred.order) / (result.weight + 2);\r\n            result.weight += 2;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction expandSubgraphs(entries, subgraphs) {\r\n    _.forEach(entries, function (entry) {\r\n        entry.vs = _.flatten(entry.vs.map(function (v) {\r\n            if (subgraphs[v]) {\r\n                return subgraphs[v].vs;\r\n            }\r\n            return v;\r\n        }), true);\r\n    });\r\n}\r\nfunction mergeBarycenters(target, other) {\r\n    if (!_.isUndefined(target.barycenter)) {\r\n        target.barycenter = (target.barycenter * target.weight +\r\n            other.barycenter * other.weight) /\r\n            (target.weight + other.weight);\r\n        target.weight += other.weight;\r\n    }\r\n    else {\r\n        target.barycenter = other.barycenter;\r\n        target.weight = other.weight;\r\n    }\r\n}\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\dagre\\lib\\order\\sort-subgraph.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\dagre\\lib\\order\\sort-subgraph.js"],"names":[],"mappings":"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","sourcesContent":["var _ = require(\"../lodash\"),\n    barycenter = require(\"./barycenter\"),\n    resolveConflicts = require(\"./resolve-conflicts\"),\n    sort = require(\"./sort\");\n\nmodule.exports = sortSubgraph;\n\nfunction sortSubgraph(g, v, cg, biasRight) {\n  var movable = g.children(v),\n      node = g.node(v),\n      bl = node ? node.borderLeft : undefined,\n      br = node ? node.borderRight: undefined,\n      subgraphs = {};\n\n  if (bl) {\n    movable = _.filter(movable, function(w) {\n      return w !== bl && w !== br;\n    });\n  }\n\n  var barycenters = barycenter(g, movable);\n  _.forEach(barycenters, function(entry) {\n    if (g.children(entry.v).length) {\n      var subgraphResult = sortSubgraph(g, entry.v, cg, biasRight);\n      subgraphs[entry.v] = subgraphResult;\n      if (_.has(subgraphResult, \"barycenter\")) {\n        mergeBarycenters(entry, subgraphResult);\n      }\n    }\n  });\n\n  var entries = resolveConflicts(barycenters, cg);\n  expandSubgraphs(entries, subgraphs);\n\n  var result = sort(entries, biasRight);\n\n  if (bl) {\n    result.vs = _.flatten([bl, result.vs, br], true);\n    if (g.predecessors(bl).length) {\n      var blPred = g.node(g.predecessors(bl)[0]),\n          brPred = g.node(g.predecessors(br)[0]);\n      if (!_.has(result, \"barycenter\")) {\n        result.barycenter = 0;\n        result.weight = 0;\n      }\n      result.barycenter = (result.barycenter * result.weight +\n                           blPred.order + brPred.order) / (result.weight + 2);\n      result.weight += 2;\n    }\n  }\n\n  return result;\n}\n\nfunction expandSubgraphs(entries, subgraphs) {\n  _.forEach(entries, function(entry) {\n    entry.vs = _.flatten(entry.vs.map(function(v) {\n      if (subgraphs[v]) {\n        return subgraphs[v].vs;\n      }\n      return v;\n    }), true);\n  });\n}\n\nfunction mergeBarycenters(target, other) {\n  if (!_.isUndefined(target.barycenter)) {\n    target.barycenter = (target.barycenter * target.weight +\n                         other.barycenter * other.weight) /\n                        (target.weight + other.weight);\n    target.weight += other.weight;\n  } else {\n    target.barycenter = other.barycenter;\n    target.weight = other.weight;\n  }\n}\n"]}]}