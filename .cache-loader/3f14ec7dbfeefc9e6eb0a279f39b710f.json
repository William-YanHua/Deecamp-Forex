{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/annotation/data-marker.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/annotation/data-marker.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __extends, __rest } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\nvar DataMarkerAnnotation = (function (_super) {\n    __extends(DataMarkerAnnotation, _super);\n    function DataMarkerAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DataMarkerAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'dataMarker', locationType: 'point', x: 0, y: 0, point: {}, line: {}, text: {}, direction: 'upward', autoAdjust: true, coordinateBBox: null, defaultCfg: {\n                point: {\n                    display: true,\n                    style: {\n                        r: 3,\n                        fill: '#FFFFFF',\n                        stroke: '#1890FF',\n                        lineWidth: 2,\n                    },\n                },\n                line: {\n                    display: true,\n                    length: 20,\n                    style: {\n                        stroke: Theme.lineColor,\n                        lineWidth: 1,\n                    },\n                },\n                text: {\n                    content: '',\n                    display: true,\n                    style: {\n                        fill: Theme.textColor,\n                        opacity: 0.65,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n            } });\n    };\n    DataMarkerAnnotation.prototype.renderInner = function (group) {\n        if (get(this.get('line'), 'display')) {\n            this.renderLine(group);\n        }\n        if (get(this.get('text'), 'display')) {\n            this.renderText(group);\n        }\n        if (get(this.get('point'), 'display')) {\n            this.renderPoint(group);\n        }\n        if (this.get('autoAdjust')) {\n            this.autoAdjust(group);\n        }\n    };\n    DataMarkerAnnotation.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x') + this.get('offsetX'),\n            y: this.get('y') + this.get('offsetY'),\n        });\n    };\n    DataMarkerAnnotation.prototype.renderPoint = function (group) {\n        var point = this.getShapeAttrs().point;\n        this.addShape(group, {\n            type: 'circle',\n            id: this.getElementId('point'),\n            name: 'annotation-point',\n            attrs: point,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderLine = function (group) {\n        var line = this.getShapeAttrs().line;\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('line'),\n            name: 'annotation-line',\n            attrs: line,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderText = function (group) {\n        var textAttrs = this.getShapeAttrs().text;\n        var x = textAttrs.x, y = textAttrs.y, text = textAttrs.text, style = __rest(textAttrs, [\"x\", \"y\", \"text\"]);\n        var _a = this.get('text'), background = _a.background, maxLength = _a.maxLength, autoEllipsis = _a.autoEllipsis, isVertival = _a.isVertival, ellipsisPosition = _a.ellipsisPosition;\n        var tagCfg = {\n            x: x,\n            y: y,\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            content: text,\n            style: style,\n            background: background,\n            maxLength: maxLength,\n            autoEllipsis: autoEllipsis,\n            isVertival: isVertival,\n            ellipsisPosition: ellipsisPosition,\n        };\n        renderTag(group, tagCfg);\n    };\n    DataMarkerAnnotation.prototype.autoAdjust = function (group) {\n        var direction = this.get('direction');\n        var x = this.get('x');\n        var y = this.get('y');\n        var lineLength = get(this.get('line'), 'length', 0);\n        var coordinateBBox = this.get('coordinateBBox');\n        var _a = group.getBBox(), minX = _a.minX, maxX = _a.maxX, minY = _a.minY, maxY = _a.maxY;\n        var textGroup = group.findById(this.getElementId('text-group'));\n        var textShape = group.findById(this.getElementId('text'));\n        var lineShape = group.findById(this.getElementId('line'));\n        if (!coordinateBBox) {\n            return;\n        }\n        if (textGroup) {\n            if (x + minX <= coordinateBBox.minX) {\n                var overflow = coordinateBBox.minX - (x + minX);\n                applyTranslate(textGroup, textGroup.attr('x') + overflow, textGroup.attr('y'));\n            }\n            if (x + maxX >= coordinateBBox.maxX) {\n                var overflow = x + maxX - coordinateBBox.maxX;\n                applyTranslate(textGroup, textGroup.attr('x') - overflow, textGroup.attr('y'));\n            }\n        }\n        if ((direction === 'upward' && y + minY <= coordinateBBox.minY) ||\n            (direction !== 'upward' && y + maxY >= coordinateBBox.maxY)) {\n            var textBaseline = void 0;\n            var factor = void 0;\n            if (direction === 'upward' && y + minY <= coordinateBBox.minY) {\n                textBaseline = 'top';\n                factor = 1;\n            }\n            else {\n                textBaseline = 'bottom';\n                factor = -1;\n            }\n            textShape.attr('textBaseline', textBaseline);\n            if (lineShape) {\n                lineShape.attr('path', [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ]);\n            }\n            applyTranslate(textGroup, textGroup.attr('x'), (lineLength + 2) * factor);\n        }\n    };\n    DataMarkerAnnotation.prototype.getShapeAttrs = function () {\n        var lineDisplay = get(this.get('line'), 'display');\n        var pointStyle = get(this.get('point'), 'style', {});\n        var lineStyle = get(this.get('line'), 'style', {});\n        var textStyle = get(this.get('text'), 'style', {});\n        var direction = this.get('direction');\n        var lineLength = lineDisplay ? get(this.get('line'), 'length', 0) : 0;\n        var factor = direction === 'upward' ? -1 : 1;\n        return {\n            point: __assign({ x: 0, y: 0 }, pointStyle),\n            line: __assign({ path: [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ] }, lineStyle),\n            text: __assign({ x: 0, y: (lineLength + 2) * factor, text: get(this.get('text'), 'content', ''), textBaseline: direction === 'upward' ? 'bottom' : 'top' }, textStyle),\n        };\n    };\n    return DataMarkerAnnotation;\n}(GroupComponent));\nexport default DataMarkerAnnotation;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/annotation/data-marker.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/annotation/data-marker.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends, __rest } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\nvar DataMarkerAnnotation = /** @class */ (function (_super) {\n    __extends(DataMarkerAnnotation, _super);\n    function DataMarkerAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    DataMarkerAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'dataMarker', locationType: 'point', x: 0, y: 0, point: {}, line: {}, text: {}, direction: 'upward', autoAdjust: true, coordinateBBox: null, defaultCfg: {\n                point: {\n                    display: true,\n                    style: {\n                        r: 3,\n                        fill: '#FFFFFF',\n                        stroke: '#1890FF',\n                        lineWidth: 2,\n                    },\n                },\n                line: {\n                    display: true,\n                    length: 20,\n                    style: {\n                        stroke: Theme.lineColor,\n                        lineWidth: 1,\n                    },\n                },\n                text: {\n                    content: '',\n                    display: true,\n                    style: {\n                        fill: Theme.textColor,\n                        opacity: 0.65,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n            } });\n    };\n    DataMarkerAnnotation.prototype.renderInner = function (group) {\n        if (get(this.get('line'), 'display')) {\n            this.renderLine(group);\n        }\n        if (get(this.get('text'), 'display')) {\n            this.renderText(group);\n        }\n        if (get(this.get('point'), 'display')) {\n            this.renderPoint(group);\n        }\n        if (this.get('autoAdjust')) {\n            this.autoAdjust(group);\n        }\n    };\n    DataMarkerAnnotation.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x') + this.get('offsetX'),\n            y: this.get('y') + this.get('offsetY'),\n        });\n    };\n    DataMarkerAnnotation.prototype.renderPoint = function (group) {\n        var point = this.getShapeAttrs().point;\n        this.addShape(group, {\n            type: 'circle',\n            id: this.getElementId('point'),\n            name: 'annotation-point',\n            attrs: point,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderLine = function (group) {\n        var line = this.getShapeAttrs().line;\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('line'),\n            name: 'annotation-line',\n            attrs: line,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderText = function (group) {\n        var textAttrs = this.getShapeAttrs().text;\n        var x = textAttrs.x, y = textAttrs.y, text = textAttrs.text, style = __rest(textAttrs, [\"x\", \"y\", \"text\"]);\n        var _a = this.get('text'), background = _a.background, maxLength = _a.maxLength, autoEllipsis = _a.autoEllipsis, isVertival = _a.isVertival, ellipsisPosition = _a.ellipsisPosition;\n        var tagCfg = {\n            x: x,\n            y: y,\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            content: text,\n            style: style,\n            background: background,\n            maxLength: maxLength,\n            autoEllipsis: autoEllipsis,\n            isVertival: isVertival,\n            ellipsisPosition: ellipsisPosition,\n        };\n        renderTag(group, tagCfg);\n    };\n    DataMarkerAnnotation.prototype.autoAdjust = function (group) {\n        var direction = this.get('direction');\n        var x = this.get('x');\n        var y = this.get('y');\n        var lineLength = get(this.get('line'), 'length', 0);\n        var coordinateBBox = this.get('coordinateBBox');\n        var _a = group.getBBox(), minX = _a.minX, maxX = _a.maxX, minY = _a.minY, maxY = _a.maxY;\n        var textGroup = group.findById(this.getElementId('text-group'));\n        var textShape = group.findById(this.getElementId('text'));\n        var lineShape = group.findById(this.getElementId('line'));\n        if (!coordinateBBox) {\n            return;\n        }\n        if (textGroup) {\n            if (x + minX <= coordinateBBox.minX) {\n                // 左侧超出\n                var overflow = coordinateBBox.minX - (x + minX);\n                applyTranslate(textGroup, textGroup.attr('x') + overflow, textGroup.attr('y'));\n            }\n            if (x + maxX >= coordinateBBox.maxX) {\n                // 右侧超出\n                var overflow = x + maxX - coordinateBBox.maxX;\n                applyTranslate(textGroup, textGroup.attr('x') - overflow, textGroup.attr('y'));\n            }\n        }\n        if ((direction === 'upward' && y + minY <= coordinateBBox.minY) ||\n            (direction !== 'upward' && y + maxY >= coordinateBBox.maxY)) {\n            // 上方或者下方超出\n            var textBaseline = void 0;\n            var factor = void 0;\n            if (direction === 'upward' && y + minY <= coordinateBBox.minY) {\n                textBaseline = 'top';\n                factor = 1;\n            }\n            else {\n                textBaseline = 'bottom';\n                factor = -1;\n            }\n            textShape.attr('textBaseline', textBaseline);\n            if (lineShape) {\n                lineShape.attr('path', [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ]);\n            }\n            applyTranslate(textGroup, textGroup.attr('x'), (lineLength + 2) * factor);\n        }\n    };\n    DataMarkerAnnotation.prototype.getShapeAttrs = function () {\n        var lineDisplay = get(this.get('line'), 'display');\n        var pointStyle = get(this.get('point'), 'style', {});\n        var lineStyle = get(this.get('line'), 'style', {});\n        var textStyle = get(this.get('text'), 'style', {});\n        var direction = this.get('direction');\n        var lineLength = lineDisplay ? get(this.get('line'), 'length', 0) : 0;\n        var factor = direction === 'upward' ? -1 : 1;\n        return {\n            point: __assign({ x: 0, y: 0 }, pointStyle),\n            line: __assign({ path: [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ] }, lineStyle),\n            text: __assign({ x: 0, y: (lineLength + 2) * factor, text: get(this.get('text'), 'content', ''), textBaseline: direction === 'upward' ? 'bottom' : 'top' }, textStyle),\n        };\n    };\n    return DataMarkerAnnotation;\n}(GroupComponent));\nexport default DataMarkerAnnotation;\n//# sourceMappingURL=data-marker.js.map"]}]}