{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\axis\\state.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\axis\\state.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { each, clone, isObject, isFunction } from '@antv/util';\r\nvar labels;\r\nvar originAttrs;\r\nfunction onActive(plot, condition) {\r\n    if (!labels) {\r\n        getAllAxisLabels(plot);\r\n    }\r\n    each(labels, function (label) {\r\n        var _a = beforeCompare(label, condition), labelData = _a.labelData, con = _a.con;\r\n        if (compare(labelData, con)) {\r\n            var disableStyle = labelActiveStyle();\r\n            label.shape.attr(disableStyle);\r\n        }\r\n    });\r\n}\r\nfunction onDisable(plot, condition) {\r\n    if (!labels) {\r\n        getAllAxisLabels(plot);\r\n    }\r\n    each(labels, function (label, index) {\r\n        var _a = beforeCompare(label, condition), labelData = _a.labelData, con = _a.con;\r\n        if (compare(labelData, con)) {\r\n            var originAttr = originAttrs[index];\r\n            var disableStyle = labelDisableStyle(originAttr);\r\n            label.shape.attr(disableStyle);\r\n        }\r\n    });\r\n}\r\nfunction getAllAxisLabels(plot) {\r\n    labels = [];\r\n    originAttrs = [];\r\n    var axes = plot.view.getController('axis').getComponents();\r\n    each(axes, function (axisComponentOption) {\r\n        var axis = axisComponentOption.component;\r\n        var labelArr = [];\r\n        var scale = getScale(plot, axis);\r\n        var labelShapes = axis.get('labelRenderer').get('group').get('children');\r\n        each(labelShapes, function (shape) {\r\n            if (shape.type === 'text') {\r\n                labelArr.push({ shape: shape });\r\n                originAttrs.push(shape.attr());\r\n            }\r\n        });\r\n        if (scale) {\r\n            var ticks_1 = scale.ticks, field_1 = scale.field;\r\n            each(labelArr, function (label, index) {\r\n                label.value = ticks_1[index];\r\n                label.scaleField = field_1;\r\n                label.type = scale.type;\r\n            });\r\n        }\r\n        labels.push.apply(labels, labelArr);\r\n    });\r\n}\r\nfunction getScale(plot, axis) {\r\n    var props = plot.options;\r\n    var dim = 'y';\r\n    var position = axis.get('position');\r\n    if (position === 'bottom' || position === 'top') {\r\n        dim = 'x';\r\n    }\r\n    var scaleField = props[dim + \"Field\"];\r\n    return plot.view.get('scales')[scaleField];\r\n}\r\nfunction beforeCompare(label, condition) {\r\n    var _a;\r\n    var labelData = (_a = {}, _a[label.scaleField] = label.value, _a);\r\n    var con = clone(condition);\r\n    if (label.type === 'time' && isObject(condition) && !isFunction(con.exp)) {\r\n        con.exp = new Date(con.exp).getTime();\r\n    }\r\n    return { labelData: labelData, con: con };\r\n}\r\nfunction labelDisableStyle(style) {\r\n    var opacity = style.opacity || 1;\r\n    return { opacity: opacity * 0.2 };\r\n}\r\nfunction labelActiveStyle() {\r\n    return { opacity: 1, fontWeight: 600, fill: 'red' };\r\n}\r\nfunction compare(origin, condition) {\r\n    if (!isFunction(condition)) {\r\n        var name_1 = condition.name, exp = condition.exp;\r\n        if (!origin[name_1]) {\r\n            return false;\r\n        }\r\n        if (isFunction(exp)) {\r\n            return exp(origin[name_1]);\r\n        }\r\n        return origin[name_1] === exp;\r\n    }\r\n    return condition(origin);\r\n}\r\nexport default {\r\n    active: onActive,\r\n    selected: onActive,\r\n    disable: onDisable,\r\n};\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\axis\\state.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\axis\\state.js"],"names":[],"mappings":"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","sourcesContent":["import { each, clone, isObject, isFunction } from '@antv/util';\n// import { compare } from '../../base/controller/state';\n// 对axis label和label样式进行缓存\nvar labels;\nvar originAttrs;\nfunction onActive(plot, condition) {\n    if (!labels) {\n        getAllAxisLabels(plot);\n    }\n    each(labels, function (label) {\n        var _a = beforeCompare(label, condition), labelData = _a.labelData, con = _a.con;\n        if (compare(labelData, con)) {\n            var disableStyle = labelActiveStyle();\n            label.shape.attr(disableStyle);\n        }\n    });\n}\nfunction onDisable(plot, condition) {\n    if (!labels) {\n        getAllAxisLabels(plot);\n    }\n    each(labels, function (label, index) {\n        var _a = beforeCompare(label, condition), labelData = _a.labelData, con = _a.con;\n        if (compare(labelData, con)) {\n            var originAttr = originAttrs[index];\n            var disableStyle = labelDisableStyle(originAttr);\n            label.shape.attr(disableStyle);\n        }\n    });\n}\nfunction getAllAxisLabels(plot) {\n    labels = [];\n    originAttrs = [];\n    var axes = plot.view.getController('axis').getComponents();\n    each(axes, function (axisComponentOption) {\n        var axis = axisComponentOption.component;\n        var labelArr = [];\n        var scale = getScale(plot, axis);\n        var labelShapes = axis.get('labelRenderer').get('group').get('children');\n        each(labelShapes, function (shape) {\n            if (shape.type === 'text') {\n                labelArr.push({ shape: shape });\n                originAttrs.push(shape.attr());\n            }\n        });\n        if (scale) {\n            // 取到scale values作为原始数据，避免被label format的影响\n            var ticks_1 = scale.ticks, field_1 = scale.field;\n            each(labelArr, function (label, index) {\n                label.value = ticks_1[index];\n                label.scaleField = field_1;\n                label.type = scale.type;\n            });\n        }\n        labels.push.apply(labels, labelArr);\n    });\n}\n// 获取坐标轴对应的scale\nfunction getScale(plot, axis) {\n    var props = plot.options;\n    var dim = 'y';\n    var position = axis.get('position');\n    if (position === 'bottom' || position === 'top') {\n        dim = 'x';\n    }\n    var scaleField = props[dim + \"Field\"];\n    return plot.view.get('scales')[scaleField];\n}\nfunction beforeCompare(label, condition) {\n    var _a;\n    var labelData = (_a = {}, _a[label.scaleField] = label.value, _a);\n    var con = clone(condition);\n    if (label.type === 'time' && isObject(condition) && !isFunction(con.exp)) {\n        con.exp = new Date(con.exp).getTime();\n    }\n    return { labelData: labelData, con: con };\n}\nfunction labelDisableStyle(style) {\n    var opacity = style.opacity || 1;\n    return { opacity: opacity * 0.2 };\n}\nfunction labelActiveStyle() {\n    return { opacity: 1, fontWeight: 600, fill: 'red' };\n}\nfunction compare(origin, condition) {\n    if (!isFunction(condition)) {\n        var name_1 = condition.name, exp = condition.exp;\n        if (!origin[name_1]) {\n            return false;\n        }\n        if (isFunction(exp)) {\n            return exp(origin[name_1]);\n        }\n        return origin[name_1] === exp;\n    }\n    return condition(origin);\n}\nexport default {\n    active: onActive,\n    selected: onActive,\n    disable: onDisable,\n};\n//# sourceMappingURL=state.js.map"]}]}