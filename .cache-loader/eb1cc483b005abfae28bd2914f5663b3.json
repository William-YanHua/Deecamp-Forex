{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\log.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\log.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\r\nimport { getLogPositiveMin, log } from '../util/math';\r\nimport Continuous from './base';\r\nvar Log = (function (_super) {\r\n    __extends(Log, _super);\r\n    function Log() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.type = 'log';\r\n        return _this;\r\n    }\r\n    Log.prototype.invert = function (value) {\r\n        var base = this.base;\r\n        var max = log(base, this.max);\r\n        var rangeMin = this.rangeMin();\r\n        var range = this.rangeMax() - rangeMin;\r\n        var min;\r\n        var positiveMin = this.positiveMin;\r\n        if (positiveMin) {\r\n            if (value === 0) {\r\n                return 0;\r\n            }\r\n            min = log(base, positiveMin / base);\r\n            var appendPercent = (1 / (max - min)) * range;\r\n            if (value < appendPercent) {\r\n                return (value / appendPercent) * positiveMin;\r\n            }\r\n        }\r\n        else {\r\n            min = log(base, this.min);\r\n        }\r\n        var percent = (value - rangeMin) / range;\r\n        var tmp = percent * (max - min) + min;\r\n        return Math.pow(base, tmp);\r\n    };\r\n    Log.prototype.initCfg = function () {\r\n        this.tickMethod = 'log';\r\n        this.base = 10;\r\n        this.tickCount = 6;\r\n        this.nice = true;\r\n    };\r\n    Log.prototype.setDomain = function () {\r\n        _super.prototype.setDomain.call(this);\r\n        var min = this.min;\r\n        if (min < 0) {\r\n            throw new Error('When you use log scale, the minimum value must be greater than zero!');\r\n        }\r\n        if (min === 0) {\r\n            this.positiveMin = getLogPositiveMin(this.values, this.base, this.max);\r\n        }\r\n    };\r\n    Log.prototype.getScalePercent = function (value) {\r\n        var max = this.max;\r\n        var min = this.min;\r\n        if (max === min) {\r\n            return 0;\r\n        }\r\n        if (value <= 0) {\r\n            return 0;\r\n        }\r\n        var base = this.base;\r\n        var positiveMin = this.positiveMin;\r\n        if (positiveMin) {\r\n            min = (positiveMin * 1) / base;\r\n        }\r\n        var percent;\r\n        if (value < positiveMin) {\r\n            percent = value / positiveMin / (log(base, max) - log(base, min));\r\n        }\r\n        else {\r\n            percent = (log(base, value) - log(base, min)) / (log(base, max) - log(base, min));\r\n        }\r\n        return percent;\r\n    };\r\n    return Log;\r\n}(Continuous));\r\nexport default Log;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\log.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\scale\\esm\\continuous\\log.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { getLogPositiveMin, log } from '../util/math';\nimport Continuous from './base';\n/**\n * Log 度量，处理非均匀分布\n */\nvar Log = /** @class */ (function (_super) {\n    __extends(Log, _super);\n    function Log() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'log';\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Log.prototype.invert = function (value) {\n        var base = this.base;\n        var max = log(base, this.max);\n        var rangeMin = this.rangeMin();\n        var range = this.rangeMax() - rangeMin;\n        var min;\n        var positiveMin = this.positiveMin;\n        if (positiveMin) {\n            if (value === 0) {\n                return 0;\n            }\n            min = log(base, positiveMin / base);\n            var appendPercent = (1 / (max - min)) * range; // 0 到 positiveMin的占比\n            if (value < appendPercent) {\n                // 落到 0 - positiveMin 之间\n                return (value / appendPercent) * positiveMin;\n            }\n        }\n        else {\n            min = log(base, this.min);\n        }\n        var percent = (value - rangeMin) / range;\n        var tmp = percent * (max - min) + min;\n        return Math.pow(base, tmp);\n    };\n    Log.prototype.initCfg = function () {\n        this.tickMethod = 'log';\n        this.base = 10;\n        this.tickCount = 6;\n        this.nice = true;\n    };\n    // 设置\n    Log.prototype.setDomain = function () {\n        _super.prototype.setDomain.call(this);\n        var min = this.min;\n        if (min < 0) {\n            throw new Error('When you use log scale, the minimum value must be greater than zero!');\n        }\n        if (min === 0) {\n            this.positiveMin = getLogPositiveMin(this.values, this.base, this.max);\n        }\n    };\n    // 根据当前值获取占比\n    Log.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        if (max === min) {\n            return 0;\n        }\n        // 如果值小于等于0，则按照0处理\n        if (value <= 0) {\n            return 0;\n        }\n        var base = this.base;\n        var positiveMin = this.positiveMin;\n        // 如果min == 0, 则根据比0大的最小值，计算比例关系。这个最小值作为坐标轴上的第二个tick，第一个是0但是不显示\n        if (positiveMin) {\n            min = (positiveMin * 1) / base;\n        }\n        var percent;\n        // 如果数值小于次小值，那么就计算 value / 次小值 占整体的比例\n        if (value < positiveMin) {\n            percent = value / positiveMin / (log(base, max) - log(base, min));\n        }\n        else {\n            percent = (log(base, value) - log(base, min)) / (log(base, max) - log(base, min));\n        }\n        return percent;\n    };\n    return Log;\n}(Continuous));\nexport default Log;\n//# sourceMappingURL=log.js.map"]}]}