{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\label\\utils\\spiral-adjust.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\label\\utils\\spiral-adjust.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var Greedy = require('./greedy');\r\nvar MAX_TIMES = 20;\r\nfunction spiralFill(label, greedy) {\r\n    var dt = -1;\r\n    var x = label.attr('x'), y = label.attr('y');\r\n    var bbox = label.getBBox();\r\n    var maxDelta = Math.sqrt(bbox.width * bbox.width + bbox.height * bbox.height);\r\n    var dxdy, t = -dt, dx = 0, dy = 0;\r\n    var f = function f(t) {\r\n        return [(t *= 0.1) * Math.cos(t), t * Math.sin(t)];\r\n    };\r\n    if (greedy.hasGap(bbox)) {\r\n        greedy.fillGap(bbox);\r\n        return true;\r\n    }\r\n    var canFill = false, times = 0;\r\n    while (Math.min(Math.abs(dx), Math.abs(dy)) < maxDelta && times < MAX_TIMES) {\r\n        dxdy = f(t += dt);\r\n        dx = ~~dxdy[0];\r\n        dy = ~~dxdy[1];\r\n        label.attr({\r\n            x: x + dx,\r\n            y: y + dy\r\n        });\r\n        times++;\r\n        if (greedy.hasGap(label.getBBox())) {\r\n            greedy.fillGap(bbox);\r\n            canFill = true;\r\n            break;\r\n        }\r\n    }\r\n    return canFill;\r\n}\r\nmodule.exports = function (labels) {\r\n    var label;\r\n    var greedy = new Greedy();\r\n    var toBeRemoved = [];\r\n    for (var i = 0; i < labels.length; i++) {\r\n        label = labels[i];\r\n        if (!spiralFill(label, greedy)) {\r\n            toBeRemoved.push(label);\r\n        }\r\n    }\r\n    for (var _i = 0; _i < toBeRemoved.length; _i++) {\r\n        toBeRemoved[_i].remove();\r\n    }\r\n};\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\label\\utils\\spiral-adjust.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\label\\utils\\spiral-adjust.js"],"names":[],"mappings":"AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAEjC,IAAI,SAAS,GAAG,EAAE,CAAC;AAEnB,SAAS,UAAU,CAAC,KAAK,EAAE,MAAM;IAC/B,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;IACZ,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EACnB,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACxB,IAAI,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;IAC3B,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;IAC9E,IAAI,IAAI,EACJ,CAAC,GAAG,CAAC,EAAE,EACP,EAAE,GAAG,CAAC,EACN,EAAE,GAAG,CAAC,CAAC;IAEX,IAAI,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;QAClB,OAAO,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,CAAC,CAAC;IAEF,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;QACvB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACrB,OAAO,IAAI,CAAC;KACb;IAED,IAAI,OAAO,GAAG,KAAK,EACf,KAAK,GAAG,CAAC,CAAC;IAEd,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,QAAQ,IAAI,KAAK,GAAG,SAAS,EAAE;QAC3E,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;QAClB,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACf,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACf,KAAK,CAAC,IAAI,CAAC;YACT,CAAC,EAAE,CAAC,GAAG,EAAE;YACT,CAAC,EAAE,CAAC,GAAG,EAAE;SACV,CAAC,CAAC;QACH,KAAK,EAAE,CAAC;QAER,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,EAAE;YAClC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,OAAO,GAAG,IAAI,CAAC;YACf,MAAM;SACP;KACF;IAED,OAAO,OAAO,CAAC;AACjB,CAAC;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM;IAC/B,IAAI,KAAK,CAAC;IACV,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;IAC1B,IAAI,WAAW,GAAG,EAAE,CAAC;IAErB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACtC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QAElB,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE;YAC9B,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;IAED,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,WAAW,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;QAC9C,WAAW,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;KAC1B;AACH,CAAC,CAAC","sourcesContent":["var Greedy = require('./greedy');\n\nvar MAX_TIMES = 20;\n\nfunction spiralFill(label, greedy) {\n  var dt = -1;\n  var x = label.attr('x'),\n      y = label.attr('y');\n  var bbox = label.getBBox();\n  var maxDelta = Math.sqrt(bbox.width * bbox.width + bbox.height * bbox.height);\n  var dxdy,\n      t = -dt,\n      dx = 0,\n      dy = 0;\n\n  var f = function f(t) {\n    return [(t *= 0.1) * Math.cos(t), t * Math.sin(t)];\n  };\n\n  if (greedy.hasGap(bbox)) {\n    greedy.fillGap(bbox);\n    return true;\n  }\n\n  var canFill = false,\n      times = 0;\n\n  while (Math.min(Math.abs(dx), Math.abs(dy)) < maxDelta && times < MAX_TIMES) {\n    dxdy = f(t += dt);\n    dx = ~~dxdy[0];\n    dy = ~~dxdy[1];\n    label.attr({\n      x: x + dx,\n      y: y + dy\n    });\n    times++;\n\n    if (greedy.hasGap(label.getBBox())) {\n      greedy.fillGap(bbox);\n      canFill = true;\n      break;\n    }\n  }\n\n  return canFill;\n}\n\nmodule.exports = function (labels) {\n  var label;\n  var greedy = new Greedy();\n  var toBeRemoved = [];\n\n  for (var i = 0; i < labels.length; i++) {\n    label = labels[i];\n\n    if (!spiralFill(label, greedy)) {\n      toBeRemoved.push(label);\n    }\n  }\n\n  for (var _i = 0; _i < toBeRemoved.length; _i++) {\n    toBeRemoved[_i].remove();\n  }\n};"]}]}