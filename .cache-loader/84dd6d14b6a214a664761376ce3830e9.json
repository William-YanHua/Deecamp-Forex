{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\SubPopupMenu.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\SubPopupMenu.js","mtime":1540360653000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\r\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\r\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\r\nimport _inherits from 'babel-runtime/helpers/inherits';\r\nimport _extends from 'babel-runtime/helpers/extends';\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'mini-store';\r\nimport KeyCode from 'rc-util/es/KeyCode';\r\nimport createChainedFunction from 'rc-util/es/createChainedFunction';\r\nimport classNames from 'classnames';\r\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps } from './util';\r\nimport DOMWrap from './DOMWrap';\r\nfunction allDisabled(arr) {\r\n    if (!arr.length) {\r\n        return true;\r\n    }\r\n    return arr.every(function (c) {\r\n        return !!c.props.disabled;\r\n    });\r\n}\r\nfunction updateActiveKey(store, menuId, activeKey) {\r\n    var _extends2;\r\n    var state = store.getState();\r\n    store.setState({\r\n        activeKey: _extends({}, state.activeKey, (_extends2 = {}, _extends2[menuId] = activeKey, _extends2))\r\n    });\r\n}\r\nfunction getEventKey(props) {\r\n    return props.eventKey || '0-menu-';\r\n}\r\nexport function getActiveKey(props, originalActiveKey) {\r\n    var activeKey = originalActiveKey;\r\n    var children = props.children, eventKey = props.eventKey;\r\n    if (activeKey) {\r\n        var found = void 0;\r\n        loopMenuItem(children, function (c, i) {\r\n            if (c && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\r\n                found = true;\r\n            }\r\n        });\r\n        if (found) {\r\n            return activeKey;\r\n        }\r\n    }\r\n    activeKey = null;\r\n    if (props.defaultActiveFirst) {\r\n        loopMenuItem(children, function (c, i) {\r\n            if (!activeKey && c && !c.props.disabled) {\r\n                activeKey = getKeyFromChildrenIndex(c, eventKey, i);\r\n            }\r\n        });\r\n        return activeKey;\r\n    }\r\n    return activeKey;\r\n}\r\nexport function saveRef(c) {\r\n    if (c) {\r\n        var index = this.instanceArray.indexOf(c);\r\n        if (index !== -1) {\r\n            this.instanceArray[index] = c;\r\n        }\r\n        else {\r\n            this.instanceArray.push(c);\r\n        }\r\n    }\r\n}\r\nexport var SubPopupMenu = function (_React$Component) {\r\n    _inherits(SubPopupMenu, _React$Component);\r\n    function SubPopupMenu(props) {\r\n        var _extends3;\r\n        _classCallCheck(this, SubPopupMenu);\r\n        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\r\n        _initialiseProps.call(_this);\r\n        props.store.setState({\r\n            activeKey: _extends({}, props.store.getState().activeKey, (_extends3 = {}, _extends3[props.eventKey] = getActiveKey(props, props.activeKey), _extends3))\r\n        });\r\n        _this.instanceArray = [];\r\n        return _this;\r\n    }\r\n    SubPopupMenu.prototype.componentDidMount = function componentDidMount() {\r\n        if (this.props.manualRef) {\r\n            this.props.manualRef(this);\r\n        }\r\n    };\r\n    SubPopupMenu.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\r\n        return this.props.visible || nextProps.visible;\r\n    };\r\n    SubPopupMenu.prototype.componentDidUpdate = function componentDidUpdate() {\r\n        var props = this.props;\r\n        var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\r\n        var activeKey = getActiveKey(props, originalActiveKey);\r\n        if (activeKey !== originalActiveKey) {\r\n            updateActiveKey(props.store, getEventKey(props), activeKey);\r\n        }\r\n    };\r\n    SubPopupMenu.prototype.render = function render() {\r\n        var _this2 = this;\r\n        var props = _objectWithoutProperties(this.props, []);\r\n        this.instanceArray = [];\r\n        var className = classNames(props.prefixCls, props.className, props.prefixCls + '-' + props.mode);\r\n        var domProps = {\r\n            className: className,\r\n            role: props.role || 'menu'\r\n        };\r\n        if (props.id) {\r\n            domProps.id = props.id;\r\n        }\r\n        if (props.focusable) {\r\n            domProps.tabIndex = '0';\r\n            domProps.onKeyDown = this.onKeyDown;\r\n        }\r\n        var prefixCls = props.prefixCls, eventKey = props.eventKey, visible = props.visible, level = props.level, mode = props.mode, overflowedIndicator = props.overflowedIndicator, theme = props.theme;\r\n        menuAllProps.forEach(function (key) {\r\n            return delete props[key];\r\n        });\r\n        delete props.onClick;\r\n        return (React.createElement(DOMWrap, _extends({}, props, {\r\n            prefixCls: prefixCls,\r\n            mode: mode,\r\n            tag: 'ul',\r\n            level: level,\r\n            theme: theme,\r\n            hiddenClassName: prefixCls + '-hidden',\r\n            visible: visible,\r\n            overflowedIndicator: overflowedIndicator\r\n        }, domProps), React.Children.map(props.children, function (c, i) {\r\n            return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\r\n        })));\r\n    };\r\n    return SubPopupMenu;\r\n}(React.Component);\r\nSubPopupMenu.propTypes = {\r\n    onSelect: PropTypes.func,\r\n    onClick: PropTypes.func,\r\n    onDeselect: PropTypes.func,\r\n    onOpenChange: PropTypes.func,\r\n    onDestroy: PropTypes.func,\r\n    openTransitionName: PropTypes.string,\r\n    openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\r\n    openKeys: PropTypes.arrayOf(PropTypes.string),\r\n    visible: PropTypes.bool,\r\n    children: PropTypes.any,\r\n    parentMenu: PropTypes.object,\r\n    eventKey: PropTypes.string,\r\n    store: PropTypes.shape({\r\n        getState: PropTypes.func,\r\n        setState: PropTypes.func\r\n    }),\r\n    focusable: PropTypes.bool,\r\n    multiple: PropTypes.bool,\r\n    style: PropTypes.object,\r\n    defaultActiveFirst: PropTypes.bool,\r\n    activeKey: PropTypes.string,\r\n    selectedKeys: PropTypes.arrayOf(PropTypes.string),\r\n    defaultSelectedKeys: PropTypes.arrayOf(PropTypes.string),\r\n    defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\r\n    level: PropTypes.number,\r\n    mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\r\n    triggerSubMenuAction: PropTypes.oneOf(['click', 'hover']),\r\n    inlineIndent: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    manualRef: PropTypes.func,\r\n    itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\r\n    expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\r\n};\r\nSubPopupMenu.defaultProps = {\r\n    prefixCls: 'rc-menu',\r\n    className: '',\r\n    mode: 'vertical',\r\n    level: 1,\r\n    inlineIndent: 24,\r\n    visible: true,\r\n    focusable: true,\r\n    style: {},\r\n    manualRef: noop\r\n};\r\nvar _initialiseProps = function _initialiseProps() {\r\n    var _this3 = this;\r\n    this.onKeyDown = function (e, callback) {\r\n        var keyCode = e.keyCode;\r\n        var handled = void 0;\r\n        _this3.getFlatInstanceArray().forEach(function (obj) {\r\n            if (obj && obj.props.active && obj.onKeyDown) {\r\n                handled = obj.onKeyDown(e);\r\n            }\r\n        });\r\n        if (handled) {\r\n            return 1;\r\n        }\r\n        var activeItem = null;\r\n        if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\r\n            activeItem = _this3.step(keyCode === KeyCode.UP ? -1 : 1);\r\n        }\r\n        if (activeItem) {\r\n            e.preventDefault();\r\n            updateActiveKey(_this3.props.store, getEventKey(_this3.props), activeItem.props.eventKey);\r\n            if (typeof callback === 'function') {\r\n                callback(activeItem);\r\n            }\r\n            return 1;\r\n        }\r\n    };\r\n    this.onItemHover = function (e) {\r\n        var key = e.key, hover = e.hover;\r\n        updateActiveKey(_this3.props.store, getEventKey(_this3.props), hover ? key : null);\r\n    };\r\n    this.onDeselect = function (selectInfo) {\r\n        _this3.props.onDeselect(selectInfo);\r\n    };\r\n    this.onSelect = function (selectInfo) {\r\n        _this3.props.onSelect(selectInfo);\r\n    };\r\n    this.onClick = function (e) {\r\n        _this3.props.onClick(e);\r\n    };\r\n    this.onOpenChange = function (e) {\r\n        _this3.props.onOpenChange(e);\r\n    };\r\n    this.onDestroy = function (key) {\r\n        _this3.props.onDestroy(key);\r\n    };\r\n    this.getFlatInstanceArray = function () {\r\n        return _this3.instanceArray;\r\n    };\r\n    this.getOpenTransitionName = function () {\r\n        return _this3.props.openTransitionName;\r\n    };\r\n    this.step = function (direction) {\r\n        var children = _this3.getFlatInstanceArray();\r\n        var activeKey = _this3.props.store.getState().activeKey[getEventKey(_this3.props)];\r\n        var len = children.length;\r\n        if (!len) {\r\n            return null;\r\n        }\r\n        if (direction < 0) {\r\n            children = children.concat().reverse();\r\n        }\r\n        var activeIndex = -1;\r\n        children.every(function (c, ci) {\r\n            if (c && c.props.eventKey === activeKey) {\r\n                activeIndex = ci;\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        if (!_this3.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\r\n            return undefined;\r\n        }\r\n        var start = (activeIndex + 1) % len;\r\n        var i = start;\r\n        do {\r\n            var child = children[i];\r\n            if (!child || child.props.disabled) {\r\n                i = (i + 1) % len;\r\n            }\r\n            else {\r\n                return child;\r\n            }\r\n        } while (i !== start);\r\n        return null;\r\n    };\r\n    this.renderCommonMenuItem = function (child, i, extraProps) {\r\n        var state = _this3.props.store.getState();\r\n        var props = _this3.props;\r\n        var key = getKeyFromChildrenIndex(child, props.eventKey, i);\r\n        var childProps = child.props;\r\n        var isActive = key === state.activeKey;\r\n        var newChildProps = _extends({\r\n            mode: childProps.mode || props.mode,\r\n            level: props.level,\r\n            inlineIndent: props.inlineIndent,\r\n            renderMenuItem: _this3.renderMenuItem,\r\n            rootPrefixCls: props.prefixCls,\r\n            index: i,\r\n            parentMenu: props.parentMenu,\r\n            manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_this3)),\r\n            eventKey: key,\r\n            active: !childProps.disabled && isActive,\r\n            multiple: props.multiple,\r\n            onClick: function onClick(e) {\r\n                (childProps.onClick || noop)(e);\r\n                _this3.onClick(e);\r\n            },\r\n            onItemHover: _this3.onItemHover,\r\n            openTransitionName: _this3.getOpenTransitionName(),\r\n            openAnimation: props.openAnimation,\r\n            subMenuOpenDelay: props.subMenuOpenDelay,\r\n            subMenuCloseDelay: props.subMenuCloseDelay,\r\n            forceSubMenuRender: props.forceSubMenuRender,\r\n            onOpenChange: _this3.onOpenChange,\r\n            onDeselect: _this3.onDeselect,\r\n            onSelect: _this3.onSelect,\r\n            builtinPlacements: props.builtinPlacements,\r\n            itemIcon: childProps.itemIcon || _this3.props.itemIcon,\r\n            expandIcon: childProps.expandIcon || _this3.props.expandIcon\r\n        }, extraProps);\r\n        if (props.mode === 'inline') {\r\n            newChildProps.triggerSubMenuAction = 'click';\r\n        }\r\n        return React.cloneElement(child, newChildProps);\r\n    };\r\n    this.renderMenuItem = function (c, i, subMenuKey) {\r\n        if (!c) {\r\n            return null;\r\n        }\r\n        var state = _this3.props.store.getState();\r\n        var extraProps = {\r\n            openKeys: state.openKeys,\r\n            selectedKeys: state.selectedKeys,\r\n            triggerSubMenuAction: _this3.props.triggerSubMenuAction,\r\n            subMenuKey: subMenuKey\r\n        };\r\n        return _this3.renderCommonMenuItem(c, i, extraProps);\r\n    };\r\n};\r\nvar connected = connect()(SubPopupMenu);\r\nexport default connected;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\SubPopupMenu.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\SubPopupMenu.js"],"names":[],"mappings":"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","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'mini-store';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport createChainedFunction from 'rc-util/es/createChainedFunction';\nimport classNames from 'classnames';\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  var _extends2;\n\n  var state = store.getState();\n  store.setState({\n    activeKey: _extends({}, state.activeKey, (_extends2 = {}, _extends2[menuId] = activeKey, _extends2))\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found = void 0;\n    loopMenuItem(children, function (c, i) {\n      if (c && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n    if (found) {\n      return activeKey;\n    }\n  }\n  activeKey = null;\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n  return activeKey;\n}\n\nexport function saveRef(c) {\n  if (c) {\n    var index = this.instanceArray.indexOf(c);\n    if (index !== -1) {\n      // update component if it's already inside instanceArray\n      this.instanceArray[index] = c;\n    } else {\n      // add component if it's not in instanceArray yet;\n      this.instanceArray.push(c);\n    }\n  }\n}\n\nexport var SubPopupMenu = function (_React$Component) {\n  _inherits(SubPopupMenu, _React$Component);\n\n  function SubPopupMenu(props) {\n    var _extends3;\n\n    _classCallCheck(this, SubPopupMenu);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    props.store.setState({\n      activeKey: _extends({}, props.store.getState().activeKey, (_extends3 = {}, _extends3[props.eventKey] = getActiveKey(props, props.activeKey), _extends3))\n    });\n\n    _this.instanceArray = [];\n    return _this;\n  }\n\n  SubPopupMenu.prototype.componentDidMount = function componentDidMount() {\n    // invoke customized ref to expose component to mixin\n    if (this.props.manualRef) {\n      this.props.manualRef(this);\n    }\n  };\n\n  SubPopupMenu.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    return this.props.visible || nextProps.visible;\n  };\n\n  SubPopupMenu.prototype.componentDidUpdate = function componentDidUpdate() {\n    var props = this.props;\n    var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n    var activeKey = getActiveKey(props, originalActiveKey);\n    if (activeKey !== originalActiveKey) {\n      updateActiveKey(props.store, getEventKey(props), activeKey);\n    }\n  };\n\n  // all keyboard events callbacks run from here at first\n\n\n  SubPopupMenu.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = _objectWithoutProperties(this.props, []);\n\n    this.instanceArray = [];\n    var className = classNames(props.prefixCls, props.className, props.prefixCls + '-' + props.mode);\n    var domProps = {\n      className: className,\n      // role could be 'select' and by default set to menu\n      role: props.role || 'menu'\n    };\n    if (props.id) {\n      domProps.id = props.id;\n    }\n    if (props.focusable) {\n      domProps.tabIndex = '0';\n      domProps.onKeyDown = this.onKeyDown;\n    }\n    var prefixCls = props.prefixCls,\n        eventKey = props.eventKey,\n        visible = props.visible,\n        level = props.level,\n        mode = props.mode,\n        overflowedIndicator = props.overflowedIndicator,\n        theme = props.theme;\n\n    menuAllProps.forEach(function (key) {\n      return delete props[key];\n    });\n\n    // Otherwise, the propagated click event will trigger another onClick\n    delete props.onClick;\n\n    return (\n      // ESLint is not smart enough to know that the type of `children` was checked.\n      /* eslint-disable */\n      React.createElement(\n        DOMWrap,\n        _extends({}, props, {\n          prefixCls: prefixCls,\n          mode: mode,\n          tag: 'ul',\n          level: level,\n          theme: theme,\n          hiddenClassName: prefixCls + '-hidden',\n          visible: visible,\n          overflowedIndicator: overflowedIndicator\n        }, domProps),\n        React.Children.map(props.children, function (c, i) {\n          return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\n        })\n      )\n      /*eslint-enable */\n\n    );\n  };\n\n  return SubPopupMenu;\n}(React.Component);\nSubPopupMenu.propTypes = {\n  onSelect: PropTypes.func,\n  onClick: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  onDestroy: PropTypes.func,\n  openTransitionName: PropTypes.string,\n  openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  openKeys: PropTypes.arrayOf(PropTypes.string),\n  visible: PropTypes.bool,\n  children: PropTypes.any,\n  parentMenu: PropTypes.object,\n  eventKey: PropTypes.string,\n  store: PropTypes.shape({\n    getState: PropTypes.func,\n    setState: PropTypes.func\n  }),\n\n  // adding in refactor\n  focusable: PropTypes.bool,\n  multiple: PropTypes.bool,\n  style: PropTypes.object,\n  defaultActiveFirst: PropTypes.bool,\n  activeKey: PropTypes.string,\n  selectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultSelectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\n  level: PropTypes.number,\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  triggerSubMenuAction: PropTypes.oneOf(['click', 'hover']),\n  inlineIndent: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  manualRef: PropTypes.func,\n  itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\n};\nSubPopupMenu.defaultProps = {\n  prefixCls: 'rc-menu',\n  className: '',\n  mode: 'vertical',\n  level: 1,\n  inlineIndent: 24,\n  visible: true,\n  focusable: true,\n  style: {},\n  manualRef: noop\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onKeyDown = function (e, callback) {\n    var keyCode = e.keyCode;\n    var handled = void 0;\n    _this3.getFlatInstanceArray().forEach(function (obj) {\n      if (obj && obj.props.active && obj.onKeyDown) {\n        handled = obj.onKeyDown(e);\n      }\n    });\n    if (handled) {\n      return 1;\n    }\n    var activeItem = null;\n    if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n      activeItem = _this3.step(keyCode === KeyCode.UP ? -1 : 1);\n    }\n    if (activeItem) {\n      e.preventDefault();\n      updateActiveKey(_this3.props.store, getEventKey(_this3.props), activeItem.props.eventKey);\n\n      if (typeof callback === 'function') {\n        callback(activeItem);\n      }\n\n      return 1;\n    }\n  };\n\n  this.onItemHover = function (e) {\n    var key = e.key,\n        hover = e.hover;\n\n    updateActiveKey(_this3.props.store, getEventKey(_this3.props), hover ? key : null);\n  };\n\n  this.onDeselect = function (selectInfo) {\n    _this3.props.onDeselect(selectInfo);\n  };\n\n  this.onSelect = function (selectInfo) {\n    _this3.props.onSelect(selectInfo);\n  };\n\n  this.onClick = function (e) {\n    _this3.props.onClick(e);\n  };\n\n  this.onOpenChange = function (e) {\n    _this3.props.onOpenChange(e);\n  };\n\n  this.onDestroy = function (key) {\n    /* istanbul ignore next */\n    _this3.props.onDestroy(key);\n  };\n\n  this.getFlatInstanceArray = function () {\n    return _this3.instanceArray;\n  };\n\n  this.getOpenTransitionName = function () {\n    return _this3.props.openTransitionName;\n  };\n\n  this.step = function (direction) {\n    var children = _this3.getFlatInstanceArray();\n    var activeKey = _this3.props.store.getState().activeKey[getEventKey(_this3.props)];\n    var len = children.length;\n    if (!len) {\n      return null;\n    }\n    if (direction < 0) {\n      children = children.concat().reverse();\n    }\n    // find current activeIndex\n    var activeIndex = -1;\n    children.every(function (c, ci) {\n      if (c && c.props.eventKey === activeKey) {\n        activeIndex = ci;\n        return false;\n      }\n      return true;\n    });\n    if (!_this3.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\n      return undefined;\n    }\n    var start = (activeIndex + 1) % len;\n    var i = start;\n\n    do {\n      var child = children[i];\n      if (!child || child.props.disabled) {\n        i = (i + 1) % len;\n      } else {\n        return child;\n      }\n    } while (i !== start);\n\n    return null;\n  };\n\n  this.renderCommonMenuItem = function (child, i, extraProps) {\n    var state = _this3.props.store.getState();\n    var props = _this3.props;\n    var key = getKeyFromChildrenIndex(child, props.eventKey, i);\n    var childProps = child.props;\n    var isActive = key === state.activeKey;\n    var newChildProps = _extends({\n      mode: childProps.mode || props.mode,\n      level: props.level,\n      inlineIndent: props.inlineIndent,\n      renderMenuItem: _this3.renderMenuItem,\n      rootPrefixCls: props.prefixCls,\n      index: i,\n      parentMenu: props.parentMenu,\n      // customized ref function, need to be invoked manually in child's componentDidMount\n      manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_this3)),\n      eventKey: key,\n      active: !childProps.disabled && isActive,\n      multiple: props.multiple,\n      onClick: function onClick(e) {\n        (childProps.onClick || noop)(e);\n        _this3.onClick(e);\n      },\n      onItemHover: _this3.onItemHover,\n      openTransitionName: _this3.getOpenTransitionName(),\n      openAnimation: props.openAnimation,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      onOpenChange: _this3.onOpenChange,\n      onDeselect: _this3.onDeselect,\n      onSelect: _this3.onSelect,\n      builtinPlacements: props.builtinPlacements,\n      itemIcon: childProps.itemIcon || _this3.props.itemIcon,\n      expandIcon: childProps.expandIcon || _this3.props.expandIcon\n    }, extraProps);\n    if (props.mode === 'inline') {\n      newChildProps.triggerSubMenuAction = 'click';\n    }\n    return React.cloneElement(child, newChildProps);\n  };\n\n  this.renderMenuItem = function (c, i, subMenuKey) {\n    /* istanbul ignore if */\n    if (!c) {\n      return null;\n    }\n    var state = _this3.props.store.getState();\n    var extraProps = {\n      openKeys: state.openKeys,\n      selectedKeys: state.selectedKeys,\n      triggerSubMenuAction: _this3.props.triggerSubMenuAction,\n      subMenuKey: subMenuKey\n    };\n    return _this3.renderCommonMenuItem(c, i, extraProps);\n  };\n};\n\nvar connected = connect()(SubPopupMenu);\n\nexport default connected;"]}]}