{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\component\\esm\\legend\\category.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\component\\esm\\legend\\category.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { each, filter, get, mix } from '@antv/util';\r\nimport { getMatrixByAngle, getMatrixByTranslate } from '../util/matrix';\r\nimport { getStatesStyle } from '../util/state';\r\nimport Theme from '../util/theme';\r\nimport LegendBase from './base';\r\nvar Category = (function (_super) {\r\n    __extends(Category, _super);\r\n    function Category() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.currentPageIndex = 1;\r\n        _this.totalPagesCnt = 1;\r\n        _this.pageWidth = 0;\r\n        _this.pageHeight = 0;\r\n        _this.startX = 0;\r\n        _this.startY = 0;\r\n        _this.onNavigationBack = function () {\r\n            var itemGroup = _this.getElementByLocalId('item-group');\r\n            if (_this.currentPageIndex > 1) {\r\n                _this.currentPageIndex -= 1;\r\n                _this.updateNavigation();\r\n                var matrix = _this.getCurrentNavigationMatrix();\r\n                if (_this.get('animate')) {\r\n                    itemGroup.animate({\r\n                        matrix: matrix,\r\n                    }, 100);\r\n                }\r\n                else {\r\n                    itemGroup.attr({ matrix: matrix });\r\n                }\r\n            }\r\n        };\r\n        _this.onNavigationAfter = function () {\r\n            var itemGroup = _this.getElementByLocalId('item-group');\r\n            if (_this.currentPageIndex < _this.totalPagesCnt) {\r\n                _this.currentPageIndex += 1;\r\n                _this.updateNavigation();\r\n                var matrix = _this.getCurrentNavigationMatrix();\r\n                if (_this.get('animate')) {\r\n                    itemGroup.animate({\r\n                        matrix: matrix,\r\n                    }, 100);\r\n                }\r\n                else {\r\n                    itemGroup.attr({ matrix: matrix });\r\n                }\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    Category.prototype.getDefaultCfg = function () {\r\n        var cfg = _super.prototype.getDefaultCfg.call(this);\r\n        return __assign(__assign({}, cfg), { name: 'legend', type: 'category', itemSpacing: 24, itemWidth: null, itemHeight: null, itemName: {}, itemValue: null, maxWidth: null, maxHeight: null, marker: {}, items: [], itemStates: {}, itemBackground: {}, defaultCfg: {\r\n                title: {\r\n                    spacing: 5,\r\n                    style: {\r\n                        fill: Theme.textColor,\r\n                        fontSize: 12,\r\n                        textAlign: 'start',\r\n                        textBaseline: 'top',\r\n                    },\r\n                },\r\n                background: {\r\n                    padding: 5,\r\n                    style: {\r\n                        stroke: Theme.lineColor,\r\n                    },\r\n                },\r\n                itemBackground: {\r\n                    style: {\r\n                        opacity: 0,\r\n                        fill: '#fff',\r\n                    },\r\n                },\r\n                itemName: {\r\n                    spacing: 16,\r\n                    style: {\r\n                        fill: Theme.textColor,\r\n                        fontSize: 12,\r\n                        textAlign: 'start',\r\n                        textBaseline: 'middle',\r\n                    },\r\n                },\r\n                marker: {\r\n                    spacing: 8,\r\n                    style: {\r\n                        r: 6,\r\n                        symbol: 'circle',\r\n                    },\r\n                },\r\n                itemValue: {\r\n                    alignRight: false,\r\n                    formatter: null,\r\n                    style: {\r\n                        fill: Theme.textColor,\r\n                        fontSize: 12,\r\n                        textAlign: 'start',\r\n                        textBaseline: 'middle',\r\n                    },\r\n                },\r\n                itemStates: {\r\n                    active: {\r\n                        nameStyle: {\r\n                            opacity: 0.8,\r\n                        },\r\n                    },\r\n                    unchecked: {\r\n                        nameStyle: {\r\n                            fill: Theme.uncheckedColor,\r\n                        },\r\n                        markerStyle: {\r\n                            fill: Theme.uncheckedColor,\r\n                            stroke: Theme.uncheckedColor,\r\n                        },\r\n                    },\r\n                    inactive: {\r\n                        nameStyle: {\r\n                            fill: Theme.uncheckedColor,\r\n                        },\r\n                        markerStyle: {\r\n                            opacity: 0.2,\r\n                        },\r\n                    },\r\n                },\r\n            } });\r\n    };\r\n    Category.prototype.isList = function () {\r\n        return true;\r\n    };\r\n    Category.prototype.getItems = function () {\r\n        return this.get('items');\r\n    };\r\n    Category.prototype.setItems = function (items) {\r\n        this.update({\r\n            items: items,\r\n        });\r\n    };\r\n    Category.prototype.updateItem = function (item, cfg) {\r\n        mix(item, cfg);\r\n        this.clear();\r\n        this.render();\r\n    };\r\n    Category.prototype.clearItems = function () {\r\n        var itemGroup = this.getElementByLocalId('item-group');\r\n        itemGroup && itemGroup.clear();\r\n    };\r\n    Category.prototype.setItemState = function (item, state, value) {\r\n        item[state] = value;\r\n        var itemElement = this.getElementByLocalId(\"item-\" + item.id);\r\n        if (itemElement) {\r\n            var items = this.getItems();\r\n            var index = items.indexOf(item);\r\n            var offsetGroup = this.createOffScreenGroup();\r\n            var newElement = this.drawItem(item, index, this.getItemHeight(), offsetGroup);\r\n            this.updateElements(newElement, itemElement);\r\n            this.clearUpdateStatus(itemElement);\r\n        }\r\n    };\r\n    Category.prototype.hasState = function (item, state) {\r\n        return !!item[state];\r\n    };\r\n    Category.prototype.getItemStates = function (item) {\r\n        var itemStates = this.get('itemStates');\r\n        var rst = [];\r\n        each(itemStates, function (v, k) {\r\n            if (item[k]) {\r\n                rst.push(k);\r\n            }\r\n        });\r\n        return rst;\r\n    };\r\n    Category.prototype.clearItemsState = function (state) {\r\n        var _this = this;\r\n        var items = this.getItemsByState(state);\r\n        each(items, function (item) {\r\n            _this.setItemState(item, state, false);\r\n        });\r\n    };\r\n    Category.prototype.getItemsByState = function (state) {\r\n        var _this = this;\r\n        var items = this.getItems();\r\n        return filter(items, function (item) {\r\n            return _this.hasState(item, state);\r\n        });\r\n    };\r\n    Category.prototype.drawLegendContent = function (group) {\r\n        this.processItems();\r\n        this.drawItems(group);\r\n    };\r\n    Category.prototype.processItems = function () {\r\n        var items = this.get('items');\r\n        each(items, function (item) {\r\n            if (!item.id) {\r\n                item.id = item.name;\r\n            }\r\n        });\r\n    };\r\n    Category.prototype.drawItems = function (group) {\r\n        var _this = this;\r\n        var itemContainerGroup = this.addGroup(group, {\r\n            id: this.getElementId('item-container-group'),\r\n            name: 'legend-item-container-group',\r\n        });\r\n        var itemGroup = this.addGroup(itemContainerGroup, {\r\n            id: this.getElementId('item-group'),\r\n            name: 'legend-item-group',\r\n        });\r\n        var itemHeight = this.getItemHeight();\r\n        var itemWidth = this.get('itemWidth');\r\n        var itemSpacing = this.get('itemSpacing');\r\n        var currentPoint = this.get('currentPoint');\r\n        var startX = currentPoint.x;\r\n        var startY = currentPoint.y;\r\n        var layout = this.get('layout');\r\n        var items = this.get('items');\r\n        var wrapped = false;\r\n        var pageWidth = 0;\r\n        var maxWidth = this.get('maxWidth');\r\n        var maxHeight = this.get('maxHeight');\r\n        each(items, function (item, index) {\r\n            var subGroup = _this.drawItem(item, index, itemHeight, itemGroup);\r\n            var bbox = subGroup.getBBox();\r\n            var width = itemWidth || bbox.width;\r\n            if (width > pageWidth) {\r\n                pageWidth = width;\r\n            }\r\n            if (layout === 'horizontal') {\r\n                if (maxWidth && maxWidth < currentPoint.x + width - startX) {\r\n                    wrapped = true;\r\n                    currentPoint.x = startX;\r\n                    currentPoint.y += itemHeight;\r\n                }\r\n                _this.moveElementTo(subGroup, currentPoint);\r\n                currentPoint.x += width + itemSpacing;\r\n            }\r\n            else {\r\n                if (maxHeight && maxHeight < currentPoint.y + itemHeight - startY) {\r\n                    wrapped = true;\r\n                    currentPoint.x += pageWidth + itemSpacing;\r\n                    currentPoint.y = startY;\r\n                    pageWidth = 0;\r\n                }\r\n                _this.moveElementTo(subGroup, currentPoint);\r\n                currentPoint.y += itemHeight;\r\n            }\r\n        });\r\n        if (wrapped && this.get('flipPage')) {\r\n            this.pageHeight = 0;\r\n            this.pageWidth = 0;\r\n            this.totalPagesCnt = 1;\r\n            this.startX = startX;\r\n            this.startY = startY;\r\n            this.adjustNavigation(group, itemGroup);\r\n        }\r\n    };\r\n    Category.prototype.getItemHeight = function () {\r\n        var itemHeight = this.get('itemHeight');\r\n        if (!itemHeight) {\r\n            var nameCfg = this.get('itemName');\r\n            if (nameCfg) {\r\n                itemHeight = nameCfg.style.fontSize + 8;\r\n            }\r\n        }\r\n        return itemHeight;\r\n    };\r\n    Category.prototype.drawMarker = function (container, markerCfg, item, itemHeight) {\r\n        var markerAttrs = __assign(__assign(__assign({ x: 0, y: itemHeight / 2 }, markerCfg.style), { symbol: get(item.marker, 'symbol', 'circle') }), get(item.marker, 'style', {}));\r\n        var shape = this.addShape(container, {\r\n            type: 'marker',\r\n            id: this.getElementId(\"item-\" + item.id + \"-marker\"),\r\n            name: 'legend-item-marker',\r\n            attrs: markerAttrs,\r\n        });\r\n        var bbox = shape.getBBox();\r\n        shape.attr('x', bbox.width / 2);\r\n        var _a = shape.attr(), stroke = _a.stroke, fill = _a.fill;\r\n        if (stroke) {\r\n            shape.set('isStroke', true);\r\n        }\r\n        if (fill) {\r\n            shape.set('isFill', true);\r\n        }\r\n        return shape;\r\n    };\r\n    Category.prototype.drawItemText = function (container, textName, cfg, item, itemHeight, xPosition, index) {\r\n        var formatter = cfg.formatter;\r\n        var attrs = __assign({ x: xPosition, y: itemHeight / 2, text: formatter ? formatter(item[textName], item, index) : item[textName] }, cfg.style);\r\n        return this.addShape(container, {\r\n            type: 'text',\r\n            id: this.getElementId(\"item-\" + item.id + \"-\" + textName),\r\n            name: \"legend-item-\" + textName,\r\n            attrs: attrs,\r\n        });\r\n    };\r\n    Category.prototype.drawItem = function (item, index, itemHeight, itemGroup) {\r\n        var groupId = \"item-\" + item.id;\r\n        var subContainer = this.addGroup(itemGroup, {\r\n            name: 'legend-item-container',\r\n            id: this.getElementId(\"item-container-\" + groupId),\r\n            delegateObject: {\r\n                item: item,\r\n                index: index,\r\n            },\r\n        });\r\n        var subGroup = this.addGroup(subContainer, {\r\n            name: 'legend-item',\r\n            id: this.getElementId(groupId),\r\n            delegateObject: {\r\n                item: item,\r\n                index: index,\r\n            },\r\n        });\r\n        var marker = this.get('marker');\r\n        var itemName = this.get('itemName');\r\n        var itemValue = this.get('itemValue');\r\n        var itemBackground = this.get('itemBackground');\r\n        var curX = 0;\r\n        if (marker) {\r\n            var markerShape = this.drawMarker(subGroup, marker, item, itemHeight);\r\n            curX = markerShape.getBBox().maxX + marker.spacing;\r\n        }\r\n        if (itemName) {\r\n            var nameShape = this.drawItemText(subGroup, 'name', itemName, item, itemHeight, curX, index);\r\n            curX = nameShape.getBBox().maxX + itemName.spacing;\r\n        }\r\n        if (itemValue) {\r\n            var valueShape = this.drawItemText(subGroup, 'value', itemValue, item, itemHeight, curX, index);\r\n            var itemWidth = this.get('itemWidth');\r\n            if (itemWidth && itemValue.alignRight) {\r\n                valueShape.attr({\r\n                    textAlign: 'right',\r\n                    x: itemWidth,\r\n                });\r\n            }\r\n        }\r\n        if (itemBackground) {\r\n            var bbox = subGroup.getBBox();\r\n            var backShape = this.addShape(subGroup, {\r\n                type: 'rect',\r\n                name: 'legend-item-background',\r\n                id: this.getElementId(groupId + \"-background\"),\r\n                attrs: __assign({ x: 0, y: 0, width: bbox.width, height: itemHeight }, itemBackground.style),\r\n            });\r\n            backShape.toBack();\r\n        }\r\n        this.applyItemStates(item, subGroup);\r\n        return subGroup;\r\n    };\r\n    Category.prototype.adjustNavigation = function (container, itemGroup) {\r\n        var _this = this;\r\n        var startX = this.startX;\r\n        var startY = this.startY;\r\n        var layout = this.get('layout');\r\n        var subGroups = itemGroup.findAll(function (item) { return item.get('name') === 'legend-item'; });\r\n        var maxWidth = this.get('maxWidth');\r\n        var maxHeight = this.get('maxHeight');\r\n        var itemWidth = this.get('itemWidth');\r\n        var itemSpacing = this.get('itemSpacing');\r\n        var itemHeight = this.getItemHeight();\r\n        var navigation = this.drawNavigation(container, layout, '00/00', 12);\r\n        var navigationBBox = navigation.getBBox();\r\n        var currentPoint = { x: startX, y: startY };\r\n        var pages = 1;\r\n        var widthLimit = 0;\r\n        var pageWidth = 0;\r\n        var maxItemWidth = 0;\r\n        if (layout === 'horizontal') {\r\n            this.pageHeight = itemHeight;\r\n            each(subGroups, function (item) {\r\n                var bbox = item.getBBox();\r\n                var width = itemWidth || bbox.width;\r\n                if ((widthLimit && widthLimit < currentPoint.x + width + itemSpacing) ||\r\n                    maxWidth < currentPoint.x + width + itemSpacing + navigationBBox.width) {\r\n                    if (pages === 1) {\r\n                        widthLimit = currentPoint.x + itemSpacing;\r\n                        _this.pageWidth = widthLimit;\r\n                        _this.moveElementTo(navigation, {\r\n                            x: maxWidth - itemSpacing - navigationBBox.width - navigationBBox.minX,\r\n                            y: currentPoint.y + itemHeight / 2 - navigationBBox.height / 2 - navigationBBox.minY,\r\n                        });\r\n                    }\r\n                    pages += 1;\r\n                    currentPoint.x = startX;\r\n                    currentPoint.y += itemHeight;\r\n                }\r\n                _this.moveElementTo(item, currentPoint);\r\n                item.getParent().setClip({\r\n                    type: 'rect',\r\n                    attrs: {\r\n                        x: currentPoint.x,\r\n                        y: currentPoint.y,\r\n                        width: width + itemSpacing,\r\n                        height: itemHeight,\r\n                    },\r\n                });\r\n                currentPoint.x += width + itemSpacing;\r\n            });\r\n        }\r\n        else {\r\n            each(subGroups, function (item) {\r\n                var bbox = item.getBBox();\r\n                if (bbox.width > pageWidth) {\r\n                    pageWidth = bbox.width;\r\n                }\r\n            });\r\n            maxItemWidth = pageWidth;\r\n            pageWidth += itemSpacing;\r\n            if (maxWidth) {\r\n                pageWidth = Math.min(maxWidth, pageWidth);\r\n                maxItemWidth = Math.min(maxWidth, maxItemWidth);\r\n            }\r\n            this.pageWidth = pageWidth;\r\n            this.pageHeight = maxHeight - Math.max(navigationBBox.height, itemHeight);\r\n            var cntPerPage_1 = Math.floor(this.pageHeight / itemHeight);\r\n            each(subGroups, function (item, index) {\r\n                if (index !== 0 && index % cntPerPage_1 === 0) {\r\n                    pages += 1;\r\n                    currentPoint.x += pageWidth;\r\n                    currentPoint.y = startY;\r\n                }\r\n                _this.moveElementTo(item, currentPoint);\r\n                item.getParent().setClip({\r\n                    type: 'rect',\r\n                    attrs: {\r\n                        x: currentPoint.x,\r\n                        y: currentPoint.y,\r\n                        width: pageWidth,\r\n                        height: itemHeight,\r\n                    },\r\n                });\r\n                currentPoint.y += itemHeight;\r\n            });\r\n            this.totalPagesCnt = pages;\r\n            this.moveElementTo(navigation, {\r\n                x: startX + maxItemWidth / 2 - navigationBBox.width / 2 - navigationBBox.minX,\r\n                y: maxHeight - navigationBBox.height - navigationBBox.minY,\r\n            });\r\n        }\r\n        if (this.pageHeight && this.pageWidth) {\r\n            itemGroup.getParent().setClip({\r\n                type: 'rect',\r\n                attrs: {\r\n                    x: this.startX,\r\n                    y: this.startY,\r\n                    width: this.pageWidth,\r\n                    height: this.pageHeight,\r\n                },\r\n            });\r\n        }\r\n        this.totalPagesCnt = pages;\r\n        if (this.currentPageIndex > this.totalPagesCnt) {\r\n            this.currentPageIndex = 1;\r\n        }\r\n        this.updateNavigation(navigation);\r\n        itemGroup.attr('matrix', this.getCurrentNavigationMatrix());\r\n    };\r\n    Category.prototype.drawNavigation = function (group, layout, text, size) {\r\n        var currentPoint = { x: 0, y: 0 };\r\n        var subGroup = this.addGroup(group, {\r\n            id: this.getElementId('navigation-group'),\r\n            name: 'legend-navigation',\r\n        });\r\n        var leftArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-left', layout === 'horizontal' ? 'up' : 'left', size);\r\n        leftArrow.on('click', this.onNavigationBack);\r\n        var leftArrowBBox = leftArrow.getBBox();\r\n        currentPoint.x += leftArrowBBox.width + 2;\r\n        var textShape = this.addShape(subGroup, {\r\n            type: 'text',\r\n            id: this.getElementId('navigation-text'),\r\n            name: 'navigation-text',\r\n            attrs: {\r\n                x: currentPoint.x,\r\n                y: currentPoint.y + size / 2,\r\n                text: text,\r\n                fontSize: 12,\r\n                fill: '#ccc',\r\n                textBaseline: 'middle',\r\n            },\r\n        });\r\n        var textBBox = textShape.getBBox();\r\n        currentPoint.x += textBBox.width + 2;\r\n        var rightArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-right', layout === 'horizontal' ? 'down' : 'right', size);\r\n        rightArrow.on('click', this.onNavigationAfter);\r\n        return subGroup;\r\n    };\r\n    Category.prototype.updateNavigation = function (navigation) {\r\n        var text = this.currentPageIndex + \"/\" + this.totalPagesCnt;\r\n        var textShape = navigation ? navigation.getChildren()[1] : this.getElementByLocalId('navigation-text');\r\n        var leftArrow = navigation\r\n            ? navigation.findById(this.getElementId('navigation-arrow-left'))\r\n            : this.getElementByLocalId('navigation-arrow-left');\r\n        var rightArrow = navigation\r\n            ? navigation.findById(this.getElementId('navigation-arrow-right'))\r\n            : this.getElementByLocalId('navigation-arrow-right');\r\n        var origBBox = textShape.getBBox();\r\n        textShape.attr('text', text);\r\n        var newBBox = textShape.getBBox();\r\n        textShape.attr('x', textShape.attr('x') - (newBBox.width - origBBox.width) / 2);\r\n        leftArrow.attr('opacity', this.currentPageIndex === 1 ? 0.45 : 1);\r\n        leftArrow.attr('cursor', this.currentPageIndex === 1 ? 'not-allowed' : 'pointer');\r\n        rightArrow.attr('opacity', this.currentPageIndex === this.totalPagesCnt ? 0.45 : 1);\r\n        rightArrow.attr('cursor', this.currentPageIndex === this.totalPagesCnt ? 'not-allowed' : 'pointer');\r\n    };\r\n    Category.prototype.drawArrow = function (group, currentPoint, name, direction, size) {\r\n        var x = currentPoint.x, y = currentPoint.y;\r\n        var rotateMap = {\r\n            right: (90 * Math.PI) / 180,\r\n            left: ((360 - 90) * Math.PI) / 180,\r\n            up: 0,\r\n            down: (180 * Math.PI) / 180,\r\n        };\r\n        var shape = this.addShape(group, {\r\n            type: 'path',\r\n            id: this.getElementId(name),\r\n            name: name,\r\n            attrs: {\r\n                path: [['M', x + size / 2, y], ['L', x, y + size], ['L', x + size, y + size], ['Z']],\r\n                fill: '#000',\r\n                cursor: 'pointer',\r\n            },\r\n        });\r\n        shape.attr('matrix', getMatrixByAngle({ x: x + size / 2, y: y + size / 2 }, rotateMap[direction]));\r\n        return shape;\r\n    };\r\n    Category.prototype.getCurrentNavigationMatrix = function () {\r\n        var _a = this, currentPageIndex = _a.currentPageIndex, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\r\n        var layout = this.get('layout');\r\n        var translate = layout === 'horizontal'\r\n            ? {\r\n                x: 0,\r\n                y: pageHeight * (1 - currentPageIndex),\r\n            }\r\n            : {\r\n                x: pageWidth * (1 - currentPageIndex),\r\n                y: 0,\r\n            };\r\n        return getMatrixByTranslate(translate);\r\n    };\r\n    Category.prototype.applyItemStates = function (item, subGroup) {\r\n        var states = this.getItemStates(item);\r\n        var hasStates = states.length > 0;\r\n        if (hasStates) {\r\n            var children = subGroup.getChildren();\r\n            var itemStates_1 = this.get('itemStates');\r\n            each(children, function (element) {\r\n                var name = element.get('name');\r\n                var elName = name.split('-')[2];\r\n                var statesStyle = getStatesStyle(item, elName, itemStates_1);\r\n                if (statesStyle) {\r\n                    element.attr(statesStyle);\r\n                    if (elName === 'marker' && !(element.get('isStroke') && element.get('isFill'))) {\r\n                        if (element.get('isStroke')) {\r\n                            element.attr('fill', null);\r\n                        }\r\n                        if (element.get('isFill')) {\r\n                            element.attr('stroke', null);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    return Category;\r\n}(LegendBase));\r\nexport default Category;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\component\\esm\\legend\\category.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\component\\esm\\legend\\category.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { each, filter, get, mix } from '@antv/util';\nimport { getMatrixByAngle, getMatrixByTranslate } from '../util/matrix';\nimport { getStatesStyle } from '../util/state';\nimport Theme from '../util/theme';\nimport LegendBase from './base';\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentPageIndex = 1;\n        _this.totalPagesCnt = 1;\n        _this.pageWidth = 0;\n        _this.pageHeight = 0;\n        _this.startX = 0;\n        _this.startY = 0;\n        _this.onNavigationBack = function () {\n            var itemGroup = _this.getElementByLocalId('item-group');\n            if (_this.currentPageIndex > 1) {\n                _this.currentPageIndex -= 1;\n                _this.updateNavigation();\n                var matrix = _this.getCurrentNavigationMatrix();\n                if (_this.get('animate')) {\n                    itemGroup.animate({\n                        matrix: matrix,\n                    }, 100);\n                }\n                else {\n                    itemGroup.attr({ matrix: matrix });\n                }\n            }\n        };\n        _this.onNavigationAfter = function () {\n            var itemGroup = _this.getElementByLocalId('item-group');\n            if (_this.currentPageIndex < _this.totalPagesCnt) {\n                _this.currentPageIndex += 1;\n                _this.updateNavigation();\n                var matrix = _this.getCurrentNavigationMatrix();\n                if (_this.get('animate')) {\n                    itemGroup.animate({\n                        matrix: matrix,\n                    }, 100);\n                }\n                else {\n                    itemGroup.attr({ matrix: matrix });\n                }\n            }\n        };\n        return _this;\n    }\n    Category.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'legend', type: 'category', itemSpacing: 24, itemWidth: null, itemHeight: null, itemName: {}, itemValue: null, maxWidth: null, maxHeight: null, marker: {}, items: [], itemStates: {}, itemBackground: {}, defaultCfg: {\n                title: {\n                    spacing: 5,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'top',\n                    },\n                },\n                background: {\n                    padding: 5,\n                    style: {\n                        stroke: Theme.lineColor,\n                    },\n                },\n                itemBackground: {\n                    style: {\n                        opacity: 0,\n                        fill: '#fff',\n                    },\n                },\n                itemName: {\n                    spacing: 16,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'middle',\n                    },\n                },\n                marker: {\n                    spacing: 8,\n                    style: {\n                        r: 6,\n                        symbol: 'circle',\n                    },\n                },\n                itemValue: {\n                    alignRight: false,\n                    formatter: null,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'middle',\n                    },\n                },\n                itemStates: {\n                    active: {\n                        nameStyle: {\n                            opacity: 0.8,\n                        },\n                    },\n                    unchecked: {\n                        nameStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                        markerStyle: {\n                            fill: Theme.uncheckedColor,\n                            stroke: Theme.uncheckedColor,\n                        },\n                    },\n                    inactive: {\n                        nameStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                        markerStyle: {\n                            opacity: 0.2,\n                        },\n                    },\n                },\n            } });\n    };\n    // 实现 IList 接口\n    Category.prototype.isList = function () {\n        return true;\n    };\n    /**\n     * 获取图例项\n     * @return {ListItem[]} 列表项集合\n     */\n    Category.prototype.getItems = function () {\n        return this.get('items');\n    };\n    /**\n     * 设置列表项\n     * @param {ListItem[]} items 列表项集合\n     */\n    Category.prototype.setItems = function (items) {\n        this.update({\n            items: items,\n        });\n    };\n    /**\n     * 更新列表项\n     * @param {ListItem} item 列表项\n     * @param {object}   cfg  列表项\n     */\n    Category.prototype.updateItem = function (item, cfg) {\n        mix(item, cfg);\n        this.clear(); // 由于单个图例项变化，会引起全局变化，所以全部更新\n        this.render();\n    };\n    /**\n     * 清空列表\n     */\n    Category.prototype.clearItems = function () {\n        var itemGroup = this.getElementByLocalId('item-group');\n        itemGroup && itemGroup.clear();\n    };\n    /**\n     * 设置列表项的状态\n     * @param {ListItem} item  列表项\n     * @param {string}   state 状态名\n     * @param {boolean}  value 状态值, true, false\n     */\n    Category.prototype.setItemState = function (item, state, value) {\n        item[state] = value;\n        var itemElement = this.getElementByLocalId(\"item-\" + item.id);\n        if (itemElement) {\n            var items = this.getItems();\n            var index = items.indexOf(item);\n            var offsetGroup = this.createOffScreenGroup(); // 离屏的 group\n            var newElement = this.drawItem(item, index, this.getItemHeight(), offsetGroup);\n            this.updateElements(newElement, itemElement); // 更新整个分组\n            this.clearUpdateStatus(itemElement); // 清理更新状态，防止出现 bug\n        }\n    };\n    /**\n     * 是否存在指定的状态\n     * @param {ListItem} item  列表项\n     * @param {boolean} state 状态名\n     */\n    Category.prototype.hasState = function (item, state) {\n        return !!item[state];\n    };\n    Category.prototype.getItemStates = function (item) {\n        var itemStates = this.get('itemStates');\n        var rst = [];\n        each(itemStates, function (v, k) {\n            if (item[k]) {\n                // item.selected\n                rst.push(k);\n            }\n        });\n        return rst;\n    };\n    /**\n     * 清楚所有列表项的状态\n     * @param {string} state 状态值\n     */\n    Category.prototype.clearItemsState = function (state) {\n        var _this = this;\n        var items = this.getItemsByState(state);\n        each(items, function (item) {\n            _this.setItemState(item, state, false);\n        });\n    };\n    /**\n     * 根据状态获取图例项\n     * @param  {string}     state [description]\n     * @return {ListItem[]}       [description]\n     */\n    Category.prototype.getItemsByState = function (state) {\n        var _this = this;\n        var items = this.getItems();\n        return filter(items, function (item) {\n            return _this.hasState(item, state);\n        });\n    };\n    // 绘制 legend 的选项\n    Category.prototype.drawLegendContent = function (group) {\n        this.processItems();\n        this.drawItems(group);\n    };\n    // 防止未设置 id\n    Category.prototype.processItems = function () {\n        var items = this.get('items');\n        each(items, function (item) {\n            if (!item.id) {\n                // 如果没有设置 id，默认使用 name\n                item.id = item.name;\n            }\n        });\n    };\n    // 绘制所有的图例选项\n    Category.prototype.drawItems = function (group) {\n        var _this = this;\n        var itemContainerGroup = this.addGroup(group, {\n            id: this.getElementId('item-container-group'),\n            name: 'legend-item-container-group',\n        });\n        var itemGroup = this.addGroup(itemContainerGroup, {\n            id: this.getElementId('item-group'),\n            name: 'legend-item-group',\n        });\n        var itemHeight = this.getItemHeight();\n        var itemWidth = this.get('itemWidth');\n        var itemSpacing = this.get('itemSpacing');\n        var currentPoint = this.get('currentPoint');\n        var startX = currentPoint.x;\n        var startY = currentPoint.y;\n        var layout = this.get('layout');\n        var items = this.get('items');\n        var wrapped = false;\n        var pageWidth = 0;\n        var maxWidth = this.get('maxWidth'); // 最大宽度，会导致 layout : 'horizontal' 时自动换行\n        var maxHeight = this.get('maxHeight'); // 最大高度，会导致出现分页\n        // 暂时不考虑分页\n        each(items, function (item, index) {\n            var subGroup = _this.drawItem(item, index, itemHeight, itemGroup);\n            var bbox = subGroup.getBBox();\n            var width = itemWidth || bbox.width;\n            if (width > pageWidth) {\n                pageWidth = width;\n            }\n            if (layout === 'horizontal') {\n                // 如果水平布局\n                if (maxWidth && maxWidth < currentPoint.x + width - startX) {\n                    // 检测是否换行\n                    wrapped = true;\n                    currentPoint.x = startX;\n                    currentPoint.y += itemHeight;\n                }\n                _this.moveElementTo(subGroup, currentPoint);\n                currentPoint.x += width + itemSpacing;\n            }\n            else {\n                // 如果垂直布局\n                if (maxHeight && maxHeight < currentPoint.y + itemHeight - startY) {\n                    // 换行\n                    wrapped = true;\n                    currentPoint.x += pageWidth + itemSpacing;\n                    currentPoint.y = startY;\n                    pageWidth = 0;\n                }\n                _this.moveElementTo(subGroup, currentPoint);\n                currentPoint.y += itemHeight; // itemSpacing 仅影响水平间距\n            }\n        });\n        if (wrapped && this.get('flipPage')) {\n            this.pageHeight = 0;\n            this.pageWidth = 0;\n            this.totalPagesCnt = 1;\n            this.startX = startX;\n            this.startY = startY;\n            this.adjustNavigation(group, itemGroup);\n        }\n    };\n    // 获取图例项的高度，如果未定义，则按照 name 的高度计算\n    Category.prototype.getItemHeight = function () {\n        var itemHeight = this.get('itemHeight');\n        if (!itemHeight) {\n            var nameCfg = this.get('itemName');\n            if (nameCfg) {\n                itemHeight = nameCfg.style.fontSize + 8;\n            }\n        }\n        return itemHeight;\n    };\n    // 绘制 marker\n    Category.prototype.drawMarker = function (container, markerCfg, item, itemHeight) {\n        var markerAttrs = __assign(__assign(__assign({ x: 0, y: itemHeight / 2 }, markerCfg.style), { symbol: get(item.marker, 'symbol', 'circle') }), get(item.marker, 'style', {}));\n        var shape = this.addShape(container, {\n            type: 'marker',\n            id: this.getElementId(\"item-\" + item.id + \"-marker\"),\n            name: 'legend-item-marker',\n            attrs: markerAttrs,\n        });\n        var bbox = shape.getBBox();\n        shape.attr('x', bbox.width / 2); // marker 需要左对齐，所以不能占用左侧的空间\n        var _a = shape.attr(), stroke = _a.stroke, fill = _a.fill;\n        if (stroke) {\n            shape.set('isStroke', true);\n        }\n        if (fill) {\n            shape.set('isFill', true);\n        }\n        return shape;\n    };\n    // 绘制文本\n    Category.prototype.drawItemText = function (container, textName, cfg, item, itemHeight, xPosition, index) {\n        var formatter = cfg.formatter;\n        var attrs = __assign({ x: xPosition, y: itemHeight / 2, text: formatter ? formatter(item[textName], item, index) : item[textName] }, cfg.style);\n        return this.addShape(container, {\n            type: 'text',\n            id: this.getElementId(\"item-\" + item.id + \"-\" + textName),\n            name: \"legend-item-\" + textName,\n            attrs: attrs,\n        });\n    };\n    // 绘制图例项\n    Category.prototype.drawItem = function (item, index, itemHeight, itemGroup) {\n        var groupId = \"item-\" + item.id;\n        // 设置单独的 Group 用于 setClip\n        var subContainer = this.addGroup(itemGroup, {\n            name: 'legend-item-container',\n            id: this.getElementId(\"item-container-\" + groupId),\n            delegateObject: {\n                item: item,\n                index: index,\n            },\n        });\n        var subGroup = this.addGroup(subContainer, {\n            name: 'legend-item',\n            id: this.getElementId(groupId),\n            delegateObject: {\n                item: item,\n                index: index,\n            },\n        });\n        var marker = this.get('marker');\n        var itemName = this.get('itemName');\n        var itemValue = this.get('itemValue');\n        var itemBackground = this.get('itemBackground');\n        var curX = 0; // 记录当前 x 的位置\n        if (marker) {\n            var markerShape = this.drawMarker(subGroup, marker, item, itemHeight);\n            curX = markerShape.getBBox().maxX + marker.spacing;\n        }\n        if (itemName) {\n            var nameShape = this.drawItemText(subGroup, 'name', itemName, item, itemHeight, curX, index);\n            curX = nameShape.getBBox().maxX + itemName.spacing;\n        }\n        if (itemValue) {\n            var valueShape = this.drawItemText(subGroup, 'value', itemValue, item, itemHeight, curX, index);\n            var itemWidth = this.get('itemWidth');\n            if (itemWidth && itemValue.alignRight) {\n                // 当文本右对齐，同时制定了列宽度时，调整文本位置和对齐方式\n                valueShape.attr({\n                    textAlign: 'right',\n                    x: itemWidth,\n                });\n            } // 如果考虑 value 和 name 的覆盖，这个地方需要做文本自动省略的功能\n        }\n        // 添加透明的背景，便于拾取和包围盒计算\n        if (itemBackground) {\n            var bbox = subGroup.getBBox();\n            var backShape = this.addShape(subGroup, {\n                type: 'rect',\n                name: 'legend-item-background',\n                id: this.getElementId(groupId + \"-background\"),\n                attrs: __assign({ x: 0, y: 0, width: bbox.width, height: itemHeight }, itemBackground.style),\n            });\n            backShape.toBack();\n        }\n        this.applyItemStates(item, subGroup);\n        return subGroup;\n    };\n    // 加上分页器并重新排序 items\n    Category.prototype.adjustNavigation = function (container, itemGroup) {\n        var _this = this;\n        var startX = this.startX;\n        var startY = this.startY;\n        var layout = this.get('layout');\n        var subGroups = itemGroup.findAll(function (item) { return item.get('name') === 'legend-item'; });\n        var maxWidth = this.get('maxWidth');\n        var maxHeight = this.get('maxHeight');\n        var itemWidth = this.get('itemWidth');\n        var itemSpacing = this.get('itemSpacing');\n        var itemHeight = this.getItemHeight();\n        var navigation = this.drawNavigation(container, layout, '00/00', 12);\n        var navigationBBox = navigation.getBBox();\n        var currentPoint = { x: startX, y: startY };\n        var pages = 1;\n        var widthLimit = 0;\n        var pageWidth = 0;\n        var maxItemWidth = 0;\n        if (layout === 'horizontal') {\n            this.pageHeight = itemHeight;\n            each(subGroups, function (item) {\n                var bbox = item.getBBox();\n                var width = itemWidth || bbox.width;\n                if ((widthLimit && widthLimit < currentPoint.x + width + itemSpacing) ||\n                    maxWidth < currentPoint.x + width + itemSpacing + navigationBBox.width) {\n                    if (pages === 1) {\n                        widthLimit = currentPoint.x + itemSpacing;\n                        _this.pageWidth = widthLimit;\n                        _this.moveElementTo(navigation, {\n                            x: maxWidth - itemSpacing - navigationBBox.width - navigationBBox.minX,\n                            y: currentPoint.y + itemHeight / 2 - navigationBBox.height / 2 - navigationBBox.minY,\n                        });\n                    }\n                    pages += 1;\n                    currentPoint.x = startX;\n                    currentPoint.y += itemHeight;\n                }\n                _this.moveElementTo(item, currentPoint);\n                item.getParent().setClip({\n                    type: 'rect',\n                    attrs: {\n                        x: currentPoint.x,\n                        y: currentPoint.y,\n                        width: width + itemSpacing,\n                        height: itemHeight,\n                    },\n                });\n                currentPoint.x += width + itemSpacing;\n            });\n        }\n        else {\n            each(subGroups, function (item) {\n                var bbox = item.getBBox();\n                if (bbox.width > pageWidth) {\n                    pageWidth = bbox.width;\n                }\n            });\n            maxItemWidth = pageWidth;\n            pageWidth += itemSpacing;\n            if (maxWidth) {\n                // maxWidth 限制加上\n                pageWidth = Math.min(maxWidth, pageWidth);\n                maxItemWidth = Math.min(maxWidth, maxItemWidth);\n            }\n            this.pageWidth = pageWidth;\n            this.pageHeight = maxHeight - Math.max(navigationBBox.height, itemHeight);\n            var cntPerPage_1 = Math.floor(this.pageHeight / itemHeight);\n            each(subGroups, function (item, index) {\n                if (index !== 0 && index % cntPerPage_1 === 0) {\n                    pages += 1;\n                    currentPoint.x += pageWidth;\n                    currentPoint.y = startY;\n                }\n                _this.moveElementTo(item, currentPoint);\n                item.getParent().setClip({\n                    type: 'rect',\n                    attrs: {\n                        x: currentPoint.x,\n                        y: currentPoint.y,\n                        width: pageWidth,\n                        height: itemHeight,\n                    },\n                });\n                currentPoint.y += itemHeight;\n            });\n            this.totalPagesCnt = pages;\n            this.moveElementTo(navigation, {\n                x: startX + maxItemWidth / 2 - navigationBBox.width / 2 - navigationBBox.minX,\n                y: maxHeight - navigationBBox.height - navigationBBox.minY,\n            });\n        }\n        if (this.pageHeight && this.pageWidth) {\n            // 为了使固定的 clip 生效，clip 设置在 itemContainerGroup 上，itemGroup 需要在翻页时会设置 matrix\n            itemGroup.getParent().setClip({\n                type: 'rect',\n                attrs: {\n                    x: this.startX,\n                    y: this.startY,\n                    width: this.pageWidth,\n                    height: this.pageHeight,\n                },\n            });\n        }\n        this.totalPagesCnt = pages;\n        if (this.currentPageIndex > this.totalPagesCnt) {\n            this.currentPageIndex = 1;\n        }\n        this.updateNavigation(navigation);\n        // update initial matrix\n        itemGroup.attr('matrix', this.getCurrentNavigationMatrix());\n    };\n    Category.prototype.drawNavigation = function (group, layout, text, size) {\n        var currentPoint = { x: 0, y: 0 };\n        var subGroup = this.addGroup(group, {\n            id: this.getElementId('navigation-group'),\n            name: 'legend-navigation',\n        });\n        var leftArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-left', layout === 'horizontal' ? 'up' : 'left', size);\n        leftArrow.on('click', this.onNavigationBack);\n        var leftArrowBBox = leftArrow.getBBox();\n        currentPoint.x += leftArrowBBox.width + 2;\n        var textShape = this.addShape(subGroup, {\n            type: 'text',\n            id: this.getElementId('navigation-text'),\n            name: 'navigation-text',\n            attrs: {\n                x: currentPoint.x,\n                y: currentPoint.y + size / 2,\n                text: text,\n                fontSize: 12,\n                fill: '#ccc',\n                textBaseline: 'middle',\n            },\n        });\n        var textBBox = textShape.getBBox();\n        currentPoint.x += textBBox.width + 2;\n        var rightArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-right', layout === 'horizontal' ? 'down' : 'right', size);\n        rightArrow.on('click', this.onNavigationAfter);\n        return subGroup;\n    };\n    Category.prototype.updateNavigation = function (navigation) {\n        var text = this.currentPageIndex + \"/\" + this.totalPagesCnt;\n        var textShape = navigation ? navigation.getChildren()[1] : this.getElementByLocalId('navigation-text');\n        var leftArrow = navigation\n            ? navigation.findById(this.getElementId('navigation-arrow-left'))\n            : this.getElementByLocalId('navigation-arrow-left');\n        var rightArrow = navigation\n            ? navigation.findById(this.getElementId('navigation-arrow-right'))\n            : this.getElementByLocalId('navigation-arrow-right');\n        var origBBox = textShape.getBBox();\n        textShape.attr('text', text);\n        var newBBox = textShape.getBBox();\n        textShape.attr('x', textShape.attr('x') - (newBBox.width - origBBox.width) / 2);\n        leftArrow.attr('opacity', this.currentPageIndex === 1 ? 0.45 : 1);\n        leftArrow.attr('cursor', this.currentPageIndex === 1 ? 'not-allowed' : 'pointer');\n        rightArrow.attr('opacity', this.currentPageIndex === this.totalPagesCnt ? 0.45 : 1);\n        rightArrow.attr('cursor', this.currentPageIndex === this.totalPagesCnt ? 'not-allowed' : 'pointer');\n    };\n    Category.prototype.drawArrow = function (group, currentPoint, name, direction, size) {\n        var x = currentPoint.x, y = currentPoint.y;\n        var rotateMap = {\n            right: (90 * Math.PI) / 180,\n            left: ((360 - 90) * Math.PI) / 180,\n            up: 0,\n            down: (180 * Math.PI) / 180,\n        };\n        var shape = this.addShape(group, {\n            type: 'path',\n            id: this.getElementId(name),\n            name: name,\n            attrs: {\n                path: [['M', x + size / 2, y], ['L', x, y + size], ['L', x + size, y + size], ['Z']],\n                fill: '#000',\n                cursor: 'pointer',\n            },\n        });\n        shape.attr('matrix', getMatrixByAngle({ x: x + size / 2, y: y + size / 2 }, rotateMap[direction]));\n        return shape;\n    };\n    Category.prototype.getCurrentNavigationMatrix = function () {\n        var _a = this, currentPageIndex = _a.currentPageIndex, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var layout = this.get('layout');\n        var translate = layout === 'horizontal'\n            ? {\n                x: 0,\n                y: pageHeight * (1 - currentPageIndex),\n            }\n            : {\n                x: pageWidth * (1 - currentPageIndex),\n                y: 0,\n            };\n        return getMatrixByTranslate(translate);\n    };\n    // 附加状态对应的样式\n    Category.prototype.applyItemStates = function (item, subGroup) {\n        var states = this.getItemStates(item);\n        var hasStates = states.length > 0;\n        if (hasStates) {\n            var children = subGroup.getChildren();\n            var itemStates_1 = this.get('itemStates');\n            each(children, function (element) {\n                var name = element.get('name');\n                var elName = name.split('-')[2]; // marker, name, value\n                var statesStyle = getStatesStyle(item, elName, itemStates_1);\n                if (statesStyle) {\n                    element.attr(statesStyle);\n                    if (elName === 'marker' && !(element.get('isStroke') && element.get('isFill'))) {\n                        // 如果 marker 是单填充或者单描边的话，就不要额外添加 stroke 或这 fill 属性，否则会影响 unchecked 后的显示\n                        if (element.get('isStroke')) {\n                            element.attr('fill', null);\n                        }\n                        if (element.get('isFill')) {\n                            element.attr('stroke', null);\n                        }\n                    }\n                }\n            });\n        }\n    };\n    return Category;\n}(LegendBase));\nexport default Category;\n//# sourceMappingURL=category.js.map"]}]}