{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-html.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-html.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar Category = require('./category');\nvar _require = require('../const'), FONT_FAMILY = _require.FONT_FAMILY;\nvar DomUtil = Util.DomUtil;\nvar Group = Util.Group;\nvar CONTAINER_CLASS = 'g2-legend';\nvar TITLE_CLASS = 'g2-legend-title';\nvar LIST_CLASS = 'g2-legend-list';\nvar ITEM_CLASS = 'g2-legend-list-item';\nvar TEXT_CLASS = 'g2-legend-text';\nvar MARKER_CLASS = 'g2-legend-marker';\nfunction findNodeByClass(node, className) {\n    return node.getElementsByClassName(className)[0];\n}\nfunction getParentNode(node, className) {\n    var nodeClass = node.className;\n    if (Util.isNil(nodeClass)) {\n        return node;\n    }\n    nodeClass = nodeClass.split(' ');\n    if (nodeClass.indexOf(className) > -1) {\n        return node;\n    }\n    if (node.parentNode) {\n        if (node.parentNode.className === CONTAINER_CLASS) {\n            return node.parentNode;\n        }\n        return getParentNode(node.parentNode, className);\n    }\n    return null;\n}\nfunction findItem(items, refer) {\n    var rst = null;\n    var value = refer instanceof Group ? refer.get('value') : refer;\n    Util.each(items, function (item) {\n        if (item.value === value) {\n            rst = item;\n            return false;\n        }\n    });\n    return rst;\n}\nvar CatHtml = function (_Category) {\n    _inheritsLoose(CatHtml, _Category);\n    var _super = _createSuper(CatHtml);\n    function CatHtml() {\n        return _Category.apply(this, arguments) || this;\n    }\n    var _proto = CatHtml.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Category.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            type: 'category-legend',\n            container: null,\n            containerTpl: '<div class=\"' + CONTAINER_CLASS + '\">' + '<h4 class=\"' + TITLE_CLASS + '\"></h4>' + '<ul class=\"' + LIST_CLASS + '\"></ul>' + '</div>',\n            itemTpl: '<li class=\"' + ITEM_CLASS + ' item-{index} {checked}\" data-color=\"{originColor}\" data-value=\"{originValue}\">' + '<i class=\"' + MARKER_CLASS + '\" style=\"background-color:{color};\"></i>' + '<span class=\"' + TEXT_CLASS + '\">{value}</span></li>',\n            legendStyle: {},\n            textStyle: {\n                fill: '#333',\n                fontSize: 12,\n                textAlign: 'middle',\n                textBaseline: 'top',\n                fontFamily: FONT_FAMILY\n            },\n            abridgeText: false,\n            tipTpl: '<div class=\"textTip\"></div>',\n            tipStyle: {\n                display: 'none',\n                fontSize: '12px',\n                backgroundColor: '#fff',\n                position: 'absolute',\n                width: 'auto',\n                height: 'auto',\n                padding: '3px',\n                boxShadow: '2px 2px 5px #888'\n            },\n            autoPosition: true\n        });\n    };\n    _proto._init = function _init() {\n        return;\n    };\n    _proto.beforeRender = function beforeRender() {\n        return;\n    };\n    _proto.render = function render() {\n        this._renderHTML();\n    };\n    _proto._bindEvents = function _bindEvents() {\n        var _this = this;\n        var legendWrapper = this.get('legendWrapper');\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n        if (this.get('hoverable')) {\n            itemListDom.onmousemove = function (ev) {\n                return _this._onMousemove(ev);\n            };\n            itemListDom.onmouseout = function (ev) {\n                return _this._onMouseleave(ev);\n            };\n        }\n        if (this.get('clickable')) {\n            itemListDom.onclick = function (ev) {\n                return _this._onClick(ev);\n            };\n        }\n    };\n    _proto._onMousemove = function _onMousemove(ev) {\n        var items = this.get('items');\n        var target = ev.target;\n        var targetClass = target.className;\n        targetClass = targetClass.split(' ');\n        if (targetClass.indexOf(CONTAINER_CLASS) > -1 || targetClass.indexOf(LIST_CLASS) > -1) {\n            return;\n        }\n        var parentDom = getParentNode(target, ITEM_CLASS);\n        var hoveredItem = findItem(items, parentDom.getAttribute('data-value'));\n        if (hoveredItem) {\n            this.deactivate();\n            this.activate(parentDom.getAttribute('data-value'));\n            this.emit('itemhover', {\n                item: hoveredItem,\n                currentTarget: parentDom,\n                checked: hoveredItem.checked\n            });\n        }\n        else if (!hoveredItem) {\n            this.deactivate();\n            this.emit('itemunhover', ev);\n        }\n        return;\n    };\n    _proto._onMouseleave = function _onMouseleave(ev) {\n        this.deactivate();\n        this.emit('itemunhover', ev);\n        return;\n    };\n    _proto._onClick = function _onClick(ev) {\n        var _this2 = this;\n        var legendWrapper = this.get('legendWrapper');\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n        var unCheckedColor = this.get('unCheckColor');\n        var items = this.get('items');\n        var mode = this.get('selectedMode');\n        var childNodes = itemListDom.childNodes;\n        var target = ev.target;\n        var targetClass = target.className;\n        targetClass = targetClass.split(' ');\n        if (targetClass.indexOf(CONTAINER_CLASS) > -1 || targetClass.indexOf(LIST_CLASS) > -1) {\n            return;\n        }\n        var parentDom = getParentNode(target, ITEM_CLASS);\n        var textDom = findNodeByClass(parentDom, TEXT_CLASS);\n        var markerDom = findNodeByClass(parentDom, MARKER_CLASS);\n        var clickedItem = findItem(items, parentDom.getAttribute('data-value'));\n        if (!clickedItem) {\n            return;\n        }\n        var domClass = parentDom.className;\n        var originColor = parentDom.getAttribute('data-color');\n        if (mode === 'single') {\n            clickedItem.checked = true;\n            Util.each(childNodes, function (child) {\n                if (child !== parentDom) {\n                    var childMarkerDom = findNodeByClass(child, MARKER_CLASS);\n                    childMarkerDom.style.backgroundColor = unCheckedColor;\n                    child.className = child.className.replace('checked', 'unChecked');\n                    child.style.color = unCheckedColor;\n                    var childItem = findItem(items, child.getAttribute('data-value'));\n                    childItem.checked = false;\n                }\n                else {\n                    if (textDom) {\n                        textDom.style.color = _this2.get('textStyle').fill;\n                    }\n                    if (markerDom) {\n                        markerDom.style.backgroundColor = originColor;\n                    }\n                    parentDom.className = domClass.replace('unChecked', 'checked');\n                }\n            });\n        }\n        else {\n            var clickedItemChecked = domClass.indexOf('checked') !== -1;\n            var count = 0;\n            Util.each(childNodes, function (child) {\n                if (child.className.indexOf('checked') !== -1) {\n                    count++;\n                }\n            });\n            if (!this.get('allowAllCanceled') && clickedItemChecked && count === 1) {\n                this.emit('clicklastitem', {\n                    item: clickedItem,\n                    currentTarget: parentDom,\n                    checked: mode === 'single' ? true : clickedItem.checked\n                });\n                return;\n            }\n            clickedItem.checked = !clickedItem.checked;\n            if (clickedItemChecked) {\n                if (markerDom) {\n                    markerDom.style.backgroundColor = unCheckedColor;\n                }\n                parentDom.className = domClass.replace('checked', 'unChecked');\n                parentDom.style.color = unCheckedColor;\n            }\n            else {\n                if (markerDom) {\n                    markerDom.style.backgroundColor = originColor;\n                }\n                parentDom.className = domClass.replace('unChecked', 'checked');\n                parentDom.style.color = this.get('textStyle').fill;\n            }\n        }\n        this.emit('itemclick', {\n            item: clickedItem,\n            currentTarget: parentDom,\n            checked: mode === 'single' ? true : clickedItem.checked\n        });\n        return;\n    };\n    _proto.activate = function activate(value) {\n        var _this3 = this;\n        var self = this;\n        var items = self.get('items');\n        var item = findItem(items, value);\n        var legendWrapper = self.get('legendWrapper');\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n        var childNodes = itemListDom.childNodes;\n        childNodes.forEach(function (child) {\n            var childMarkerDom = findNodeByClass(child, MARKER_CLASS);\n            var childItem = findItem(items, child.getAttribute('data-value'));\n            if (_this3.get('highlight')) {\n                if (childItem === item && childItem.checked) {\n                    childMarkerDom.style.border = '1px solid #333';\n                    return;\n                }\n            }\n            else {\n                if (childItem === item) {\n                    childMarkerDom.style.opacity = self.get('activeOpacity');\n                }\n                else {\n                    if (childItem.checked)\n                        childMarkerDom.style.opacity = self.get('inactiveOpacity');\n                }\n            }\n        });\n        return;\n    };\n    _proto.deactivate = function deactivate() {\n        var _this4 = this;\n        var self = this;\n        var legendWrapper = self.get('legendWrapper');\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n        var childNodes = itemListDom.childNodes;\n        childNodes.forEach(function (child) {\n            var childMarkerDom = findNodeByClass(child, MARKER_CLASS);\n            if (_this4.get('highlight')) {\n                childMarkerDom.style.border = '1px solid #fff';\n            }\n            else {\n                childMarkerDom.style.opacity = self.get('inactiveOpacity');\n            }\n        });\n        return;\n    };\n    _proto._renderHTML = function _renderHTML() {\n        var _this5 = this;\n        var container = this.get('container');\n        var title = this.get('title');\n        var containerTpl = this.get('containerTpl');\n        var legendWrapper = DomUtil.createDom(containerTpl);\n        var titleDom = findNodeByClass(legendWrapper, TITLE_CLASS);\n        var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n        var unCheckedColor = this.get('unCheckColor');\n        var LEGEND_STYLE = Util.deepMix({}, {\n            CONTAINER_CLASS: {\n                height: 'auto',\n                width: 'auto',\n                position: 'absolute',\n                overflowY: 'auto',\n                fontSize: '12px',\n                fontFamily: FONT_FAMILY,\n                lineHeight: '20px',\n                color: '#8C8C8C'\n            },\n            TITLE_CLASS: {\n                marginBottom: this.get('titleGap') + 'px',\n                fontSize: '12px',\n                color: '#333',\n                textBaseline: 'middle',\n                fontFamily: FONT_FAMILY\n            },\n            LIST_CLASS: {\n                listStyleType: 'none',\n                margin: 0,\n                padding: 0,\n                textAlign: 'center'\n            },\n            LIST_ITEM_CLASS: {\n                cursor: 'pointer',\n                marginBottom: '5px',\n                marginRight: '24px'\n            },\n            MARKER_CLASS: {\n                width: '9px',\n                height: '9px',\n                borderRadius: '50%',\n                display: 'inline-block',\n                marginRight: '4px',\n                verticalAlign: 'middle'\n            }\n        }, this.get('legendStyle'));\n        if (/^\\#/.test(container) || typeof container === 'string' && container.constructor === String) {\n            var id = container.replace('#', '');\n            container = document.getElementById(id);\n            container.appendChild(legendWrapper);\n        }\n        else {\n            var _position = this.get('position');\n            var rangeStyle = {};\n            if (_position === 'left' || _position === 'right') {\n                rangeStyle = {\n                    maxHeight: (this.get('maxLength') || container.offsetHeight) + 'px'\n                };\n            }\n            else {\n                rangeStyle = {\n                    maxWidth: (this.get('maxLength') || container.offsetWidth) + 'px'\n                };\n            }\n            DomUtil.modifyCSS(legendWrapper, Util.mix({}, LEGEND_STYLE.CONTAINER_CLASS, rangeStyle, this.get(CONTAINER_CLASS)));\n            container.appendChild(legendWrapper);\n        }\n        DomUtil.modifyCSS(itemListDom, Util.mix({}, LEGEND_STYLE.LIST_CLASS, this.get(LIST_CLASS)));\n        if (titleDom) {\n            if (title && title.text) {\n                titleDom.innerHTML = title.text;\n                DomUtil.modifyCSS(titleDom, Util.mix({}, LEGEND_STYLE.TITLE_CLASS, this.get(TITLE_CLASS), title));\n            }\n            else {\n                legendWrapper.removeChild(titleDom);\n            }\n        }\n        var items = this.get('items');\n        var itemTpl = this.get('itemTpl');\n        var position = this.get('position');\n        var layout = this.get('layout');\n        var itemDisplay = position === 'right' || position === 'left' || layout === 'vertical' ? 'block' : 'inline-block';\n        var itemStyle = Util.mix({}, LEGEND_STYLE.LIST_ITEM_CLASS, {\n            display: itemDisplay\n        }, this.get(ITEM_CLASS));\n        var markerStyle = Util.mix({}, LEGEND_STYLE.MARKER_CLASS, this.get(MARKER_CLASS));\n        Util.each(items, function (item, index) {\n            var checked = item.checked;\n            var value = _this5._formatItemValue(item.value);\n            var markerColor = item.marker.fill || item.marker.stroke;\n            var color = checked ? markerColor : unCheckedColor;\n            var domStr;\n            if (Util.isFunction(itemTpl)) {\n                domStr = itemTpl(value, color, checked, index);\n            }\n            else {\n                domStr = itemTpl;\n            }\n            var itemDiv = Util.substitute(domStr, Util.mix({}, item, {\n                index: index,\n                checked: checked ? 'checked' : 'unChecked',\n                value: value,\n                color: color,\n                originColor: markerColor,\n                originValue: item.value.replace(/\\\"/g, '&quot;')\n            }));\n            var itemDom = DomUtil.createDom(itemDiv);\n            itemDom.style.color = _this5.get('textStyle').fill;\n            var markerDom = findNodeByClass(itemDom, MARKER_CLASS);\n            var textDom = findNodeByClass(itemDom, TEXT_CLASS);\n            DomUtil.modifyCSS(itemDom, itemStyle);\n            markerDom && DomUtil.modifyCSS(markerDom, markerStyle);\n            if (!checked) {\n                itemDom.style.color = unCheckedColor;\n                if (markerDom) {\n                    markerDom.style.backgroundColor = unCheckedColor;\n                }\n            }\n            itemListDom.appendChild(itemDom);\n            if (_this5.get('abridgeText')) {\n                var text = value;\n                var itemWidth = itemDom.offsetWidth;\n                var fs = _this5.get('textStyle').fontSize;\n                if (isNaN(fs)) {\n                    if (fs.indexOf('pt') !== -1)\n                        fs = parseFloat(fs.substr(0, fs.length - 2)) * 1 / 72 * 96;\n                    else if (fs.indexOf('px') !== -1)\n                        fs = parseFloat(fs.substr(0, fs.length - 2));\n                }\n                var textWidth = fs * text.length;\n                var letterNum = Math.floor(itemWidth / fs);\n                if (itemWidth < 2 * fs) {\n                    text = '';\n                }\n                else if (itemWidth < textWidth) {\n                    if (letterNum > 1)\n                        text = text.substr(0, letterNum - 1) + '...';\n                }\n                textDom.innerText = text;\n                itemDom.addEventListener('mouseover', function () {\n                    var tipDom = findNodeByClass(legendWrapper.parentNode, 'textTip');\n                    tipDom.style.display = 'block';\n                    tipDom.style.left = itemDom.offsetLeft + itemDom.offsetWidth + 'px';\n                    tipDom.style.top = itemDom.offsetTop + 15 + 'px';\n                    tipDom.innerText = value;\n                });\n                itemDom.addEventListener('mouseout', function () {\n                    var tipDom = findNodeByClass(legendWrapper.parentNode, 'textTip');\n                    tipDom.style.display = 'none';\n                });\n            }\n        });\n        if (this.get('abridgeText')) {\n            var tipTpl = this.get('tipTpl');\n            var tipDom = DomUtil.createDom(tipTpl);\n            var tipDomStyle = this.get('tipStyle');\n            DomUtil.modifyCSS(tipDom, tipDomStyle);\n            legendWrapper.parentNode.appendChild(tipDom);\n            tipDom.addEventListener('mouseover', function () {\n                tipDom.style.display = 'none';\n            });\n        }\n        this.set('legendWrapper', legendWrapper);\n    };\n    _proto._adjustPositionOffset = function _adjustPositionOffset() {\n        var autoPosition = this.get('autoPosition');\n        if (autoPosition === false) {\n            return;\n        }\n        var position = this.get('position');\n        var offset = this.get('offset');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        if (offsetX)\n            offset[0] = offsetX;\n        if (offsetY)\n            offset[1] = offsetY;\n        var legendWrapper = this.get('legendWrapper');\n        legendWrapper.style.left = position[0] + 'px';\n        legendWrapper.style.top = position[1] + 'px';\n        legendWrapper.style.marginLeft = offset[0] + 'px';\n        legendWrapper.style.marginTop = offset[1] + 'px';\n    };\n    _proto.getWidth = function getWidth() {\n        return DomUtil.getOuterWidth(this.get('legendWrapper'));\n    };\n    _proto.getHeight = function getHeight() {\n        return DomUtil.getOuterHeight(this.get('legendWrapper'));\n    };\n    _proto.move = function move(x, y) {\n        if (!/^\\#/.test(this.get('container'))) {\n            DomUtil.modifyCSS(this.get('legendWrapper'), {\n                left: x + 'px',\n                top: y + 'px'\n            });\n            this.set('x', x);\n            this.set('y', y);\n        }\n        else {\n            _Category.prototype.move.call(this, x, y);\n        }\n    };\n    _proto.destroy = function destroy() {\n        var legendWrapper = this.get('legendWrapper');\n        if (legendWrapper && legendWrapper.parentNode) {\n            legendWrapper.parentNode.removeChild(legendWrapper);\n        }\n        _Category.prototype.destroy.call(this);\n    };\n    return CatHtml;\n}(Category);\nmodule.exports = CatHtml;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-html.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/cat-html.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Category = require('./category');\n\nvar _require = require('../const'),\n    FONT_FAMILY = _require.FONT_FAMILY;\n\nvar DomUtil = Util.DomUtil;\nvar Group = Util.Group;\nvar CONTAINER_CLASS = 'g2-legend';\nvar TITLE_CLASS = 'g2-legend-title';\nvar LIST_CLASS = 'g2-legend-list';\nvar ITEM_CLASS = 'g2-legend-list-item';\nvar TEXT_CLASS = 'g2-legend-text';\nvar MARKER_CLASS = 'g2-legend-marker'; // find a dom node from the chidren of the node with className.\n\nfunction findNodeByClass(node, className) {\n  return node.getElementsByClassName(className)[0];\n}\n\nfunction getParentNode(node, className) {\n  var nodeClass = node.className;\n\n  if (Util.isNil(nodeClass)) {\n    return node;\n  }\n\n  nodeClass = nodeClass.split(' ');\n\n  if (nodeClass.indexOf(className) > -1) {\n    return node;\n  }\n\n  if (node.parentNode) {\n    if (node.parentNode.className === CONTAINER_CLASS) {\n      return node.parentNode;\n    }\n\n    return getParentNode(node.parentNode, className);\n  }\n\n  return null;\n}\n\nfunction findItem(items, refer) {\n  var rst = null;\n  var value = refer instanceof Group ? refer.get('value') : refer;\n  Util.each(items, function (item) {\n    if (item.value === value) {\n      rst = item;\n      return false;\n    }\n  });\n  return rst;\n}\n\nvar CatHtml = /*#__PURE__*/function (_Category) {\n  _inheritsLoose(CatHtml, _Category);\n\n  var _super = _createSuper(CatHtml);\n\n  function CatHtml() {\n    return _Category.apply(this, arguments) || this;\n  }\n\n  var _proto = CatHtml.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Category.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * type 标识\n       * @type {String}\n       */\n      type: 'category-legend',\n\n      /**\n       * html 容器\n       * @type {DOM}\n       */\n      container: null,\n\n      /**\n       * 使用html时的外层模板\n       * @type {String}\n       */\n      containerTpl: '<div class=\"' + CONTAINER_CLASS + '\">' + '<h4 class=\"' + TITLE_CLASS + '\"></h4>' + '<ul class=\"' + LIST_CLASS + '\"></ul>' + '</div>',\n\n      /**\n       * html 模板\n       * @type {String|Function}\n       */\n      itemTpl: '<li class=\"' + ITEM_CLASS + ' item-{index} {checked}\" data-color=\"{originColor}\" data-value=\"{originValue}\">' + '<i class=\"' + MARKER_CLASS + '\" style=\"background-color:{color};\"></i>' + '<span class=\"' + TEXT_CLASS + '\">{value}</span></li>',\n\n      /**\n       * html style\n       * @type {Attrs}\n       */\n      legendStyle: {},\n\n      /**\n       * 图例文字样式\n       * @type {ATTRS}\n       */\n      textStyle: {\n        fill: '#333',\n        fontSize: 12,\n        textAlign: 'middle',\n        textBaseline: 'top',\n        fontFamily: FONT_FAMILY\n      },\n\n      /**\n       * 当文本太长时是否进行缩略\n       * @type {Boolean}\n       */\n      abridgeText: false,\n\n      /**\n       * abridgeText 为 true 时，鼠标放置在 item 上时显示全称的悬浮 div 的 html 模板\n       * @type {String}\n       */\n      tipTpl: '<div class=\"textTip\"></div>',\n\n      /**\n       * abridgeText 为 true 时，鼠标放置在 item 上时显示全称的悬浮 div 的样式\n       * @type {Attrs}\n       */\n      tipStyle: {\n        display: 'none',\n        fontSize: '12px',\n        backgroundColor: '#fff',\n        position: 'absolute',\n        width: 'auto',\n        height: 'auto',\n        padding: '3px',\n        boxShadow: '2px 2px 5px #888'\n      },\n\n      /**\n       * useHtml 为 true 时生效，用于自动定位\n       * @type {[type]}\n       */\n      autoPosition: true\n    });\n  };\n\n  _proto._init = function _init() {\n    return;\n  };\n\n  _proto.beforeRender = function beforeRender() {\n    return;\n  };\n\n  _proto.render = function render() {\n    this._renderHTML();\n  } // user interaction\n  ;\n\n  _proto._bindEvents = function _bindEvents() {\n    var _this = this;\n\n    var legendWrapper = this.get('legendWrapper');\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n\n    if (this.get('hoverable')) {\n      itemListDom.onmousemove = function (ev) {\n        return _this._onMousemove(ev);\n      };\n\n      itemListDom.onmouseout = function (ev) {\n        return _this._onMouseleave(ev);\n      };\n    }\n\n    if (this.get('clickable')) {\n      itemListDom.onclick = function (ev) {\n        return _this._onClick(ev);\n      };\n    }\n  } // mouse move listener of an item\n  // when mouse over an item, reduce the opacity of the other items.\n  ;\n\n  _proto._onMousemove = function _onMousemove(ev) {\n    var items = this.get('items');\n    var target = ev.target;\n    var targetClass = target.className;\n    targetClass = targetClass.split(' ');\n\n    if (targetClass.indexOf(CONTAINER_CLASS) > -1 || targetClass.indexOf(LIST_CLASS) > -1) {\n      return;\n    }\n\n    var parentDom = getParentNode(target, ITEM_CLASS);\n    var hoveredItem = findItem(items, parentDom.getAttribute('data-value'));\n\n    if (hoveredItem) {\n      // change the opacity of other items\n      this.deactivate();\n      this.activate(parentDom.getAttribute('data-value'));\n      this.emit('itemhover', {\n        item: hoveredItem,\n        currentTarget: parentDom,\n        checked: hoveredItem.checked\n      });\n    } else if (!hoveredItem) {\n      // restore the opacity of all the items\n      this.deactivate();\n      this.emit('itemunhover', ev);\n    }\n\n    return;\n  } // mouse leave listener of an item\n  ;\n\n  _proto._onMouseleave = function _onMouseleave(ev) {\n    // restore the opacity of all the items when mouse leave\n    this.deactivate();\n    this.emit('itemunhover', ev);\n    return;\n  } // the click listener of an item\n  ;\n\n  _proto._onClick = function _onClick(ev) {\n    var _this2 = this;\n\n    var legendWrapper = this.get('legendWrapper');\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n    var unCheckedColor = this.get('unCheckColor');\n    var items = this.get('items');\n    var mode = this.get('selectedMode');\n    var childNodes = itemListDom.childNodes;\n    var target = ev.target;\n    var targetClass = target.className;\n    targetClass = targetClass.split(' ');\n\n    if (targetClass.indexOf(CONTAINER_CLASS) > -1 || targetClass.indexOf(LIST_CLASS) > -1) {\n      return;\n    }\n\n    var parentDom = getParentNode(target, ITEM_CLASS);\n    var textDom = findNodeByClass(parentDom, TEXT_CLASS);\n    var markerDom = findNodeByClass(parentDom, MARKER_CLASS);\n    var clickedItem = findItem(items, parentDom.getAttribute('data-value'));\n\n    if (!clickedItem) {\n      return;\n    }\n\n    var domClass = parentDom.className;\n    var originColor = parentDom.getAttribute('data-color');\n\n    if (mode === 'single') {\n      // 单选模式\n      // update checked status\n      clickedItem.checked = true; // 其他图例项全部置灰\n\n      Util.each(childNodes, function (child) {\n        if (child !== parentDom) {\n          var childMarkerDom = findNodeByClass(child, MARKER_CLASS);\n          childMarkerDom.style.backgroundColor = unCheckedColor;\n          child.className = child.className.replace('checked', 'unChecked');\n          child.style.color = unCheckedColor;\n          var childItem = findItem(items, child.getAttribute('data-value'));\n          childItem.checked = false;\n        } else {\n          if (textDom) {\n            textDom.style.color = _this2.get('textStyle').fill;\n          }\n\n          if (markerDom) {\n            markerDom.style.backgroundColor = originColor;\n          }\n\n          parentDom.className = domClass.replace('unChecked', 'checked');\n        }\n      });\n    } else {\n      // 混合模式\n      var clickedItemChecked = domClass.indexOf('checked') !== -1; // domClass.includes('checked');\n\n      var count = 0;\n      Util.each(childNodes, function (child) {\n        if (child.className.indexOf('checked') !== -1) {\n          // .includes('checked')\n          count++;\n        }\n      });\n\n      if (!this.get('allowAllCanceled') && clickedItemChecked && count === 1) {\n        this.emit('clicklastitem', {\n          item: clickedItem,\n          currentTarget: parentDom,\n          checked: mode === 'single' ? true : clickedItem.checked\n        });\n        return;\n      } // 在判断最后一个图例后再更新checked状态，防止点击最后一个图例item时图例样式没有变化但是checked状态改变了 fix #422\n\n\n      clickedItem.checked = !clickedItem.checked;\n\n      if (clickedItemChecked) {\n        if (markerDom) {\n          markerDom.style.backgroundColor = unCheckedColor;\n        }\n\n        parentDom.className = domClass.replace('checked', 'unChecked');\n        parentDom.style.color = unCheckedColor;\n      } else {\n        if (markerDom) {\n          markerDom.style.backgroundColor = originColor;\n        }\n\n        parentDom.className = domClass.replace('unChecked', 'checked');\n        parentDom.style.color = this.get('textStyle').fill;\n      }\n    }\n\n    this.emit('itemclick', {\n      item: clickedItem,\n      currentTarget: parentDom,\n      checked: mode === 'single' ? true : clickedItem.checked\n    });\n    return;\n  } // activate an item by reduce the opacity of other items.\n  // it is reserved for bi-direction interaction between charts / graph and legend\n  ;\n\n  _proto.activate = function activate(value) {\n    var _this3 = this;\n\n    var self = this;\n    var items = self.get('items');\n    var item = findItem(items, value);\n    var legendWrapper = self.get('legendWrapper');\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n    var childNodes = itemListDom.childNodes;\n    childNodes.forEach(function (child) {\n      var childMarkerDom = findNodeByClass(child, MARKER_CLASS);\n      var childItem = findItem(items, child.getAttribute('data-value'));\n\n      if (_this3.get('highlight')) {\n        if (childItem === item && childItem.checked) {\n          childMarkerDom.style.border = '1px solid #333';\n          return;\n        }\n      } else {\n        if (childItem === item) {\n          childMarkerDom.style.opacity = self.get('activeOpacity');\n        } else {\n          if (childItem.checked) childMarkerDom.style.opacity = self.get('inactiveOpacity');\n        }\n      } // if (childItem !== item && childItem.checked) {\n      //   if (this.get('highlight')) {\n      //     childMarkerDom.style.border = '1px solid #fff';\n      //   } else childMarkerDom.style.opacity = 0.5;\n      // } else {\n      //   if (this.get('highlight')) {\n      //     childMarkerDom.style.border = '1px solid #333';\n      //   } else childMarkerDom.style.opacity = 1;\n      // }\n\n    });\n    return;\n  } // restore the opacity of items\n  // it is reserved for bi-direction interaction between charts / graph and legend\n  ;\n\n  _proto.deactivate = function deactivate() {\n    var _this4 = this;\n\n    var self = this;\n    var legendWrapper = self.get('legendWrapper');\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS);\n    var childNodes = itemListDom.childNodes;\n    childNodes.forEach(function (child) {\n      var childMarkerDom = findNodeByClass(child, MARKER_CLASS);\n\n      if (_this4.get('highlight')) {\n        childMarkerDom.style.border = '1px solid #fff';\n      } else {\n        childMarkerDom.style.opacity = self.get('inactiveOpacity');\n      }\n    });\n    return;\n  };\n\n  _proto._renderHTML = function _renderHTML() {\n    var _this5 = this;\n\n    // const canvas = this.get('canvas');\n    var container = this.get('container'); // const outterNode = container.parentNode;\n\n    var title = this.get('title');\n    var containerTpl = this.get('containerTpl');\n    var legendWrapper = DomUtil.createDom(containerTpl);\n    var titleDom = findNodeByClass(legendWrapper, TITLE_CLASS);\n    var itemListDom = findNodeByClass(legendWrapper, LIST_CLASS); // ul\n\n    var unCheckedColor = this.get('unCheckColor');\n    var LEGEND_STYLE = Util.deepMix({}, {\n      CONTAINER_CLASS: {\n        height: 'auto',\n        width: 'auto',\n        position: 'absolute',\n        overflowY: 'auto',\n        fontSize: '12px',\n        fontFamily: FONT_FAMILY,\n        lineHeight: '20px',\n        color: '#8C8C8C'\n      },\n      TITLE_CLASS: {\n        marginBottom: this.get('titleGap') + 'px',\n        fontSize: '12px',\n        color: '#333',\n        // 默认样式\n        textBaseline: 'middle',\n        fontFamily: FONT_FAMILY\n      },\n      LIST_CLASS: {\n        listStyleType: 'none',\n        margin: 0,\n        padding: 0,\n        textAlign: 'center'\n      },\n      LIST_ITEM_CLASS: {\n        cursor: 'pointer',\n        marginBottom: '5px',\n        marginRight: '24px'\n      },\n      MARKER_CLASS: {\n        width: '9px',\n        height: '9px',\n        borderRadius: '50%',\n        display: 'inline-block',\n        marginRight: '4px',\n        verticalAlign: 'middle'\n      }\n    }, this.get('legendStyle')); // fix：IE 9 兼容问题，先加入 legendWrapper\n    // let container = this.get('container');\n\n    if (/^\\#/.test(container) || typeof container === 'string' && container.constructor === String) {\n      // 如果传入 dom 节点的 id\n      var id = container.replace('#', '');\n      container = document.getElementById(id);\n      container.appendChild(legendWrapper);\n    } else {\n      var _position = this.get('position');\n\n      var rangeStyle = {};\n\n      if (_position === 'left' || _position === 'right') {\n        rangeStyle = {\n          maxHeight: (this.get('maxLength') || container.offsetHeight) + 'px'\n        };\n      } else {\n        rangeStyle = {\n          maxWidth: (this.get('maxLength') || container.offsetWidth) + 'px'\n        };\n      }\n\n      DomUtil.modifyCSS(legendWrapper, Util.mix({}, LEGEND_STYLE.CONTAINER_CLASS, rangeStyle, this.get(CONTAINER_CLASS)));\n      container.appendChild(legendWrapper);\n    }\n\n    DomUtil.modifyCSS(itemListDom, Util.mix({}, LEGEND_STYLE.LIST_CLASS, this.get(LIST_CLASS))); // render title\n\n    if (titleDom) {\n      if (title && title.text) {\n        titleDom.innerHTML = title.text;\n        DomUtil.modifyCSS(titleDom, Util.mix({}, LEGEND_STYLE.TITLE_CLASS, this.get(TITLE_CLASS), title));\n      } else {\n        legendWrapper.removeChild(titleDom);\n      }\n    } // 开始渲染图例项\n\n\n    var items = this.get('items');\n    var itemTpl = this.get('itemTpl');\n    var position = this.get('position');\n    var layout = this.get('layout');\n    var itemDisplay = position === 'right' || position === 'left' || layout === 'vertical' ? 'block' : 'inline-block';\n    var itemStyle = Util.mix({}, LEGEND_STYLE.LIST_ITEM_CLASS, {\n      display: itemDisplay\n    }, this.get(ITEM_CLASS));\n    var markerStyle = Util.mix({}, LEGEND_STYLE.MARKER_CLASS, this.get(MARKER_CLASS));\n    Util.each(items, function (item, index) {\n      var checked = item.checked;\n\n      var value = _this5._formatItemValue(item.value);\n\n      var markerColor = item.marker.fill || item.marker.stroke;\n      var color = checked ? markerColor : unCheckedColor;\n      var domStr;\n\n      if (Util.isFunction(itemTpl)) {\n        domStr = itemTpl(value, color, checked, index);\n      } else {\n        domStr = itemTpl;\n      }\n\n      var itemDiv = Util.substitute(domStr, Util.mix({}, item, {\n        index: index,\n        checked: checked ? 'checked' : 'unChecked',\n        value: value,\n        color: color,\n        originColor: markerColor,\n        // @2018-07-09 by blue.lb 修复如果legend值中存在双引号\"时, 导致的无法点击触发legend正常操作bug\n        originValue: item.value.replace(/\\\"/g, '&quot;')\n      })); // li\n\n      var itemDom = DomUtil.createDom(itemDiv);\n      itemDom.style.color = _this5.get('textStyle').fill;\n      var markerDom = findNodeByClass(itemDom, MARKER_CLASS);\n      var textDom = findNodeByClass(itemDom, TEXT_CLASS);\n      DomUtil.modifyCSS(itemDom, itemStyle);\n      markerDom && DomUtil.modifyCSS(markerDom, markerStyle); // textDom && DomUtil.modifyCSS(textDom, this.get('textStyle'));\n\n      if (!checked) {\n        itemDom.style.color = unCheckedColor;\n\n        if (markerDom) {\n          markerDom.style.backgroundColor = unCheckedColor;\n        }\n      }\n\n      itemListDom.appendChild(itemDom); // abridge the text if the width of the text exceeds the width of the item\n\n      if (_this5.get('abridgeText')) {\n        var text = value; // const itemWidth = parseFloat(this.get(ITEM_CLASS).width.substr(0, this.get(ITEM_CLASS).width.length - 2));\n\n        var itemWidth = itemDom.offsetWidth;\n\n        var fs = _this5.get('textStyle').fontSize;\n\n        if (isNaN(fs)) {\n          // 6.5pt = 6.5 * 1/72 * 96 = 8.6px\n          if (fs.indexOf('pt') !== -1) fs = parseFloat(fs.substr(0, fs.length - 2)) * 1 / 72 * 96;else if (fs.indexOf('px') !== -1) fs = parseFloat(fs.substr(0, fs.length - 2));\n        }\n\n        var textWidth = fs * text.length;\n        var letterNum = Math.floor(itemWidth / fs);\n\n        if (itemWidth < 2 * fs) {\n          // unable to contain '...'\n          text = '';\n        } else if (itemWidth < textWidth) {\n          // replace the tail as '...\n          if (letterNum > 1) text = text.substr(0, letterNum - 1) + '...';\n        }\n\n        textDom.innerText = text; // show the text tip while mouse hovering an item\n\n        itemDom.addEventListener('mouseover', function () {\n          var tipDom = findNodeByClass(legendWrapper.parentNode, 'textTip');\n          tipDom.style.display = 'block';\n          tipDom.style.left = itemDom.offsetLeft + itemDom.offsetWidth + 'px';\n          tipDom.style.top = itemDom.offsetTop + 15 + 'px';\n          tipDom.innerText = value;\n        }); // hide the text tip while mouse leave the item\n\n        itemDom.addEventListener('mouseout', function () {\n          var tipDom = findNodeByClass(legendWrapper.parentNode, 'textTip');\n          tipDom.style.display = 'none';\n        });\n      }\n    }); // append the tip div as a brother node of legend dom\n\n    if (this.get('abridgeText')) {\n      var tipTpl = this.get('tipTpl');\n      var tipDom = DomUtil.createDom(tipTpl);\n      var tipDomStyle = this.get('tipStyle');\n      DomUtil.modifyCSS(tipDom, tipDomStyle);\n      legendWrapper.parentNode.appendChild(tipDom); // hide the tip while mouse entering the tip dom\n\n      tipDom.addEventListener('mouseover', function () {\n        tipDom.style.display = 'none';\n      });\n    }\n\n    this.set('legendWrapper', legendWrapper);\n  };\n\n  _proto._adjustPositionOffset = function _adjustPositionOffset() {\n    var autoPosition = this.get('autoPosition'); // @2018-12-29 by maplor. if autoPosition is false, don't set inline-style\n\n    if (autoPosition === false) {\n      return;\n    }\n\n    var position = this.get('position');\n    var offset = this.get('offset');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    if (offsetX) offset[0] = offsetX;\n    if (offsetY) offset[1] = offsetY;\n    var legendWrapper = this.get('legendWrapper');\n    legendWrapper.style.left = position[0] + 'px';\n    legendWrapper.style.top = position[1] + 'px';\n    legendWrapper.style.marginLeft = offset[0] + 'px';\n    legendWrapper.style.marginTop = offset[1] + 'px';\n  };\n\n  _proto.getWidth = function getWidth() {\n    return DomUtil.getOuterWidth(this.get('legendWrapper'));\n  };\n\n  _proto.getHeight = function getHeight() {\n    return DomUtil.getOuterHeight(this.get('legendWrapper'));\n  };\n\n  _proto.move = function move(x, y) {\n    if (!/^\\#/.test(this.get('container'))) {\n      DomUtil.modifyCSS(this.get('legendWrapper'), {\n        left: x + 'px',\n        top: y + 'px'\n      });\n      this.set('x', x);\n      this.set('y', y);\n    } else {\n      _Category.prototype.move.call(this, x, y);\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    var legendWrapper = this.get('legendWrapper');\n\n    if (legendWrapper && legendWrapper.parentNode) {\n      legendWrapper.parentNode.removeChild(legendWrapper);\n    }\n\n    _Category.prototype.destroy.call(this);\n  };\n\n  return CatHtml;\n}(Category);\n\nmodule.exports = CatHtml;"]}]}