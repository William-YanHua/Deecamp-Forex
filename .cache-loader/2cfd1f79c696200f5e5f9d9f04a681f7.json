{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/category.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/category.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar Legend = require('./base');\nvar _require = require('../const'), FONT_FAMILY = _require.FONT_FAMILY;\nvar Event = Util.Event;\nvar Group = Util.Group;\nfunction findItem(items, refer) {\n    var rst = null;\n    var value = refer instanceof Group || refer.name === 'legendGroup' ? refer.get('value') : refer;\n    Util.each(items, function (item) {\n        if (item.value === value) {\n            rst = item;\n            return false;\n        }\n    });\n    return rst;\n}\nfunction findShapeByName(group, name) {\n    return group.findBy(function (node) {\n        return node.name === name;\n    });\n}\nvar Category = function (_Legend) {\n    _inheritsLoose(Category, _Legend);\n    var _super = _createSuper(Category);\n    function Category() {\n        return _Legend.apply(this, arguments) || this;\n    }\n    var _proto = Category.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Legend.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            type: 'category-legend',\n            items: null,\n            itemGap: 5,\n            itemMarginBottom: 8,\n            itemsGroup: null,\n            layout: 'horizontal',\n            allowAllCanceled: false,\n            backPadding: [0, 0, 0, 0],\n            unCheckColor: '#ccc',\n            background: {\n                fill: '#fff',\n                fillOpacity: 0\n            },\n            itemWidth: null,\n            textStyle: {\n                fill: '#333',\n                fontSize: 12,\n                textAlign: 'start',\n                textBaseline: 'middle',\n                fontFamily: FONT_FAMILY\n            },\n            _wordSpaceing: 8,\n            clickable: true,\n            selectedMode: 'multiple',\n            reversed: false,\n            autoWrap: true,\n            highlight: false,\n            activeOpacity: 0.7,\n            inactiveOpacity: 1\n        });\n    };\n    _proto.render = function render() {\n        _Legend.prototype.render.call(this);\n        this._renderItems();\n        this.get('autoWrap') && this._adjustItems();\n    };\n    _proto._bindEvents = function _bindEvents() {\n        if (this.get('hoverable')) {\n            this.get('group').on('mousemove', Util.wrapBehavior(this, '_onMousemove'));\n            this.get('group').on('mouseleave', Util.wrapBehavior(this, '_onMouseleave'));\n        }\n        if (this.get('clickable')) {\n            this.get('group').on('click', Util.wrapBehavior(this, '_onClick'));\n        }\n    };\n    _proto._getLegendItem = function _getLegendItem(target) {\n        var item = target.get('parent');\n        if (item && item.name === 'legendGroup') {\n            return item;\n        }\n        return null;\n    };\n    _proto.activate = function activate(value) {\n        var _this = this;\n        var self = this;\n        var itemsGroup = self.get('itemsGroup');\n        var children = itemsGroup.get('children');\n        var markerItem = void 0;\n        children.forEach(function (child) {\n            markerItem = findShapeByName(child, 'legend-marker');\n            if (!markerItem)\n                return;\n            var checked = child.get('checked');\n            if (_this.get('highlight')) {\n                if (child.get('value') === value && checked) {\n                    markerItem.attr('stroke', '#333');\n                }\n                else {\n                    markerItem.attr('stroke', null);\n                }\n            }\n            else {\n                if (child.get('value') === value) {\n                    markerItem.attr('fillOpacity', self.get('activeOpacity'));\n                }\n            }\n        });\n        this.get('canvas').draw();\n        return;\n    };\n    _proto.deactivate = function deactivate() {\n        var _this2 = this;\n        var self = this;\n        var itemsGroup = self.get('itemsGroup');\n        var children = itemsGroup.get('children');\n        var markerItem = void 0;\n        var unCheckColor = this.get('unCheckColor');\n        children.forEach(function (child) {\n            markerItem = findShapeByName(child, 'legend-marker');\n            if (!markerItem)\n                return;\n            if (_this2.get('highlight')) {\n                var oriStroke = markerItem.get('oriStroke');\n                var checked = child.get('checked');\n                if (oriStroke && !checked)\n                    oriStroke = unCheckColor;\n                else\n                    oriStroke = '';\n                markerItem.attr('stroke', oriStroke);\n            }\n            else {\n                markerItem.attr('fillOpacity', self.get('inactiveOpacity'));\n            }\n        });\n        this.get('canvas').draw();\n        return;\n    };\n    _proto._onMousemove = function _onMousemove(ev) {\n        var item = this._getLegendItem(ev.currentTarget);\n        if (item && item.get('checked')) {\n            var items = this.get('items');\n            var itemhover = new Event('itemhover', ev, true, true);\n            itemhover.item = findItem(items, item);\n            itemhover.checked = item.get('checked');\n            itemhover.currentTarget = ev.currentTarget;\n            this.deactivate();\n            this.activate(item.get('value'));\n            this.emit('itemhover', itemhover);\n        }\n        else {\n            this.deactivate();\n            this.emit('itemunhover', ev);\n        }\n        this.get('canvas').draw();\n        return;\n    };\n    _proto._onMouseleave = function _onMouseleave(ev) {\n        this.deactivate();\n        this.get('canvas').draw();\n        this.emit('itemunhover', ev);\n        return;\n    };\n    _proto._onClick = function _onClick(ev) {\n        var clickedItem = this._getLegendItem(ev.currentTarget);\n        var items = this.get('items');\n        if (clickedItem && !clickedItem.get('destroyed')) {\n            var checked = clickedItem.get('checked');\n            var mode = this.get('selectedMode');\n            var item = findItem(items, clickedItem);\n            var itemclick = new Event('itemclick', ev, true, true);\n            itemclick.item = item;\n            itemclick.currentTarget = clickedItem;\n            itemclick.appendInfo = ev.currentTarget.get('appendInfo');\n            itemclick.checked = mode === 'single' ? true : !checked;\n            if (!this.get('allowAllCanceled') && checked && this.getCheckedCount() === 1) {\n                this.emit('clicklastitem', itemclick);\n                return;\n            }\n            var unCheckColor = this.get('unCheckColor');\n            var checkColor = this.get('textStyle').fill;\n            var markerItem = void 0;\n            var textItem = void 0;\n            var legendItem = void 0;\n            if (mode === 'single') {\n                var itemsGroup = this.get('itemsGroup');\n                var children = itemsGroup.get('children');\n                Util.each(children, function (child) {\n                    markerItem = findShapeByName(child, 'legend-marker');\n                    textItem = findShapeByName(child, 'legend-text');\n                    legendItem = findShapeByName(child, 'legend-item');\n                    if (child !== clickedItem) {\n                        if (markerItem.attr('fill')) {\n                            markerItem.attr('fill', unCheckColor);\n                        }\n                        if (markerItem.attr('stroke')) {\n                            markerItem.attr('stroke', unCheckColor);\n                        }\n                        textItem.attr('fill', unCheckColor);\n                        markerItem.setSilent('checked', false);\n                        textItem.setSilent('checked', false);\n                        legendItem.setSilent('checked', false);\n                        child.setSilent('checked', false);\n                    }\n                    else {\n                        if (markerItem.attr('fill')) {\n                            item && item.marker && markerItem.attr('fill', item.marker.fill);\n                        }\n                        if (markerItem.attr('stroke')) {\n                            item && item.marker && markerItem.attr('stroke', item.marker.stroke);\n                        }\n                        textItem.attr('fill', checkColor);\n                        markerItem.setSilent('checked', true);\n                        textItem.setSilent('checked', true);\n                        legendItem.setSilent('checked', true);\n                        child.setSilent('checked', true);\n                    }\n                });\n            }\n            else {\n                markerItem = findShapeByName(clickedItem, 'legend-marker');\n                textItem = findShapeByName(clickedItem, 'legend-text');\n                legendItem = findShapeByName(clickedItem, 'legend-item');\n                if (markerItem.attr('fill')) {\n                    item && item.marker && markerItem.attr('fill', checked ? unCheckColor : item.marker.fill);\n                }\n                if (markerItem.attr('stroke')) {\n                    item && item.marker && markerItem.attr('stroke', checked ? unCheckColor : item.marker.stroke);\n                }\n                textItem.attr('fill', checked ? unCheckColor : checkColor);\n                clickedItem.setSilent('checked', !checked);\n                markerItem.setSilent('checked', !checked);\n                textItem.setSilent('checked', !checked);\n                legendItem.setSilent('checked', !checked);\n            }\n            this.emit('itemclick', itemclick);\n        }\n        this.get('canvas').draw();\n        return;\n    };\n    _proto._renderItems = function _renderItems() {\n        var _this3 = this;\n        var items = this.get('items');\n        if (this.get('reversed')) {\n            items.reverse();\n        }\n        Util.each(items, function (item, index) {\n            _this3._addItem(item, index);\n        });\n        if (this.get('highlight')) {\n            var itemsGroup = this.get('itemsGroup');\n            var children = itemsGroup.get('children');\n            var markerItem = void 0;\n            children.forEach(function (child) {\n                markerItem = findShapeByName(child, 'legend-marker');\n                var oriStroke = markerItem.get('oriStroke');\n                if (!oriStroke) {\n                    if (markerItem.attr('stroke'))\n                        markerItem.set('oriStroke', markerItem.attr('stroke'));\n                    else\n                        markerItem.set('oriStroke', '');\n                }\n            });\n        }\n    };\n    _proto._formatItemValue = function _formatItemValue(value) {\n        var formatter = this.get('formatter') || this.get('itemFormatter');\n        if (formatter) {\n            value = formatter.call(this, value);\n        }\n        return value;\n    };\n    _proto._getNextX = function _getNextX() {\n        var layout = this.get('layout');\n        var itemGap = this.get('itemGap');\n        var itemsGroup = this.get('itemsGroup');\n        var itemWidth = this.get('itemWidth');\n        var children = itemsGroup.get('children');\n        var nextX = 0;\n        if (layout === 'horizontal') {\n            Util.each(children, function (v) {\n                nextX += (itemWidth ? itemWidth : v.getBBox().width) + itemGap;\n            });\n        }\n        return nextX;\n    };\n    _proto._getNextY = function _getNextY() {\n        var itemMarginBottom = this.get('itemMarginBottom');\n        var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\n        var layout = this.get('layout');\n        var itemsGroup = this.get('itemsGroup');\n        var titleShape = this.get('titleShape');\n        var children = itemsGroup.get('children');\n        var nextY = titleGap;\n        if (titleShape) {\n            nextY += titleShape.getBBox().height;\n        }\n        if (layout === 'vertical') {\n            Util.each(children, function (v) {\n                nextY += v.getBBox().height + itemMarginBottom;\n            });\n        }\n        return nextY;\n    };\n    _proto._addItem = function _addItem(item) {\n        var itemsGroup = this.get('itemsGroup');\n        var x = this._getNextX();\n        var y = this._getNextY();\n        var unCheckColor = this.get('unCheckColor');\n        var itemGroup = itemsGroup.addGroup({\n            x: x,\n            y: y,\n            value: item.value,\n            checked: item.checked\n        });\n        itemGroup.set('viewId', this.get('viewId'));\n        var textStyle = this.get('textStyle');\n        var wordSpace = this.get('_wordSpaceing');\n        var startX = 0;\n        if (item.marker) {\n            var markerAttrs = Util.mix({}, item.marker, {\n                x: item.marker.radius + x,\n                y: y\n            });\n            if (!item.checked) {\n                if (markerAttrs.fill) {\n                    markerAttrs.fill = unCheckColor;\n                }\n                if (markerAttrs.stroke) {\n                    markerAttrs.stroke = unCheckColor;\n                }\n            }\n            var markerShape = itemGroup.addShape('marker', {\n                type: 'marker',\n                attrs: markerAttrs\n            });\n            markerShape.attr('cursor', 'pointer');\n            markerShape.name = 'legend-marker';\n            startX += markerShape.getBBox().width + wordSpace;\n        }\n        var textAttrs = Util.mix({}, {\n            fill: '#333',\n            fontSize: 12,\n            textAlign: 'start',\n            textBaseline: 'middle',\n            fontFamily: FONT_FAMILY\n        }, textStyle, {\n            x: startX + x,\n            y: y,\n            text: this._formatItemValue(item.value)\n        });\n        if (!item.checked) {\n            Util.mix(textAttrs, {\n                fill: unCheckColor\n            });\n        }\n        var textShape = itemGroup.addShape('text', {\n            attrs: textAttrs\n        });\n        textShape.attr('cursor', 'pointer');\n        textShape.name = 'legend-text';\n        this.get('appendInfo') && textShape.setSilent('appendInfo', this.get('appendInfo'));\n        var bbox = itemGroup.getBBox();\n        var itemWidth = this.get('itemWidth');\n        var wrapperShape = itemGroup.addShape('rect', {\n            attrs: {\n                x: x,\n                y: y - bbox.height / 2,\n                fill: '#fff',\n                fillOpacity: 0,\n                width: itemWidth || bbox.width,\n                height: bbox.height\n            }\n        });\n        wrapperShape.attr('cursor', 'pointer');\n        wrapperShape.setSilent('origin', item);\n        wrapperShape.name = 'legend-item';\n        this.get('appendInfo') && wrapperShape.setSilent('appendInfo', this.get('appendInfo'));\n        itemGroup.name = 'legendGroup';\n        return itemGroup;\n    };\n    _proto._adjustHorizontal = function _adjustHorizontal() {\n        var itemsGroup = this.get('itemsGroup');\n        var children = itemsGroup.get('children');\n        var maxLength = this.get('maxLength');\n        var itemGap = this.get('itemGap');\n        var itemMarginBottom = this.get('itemMarginBottom');\n        var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\n        var row = 0;\n        var rowLength = 0;\n        var width = void 0;\n        var height = void 0;\n        var box = void 0;\n        var itemWidth = this.get('itemWidth');\n        if (itemsGroup.getBBox().width > maxLength) {\n            Util.each(children, function (child) {\n                box = child.getBBox();\n                width = itemWidth || box.width;\n                height = box.height + itemMarginBottom;\n                if (maxLength - rowLength < width) {\n                    row++;\n                    rowLength = 0;\n                }\n                child.move(rowLength, row * height + titleGap);\n                rowLength += width + itemGap;\n            });\n        }\n        return;\n    };\n    _proto._adjustVertical = function _adjustVertical() {\n        var itemsGroup = this.get('itemsGroup');\n        var titleShape = this.get('titleShape');\n        var children = itemsGroup.get('children');\n        var maxLength = this.get('maxLength');\n        var itemGap = this.get('itemGap');\n        var itemMarginBottom = this.get('itemMarginBottom');\n        var titleGap = this.get('titleGap');\n        var titleHeight = titleShape ? titleShape.getBBox().height + titleGap : 0;\n        var itemWidth = this.get('itemWidth');\n        var colLength = titleHeight;\n        var width = void 0;\n        var height = void 0;\n        var box = void 0;\n        var maxItemWidth = 0;\n        var totalLength = 0;\n        if (itemsGroup.getBBox().height > maxLength) {\n            Util.each(children, function (v) {\n                box = v.getBBox();\n                width = box.width;\n                height = box.height;\n                if (itemWidth) {\n                    maxItemWidth = itemWidth + itemGap;\n                }\n                else if (width > maxItemWidth) {\n                    maxItemWidth = width + itemGap;\n                }\n                if (maxLength - colLength < height) {\n                    colLength = titleHeight;\n                    totalLength += maxItemWidth;\n                    v.move(totalLength, titleHeight);\n                }\n                else {\n                    v.move(totalLength, colLength);\n                }\n                colLength += height + itemMarginBottom;\n            });\n        }\n        return;\n    };\n    _proto._adjustItems = function _adjustItems() {\n        var layout = this.get('layout');\n        if (layout === 'horizontal') {\n            this._adjustHorizontal();\n        }\n        else {\n            this._adjustVertical();\n        }\n    };\n    _proto.getWidth = function getWidth() {\n        return _Legend.prototype.getWidth.call(this);\n    };\n    _proto.getHeight = function getHeight() {\n        return _Legend.prototype.getHeight.call(this);\n    };\n    _proto.move = function move(x, y) {\n        _Legend.prototype.move.call(this, x, y);\n    };\n    return Category;\n}(Legend);\nmodule.exports = Category;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/category.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/category.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Legend = require('./base');\n\nvar _require = require('../const'),\n    FONT_FAMILY = _require.FONT_FAMILY; // const DomUtil = Util.DomUtil;\n\n\nvar Event = Util.Event;\nvar Group = Util.Group; // const Global = require('../../global');\n// const CONTAINER_CLASS = 'g2-legend';\n\nfunction findItem(items, refer) {\n  var rst = null;\n  var value = refer instanceof Group || refer.name === 'legendGroup' ? refer.get('value') : refer;\n  Util.each(items, function (item) {\n    if (item.value === value) {\n      rst = item;\n      return false;\n    }\n  });\n  return rst;\n}\n\nfunction findShapeByName(group, name) {\n  return group.findBy(function (node) {\n    return node.name === name;\n  });\n}\n\nvar Category = /*#__PURE__*/function (_Legend) {\n  _inheritsLoose(Category, _Legend);\n\n  var _super = _createSuper(Category);\n\n  function Category() {\n    return _Legend.apply(this, arguments) || this;\n  }\n\n  var _proto = Category.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Legend.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * type标识\n       * @type {String}\n       */\n      type: 'category-legend',\n\n      /**\n       * 子项集合\n       * @type {Array}\n       */\n      items: null,\n\n      /**\n       * TODO：rename\n       * 图例项水平方向的间距\n       * @type {Number}\n       */\n      itemGap: 5,\n\n      /**\n       * TODO：rename\n       * 图例项垂直方向的间距\n       * @type {Number}\n       */\n      itemMarginBottom: 8,\n\n      /**\n       * 图例项图组\n       * @type {Group}\n       */\n      itemsGroup: null,\n\n      /**\n       * 布局方式： horizontal，vertical\n       * @type {String}\n       */\n      layout: 'horizontal',\n\n      /**\n       * 是否允许全部取消，默认 false，即必须保留一个被选中\n       * @type {Boolean}\n       */\n      allowAllCanceled: false,\n\n      /**\n       * 边框内边距\n       * @type {Array}\n       */\n      backPadding: [0, 0, 0, 0],\n\n      /**\n       * 图例项取消选中的颜色\n       * @type {String}\n       */\n      unCheckColor: '#ccc',\n\n      /**\n       * 图例背景层属性设置\n       * @type {Obejct}\n       */\n      background: {\n        fill: '#fff',\n        fillOpacity: 0\n      },\n\n      /**\n       * 图例项的宽度，当图例有很多图例项，并且用户想要这些图例项在同一平面内垂直对齐，此时这个属性可帮用户实现此效果\n       * @type {Number}\n       */\n      itemWidth: null,\n\n      /**\n       * 图例文字样式\n       * @type {ATTRS}\n       */\n      textStyle: {\n        fill: '#333',\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle',\n        fontFamily: FONT_FAMILY\n      },\n\n      /**\n       * marker 和文字的距离\n       * @type {Number}\n       */\n      _wordSpaceing: 8,\n\n      /**\n       * 图例项是否可点击，默认为 true\n       * @type {Boolean}\n       */\n      clickable: true,\n\n      /**\n       * TODO: rename\n       * 图例项的选择模式，多选和单选 multiple、single\n       * @type {String}\n       */\n      selectedMode: 'multiple',\n\n      /**\n       * 图例项的顺序是否要逆序，默认为 false\n       * @type {Boolean}\n       */\n      reversed: false,\n\n      /**\n       * 是否自动换行\n       * @type {Boolean}\n       */\n      autoWrap: true,\n\n      /**\n       * 是否以增加 border 的方式高亮 hover 的 item。若为 false ，则降低其他 item 的透明度。\n       * @type {Boolean}\n       */\n      highlight: false,\n\n      /**\n       * 非highlight方式下，鼠标hover到legend样式\n       * @type {Number}\n       */\n      activeOpacity: 0.7,\n\n      /**\n       * 非highlight方式下，非鼠标hover到的legend样式\n       * @type {Number}\n       */\n      inactiveOpacity: 1\n    });\n  } // rendering\n  ;\n\n  _proto.render = function render() {\n    _Legend.prototype.render.call(this);\n\n    this._renderItems();\n\n    this.get('autoWrap') && this._adjustItems(); // 默认自动换行\n  } // user iteraction\n  ;\n\n  _proto._bindEvents = function _bindEvents() {\n    if (this.get('hoverable')) {\n      this.get('group').on('mousemove', Util.wrapBehavior(this, '_onMousemove'));\n      this.get('group').on('mouseleave', Util.wrapBehavior(this, '_onMouseleave'));\n    }\n\n    if (this.get('clickable')) {\n      this.get('group').on('click', Util.wrapBehavior(this, '_onClick'));\n    }\n  } // return the target's parent legend object\n  ;\n\n  _proto._getLegendItem = function _getLegendItem(target) {\n    var item = target.get('parent');\n\n    if (item && item.name === 'legendGroup') {\n      return item;\n    }\n\n    return null;\n  } // activate an item by reduce the opacity of other items.\n  // it is reserved for bi-direction interaction between charts / graph and legend\n  ;\n\n  _proto.activate = function activate(value) {\n    var _this = this;\n\n    var self = this;\n    var itemsGroup = self.get('itemsGroup');\n    var children = itemsGroup.get('children');\n    var markerItem = void 0;\n    children.forEach(function (child) {\n      markerItem = findShapeByName(child, 'legend-marker');\n      if (!markerItem) return;\n      var checked = child.get('checked');\n\n      if (_this.get('highlight')) {\n        // change stroke color\n        if (child.get('value') === value && checked) {\n          markerItem.attr('stroke', '#333');\n        } else {\n          markerItem.attr('stroke', null);\n        }\n      } else {\n        // change opacity\n        if (child.get('value') === value) {\n          markerItem.attr('fillOpacity', self.get('activeOpacity'));\n        }\n      }\n    });\n    this.get('canvas').draw();\n    return;\n  } // restore the opacity of items\n  // it is reserved for bi-direction interaction between charts / graph and legend\n  ;\n\n  _proto.deactivate = function deactivate() {\n    var _this2 = this;\n\n    var self = this;\n    var itemsGroup = self.get('itemsGroup');\n    var children = itemsGroup.get('children');\n    var markerItem = void 0;\n    var unCheckColor = this.get('unCheckColor');\n    children.forEach(function (child) {\n      markerItem = findShapeByName(child, 'legend-marker');\n      if (!markerItem) return;\n\n      if (_this2.get('highlight')) {\n        var oriStroke = markerItem.get('oriStroke');\n        var checked = child.get('checked');\n        if (oriStroke && !checked) oriStroke = unCheckColor;else oriStroke = '';\n        markerItem.attr('stroke', oriStroke);\n      } else {\n        markerItem.attr('fillOpacity', self.get('inactiveOpacity'));\n      }\n    });\n    this.get('canvas').draw();\n    return;\n  } // mouse move listener of an item\n  // when mouse over an item, reduce the opacity of the other items.\n  ;\n\n  _proto._onMousemove = function _onMousemove(ev) {\n    var item = this._getLegendItem(ev.currentTarget);\n\n    if (item && item.get('checked')) {\n      var items = this.get('items');\n      var itemhover = new Event('itemhover', ev, true, true);\n      itemhover.item = findItem(items, item);\n      itemhover.checked = item.get('checked');\n      itemhover.currentTarget = ev.currentTarget; // change the opacity of other items\n\n      this.deactivate();\n      this.activate(item.get('value'));\n      this.emit('itemhover', itemhover);\n    } else {\n      this.deactivate();\n      this.emit('itemunhover', ev);\n    }\n\n    this.get('canvas').draw();\n    return;\n  } // mouse leave listener of an item\n  ;\n\n  _proto._onMouseleave = function _onMouseleave(ev) {\n    this.deactivate();\n    this.get('canvas').draw();\n    this.emit('itemunhover', ev);\n    return;\n  } // the click listener of an item\n  ;\n\n  _proto._onClick = function _onClick(ev) {\n    var clickedItem = this._getLegendItem(ev.currentTarget);\n\n    var items = this.get('items');\n\n    if (clickedItem && !clickedItem.get('destroyed')) {\n      var checked = clickedItem.get('checked');\n      var mode = this.get('selectedMode');\n      var item = findItem(items, clickedItem);\n      var itemclick = new Event('itemclick', ev, true, true);\n      itemclick.item = item;\n      itemclick.currentTarget = clickedItem;\n      itemclick.appendInfo = ev.currentTarget.get('appendInfo');\n      itemclick.checked = mode === 'single' ? true : !checked;\n\n      if (!this.get('allowAllCanceled') && checked && this.getCheckedCount() === 1) {\n        this.emit('clicklastitem', itemclick);\n        return;\n      }\n\n      var unCheckColor = this.get('unCheckColor');\n      var checkColor = this.get('textStyle').fill;\n      var markerItem = void 0;\n      var textItem = void 0;\n      var legendItem = void 0;\n\n      if (mode === 'single') {\n        var itemsGroup = this.get('itemsGroup');\n        var children = itemsGroup.get('children');\n        Util.each(children, function (child) {\n          markerItem = findShapeByName(child, 'legend-marker');\n          textItem = findShapeByName(child, 'legend-text');\n          legendItem = findShapeByName(child, 'legend-item');\n\n          if (child !== clickedItem) {\n            if (markerItem.attr('fill')) {\n              markerItem.attr('fill', unCheckColor);\n            }\n\n            if (markerItem.attr('stroke')) {\n              markerItem.attr('stroke', unCheckColor);\n            }\n\n            textItem.attr('fill', unCheckColor);\n            markerItem.setSilent('checked', false);\n            textItem.setSilent('checked', false);\n            legendItem.setSilent('checked', false);\n            child.setSilent('checked', false);\n          } else {\n            if (markerItem.attr('fill')) {\n              item && item.marker && markerItem.attr('fill', item.marker.fill);\n            }\n\n            if (markerItem.attr('stroke')) {\n              item && item.marker && markerItem.attr('stroke', item.marker.stroke);\n            }\n\n            textItem.attr('fill', checkColor);\n            markerItem.setSilent('checked', true);\n            textItem.setSilent('checked', true);\n            legendItem.setSilent('checked', true);\n            child.setSilent('checked', true);\n          }\n        });\n      } else {\n        markerItem = findShapeByName(clickedItem, 'legend-marker');\n        textItem = findShapeByName(clickedItem, 'legend-text');\n        legendItem = findShapeByName(clickedItem, 'legend-item');\n\n        if (markerItem.attr('fill')) {\n          item && item.marker && markerItem.attr('fill', checked ? unCheckColor : item.marker.fill);\n        }\n\n        if (markerItem.attr('stroke')) {\n          item && item.marker && markerItem.attr('stroke', checked ? unCheckColor : item.marker.stroke);\n        }\n\n        textItem.attr('fill', checked ? unCheckColor : checkColor);\n        clickedItem.setSilent('checked', !checked);\n        markerItem.setSilent('checked', !checked);\n        textItem.setSilent('checked', !checked);\n        legendItem.setSilent('checked', !checked);\n      }\n\n      this.emit('itemclick', itemclick);\n    }\n\n    this.get('canvas').draw();\n    return;\n  } // render the items\n  ;\n\n  _proto._renderItems = function _renderItems() {\n    var _this3 = this;\n\n    var items = this.get('items');\n\n    if (this.get('reversed')) {\n      items.reverse();\n    }\n\n    Util.each(items, function (item, index) {\n      _this3._addItem(item, index);\n    });\n\n    if (this.get('highlight')) {\n      var itemsGroup = this.get('itemsGroup');\n      var children = itemsGroup.get('children');\n      var markerItem = void 0;\n      children.forEach(function (child) {\n        markerItem = findShapeByName(child, 'legend-marker');\n        var oriStroke = markerItem.get('oriStroke');\n\n        if (!oriStroke) {\n          if (markerItem.attr('stroke')) markerItem.set('oriStroke', markerItem.attr('stroke'));else markerItem.set('oriStroke', '');\n        }\n      });\n    }\n  } // format the item value\n  ;\n\n  _proto._formatItemValue = function _formatItemValue(value) {\n    var formatter = this.get('formatter') || this.get('itemFormatter');\n\n    if (formatter) {\n      value = formatter.call(this, value);\n    }\n\n    return value;\n  } // find x of next item\n  ;\n\n  _proto._getNextX = function _getNextX() {\n    var layout = this.get('layout');\n    var itemGap = this.get('itemGap');\n    var itemsGroup = this.get('itemsGroup');\n    var itemWidth = this.get('itemWidth');\n    var children = itemsGroup.get('children');\n    var nextX = 0;\n\n    if (layout === 'horizontal') {\n      // 水平布局\n      Util.each(children, function (v) {\n        nextX += (itemWidth ? itemWidth : v.getBBox().width) + itemGap;\n      });\n    }\n\n    return nextX;\n  } // find y of next item\n  ;\n\n  _proto._getNextY = function _getNextY() {\n    var itemMarginBottom = this.get('itemMarginBottom');\n    var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\n    var layout = this.get('layout');\n    var itemsGroup = this.get('itemsGroup');\n    var titleShape = this.get('titleShape');\n    var children = itemsGroup.get('children');\n    var nextY = titleGap;\n\n    if (titleShape) {\n      nextY += titleShape.getBBox().height;\n    }\n\n    if (layout === 'vertical') {\n      // 竖直布局\n      Util.each(children, function (v) {\n        nextY += v.getBBox().height + itemMarginBottom;\n      });\n    }\n\n    return nextY;\n  } // add an item to the canvas\n  ;\n\n  _proto._addItem = function _addItem(item) {\n    var itemsGroup = this.get('itemsGroup');\n\n    var x = this._getNextX();\n\n    var y = this._getNextY();\n\n    var unCheckColor = this.get('unCheckColor');\n    var itemGroup = itemsGroup.addGroup({\n      x: x,\n      y: y,\n      value: item.value,\n      checked: item.checked\n    }); // @2018-10-20 by blue.lb 需要设置viewId，否则在emit的时候，parent获取不到viewId\n\n    itemGroup.set('viewId', this.get('viewId'));\n    var textStyle = this.get('textStyle');\n    var wordSpace = this.get('_wordSpaceing');\n    var startX = 0;\n\n    if (item.marker) {\n      // 如果有marker添加marker\n      var markerAttrs = Util.mix({}, item.marker, {\n        x: item.marker.radius + x,\n        y: y\n      });\n\n      if (!item.checked) {\n        if (markerAttrs.fill) {\n          markerAttrs.fill = unCheckColor;\n        }\n\n        if (markerAttrs.stroke) {\n          markerAttrs.stroke = unCheckColor;\n        }\n      }\n\n      var markerShape = itemGroup.addShape('marker', {\n        type: 'marker',\n        attrs: markerAttrs\n      });\n      markerShape.attr('cursor', 'pointer');\n      markerShape.name = 'legend-marker';\n      startX += markerShape.getBBox().width + wordSpace;\n    }\n\n    var textAttrs = Util.mix({}, {\n      fill: '#333',\n      fontSize: 12,\n      textAlign: 'start',\n      textBaseline: 'middle',\n      fontFamily: FONT_FAMILY\n    }, textStyle, {\n      x: startX + x,\n      y: y,\n      text: this._formatItemValue(item.value)\n    });\n\n    if (!item.checked) {\n      Util.mix(textAttrs, {\n        fill: unCheckColor\n      });\n    }\n\n    var textShape = itemGroup.addShape('text', {\n      attrs: textAttrs\n    });\n    textShape.attr('cursor', 'pointer');\n    textShape.name = 'legend-text';\n    this.get('appendInfo') && textShape.setSilent('appendInfo', this.get('appendInfo')); // 添加一个包围矩形，用于事件支持\n\n    var bbox = itemGroup.getBBox();\n    var itemWidth = this.get('itemWidth');\n    var wrapperShape = itemGroup.addShape('rect', {\n      attrs: {\n        x: x,\n        y: y - bbox.height / 2,\n        fill: '#fff',\n        fillOpacity: 0,\n        width: itemWidth || bbox.width,\n        height: bbox.height\n      }\n    });\n    wrapperShape.attr('cursor', 'pointer');\n    wrapperShape.setSilent('origin', item); // 保存图例项相关的数据，便于事件操作\n\n    wrapperShape.name = 'legend-item';\n    this.get('appendInfo') && wrapperShape.setSilent('appendInfo', this.get('appendInfo'));\n    itemGroup.name = 'legendGroup';\n    return itemGroup;\n  } // auto break the line for horizontal layout\n  ;\n\n  _proto._adjustHorizontal = function _adjustHorizontal() {\n    var itemsGroup = this.get('itemsGroup');\n    var children = itemsGroup.get('children');\n    var maxLength = this.get('maxLength');\n    var itemGap = this.get('itemGap');\n    var itemMarginBottom = this.get('itemMarginBottom');\n    var titleGap = this.get('titleShape') ? this.get('titleGap') : 0;\n    var row = 0;\n    var rowLength = 0;\n    var width = void 0;\n    var height = void 0;\n    var box = void 0;\n    var itemWidth = this.get('itemWidth');\n\n    if (itemsGroup.getBBox().width > maxLength) {\n      Util.each(children, function (child) {\n        box = child.getBBox();\n        width = itemWidth || box.width;\n        height = box.height + itemMarginBottom;\n\n        if (maxLength - rowLength < width) {\n          row++;\n          rowLength = 0;\n        }\n\n        child.move(rowLength, row * height + titleGap);\n        rowLength += width + itemGap;\n      });\n    }\n\n    return;\n  } // auto break the column for vertical layout\n  ;\n\n  _proto._adjustVertical = function _adjustVertical() {\n    var itemsGroup = this.get('itemsGroup');\n    var titleShape = this.get('titleShape');\n    var children = itemsGroup.get('children');\n    var maxLength = this.get('maxLength'); // 垂直布局，则 maxLength 代表容器的高度\n\n    var itemGap = this.get('itemGap');\n    var itemMarginBottom = this.get('itemMarginBottom');\n    var titleGap = this.get('titleGap');\n    var titleHeight = titleShape ? titleShape.getBBox().height + titleGap : 0;\n    var itemWidth = this.get('itemWidth');\n    var colLength = titleHeight;\n    var width = void 0;\n    var height = void 0;\n    var box = void 0;\n    var maxItemWidth = 0;\n    var totalLength = 0;\n\n    if (itemsGroup.getBBox().height > maxLength) {\n      Util.each(children, function (v) {\n        box = v.getBBox();\n        width = box.width;\n        height = box.height;\n\n        if (itemWidth) {\n          maxItemWidth = itemWidth + itemGap;\n        } else if (width > maxItemWidth) {\n          maxItemWidth = width + itemGap;\n        }\n\n        if (maxLength - colLength < height) {\n          colLength = titleHeight;\n          totalLength += maxItemWidth;\n          v.move(totalLength, titleHeight);\n        } else {\n          v.move(totalLength, colLength);\n        }\n\n        colLength += height + itemMarginBottom;\n      });\n    }\n\n    return;\n  } // automatically break the line / column while the width / height exceeds maxLength\n  ;\n\n  _proto._adjustItems = function _adjustItems() {\n    var layout = this.get('layout');\n\n    if (layout === 'horizontal') {\n      this._adjustHorizontal();\n    } else {\n      this._adjustVertical();\n    }\n  };\n\n  _proto.getWidth = function getWidth() {\n    return _Legend.prototype.getWidth.call(this);\n  };\n\n  _proto.getHeight = function getHeight() {\n    return _Legend.prototype.getHeight.call(this);\n  };\n\n  _proto.move = function move(x, y) {\n    _Legend.prototype.move.call(this, x, y);\n  };\n\n  return Category;\n}(Legend);\n\nmodule.exports = Category;"]}]}