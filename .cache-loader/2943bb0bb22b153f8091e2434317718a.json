{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\coordinate.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\coordinate.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign } from \"tslib\";\r\nimport { each, isNil, some } from '@antv/util';\r\nimport { getCoordinate } from '../../dependents';\r\nvar CoordinateController = (function () {\r\n    function CoordinateController(option) {\r\n        this.option = this.wrapperOption(option);\r\n    }\r\n    CoordinateController.prototype.update = function (option) {\r\n        this.option = this.wrapperOption(option);\r\n        return this;\r\n    };\r\n    CoordinateController.prototype.hasAction = function (actionName) {\r\n        var actions = this.option.actions;\r\n        return some(actions, function (action) { return action[0] === actionName; });\r\n    };\r\n    CoordinateController.prototype.create = function (start, end) {\r\n        var _a = this.option, type = _a.type, cfg = _a.cfg;\r\n        var isTheta = type === 'theta';\r\n        var props = __assign({ start: start,\r\n            end: end }, cfg);\r\n        var C = getCoordinate(isTheta ? 'polar' : type);\r\n        this.coordinate = new C(props);\r\n        this.coordinate.type = type;\r\n        if (isTheta) {\r\n            if (!this.hasAction('transpose')) {\r\n                this.transpose();\r\n            }\r\n        }\r\n        this.execActions();\r\n        return this.coordinate;\r\n    };\r\n    CoordinateController.prototype.adjust = function (start, end) {\r\n        this.coordinate.update({\r\n            start: start,\r\n            end: end,\r\n        });\r\n        this.coordinate.resetMatrix();\r\n        this.execActions(['scale', 'rotate', 'translate']);\r\n        return this.coordinate;\r\n    };\r\n    CoordinateController.prototype.rotate = function (angle) {\r\n        this.option.actions.push(['rotate', angle]);\r\n        return this;\r\n    };\r\n    CoordinateController.prototype.reflect = function (dim) {\r\n        this.option.actions.push(['reflect', dim]);\r\n        return this;\r\n    };\r\n    CoordinateController.prototype.scale = function (sx, sy) {\r\n        this.option.actions.push(['scale', sx, sy]);\r\n        return this;\r\n    };\r\n    CoordinateController.prototype.transpose = function () {\r\n        this.option.actions.push(['transpose']);\r\n        return this;\r\n    };\r\n    CoordinateController.prototype.getOption = function () {\r\n        return this.option;\r\n    };\r\n    CoordinateController.prototype.getCoordinate = function () {\r\n        return this.coordinate;\r\n    };\r\n    CoordinateController.prototype.wrapperOption = function (option) {\r\n        return __assign({ type: 'rect', actions: [], cfg: {} }, option);\r\n    };\r\n    CoordinateController.prototype.execActions = function (includeActions) {\r\n        var _this = this;\r\n        var actions = this.option.actions;\r\n        each(actions, function (action) {\r\n            var _a;\r\n            var actionName = action[0], args = action.slice(1);\r\n            var shouldExec = isNil(includeActions) ? true : includeActions.includes(actionName);\r\n            if (shouldExec) {\r\n                (_a = _this.coordinate)[actionName].apply(_a, args);\r\n            }\r\n        });\r\n    };\r\n    return CoordinateController;\r\n}());\r\nexport default CoordinateController;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\coordinate.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\chart\\controller\\coordinate.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport { each, isNil, some } from '@antv/util';\nimport { getCoordinate } from '../../dependents';\n/**\n * coordinate controller，职责：\n * 1. 创建实例\n * 2. 暂存配置\n */\nvar CoordinateController = /** @class */ (function () {\n    function CoordinateController(option) {\n        // 设置默认值，并存储配置\n        this.option = this.wrapperOption(option);\n    }\n    /**\n     * 更新配置\n     * @param option\n     */\n    CoordinateController.prototype.update = function (option) {\n        this.option = this.wrapperOption(option);\n        return this;\n    };\n    /**\n     * 是否存在某一个 action\n     * @param actionName\n     */\n    CoordinateController.prototype.hasAction = function (actionName) {\n        var actions = this.option.actions;\n        return some(actions, function (action) { return action[0] === actionName; });\n    };\n    /**\n     * 创建坐标系对象\n     * @param start 起始位置\n     * @param end   结束位置\n     * @return 坐标系实例\n     */\n    CoordinateController.prototype.create = function (start, end) {\n        var _a = this.option, type = _a.type, cfg = _a.cfg;\n        var isTheta = type === 'theta';\n        // 1. 起始位置\n        var props = __assign({ start: start,\n            end: end }, cfg);\n        // 2. 创建实例\n        var C = getCoordinate(isTheta ? 'polar' : type);\n        this.coordinate = new C(props);\n        // @ts-ignore FIXME coordinate 包问题导致 type 不正确\n        this.coordinate.type = type;\n        // 3. 添加默认 action\n        if (isTheta) {\n            // 不存在 transpose，为其自动设置一个 action\n            if (!this.hasAction('transpose')) {\n                this.transpose();\n            }\n        }\n        // 4. 执行 action\n        this.execActions();\n        return this.coordinate;\n    };\n    /**\n     * 更新坐标系对象\n     * @param start 起始位置\n     * @param end   结束位置\n     * @return 坐标系实例\n     */\n    CoordinateController.prototype.adjust = function (start, end) {\n        this.coordinate.update({\n            start: start,\n            end: end,\n        });\n        // 更新坐标系大小的时候，需要：\n        // 1. 重置 matrix\n        // 2. 重新执行作用于 matrix 的 action\n        this.coordinate.resetMatrix();\n        this.execActions(['scale', 'rotate', 'translate']);\n        return this.coordinate;\n    };\n    /**\n     * 旋转弧度\n     * @param angle\n     */\n    CoordinateController.prototype.rotate = function (angle) {\n        this.option.actions.push(['rotate', angle]);\n        return this;\n    };\n    /**\n     * 镜像\n     * @param dim\n     */\n    CoordinateController.prototype.reflect = function (dim) {\n        this.option.actions.push(['reflect', dim]);\n        return this;\n    };\n    /**\n     * scale\n     * @param sx\n     * @param sy\n     */\n    CoordinateController.prototype.scale = function (sx, sy) {\n        this.option.actions.push(['scale', sx, sy]);\n        return this;\n    };\n    /**\n     * 对角变换\n     */\n    CoordinateController.prototype.transpose = function () {\n        this.option.actions.push(['transpose']);\n        return this;\n    };\n    /**\n     * 获取配置\n     */\n    CoordinateController.prototype.getOption = function () {\n        return this.option;\n    };\n    /**\n     * 获得 coordinate 实例\n     */\n    CoordinateController.prototype.getCoordinate = function () {\n        return this.coordinate;\n    };\n    /**\n     * 包装配置的默认值\n     * @param option\n     */\n    CoordinateController.prototype.wrapperOption = function (option) {\n        return __assign({ type: 'rect', actions: [], cfg: {} }, option);\n    };\n    /**\n     * coordinate 实例执行 actions\n     * @params includeActions 如果没有指定，则执行全部，否则，执行指定的 action\n     */\n    CoordinateController.prototype.execActions = function (includeActions) {\n        var _this = this;\n        var actions = this.option.actions;\n        each(actions, function (action) {\n            var _a;\n            var actionName = action[0], args = action.slice(1);\n            var shouldExec = isNil(includeActions) ? true : includeActions.includes(actionName);\n            if (shouldExec) {\n                (_a = _this.coordinate)[actionName].apply(_a, args);\n            }\n        });\n    };\n    return CoordinateController;\n}());\nexport default CoordinateController;\n//# sourceMappingURL=coordinate.js.map"]}]}