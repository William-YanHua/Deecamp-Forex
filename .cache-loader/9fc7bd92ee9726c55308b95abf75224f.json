{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/chart/controller/slider.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/chart/controller/slider.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isObject, size } from '@antv/util';\nimport { COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { Slider as SliderComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { isBetween, omit } from '../../util/helper';\nimport { Controller } from './base';\nvar Slider = (function (_super) {\n    __extends(Slider, _super);\n    function Slider(view) {\n        var _this = _super.call(this, view) || this;\n        _this.onValueChanged = function (v) {\n            var min = v[0], max = v[1];\n            _this.updateMinMaxText(min, max);\n            _this.view.render(true);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"name\", {\n        get: function () {\n            return 'slider';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Slider.prototype.init = function () { };\n    Slider.prototype.render = function () {\n        this.option = this.view.getOptions().slider;\n        if (this.option) {\n            if (this.slider) {\n                this.slider = this.updateSlider();\n            }\n            else {\n                this.slider = this.createSlider();\n                this.slider.component.on('sliderchange', this.onValueChanged);\n            }\n            var min = this.slider.component.get('start') || 0;\n            var max = this.slider.component.get('end') || 1;\n            this.updateMinMaxText(min, max);\n        }\n        else {\n            if (this.slider) {\n                this.slider.component.destroy();\n                this.slider = undefined;\n            }\n            else {\n            }\n        }\n    };\n    Slider.prototype.layout = function () {\n        if (this.slider) {\n            var width = this.view.coordinateBBox.width;\n            var bboxObject = this.slider.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height);\n            var _a = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _a[0], y1 = _a[1];\n            var _b = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _b[0], y2 = _b[1];\n            this.slider.component.update({\n                x: x2,\n                y: y1,\n                width: width,\n            });\n        }\n    };\n    Slider.prototype.update = function () {\n        this.render();\n    };\n    Slider.prototype.createSlider = function () {\n        var cfg = this.getSliderCfg();\n        var component = new SliderComponent(__assign({ container: this.container }, cfg));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: DIRECTION.BOTTOM,\n            type: COMPONENT_TYPE.OTHER,\n        };\n    };\n    Slider.prototype.updateSlider = function () {\n        var cfg = this.getSliderCfg();\n        omit(cfg, ['x', 'y', 'width', 'start', 'end', 'minText', 'maxText']);\n        this.slider.component.update(cfg);\n        return this.slider;\n    };\n    Slider.prototype.getSliderCfg = function () {\n        if (isObject(this.option)) {\n            var trendCfg = __assign({ data: this.getData() }, get(this.option, 'trendCfg', {}));\n            var x = 0;\n            var y = 0;\n            var width = this.view.coordinateBBox.width;\n            var cfg = deepMix({}, { x: x, y: y, width: width }, this.option);\n            return __assign(__assign({}, cfg), { trendCfg: trendCfg });\n        }\n        return {};\n    };\n    Slider.prototype.getData = function () {\n        var data = this.view.getOptions().data;\n        var yScale = this.view.getYScales()[0];\n        var groupScales = this.view.getGroupScales();\n        if (groupScales.length) {\n            var _a = groupScales[0], field_1 = _a.field, ticks_1 = _a.ticks;\n            return data.reduce(function (pre, cur) {\n                if (cur[field_1] === ticks_1[0]) {\n                    pre.push(cur[yScale.field]);\n                }\n                return pre;\n            }, []);\n        }\n        return data.map(function (datum) { return datum[yScale.field] || 0; });\n    };\n    Slider.prototype.updateMinMaxText = function (min, max) {\n        var data = this.view.getOptions().data;\n        var xScale = this.view.getXScale();\n        var dataSize = size(data);\n        if (!xScale || !dataSize) {\n            return;\n        }\n        var x = xScale.field;\n        var xTicks = data.reduce(function (pre, datum) {\n            if (!pre.includes(datum[x]))\n                pre.push(datum[x]);\n            return pre;\n        }, []);\n        var xTickCount = size(xTicks);\n        var minIndex = Math.floor(min * (xTickCount - 1));\n        var maxIndex = Math.floor(max * (xTickCount - 1));\n        var minText = get(xTicks, [minIndex]);\n        var maxText = get(xTicks, [maxIndex]);\n        var formatter = this.getSliderCfg().formatter;\n        if (formatter) {\n            minText = formatter(minText, data[minIndex], minIndex);\n            maxText = formatter(maxText, data[maxIndex], maxIndex);\n        }\n        this.slider.component.update({\n            minText: minText,\n            maxText: maxText,\n            start: min,\n            end: max,\n        });\n        this.view.filter(xScale.field, function (value, datum) {\n            var idx = xTicks.indexOf(value);\n            return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n        });\n    };\n    Slider.prototype.getComponents = function () {\n        return this.slider ? [this.slider] : [];\n    };\n    return Slider;\n}(Controller));\nexport default Slider;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/chart/controller/slider.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/chart/controller/slider.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isObject, size } from '@antv/util';\nimport { COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { Slider as SliderComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { isBetween, omit } from '../../util/helper';\nimport { Controller } from './base';\n/**\n * @ignore\n * slider Controller\n */\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider(view) {\n        var _this = _super.call(this, view) || this;\n        /**\n         * 滑块滑动的时候出发\n         * @param v\n         */\n        _this.onValueChanged = function (v) {\n            var min = v[0], max = v[1];\n            _this.updateMinMaxText(min, max);\n            _this.view.render(true);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"name\", {\n        get: function () {\n            return 'slider';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * 初始化\n     */\n    Slider.prototype.init = function () { };\n    /**\n     * 渲染\n     */\n    Slider.prototype.render = function () {\n        this.option = this.view.getOptions().slider;\n        if (this.option) {\n            if (this.slider) {\n                // exist, update\n                this.slider = this.updateSlider();\n            }\n            else {\n                // not exist, create\n                this.slider = this.createSlider();\n                // 监听事件，绑定交互\n                this.slider.component.on('sliderchange', this.onValueChanged);\n            }\n            // changeData 的时候同样需要更新\n            // 设置初始的 text\n            var min = this.slider.component.get('start') || 0;\n            var max = this.slider.component.get('end') || 1;\n            this.updateMinMaxText(min, max);\n        }\n        else {\n            if (this.slider) {\n                // exist, destroy\n                this.slider.component.destroy();\n                this.slider = undefined;\n            }\n            else {\n                // do nothing\n            }\n        }\n    };\n    /**\n     * 布局\n     */\n    Slider.prototype.layout = function () {\n        if (this.slider) {\n            var width = this.view.coordinateBBox.width;\n            // 获取组件的 layout bbox\n            var bboxObject = this.slider.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height);\n            var _a = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _a[0], y1 = _a[1];\n            var _b = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _b[0], y2 = _b[1];\n            // 默认放在 bottom\n            this.slider.component.update({\n                x: x2,\n                y: y1,\n                width: width,\n            });\n        }\n    };\n    /**\n     * 更新\n     */\n    Slider.prototype.update = function () {\n        // 逻辑和 render 保持一致\n        this.render();\n    };\n    /**\n     * 创建 slider 组件\n     */\n    Slider.prototype.createSlider = function () {\n        var cfg = this.getSliderCfg();\n        // 添加 slider 组件\n        var component = new SliderComponent(__assign({ container: this.container }, cfg));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: DIRECTION.BOTTOM,\n            type: COMPONENT_TYPE.OTHER,\n        };\n    };\n    /**\n     * 更新配置\n     */\n    Slider.prototype.updateSlider = function () {\n        var cfg = this.getSliderCfg();\n        omit(cfg, ['x', 'y', 'width', 'start', 'end', 'minText', 'maxText']);\n        this.slider.component.update(cfg);\n        return this.slider;\n    };\n    /**\n     * 生成 slider 配置\n     */\n    Slider.prototype.getSliderCfg = function () {\n        if (isObject(this.option)) {\n            // 用户配置的数据，优先级更高\n            var trendCfg = __assign({ data: this.getData() }, get(this.option, 'trendCfg', {}));\n            // 初始的位置大小信息\n            var x = 0;\n            var y = 0;\n            var width = this.view.coordinateBBox.width;\n            // 因为有样式，所以深层覆盖\n            var cfg = deepMix({}, { x: x, y: y, width: width }, this.option);\n            // trendCfg 因为有数据数组，所以使用浅替换\n            return __assign(__assign({}, cfg), { trendCfg: trendCfg });\n        }\n        return {};\n    };\n    /**\n     * 从 view 中获取数据，缩略轴使用全量的数据\n     */\n    Slider.prototype.getData = function () {\n        var data = this.view.getOptions().data;\n        var yScale = this.view.getYScales()[0];\n        var groupScales = this.view.getGroupScales();\n        if (groupScales.length) {\n            var _a = groupScales[0], field_1 = _a.field, ticks_1 = _a.ticks;\n            return data.reduce(function (pre, cur) {\n                if (cur[field_1] === ticks_1[0]) {\n                    pre.push(cur[yScale.field]);\n                }\n                return pre;\n            }, []);\n        }\n        return data.map(function (datum) { return datum[yScale.field] || 0; });\n    };\n    Slider.prototype.updateMinMaxText = function (min, max) {\n        var data = this.view.getOptions().data;\n        var xScale = this.view.getXScale();\n        var dataSize = size(data);\n        if (!xScale || !dataSize) {\n            return;\n        }\n        var x = xScale.field;\n        // x 轴刻度\n        var xTicks = data.reduce(function (pre, datum) {\n            if (!pre.includes(datum[x]))\n                pre.push(datum[x]);\n            return pre;\n        }, []);\n        var xTickCount = size(xTicks);\n        var minIndex = Math.floor(min * (xTickCount - 1));\n        var maxIndex = Math.floor(max * (xTickCount - 1));\n        var minText = get(xTicks, [minIndex]);\n        var maxText = get(xTicks, [maxIndex]);\n        var formatter = this.getSliderCfg().formatter;\n        if (formatter) {\n            minText = formatter(minText, data[minIndex], minIndex);\n            maxText = formatter(maxText, data[maxIndex], maxIndex);\n        }\n        // 更新文本\n        this.slider.component.update({\n            minText: minText,\n            maxText: maxText,\n            start: min,\n            end: max,\n        });\n        // 增加 x 轴的过滤器\n        this.view.filter(xScale.field, function (value, datum) {\n            var idx = xTicks.indexOf(value);\n            return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n        });\n    };\n    /**\n     * 覆写父类方法\n     */\n    Slider.prototype.getComponents = function () {\n        return this.slider ? [this.slider] : [];\n    };\n    return Slider;\n}(Controller));\nexport default Slider;\n//# sourceMappingURL=slider.js.map"]}]}