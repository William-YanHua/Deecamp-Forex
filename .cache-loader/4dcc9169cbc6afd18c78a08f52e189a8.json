{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\DOMWrap.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\DOMWrap.js","mtime":1540360655000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import _extends from 'babel-runtime/helpers/extends';\r\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\r\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\r\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\r\nimport _inherits from 'babel-runtime/helpers/inherits';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport SubMenu from './SubMenu';\r\nimport { getWidth, setWidth, menuAllProps } from './util';\r\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\r\nif (canUseDOM) {\r\n    require('mutationobserver-shim');\r\n}\r\nvar DOMWrap = function (_React$Component) {\r\n    _inherits(DOMWrap, _React$Component);\r\n    function DOMWrap() {\r\n        var _temp, _this, _ret;\r\n        _classCallCheck(this, DOMWrap);\r\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n            args[_key] = arguments[_key];\r\n        }\r\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\r\n            lastVisibleIndex: undefined\r\n        }, _this.getMenuItemNodes = function () {\r\n            var prefixCls = _this.props.prefixCls;\r\n            var ul = ReactDOM.findDOMNode(_this);\r\n            if (!ul) {\r\n                return [];\r\n            }\r\n            return [].slice.call(ul.children).filter(function (node) {\r\n                return node.className.split(' ').indexOf(prefixCls + '-overflowed-submenu') < 0;\r\n            });\r\n        }, _this.getOverflowedSubMenuItem = function (keyPrefix, overflowedItems, renderPlaceholder) {\r\n            var _this$props = _this.props, overflowedIndicator = _this$props.overflowedIndicator, level = _this$props.level, mode = _this$props.mode, prefixCls = _this$props.prefixCls, theme = _this$props.theme, propStyle = _this$props.style;\r\n            if (level !== 1 || mode !== 'horizontal') {\r\n                return null;\r\n            }\r\n            var copy = _this.props.children[0];\r\n            var _copy$props = copy.props, throwAway = _copy$props.children, title = _copy$props.title, eventKey = _copy$props.eventKey, rest = _objectWithoutProperties(_copy$props, ['children', 'title', 'eventKey']);\r\n            var style = _extends({}, propStyle);\r\n            var key = keyPrefix + '-overflowed-indicator';\r\n            if (overflowedItems.length === 0 && renderPlaceholder !== true) {\r\n                style = _extends({}, style, {\r\n                    display: 'none'\r\n                });\r\n            }\r\n            else if (renderPlaceholder) {\r\n                style = _extends({}, style, {\r\n                    visibility: 'hidden',\r\n                    position: 'absolute'\r\n                });\r\n                key = key + '-placeholder';\r\n            }\r\n            var popupClassName = theme ? prefixCls + '-' + theme : '';\r\n            var props = {};\r\n            menuAllProps.forEach(function (k) {\r\n                if (rest[k] !== undefined) {\r\n                    props[k] = rest[k];\r\n                }\r\n            });\r\n            return React.createElement(SubMenu, _extends({\r\n                title: overflowedIndicator,\r\n                className: prefixCls + '-overflowed-submenu',\r\n                popupClassName: popupClassName\r\n            }, props, {\r\n                key: key,\r\n                eventKey: keyPrefix + '-overflowed-indicator',\r\n                disabled: false,\r\n                style: style\r\n            }), overflowedItems);\r\n        }, _this.setChildrenWidthAndResize = function () {\r\n            if (_this.props.mode !== 'horizontal') {\r\n                return;\r\n            }\r\n            var ul = ReactDOM.findDOMNode(_this);\r\n            if (!ul) {\r\n                return;\r\n            }\r\n            var ulChildrenNodes = ul.children;\r\n            if (!ulChildrenNodes || ulChildrenNodes.length === 0) {\r\n                return;\r\n            }\r\n            var lastOverflowedIndicatorPlaceholder = ul.children[ulChildrenNodes.length - 1];\r\n            setWidth(lastOverflowedIndicatorPlaceholder, 'auto');\r\n            var menuItemNodes = _this.getMenuItemNodes();\r\n            var displayValueCaches = [];\r\n            menuItemNodes.forEach(function (c) {\r\n                displayValueCaches.push(c.style.display);\r\n                c.style.display = 'inline-block';\r\n            });\r\n            _this.menuItemSizes = menuItemNodes.map(function (c) {\r\n                return getWidth(c);\r\n            });\r\n            menuItemNodes.forEach(function (c, i) {\r\n                c.style.display = displayValueCaches[i];\r\n            });\r\n            _this.overflowedIndicatorWidth = getWidth(ul.children[ul.children.length - 1]);\r\n            _this.originalTotalWidth = _this.menuItemSizes.reduce(function (acc, cur) {\r\n                return acc + cur;\r\n            }, 0);\r\n            _this.handleResize();\r\n            setWidth(lastOverflowedIndicatorPlaceholder, 0);\r\n        }, _this.resizeObserver = null, _this.mutationObserver = null, _this.originalTotalWidth = 0, _this.overflowedItems = [], _this.menuItemSizes = [], _this.handleResize = function () {\r\n            if (_this.props.mode !== 'horizontal') {\r\n                return;\r\n            }\r\n            var ul = ReactDOM.findDOMNode(_this);\r\n            if (!ul) {\r\n                return;\r\n            }\r\n            var width = getWidth(ul);\r\n            _this.overflowedItems = [];\r\n            var currentSumWidth = 0;\r\n            var lastVisibleIndex = undefined;\r\n            if (_this.originalTotalWidth > width) {\r\n                lastVisibleIndex = -1;\r\n                _this.menuItemSizes.forEach(function (liWidth) {\r\n                    currentSumWidth += liWidth;\r\n                    if (currentSumWidth + _this.overflowedIndicatorWidth <= width) {\r\n                        lastVisibleIndex++;\r\n                    }\r\n                });\r\n            }\r\n            _this.setState({ lastVisibleIndex: lastVisibleIndex });\r\n        }, _temp), _possibleConstructorReturn(_this, _ret);\r\n    }\r\n    DOMWrap.prototype.componentDidMount = function componentDidMount() {\r\n        var _this2 = this;\r\n        this.setChildrenWidthAndResize();\r\n        if (this.props.level === 1 && this.props.mode === 'horizontal') {\r\n            var menuUl = ReactDOM.findDOMNode(this);\r\n            if (!menuUl) {\r\n                return;\r\n            }\r\n            this.resizeObserver = new ResizeObserver(function (entries) {\r\n                entries.forEach(_this2.setChildrenWidthAndResize);\r\n            });\r\n            [].slice.call(menuUl.children).concat(menuUl).forEach(function (el) {\r\n                _this2.resizeObserver.observe(el);\r\n            });\r\n            if (typeof MutationObserver !== 'undefined') {\r\n                this.mutationObserver = new MutationObserver(function () {\r\n                    _this2.resizeObserver.disconnect();\r\n                    [].slice.call(menuUl.children).concat(menuUl).forEach(function (el) {\r\n                        _this2.resizeObserver.observe(el);\r\n                    });\r\n                    _this2.setChildrenWidthAndResize();\r\n                });\r\n                this.mutationObserver.observe(menuUl, { attributes: false, childList: true, subTree: false });\r\n            }\r\n        }\r\n    };\r\n    DOMWrap.prototype.componentWillUnmount = function componentWillUnmount() {\r\n        if (this.resizeObserver) {\r\n            this.resizeObserver.disconnect();\r\n        }\r\n        if (this.mutationObserver) {\r\n            this.resizeObserver.disconnect();\r\n        }\r\n    };\r\n    DOMWrap.prototype.renderChildren = function renderChildren(children) {\r\n        var _this3 = this;\r\n        var lastVisibleIndex = this.state.lastVisibleIndex;\r\n        return (children || []).reduce(function (acc, childNode, index) {\r\n            var item = childNode;\r\n            if (_this3.props.mode === 'horizontal') {\r\n                var overflowed = _this3.getOverflowedSubMenuItem(childNode.props.eventKey, []);\r\n                if (lastVisibleIndex !== undefined && _this3.props.className.indexOf(_this3.props.prefixCls + '-root') !== -1) {\r\n                    if (index > lastVisibleIndex) {\r\n                        item = React.cloneElement(childNode, { style: { display: 'none' }, eventKey: childNode.props.eventKey + '-hidden' });\r\n                    }\r\n                    if (index === lastVisibleIndex + 1) {\r\n                        _this3.overflowedItems = children.slice(lastVisibleIndex + 1).map(function (c) {\r\n                            return React.cloneElement(c, { key: c.props.eventKey, mode: 'vertical-left' });\r\n                        });\r\n                        overflowed = _this3.getOverflowedSubMenuItem(childNode.props.eventKey, _this3.overflowedItems);\r\n                    }\r\n                }\r\n                var ret = [].concat(acc, [overflowed, item]);\r\n                if (index === children.length - 1) {\r\n                    ret.push(_this3.getOverflowedSubMenuItem(childNode.props.eventKey, [], true));\r\n                }\r\n                return ret;\r\n            }\r\n            return [].concat(acc, [item]);\r\n        }, []);\r\n    };\r\n    DOMWrap.prototype.render = function render() {\r\n        var _props = this.props, hiddenClassName = _props.hiddenClassName, visible = _props.visible, prefixCls = _props.prefixCls, overflowedIndicator = _props.overflowedIndicator, mode = _props.mode, level = _props.level, Tag = _props.tag, children = _props.children, theme = _props.theme, rest = _objectWithoutProperties(_props, ['hiddenClassName', 'visible', 'prefixCls', 'overflowedIndicator', 'mode', 'level', 'tag', 'children', 'theme']);\r\n        if (!visible) {\r\n            rest.className += ' ' + hiddenClassName;\r\n        }\r\n        return React.createElement(Tag, rest, this.renderChildren(this.props.children));\r\n    };\r\n    return DOMWrap;\r\n}(React.Component);\r\nDOMWrap.propTypes = {\r\n    className: PropTypes.string,\r\n    children: PropTypes.node,\r\n    mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\r\n    prefixCls: PropTypes.string,\r\n    level: PropTypes.number,\r\n    theme: PropTypes.string,\r\n    overflowedIndicator: PropTypes.node,\r\n    visible: PropTypes.bool,\r\n    hiddenClassName: PropTypes.string,\r\n    tag: PropTypes.string,\r\n    style: PropTypes.object\r\n};\r\nDOMWrap.defaultProps = {\r\n    tag: 'div',\r\n    className: ''\r\n};\r\nexport default DOMWrap;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\DOMWrap.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\rc-menu\\es\\DOMWrap.js"],"names":[],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport SubMenu from './SubMenu';\nimport { getWidth, setWidth, menuAllProps } from './util';\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\n// Fix ssr\nif (canUseDOM) {\n  require('mutationobserver-shim');\n}\n\nvar DOMWrap = function (_React$Component) {\n  _inherits(DOMWrap, _React$Component);\n\n  function DOMWrap() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DOMWrap);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n      lastVisibleIndex: undefined\n    }, _this.getMenuItemNodes = function () {\n      var prefixCls = _this.props.prefixCls;\n\n      var ul = ReactDOM.findDOMNode(_this);\n      if (!ul) {\n        return [];\n      }\n\n      // filter out all overflowed indicator placeholder\n      return [].slice.call(ul.children).filter(function (node) {\n        return node.className.split(' ').indexOf(prefixCls + '-overflowed-submenu') < 0;\n      });\n    }, _this.getOverflowedSubMenuItem = function (keyPrefix, overflowedItems, renderPlaceholder) {\n      var _this$props = _this.props,\n          overflowedIndicator = _this$props.overflowedIndicator,\n          level = _this$props.level,\n          mode = _this$props.mode,\n          prefixCls = _this$props.prefixCls,\n          theme = _this$props.theme,\n          propStyle = _this$props.style;\n\n      if (level !== 1 || mode !== 'horizontal') {\n        return null;\n      }\n      // put all the overflowed item inside a submenu\n      // with a title of overflow indicator ('...')\n      var copy = _this.props.children[0];\n\n      var _copy$props = copy.props,\n          throwAway = _copy$props.children,\n          title = _copy$props.title,\n          eventKey = _copy$props.eventKey,\n          rest = _objectWithoutProperties(_copy$props, ['children', 'title', 'eventKey']);\n\n      var style = _extends({}, propStyle);\n      var key = keyPrefix + '-overflowed-indicator';\n\n      if (overflowedItems.length === 0 && renderPlaceholder !== true) {\n        style = _extends({}, style, {\n          display: 'none'\n        });\n      } else if (renderPlaceholder) {\n        style = _extends({}, style, {\n          visibility: 'hidden',\n          // prevent from taking normal dom space\n          position: 'absolute'\n        });\n        key = key + '-placeholder';\n      }\n\n      var popupClassName = theme ? prefixCls + '-' + theme : '';\n      var props = {};\n      menuAllProps.forEach(function (k) {\n        if (rest[k] !== undefined) {\n          props[k] = rest[k];\n        }\n      });\n\n      return React.createElement(\n        SubMenu,\n        _extends({\n          title: overflowedIndicator,\n          className: prefixCls + '-overflowed-submenu',\n          popupClassName: popupClassName\n        }, props, {\n          key: key,\n          eventKey: keyPrefix + '-overflowed-indicator',\n          disabled: false,\n          style: style\n        }),\n        overflowedItems\n      );\n    }, _this.setChildrenWidthAndResize = function () {\n      if (_this.props.mode !== 'horizontal') {\n        return;\n      }\n      var ul = ReactDOM.findDOMNode(_this);\n\n      if (!ul) {\n        return;\n      }\n\n      var ulChildrenNodes = ul.children;\n\n      if (!ulChildrenNodes || ulChildrenNodes.length === 0) {\n        return;\n      }\n\n      var lastOverflowedIndicatorPlaceholder = ul.children[ulChildrenNodes.length - 1];\n\n      // need last overflowed indicator for calculating length;\n      setWidth(lastOverflowedIndicatorPlaceholder, 'auto');\n\n      var menuItemNodes = _this.getMenuItemNodes();\n\n      // reset display attribute for all li elements to calculate updated width\n      // and then reset to original state after width calculation\n      var displayValueCaches = [];\n\n      menuItemNodes.forEach(function (c) {\n        displayValueCaches.push(c.style.display);\n        c.style.display = 'inline-block';\n      });\n\n      _this.menuItemSizes = menuItemNodes.map(function (c) {\n        return getWidth(c);\n      });\n\n      menuItemNodes.forEach(function (c, i) {\n        c.style.display = displayValueCaches[i];\n      });\n\n      _this.overflowedIndicatorWidth = getWidth(ul.children[ul.children.length - 1]);\n      _this.originalTotalWidth = _this.menuItemSizes.reduce(function (acc, cur) {\n        return acc + cur;\n      }, 0);\n      _this.handleResize();\n\n      // prevent the overflowed indicator from taking space;\n      setWidth(lastOverflowedIndicatorPlaceholder, 0);\n    }, _this.resizeObserver = null, _this.mutationObserver = null, _this.originalTotalWidth = 0, _this.overflowedItems = [], _this.menuItemSizes = [], _this.handleResize = function () {\n      if (_this.props.mode !== 'horizontal') {\n        return;\n      }\n\n      var ul = ReactDOM.findDOMNode(_this);\n      if (!ul) {\n        return;\n      }\n      var width = getWidth(ul);\n\n      _this.overflowedItems = [];\n      var currentSumWidth = 0;\n\n      // index for last visible child in horizontal mode\n      var lastVisibleIndex = undefined;\n\n      if (_this.originalTotalWidth > width) {\n        lastVisibleIndex = -1;\n\n        _this.menuItemSizes.forEach(function (liWidth) {\n          currentSumWidth += liWidth;\n          if (currentSumWidth + _this.overflowedIndicatorWidth <= width) {\n            lastVisibleIndex++;\n          }\n        });\n      }\n\n      _this.setState({ lastVisibleIndex: lastVisibleIndex });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  DOMWrap.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.setChildrenWidthAndResize();\n    if (this.props.level === 1 && this.props.mode === 'horizontal') {\n      var menuUl = ReactDOM.findDOMNode(this);\n      if (!menuUl) {\n        return;\n      }\n      this.resizeObserver = new ResizeObserver(function (entries) {\n        entries.forEach(_this2.setChildrenWidthAndResize);\n      });\n\n      [].slice.call(menuUl.children).concat(menuUl).forEach(function (el) {\n        _this2.resizeObserver.observe(el);\n      });\n\n      if (typeof MutationObserver !== 'undefined') {\n        this.mutationObserver = new MutationObserver(function () {\n          _this2.resizeObserver.disconnect();\n          [].slice.call(menuUl.children).concat(menuUl).forEach(function (el) {\n            _this2.resizeObserver.observe(el);\n          });\n          _this2.setChildrenWidthAndResize();\n        });\n        this.mutationObserver.observe(menuUl, { attributes: false, childList: true, subTree: false });\n      }\n    }\n  };\n\n  DOMWrap.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n    if (this.mutationObserver) {\n      this.resizeObserver.disconnect();\n    }\n  };\n\n  // get all valid menuItem nodes\n\n\n  // memorize rendered menuSize\n\n\n  // original scroll size of the list\n\n\n  // copy of overflowed items\n\n\n  // cache item of the original items (so we can track the size and order)\n\n\n  DOMWrap.prototype.renderChildren = function renderChildren(children) {\n    var _this3 = this;\n\n    // need to take care of overflowed items in horizontal mode\n    var lastVisibleIndex = this.state.lastVisibleIndex;\n\n    return (children || []).reduce(function (acc, childNode, index) {\n      var item = childNode;\n      if (_this3.props.mode === 'horizontal') {\n        var overflowed = _this3.getOverflowedSubMenuItem(childNode.props.eventKey, []);\n        if (lastVisibleIndex !== undefined && _this3.props.className.indexOf(_this3.props.prefixCls + '-root') !== -1) {\n          if (index > lastVisibleIndex) {\n            item = React.cloneElement(childNode,\n            // 这里修改 eventKey 是为了防止隐藏状态下还会触发 openkeys 事件\n            { style: { display: 'none' }, eventKey: childNode.props.eventKey + '-hidden' });\n          }\n          if (index === lastVisibleIndex + 1) {\n            _this3.overflowedItems = children.slice(lastVisibleIndex + 1).map(function (c) {\n              return React.cloneElement(c,\n              // children[index].key will become '.$key' in clone by default,\n              // we have to overwrite with the correct key explicitly\n              { key: c.props.eventKey, mode: 'vertical-left' });\n            });\n\n            overflowed = _this3.getOverflowedSubMenuItem(childNode.props.eventKey, _this3.overflowedItems);\n          }\n        }\n\n        var ret = [].concat(acc, [overflowed, item]);\n\n        if (index === children.length - 1) {\n          // need a placeholder for calculating overflowed indicator width\n          ret.push(_this3.getOverflowedSubMenuItem(childNode.props.eventKey, [], true));\n        }\n        return ret;\n      }\n      return [].concat(acc, [item]);\n    }, []);\n  };\n\n  DOMWrap.prototype.render = function render() {\n    var _props = this.props,\n        hiddenClassName = _props.hiddenClassName,\n        visible = _props.visible,\n        prefixCls = _props.prefixCls,\n        overflowedIndicator = _props.overflowedIndicator,\n        mode = _props.mode,\n        level = _props.level,\n        Tag = _props.tag,\n        children = _props.children,\n        theme = _props.theme,\n        rest = _objectWithoutProperties(_props, ['hiddenClassName', 'visible', 'prefixCls', 'overflowedIndicator', 'mode', 'level', 'tag', 'children', 'theme']);\n\n    if (!visible) {\n      rest.className += ' ' + hiddenClassName;\n    }\n\n    return React.createElement(\n      Tag,\n      rest,\n      this.renderChildren(this.props.children)\n    );\n  };\n\n  return DOMWrap;\n}(React.Component);\n\nDOMWrap.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  prefixCls: PropTypes.string,\n  level: PropTypes.number,\n  theme: PropTypes.string,\n  overflowedIndicator: PropTypes.node,\n  visible: PropTypes.bool,\n  hiddenClassName: PropTypes.string,\n  tag: PropTypes.string,\n  style: PropTypes.object\n};\n\nDOMWrap.defaultProps = {\n  tag: 'div',\n  className: ''\n};\n\nexport default DOMWrap;"]}]}