{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/slider.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/slider.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../util');\nvar DomUtil = Util.DomUtil;\nvar Group = Util.Group;\nvar Slider = function Slider(cfg) {\n    Slider.superclass.constructor.call(this, cfg);\n};\nUtil.extend(Slider, Group);\nUtil.augment(Slider, {\n    getDefaultCfg: function getDefaultCfg() {\n        return {\n            range: null,\n            middleAttr: {\n                fill: '#fff',\n                fillOpacity: 0\n            },\n            backgroundElement: null,\n            minHandleElement: null,\n            maxHandleElement: null,\n            middleHandleElement: null,\n            currentTarget: null,\n            layout: 'vertical',\n            width: null,\n            height: null,\n            pageX: null,\n            pageY: null\n        };\n    },\n    _beforeRenderUI: function _beforeRenderUI() {\n        var layout = this.get('layout');\n        var backgroundElement = this.get('backgroundElement');\n        var minHandleElement = this.get('minHandleElement');\n        var maxHandleElement = this.get('maxHandleElement');\n        var middleHandleElement = this.addShape('rect', {\n            attrs: this.get('middleAttr')\n        });\n        var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\n        this.add([backgroundElement, minHandleElement, maxHandleElement]);\n        this.set('middleHandleElement', middleHandleElement);\n        backgroundElement.set('zIndex', 0);\n        middleHandleElement.set('zIndex', 1);\n        minHandleElement.set('zIndex', 2);\n        maxHandleElement.set('zIndex', 2);\n        middleHandleElement.attr('cursor', 'move');\n        minHandleElement.attr('cursor', trigerCursor);\n        maxHandleElement.attr('cursor', trigerCursor);\n        this.sort();\n    },\n    _renderUI: function _renderUI() {\n        if (this.get('layout') === 'horizontal') {\n            this._renderHorizontal();\n        }\n        else {\n            this._renderVertical();\n        }\n    },\n    _transform: function _transform(layout) {\n        var range = this.get('range');\n        var minRatio = range[0] / 100;\n        var maxRatio = range[1] / 100;\n        var width = this.get('width');\n        var height = this.get('height');\n        var minHandleElement = this.get('minHandleElement');\n        var maxHandleElement = this.get('maxHandleElement');\n        var middleHandleElement = this.get('middleHandleElement');\n        minHandleElement.resetMatrix();\n        maxHandleElement.resetMatrix();\n        if (layout === 'horizontal') {\n            middleHandleElement.attr({\n                x: width * minRatio,\n                y: 0,\n                width: (maxRatio - minRatio) * width,\n                height: height\n            });\n            minHandleElement.translate(minRatio * width, height);\n            maxHandleElement.translate(maxRatio * width, height);\n        }\n        else {\n            middleHandleElement.attr({\n                x: 0,\n                y: height * (1 - maxRatio),\n                width: width,\n                height: (maxRatio - minRatio) * height\n            });\n            minHandleElement.translate(1, (1 - minRatio) * height);\n            maxHandleElement.translate(1, (1 - maxRatio) * height);\n        }\n    },\n    _renderHorizontal: function _renderHorizontal() {\n        this._transform('horizontal');\n    },\n    _renderVertical: function _renderVertical() {\n        this._transform('vertical');\n    },\n    _bindUI: function _bindUI() {\n        this.on('mousedown', Util.wrapBehavior(this, '_onMouseDown'));\n    },\n    _isElement: function _isElement(target, name) {\n        var element = this.get(name);\n        if (target === element) {\n            return true;\n        }\n        if (element.isGroup) {\n            var elementChildren = element.get('children');\n            return elementChildren.indexOf(target) > -1;\n        }\n        return false;\n    },\n    _getRange: function _getRange(diff, range) {\n        var rst = diff + range;\n        rst = rst > 100 ? 100 : rst;\n        rst = rst < 0 ? 0 : rst;\n        return rst;\n    },\n    _updateStatus: function _updateStatus(dim, ev) {\n        var totalLength = dim === 'x' ? this.get('width') : this.get('height');\n        dim = Util.upperFirst(dim);\n        var range = this.get('range');\n        var page = this.get('page' + dim);\n        var currentTarget = this.get('currentTarget');\n        var rangeStash = this.get('rangeStash');\n        var layout = this.get('layout');\n        var sign = layout === 'vertical' ? -1 : 1;\n        var currentPage = ev['page' + dim];\n        var diffPage = currentPage - page;\n        var diffRange = diffPage / totalLength * 100 * sign;\n        var diffStashRange;\n        if (range[1] <= range[0]) {\n            if (this._isElement(currentTarget, 'minHandleElement') || this._isElement(currentTarget, 'maxHandleElement')) {\n                range[0] = this._getRange(diffRange, range[0]);\n                range[1] = this._getRange(diffRange, range[0]);\n            }\n        }\n        else {\n            if (this._isElement(currentTarget, 'minHandleElement')) {\n                range[0] = this._getRange(diffRange, range[0]);\n            }\n            if (this._isElement(currentTarget, 'maxHandleElement')) {\n                range[1] = this._getRange(diffRange, range[1]);\n            }\n        }\n        if (this._isElement(currentTarget, 'middleHandleElement')) {\n            diffStashRange = rangeStash[1] - rangeStash[0];\n            range[0] = this._getRange(diffRange, range[0]);\n            range[1] = range[0] + diffStashRange;\n            if (range[1] > 100) {\n                range[1] = 100;\n                range[0] = range[1] - diffStashRange;\n            }\n        }\n        this.emit('sliderchange', {\n            range: range\n        });\n        this.set('page' + dim, currentPage);\n        this._renderUI();\n        this.get('canvas').draw();\n        return;\n    },\n    _onMouseDown: function _onMouseDown(ev) {\n        var currentTarget = ev.currentTarget;\n        var originEvent = ev.event;\n        var range = this.get('range');\n        originEvent.stopPropagation();\n        originEvent.preventDefault();\n        this.set('pageX', originEvent.pageX);\n        this.set('pageY', originEvent.pageY);\n        this.set('currentTarget', currentTarget);\n        this.set('rangeStash', [range[0], range[1]]);\n        this._bindCanvasEvents();\n    },\n    _bindCanvasEvents: function _bindCanvasEvents() {\n        var containerDOM = this.get('canvas').get('containerDOM');\n        this.onMouseMoveListener = DomUtil.addEventListener(containerDOM, 'mousemove', Util.wrapBehavior(this, '_onCanvasMouseMove'));\n        this.onMouseUpListener = DomUtil.addEventListener(containerDOM, 'mouseup', Util.wrapBehavior(this, '_onCanvasMouseUp'));\n        this.onMouseLeaveListener = DomUtil.addEventListener(containerDOM, 'mouseleave', Util.wrapBehavior(this, '_onCanvasMouseUp'));\n    },\n    _onCanvasMouseMove: function _onCanvasMouseMove(ev) {\n        if (!this._mouseOutArea(ev)) {\n            var layout = this.get('layout');\n            if (layout === 'horizontal') {\n                this._updateStatus('x', ev);\n            }\n            else {\n                this._updateStatus('y', ev);\n            }\n        }\n    },\n    _onCanvasMouseUp: function _onCanvasMouseUp() {\n        this._removeDocumentEvents();\n    },\n    _removeDocumentEvents: function _removeDocumentEvents() {\n        this.onMouseMoveListener.remove();\n        this.onMouseUpListener.remove();\n    },\n    _mouseOutArea: function _mouseOutArea(ev) {\n        var el = this.get('canvas').get('el');\n        var el_bbox = el.getBoundingClientRect();\n        var parent = this.get('parent');\n        var bbox = parent.getBBox();\n        var left = parent.attr('matrix')[6];\n        var top = parent.attr('matrix')[7];\n        var right = left + bbox.width;\n        var bottom = top + bbox.height;\n        var mouseX = ev.clientX - el_bbox.x;\n        var mouseY = ev.clientY - el_bbox.y;\n        if (mouseX < left || mouseX > right || mouseY < top || mouseY > bottom) {\n            return true;\n        }\n        return false;\n    }\n});\nmodule.exports = Slider;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/slider.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/slider.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * @fileOverview The class of slider\n * @author sima.zhang\n */\nvar Util = require('../util');\n\nvar DomUtil = Util.DomUtil;\nvar Group = Util.Group;\n\nvar Slider = function Slider(cfg) {\n  Slider.superclass.constructor.call(this, cfg);\n};\n\nUtil.extend(Slider, Group);\nUtil.augment(Slider, {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      /**\n       * 范围\n       * @type {Array}\n       */\n      range: null,\n\n      /**\n       * 中滑块属性\n       * 透明的，用于用户交互\n       * @type {ATTRS}\n       */\n      middleAttr: {\n        fill: '#fff',\n        fillOpacity: 0\n      },\n\n      /**\n       * 背景\n       * @type {G-Element}\n       */\n      backgroundElement: null,\n\n      /**\n       * 下滑块\n       * @type {G-Element}\n       */\n      minHandleElement: null,\n\n      /**\n       * 上滑块\n       * @type {G-Element}\n       */\n      maxHandleElement: null,\n\n      /**\n       * 中块，\n       * 透明的，用于用户交互\n       * @type {G-Element}\n       */\n      middleHandleElement: null,\n\n      /**\n       * 当前的激活的元素\n       * @type {G-Element}\n       */\n      currentTarget: null,\n\n      /**\n       * 布局方式： horizontal，vertical\n       * @type {String}\n       */\n      layout: 'vertical',\n\n      /**\n       * 宽\n       * @type {Number}\n       */\n      width: null,\n\n      /**\n       * 高\n       * @type {Number}\n       */\n      height: null,\n\n      /**\n       * 当前的PageX\n       * @type {Number}\n       */\n      pageX: null,\n\n      /**\n       * 当前的PageY\n       * @type {Number}\n       */\n      pageY: null\n    };\n  },\n  // arrange the zindex and cursors of each element\n  _beforeRenderUI: function _beforeRenderUI() {\n    var layout = this.get('layout');\n    var backgroundElement = this.get('backgroundElement');\n    var minHandleElement = this.get('minHandleElement');\n    var maxHandleElement = this.get('maxHandleElement');\n    var middleHandleElement = this.addShape('rect', {\n      attrs: this.get('middleAttr')\n    });\n    var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\n    this.add([backgroundElement, minHandleElement, maxHandleElement]);\n    this.set('middleHandleElement', middleHandleElement);\n    backgroundElement.set('zIndex', 0);\n    middleHandleElement.set('zIndex', 1);\n    minHandleElement.set('zIndex', 2);\n    maxHandleElement.set('zIndex', 2);\n    middleHandleElement.attr('cursor', 'move');\n    minHandleElement.attr('cursor', trigerCursor);\n    maxHandleElement.attr('cursor', trigerCursor);\n    this.sort();\n  },\n  // rendering\n  _renderUI: function _renderUI() {\n    if (this.get('layout') === 'horizontal') {\n      this._renderHorizontal();\n    } else {\n      this._renderVertical();\n    }\n  },\n  _transform: function _transform(layout) {\n    var range = this.get('range');\n    var minRatio = range[0] / 100;\n    var maxRatio = range[1] / 100;\n    var width = this.get('width');\n    var height = this.get('height');\n    var minHandleElement = this.get('minHandleElement');\n    var maxHandleElement = this.get('maxHandleElement');\n    var middleHandleElement = this.get('middleHandleElement');\n    minHandleElement.resetMatrix();\n    maxHandleElement.resetMatrix();\n\n    if (layout === 'horizontal') {\n      middleHandleElement.attr({\n        x: width * minRatio,\n        y: 0,\n        width: (maxRatio - minRatio) * width,\n        height: height\n      });\n      minHandleElement.translate(minRatio * width, height);\n      maxHandleElement.translate(maxRatio * width, height);\n    } else {\n      middleHandleElement.attr({\n        x: 0,\n        y: height * (1 - maxRatio),\n        width: width,\n        height: (maxRatio - minRatio) * height\n      });\n      minHandleElement.translate(1, (1 - minRatio) * height);\n      maxHandleElement.translate(1, (1 - maxRatio) * height);\n    }\n  },\n  _renderHorizontal: function _renderHorizontal() {\n    this._transform('horizontal');\n  },\n  _renderVertical: function _renderVertical() {\n    this._transform('vertical');\n  },\n  _bindUI: function _bindUI() {\n    this.on('mousedown', Util.wrapBehavior(this, '_onMouseDown'));\n  },\n  // if the target matches name\n  _isElement: function _isElement(target, name) {\n    var element = this.get(name);\n\n    if (target === element) {\n      return true;\n    }\n\n    if (element.isGroup) {\n      var elementChildren = element.get('children');\n      return elementChildren.indexOf(target) > -1;\n    }\n\n    return false;\n  },\n  // get the result range after adding diff to range\n  // insure that the result out of the interval [0, 100]\n  _getRange: function _getRange(diff, range) {\n    var rst = diff + range;\n    rst = rst > 100 ? 100 : rst;\n    rst = rst < 0 ? 0 : rst;\n    return rst;\n  },\n  _updateStatus: function _updateStatus(dim, ev) {\n    var totalLength = dim === 'x' ? this.get('width') : this.get('height');\n    dim = Util.upperFirst(dim);\n    var range = this.get('range');\n    var page = this.get('page' + dim);\n    var currentTarget = this.get('currentTarget');\n    var rangeStash = this.get('rangeStash');\n    var layout = this.get('layout');\n    var sign = layout === 'vertical' ? -1 : 1;\n    var currentPage = ev['page' + dim]; // the distance of the mouse dragging\n\n    var diffPage = currentPage - page;\n    var diffRange = diffPage / totalLength * 100 * sign;\n    var diffStashRange; // the min and max trigger overlap, range[0] and range[1] change together\n\n    if (range[1] <= range[0]) {\n      if (this._isElement(currentTarget, 'minHandleElement') || this._isElement(currentTarget, 'maxHandleElement')) {\n        range[0] = this._getRange(diffRange, range[0]);\n        range[1] = this._getRange(diffRange, range[0]);\n      }\n    } else {\n      // user drags the min trigger\n      if (this._isElement(currentTarget, 'minHandleElement')) {\n        range[0] = this._getRange(diffRange, range[0]);\n      } // user drags the max trigger\n\n\n      if (this._isElement(currentTarget, 'maxHandleElement')) {\n        range[1] = this._getRange(diffRange, range[1]);\n      }\n    } // the user drags the middle bar\n\n\n    if (this._isElement(currentTarget, 'middleHandleElement')) {\n      // the diffrence between min and max trigger while mouse down\n      diffStashRange = rangeStash[1] - rangeStash[0];\n      range[0] = this._getRange(diffRange, range[0]); // keep the diffStashRange\n\n      range[1] = range[0] + diffStashRange;\n\n      if (range[1] > 100) {\n        range[1] = 100;\n        range[0] = range[1] - diffStashRange;\n      }\n    }\n\n    this.emit('sliderchange', {\n      range: range\n    });\n    this.set('page' + dim, currentPage);\n\n    this._renderUI();\n\n    this.get('canvas').draw(); // need delete\n\n    return;\n  },\n  // the listener of mouse down\n  _onMouseDown: function _onMouseDown(ev) {\n    var currentTarget = ev.currentTarget;\n    var originEvent = ev.event;\n    var range = this.get('range');\n    originEvent.stopPropagation();\n    originEvent.preventDefault();\n    this.set('pageX', originEvent.pageX);\n    this.set('pageY', originEvent.pageY);\n    this.set('currentTarget', currentTarget); // stash the range\n\n    this.set('rangeStash', [range[0], range[1]]);\n\n    this._bindCanvasEvents();\n  },\n  _bindCanvasEvents: function _bindCanvasEvents() {\n    var containerDOM = this.get('canvas').get('containerDOM'); // this.on('mousemove', Util.wrapBehavior(this, '_onCanvasMouseMove'));\n\n    this.onMouseMoveListener = DomUtil.addEventListener(containerDOM, 'mousemove', Util.wrapBehavior(this, '_onCanvasMouseMove'));\n    this.onMouseUpListener = DomUtil.addEventListener(containerDOM, 'mouseup', Util.wrapBehavior(this, '_onCanvasMouseUp'));\n    this.onMouseLeaveListener = DomUtil.addEventListener(containerDOM, 'mouseleave', Util.wrapBehavior(this, '_onCanvasMouseUp'));\n  },\n  // listener of mouse click and move = drag\n  _onCanvasMouseMove: function _onCanvasMouseMove(ev) {\n    if (!this._mouseOutArea(ev)) {\n      var layout = this.get('layout');\n\n      if (layout === 'horizontal') {\n        this._updateStatus('x', ev);\n      } else {\n        this._updateStatus('y', ev);\n      }\n    }\n  },\n  // listener of mouse up\n  _onCanvasMouseUp: function _onCanvasMouseUp() {\n    this._removeDocumentEvents();\n  },\n  // remove listeners\n  _removeDocumentEvents: function _removeDocumentEvents() {\n    this.onMouseMoveListener.remove();\n    this.onMouseUpListener.remove();\n  },\n  // if the mouse is out of the area\n  _mouseOutArea: function _mouseOutArea(ev) {\n    var el = this.get('canvas').get('el');\n    var el_bbox = el.getBoundingClientRect();\n    var parent = this.get('parent');\n    var bbox = parent.getBBox();\n    var left = parent.attr('matrix')[6];\n    var top = parent.attr('matrix')[7];\n    var right = left + bbox.width;\n    var bottom = top + bbox.height;\n    var mouseX = ev.clientX - el_bbox.x;\n    var mouseY = ev.clientY - el_bbox.y;\n\n    if (mouseX < left || mouseX > right || mouseY < top || mouseY > bottom) {\n      return true;\n    }\n\n    return false;\n  }\n});\nmodule.exports = Slider;"]}]}