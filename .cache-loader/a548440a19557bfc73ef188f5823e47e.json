{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/data/range-filter.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/data/range-filter.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { isMask } from '../util';\nfunction getFilter(scale, dim, point1, point2) {\n    var min = Math.min(point1[dim], point2[dim]);\n    var max = Math.max(point1[dim], point2[dim]);\n    var _a = scale.range, rangeMin = _a[0], rangeMax = _a[1];\n    if (min < rangeMin) {\n        min = rangeMin;\n    }\n    if (max > rangeMax) {\n        max = rangeMax;\n    }\n    if (min === rangeMax && max === rangeMax) {\n        return null;\n    }\n    var minValue = scale.invert(min);\n    var maxValue = scale.invert(max);\n    if (scale.isCategory) {\n        var minIndex = scale.values.indexOf(minValue);\n        var maxIndex = scale.values.indexOf(maxValue);\n        var arr_1 = scale.values.slice(minIndex, maxIndex + 1);\n        return function (value) {\n            return arr_1.includes(value);\n        };\n    }\n    else {\n        return function (value) {\n            return value >= minValue && value <= maxValue;\n        };\n    }\n}\nvar RangeFilter = (function (_super) {\n    __extends(RangeFilter, _super);\n    function RangeFilter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dims = ['x', 'y'];\n        _this.startPoint = null;\n        _this.isStarted = false;\n        return _this;\n    }\n    RangeFilter.prototype.hasDim = function (dim) {\n        return this.dims.includes(dim);\n    };\n    RangeFilter.prototype.start = function () {\n        var context = this.context;\n        this.isStarted = true;\n        this.startPoint = context.getCurrentPoint();\n    };\n    RangeFilter.prototype.filter = function () {\n        var startPoint;\n        var currentPoint;\n        if (isMask(this.context)) {\n            var maskShape = this.context.event.target;\n            var bbox = maskShape.getCanvasBBox();\n            startPoint = { x: bbox.x, y: bbox.y };\n            currentPoint = { x: bbox.maxX, y: bbox.maxY };\n        }\n        else {\n            if (!this.isStarted) {\n                return;\n            }\n            startPoint = this.startPoint;\n            currentPoint = this.context.getCurrentPoint();\n        }\n        if (Math.abs(startPoint.x - currentPoint.x) < 5 || Math.abs(startPoint.x - currentPoint.y) < 5) {\n            return;\n        }\n        var view = this.context.view;\n        var coord = view.getCoordinate();\n        var normalCurrent = coord.invert(currentPoint);\n        var normalStart = coord.invert(startPoint);\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            var filter = getFilter(xScale, 'x', normalCurrent, normalStart);\n            this.filterView(view, xScale.field, filter);\n        }\n        if (this.hasDim('y')) {\n            var yScale = view.getYScales()[0];\n            var filter = getFilter(yScale, 'y', normalCurrent, normalStart);\n            this.filterView(view, yScale.field, filter);\n        }\n        this.reRender(view);\n    };\n    RangeFilter.prototype.end = function () {\n        this.isStarted = false;\n    };\n    RangeFilter.prototype.reset = function () {\n        var view = this.context.view;\n        this.isStarted = false;\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            this.filterView(view, xScale.field, null);\n        }\n        if (this.hasDim('y')) {\n            var yScale = view.getYScales()[0];\n            this.filterView(view, yScale.field, null);\n        }\n        this.reRender(view);\n    };\n    RangeFilter.prototype.filterView = function (view, field, filter) {\n        view.filter(field, filter);\n    };\n    RangeFilter.prototype.reRender = function (view) {\n        view.render(true);\n    };\n    return RangeFilter;\n}(Action));\nexport default RangeFilter;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/data/range-filter.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/node_modules/@antv/g2/esm/interaction/action/data/range-filter.js"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { isMask } from '../util';\n// 获取对应的 scale\nfunction getFilter(scale, dim, point1, point2) {\n    var min = Math.min(point1[dim], point2[dim]);\n    var max = Math.max(point1[dim], point2[dim]);\n    var _a = scale.range, rangeMin = _a[0], rangeMax = _a[1];\n    // 约束值在 scale 的 range 之间\n    if (min < rangeMin) {\n        min = rangeMin;\n    }\n    if (max > rangeMax) {\n        max = rangeMax;\n    }\n    // 范围大于整个 view 的范围，则返回 null\n    if (min === rangeMax && max === rangeMax) {\n        return null;\n    }\n    var minValue = scale.invert(min);\n    var maxValue = scale.invert(max);\n    if (scale.isCategory) {\n        var minIndex = scale.values.indexOf(minValue);\n        var maxIndex = scale.values.indexOf(maxValue);\n        var arr_1 = scale.values.slice(minIndex, maxIndex + 1);\n        return function (value) {\n            return arr_1.includes(value);\n        };\n    }\n    else {\n        return function (value) {\n            return value >= minValue && value <= maxValue;\n        };\n    }\n}\n/**\n * 范围过滤的 Action\n * @ignore\n */\nvar RangeFilter = /** @class */ (function (_super) {\n    __extends(RangeFilter, _super);\n    function RangeFilter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * 范围过滤生效的字段/维度，可以是 x, y\n         */\n        _this.dims = ['x', 'y'];\n        /** 起始点 */\n        _this.startPoint = null;\n        _this.isStarted = false;\n        return _this;\n    }\n    // x,y 是否生效\n    RangeFilter.prototype.hasDim = function (dim) {\n        return this.dims.includes(dim);\n    };\n    /**\n     * 开始范围过滤，记录范围过滤的起点\n     */\n    RangeFilter.prototype.start = function () {\n        var context = this.context;\n        this.isStarted = true;\n        this.startPoint = context.getCurrentPoint();\n    };\n    /**\n     * 过滤，以开始的点和当前点对数据进行过滤\n     */\n    RangeFilter.prototype.filter = function () {\n        var startPoint;\n        var currentPoint;\n        if (isMask(this.context)) {\n            var maskShape = this.context.event.target;\n            var bbox = maskShape.getCanvasBBox();\n            startPoint = { x: bbox.x, y: bbox.y };\n            currentPoint = { x: bbox.maxX, y: bbox.maxY };\n        }\n        else {\n            if (!this.isStarted) {\n                // 如果没有开始，则不执行过滤\n                return;\n            }\n            startPoint = this.startPoint;\n            currentPoint = this.context.getCurrentPoint();\n        }\n        if (Math.abs(startPoint.x - currentPoint.x) < 5 || Math.abs(startPoint.x - currentPoint.y) < 5) {\n            // 距离过小也不生效\n            return;\n        }\n        var view = this.context.view;\n        var coord = view.getCoordinate();\n        var normalCurrent = coord.invert(currentPoint);\n        var normalStart = coord.invert(startPoint);\n        // 设置 x 方向的 filter\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            var filter = getFilter(xScale, 'x', normalCurrent, normalStart);\n            this.filterView(view, xScale.field, filter);\n        }\n        // 设置 y 方向的 filter\n        if (this.hasDim('y')) {\n            var yScale = view.getYScales()[0];\n            var filter = getFilter(yScale, 'y', normalCurrent, normalStart);\n            this.filterView(view, yScale.field, filter);\n        }\n        this.reRender(view);\n    };\n    /**\n     * 结束\n     */\n    RangeFilter.prototype.end = function () {\n        this.isStarted = false;\n    };\n    /**\n     * 取消同当前 Action 相关的过滤，指定的 x,y\n     */\n    RangeFilter.prototype.reset = function () {\n        var view = this.context.view;\n        this.isStarted = false;\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            this.filterView(view, xScale.field, null); // 取消过滤\n        }\n        if (this.hasDim('y')) {\n            // y 轴过滤仅取第一个 yScale\n            var yScale = view.getYScales()[0];\n            this.filterView(view, yScale.field, null); // 取消过滤\n        }\n        this.reRender(view);\n    };\n    /**\n     * 对 view 进行过滤\n     */\n    RangeFilter.prototype.filterView = function (view, field, filter) {\n        view.filter(field, filter);\n    };\n    /**\n     * 重新渲染\n     * @param view\n     */\n    RangeFilter.prototype.reRender = function (view) {\n        view.render(true);\n    };\n    return RangeFilter;\n}(Action));\nexport default RangeFilter;\n//# sourceMappingURL=range-filter.js.map"]}]}