{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/abstract/group-component.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/abstract/group-component.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __extends, __rest } from \"tslib\";\nimport { difference, each, isNil, keys, mix, pick } from '@antv/util';\nimport { propagationDelegate } from '../util/event';\nimport { applyMatrix2BBox, getMatrixByTranslate } from '../util/matrix';\nimport { getBBoxWithClip, updateClip } from '../util/util';\nimport Component from './component';\nvar STATUS_UPDATE = 'update_status';\nvar COPY_PROPERTIES = ['visible', 'tip', 'delegateObject'];\nvar COPY_PROPERTIES_EXCLUDES = ['container', 'group', 'shapesMap', 'isRegister', 'isUpdating', 'destroyed'];\nvar GroupComponent = (function (_super) {\n    __extends(GroupComponent, _super);\n    function GroupComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupComponent.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { container: null,\n            shapesMap: {}, group: null, capture: true,\n            isRegister: false,\n            isUpdating: false,\n            isInit: true });\n    };\n    GroupComponent.prototype.remove = function () {\n        this.clear();\n        var group = this.get('group');\n        group.remove();\n    };\n    GroupComponent.prototype.clear = function () {\n        var group = this.get('group');\n        group.clear();\n        this.set('shapesMap', {});\n        this.clearOffScreenCache();\n        this.set('isInit', true);\n    };\n    GroupComponent.prototype.getChildComponentById = function (id) {\n        var group = this.getElementById(id);\n        var inst = group && group.get('component');\n        return inst;\n    };\n    GroupComponent.prototype.getElementById = function (id) {\n        return this.get('shapesMap')[id];\n    };\n    GroupComponent.prototype.getElementByLocalId = function (localId) {\n        var id = this.getElementId(localId);\n        return this.getElementById(id);\n    };\n    GroupComponent.prototype.getElementsByName = function (name) {\n        var rst = [];\n        each(this.get('shapesMap'), function (elem) {\n            if (elem.get('name') === name) {\n                rst.push(elem);\n            }\n        });\n        return rst;\n    };\n    GroupComponent.prototype.getContainer = function () {\n        return this.get('container');\n    };\n    GroupComponent.prototype.updateInner = function (cfg) {\n        this.offScreenRender();\n        if (this.get('updateAutoRender')) {\n            this.render();\n        }\n    };\n    GroupComponent.prototype.render = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (!offScreenGroup) {\n            offScreenGroup = this.offScreenRender();\n        }\n        var group = this.get('group');\n        this.updateElements(offScreenGroup, group);\n        this.deleteElements();\n        this.applyOffset();\n        if (!this.get('eventInitted')) {\n            this.initEvent();\n            this.set('eventInitted', true);\n        }\n        this.set('isInit', false);\n    };\n    GroupComponent.prototype.show = function () {\n        var group = this.get('group');\n        group.show();\n        this.set('visible', true);\n    };\n    GroupComponent.prototype.hide = function () {\n        var group = this.get('group');\n        group.hide();\n        this.set('visible', false);\n    };\n    GroupComponent.prototype.setCapture = function (capture) {\n        var group = this.get('group');\n        group.set('capture', capture);\n        this.set('capture', capture);\n    };\n    GroupComponent.prototype.destroy = function () {\n        this.removeEvent();\n        this.remove();\n        _super.prototype.destroy.call(this);\n    };\n    GroupComponent.prototype.getBBox = function () {\n        return this.get('group').getCanvasBBox();\n    };\n    GroupComponent.prototype.getLayoutBBox = function () {\n        var group = this.get('group');\n        var bbox = this.getInnerLayoutBBox();\n        var matrix = group.getTotalMatrix();\n        if (matrix) {\n            bbox = applyMatrix2BBox(matrix, bbox);\n        }\n        return bbox;\n    };\n    GroupComponent.prototype.on = function (evt, callback, once) {\n        var group = this.get('group');\n        group.on(evt, callback, once);\n        return this;\n    };\n    GroupComponent.prototype.off = function (evt, callback) {\n        var group = this.get('group');\n        group && group.off(evt, callback);\n        return this;\n    };\n    GroupComponent.prototype.emit = function (eventName, eventObject) {\n        var group = this.get('group');\n        group.emit(eventName, eventObject);\n    };\n    GroupComponent.prototype.init = function () {\n        _super.prototype.init.call(this);\n        if (!this.get('group')) {\n            this.initGroup();\n        }\n        this.offScreenRender();\n    };\n    GroupComponent.prototype.getInnerLayoutBBox = function () {\n        return this.get('offScreenBBox') || this.get('group').getBBox();\n    };\n    GroupComponent.prototype.delegateEmit = function (eventName, eventObject) {\n        var group = this.get('group');\n        eventObject.target = group;\n        group.emit(eventName, eventObject);\n        propagationDelegate(group, eventName, eventObject);\n    };\n    GroupComponent.prototype.createOffScreenGroup = function () {\n        var group = this.get('group');\n        var GroupClass = group.getGroupBase();\n        var newGroup = new GroupClass({\n            delegateObject: this.getDelegateObject(),\n        });\n        return newGroup;\n    };\n    GroupComponent.prototype.applyOffset = function () {\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        this.moveElementTo(this.get('group'), {\n            x: offsetX,\n            y: offsetY,\n        });\n    };\n    GroupComponent.prototype.initGroup = function () {\n        var container = this.get('container');\n        this.set('group', container.addGroup({\n            id: this.get('id'),\n            name: this.get('name'),\n            capture: this.get('capture'),\n            visible: this.get('visible'),\n            isComponent: true,\n            component: this,\n            delegateObject: this.getDelegateObject(),\n        }));\n    };\n    GroupComponent.prototype.offScreenRender = function () {\n        this.clearOffScreenCache();\n        var offScreenGroup = this.createOffScreenGroup();\n        this.renderInner(offScreenGroup);\n        this.set('offScreenGroup', offScreenGroup);\n        this.set('offScreenBBox', getBBoxWithClip(offScreenGroup));\n        return offScreenGroup;\n    };\n    GroupComponent.prototype.addGroup = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var group = parent.addGroup(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(group);\n        }\n        return group;\n    };\n    GroupComponent.prototype.addShape = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var shape = parent.addShape(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(shape);\n        }\n        return shape;\n    };\n    GroupComponent.prototype.addComponent = function (parent, cfg) {\n        var id = cfg.id, Ctor = cfg.component, restCfg = __rest(cfg, [\"id\", \"component\"]);\n        var inst = new Ctor(__assign(__assign({}, restCfg), { id: id, container: parent, updateAutoRender: this.get('updateAutoRender') }));\n        inst.init();\n        inst.render();\n        if (this.get('isRegister')) {\n            this.registerElement(inst.get('group'));\n        }\n        return inst;\n    };\n    GroupComponent.prototype.initEvent = function () { };\n    GroupComponent.prototype.removeEvent = function () {\n        var group = this.get('group');\n        group.off();\n    };\n    GroupComponent.prototype.getElementId = function (localId) {\n        var id = this.get('id');\n        var name = this.get('name');\n        return id + \"-\" + name + \"-\" + localId;\n    };\n    GroupComponent.prototype.registerElement = function (element) {\n        var id = element.get('id');\n        this.get('shapesMap')[id] = element;\n    };\n    GroupComponent.prototype.unregisterElement = function (element) {\n        var id = element.get('id');\n        delete this.get('shapesMap')[id];\n    };\n    GroupComponent.prototype.moveElementTo = function (element, point) {\n        var matrix = getMatrixByTranslate(point);\n        element.attr('matrix', matrix);\n    };\n    GroupComponent.prototype.addAnimation = function (elmentName, newElement, animateCfg) {\n        var originOpacity = newElement.attr('opacity');\n        if (isNil(originOpacity)) {\n            originOpacity = 1;\n        }\n        newElement.attr('opacity', 0);\n        newElement.animate({ opacity: originOpacity }, animateCfg);\n    };\n    GroupComponent.prototype.removeAnimation = function (elementName, originElement, animateCfg) {\n        originElement.animate({ opacity: 0 }, animateCfg);\n    };\n    GroupComponent.prototype.updateAnimation = function (elementName, originElement, newAttrs, animateCfg) {\n        originElement.animate(newAttrs, animateCfg);\n    };\n    GroupComponent.prototype.updateElements = function (newGroup, originGroup) {\n        var _this = this;\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        var children = newGroup.getChildren().slice(0);\n        var preElement;\n        each(children, function (element) {\n            var elementId = element.get('id');\n            var originElement = _this.getElementById(elementId);\n            var elementName = element.get('name');\n            if (originElement) {\n                if (element.get('isComponent')) {\n                    var childComponent = element.get('component');\n                    var origChildComponent = originElement.get('component');\n                    var newCfg = pick(childComponent.cfg, difference(keys(childComponent.cfg), COPY_PROPERTIES_EXCLUDES));\n                    origChildComponent.update(newCfg);\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n                else {\n                    var replaceAttrs = _this.getReplaceAttrs(originElement, element);\n                    if (animate && animateOption.update) {\n                        _this.updateAnimation(elementName, originElement, replaceAttrs, animateOption.update);\n                    }\n                    else {\n                        originElement.attr(replaceAttrs);\n                    }\n                    if (element.isGroup()) {\n                        _this.updateElements(element, originElement);\n                    }\n                    each(COPY_PROPERTIES, function (name) {\n                        originElement.set(name, element.get(name));\n                    });\n                    updateClip(originElement, element);\n                    preElement = originElement;\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n            }\n            else {\n                originGroup.add(element);\n                var siblings = originGroup.getChildren();\n                siblings.splice(siblings.length - 1, 1);\n                if (preElement) {\n                    var index = siblings.indexOf(preElement);\n                    siblings.splice(index + 1, 0, element);\n                }\n                else {\n                    siblings.unshift(element);\n                }\n                _this.registerElement(element);\n                element.set(STATUS_UPDATE, 'add');\n                if (element.get('isComponent')) {\n                    var childComponent = element.get('component');\n                    childComponent.set('container', originGroup);\n                }\n                else if (element.isGroup()) {\n                    _this.registerNewGroup(element);\n                }\n                preElement = element;\n                if (animate) {\n                    var animateCfg = _this.get('isInit') ? animateOption.appear : animateOption.enter;\n                    if (animateCfg) {\n                        _this.addAnimation(elementName, element, animateCfg);\n                    }\n                }\n            }\n        });\n    };\n    GroupComponent.prototype.clearUpdateStatus = function (group) {\n        var children = group.getChildren();\n        each(children, function (el) {\n            el.set(STATUS_UPDATE, null);\n        });\n    };\n    GroupComponent.prototype.clearOffScreenCache = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (offScreenGroup) {\n            offScreenGroup.destroy();\n        }\n        this.set('offScreenGroup', null);\n        this.set('offScreenBBox', null);\n    };\n    GroupComponent.prototype.getDelegateObject = function () {\n        var _a;\n        var name = this.get('name');\n        var delegateObject = (_a = {},\n            _a[name] = this,\n            _a.component = this,\n            _a);\n        return delegateObject;\n    };\n    GroupComponent.prototype.appendDelegateObject = function (parent, cfg) {\n        var parentObject = parent.get('delegateObject');\n        if (!cfg.delegateObject) {\n            cfg.delegateObject = {};\n        }\n        mix(cfg.delegateObject, parentObject);\n    };\n    GroupComponent.prototype.getReplaceAttrs = function (originElement, newElement) {\n        var originAttrs = originElement.attr();\n        var newAttrs = newElement.attr();\n        each(originAttrs, function (v, k) {\n            if (newAttrs[k] === undefined) {\n                newAttrs[k] = undefined;\n            }\n        });\n        return newAttrs;\n    };\n    GroupComponent.prototype.registerNewGroup = function (group) {\n        var _this = this;\n        var children = group.getChildren();\n        each(children, function (element) {\n            _this.registerElement(element);\n            element.set(STATUS_UPDATE, 'add');\n            if (element.isGroup()) {\n                _this.registerNewGroup(element);\n            }\n        });\n    };\n    GroupComponent.prototype.deleteElements = function () {\n        var _this = this;\n        var shapesMap = this.get('shapesMap');\n        var deleteArray = [];\n        each(shapesMap, function (element, id) {\n            if (!element.get(STATUS_UPDATE) || element.destroyed) {\n                deleteArray.push([id, element]);\n            }\n            else {\n                element.set(STATUS_UPDATE, null);\n            }\n        });\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        each(deleteArray, function (item) {\n            var id = item[0], element = item[1];\n            if (!element.destroyed) {\n                var elementName = element.get('name');\n                if (animate && animateOption.leave) {\n                    var callbackAnimCfg = mix({\n                        callback: function () {\n                            _this.removeElement(element);\n                        },\n                    }, animateOption.leave);\n                    _this.removeAnimation(elementName, element, callbackAnimCfg);\n                }\n                else {\n                    _this.removeElement(element);\n                }\n            }\n            delete shapesMap[id];\n        });\n    };\n    GroupComponent.prototype.removeElement = function (element) {\n        if (element.get('isGroup')) {\n            var component = element.get('component');\n            if (component) {\n                component.destroy();\n            }\n        }\n        element.remove();\n    };\n    return GroupComponent;\n}(Component));\nexport default GroupComponent;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/abstract/group-component.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/component/esm/abstract/group-component.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends, __rest } from \"tslib\";\nimport { difference, each, isNil, keys, mix, pick } from '@antv/util';\nimport { propagationDelegate } from '../util/event';\nimport { applyMatrix2BBox, getMatrixByTranslate } from '../util/matrix';\nimport { getBBoxWithClip, updateClip } from '../util/util';\nimport Component from './component';\nvar STATUS_UPDATE = 'update_status';\nvar COPY_PROPERTIES = ['visible', 'tip', 'delegateObject']; // 更新对象时需要复制的属性\nvar COPY_PROPERTIES_EXCLUDES = ['container', 'group', 'shapesMap', 'isRegister', 'isUpdating', 'destroyed']; // 更新子组件时排除的属性\nvar GroupComponent = /** @class */ (function (_super) {\n    __extends(GroupComponent, _super);\n    function GroupComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupComponent.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { container: null, \n            /**\n             * @private\n             * 缓存图形的 Map\n             */\n            shapesMap: {}, group: null, capture: true, \n            /**\n             * @private 组件或者图形是否允许注册\n             * @type {false}\n             */\n            isRegister: false, \n            /**\n             * @private 是否正在更新\n             * @type {false}\n             */\n            isUpdating: false, \n            /**\n             * @private\n             * 是否初始状态，一旦 render，update 后，这个状态就变成 false, clear 后恢复\n             */\n            isInit: true });\n    };\n    GroupComponent.prototype.remove = function () {\n        this.clear();\n        var group = this.get('group');\n        group.remove();\n    };\n    GroupComponent.prototype.clear = function () {\n        var group = this.get('group');\n        group.clear();\n        this.set('shapesMap', {});\n        this.clearOffScreenCache();\n        this.set('isInit', true);\n    };\n    GroupComponent.prototype.getChildComponentById = function (id) {\n        var group = this.getElementById(id);\n        var inst = group && group.get('component');\n        return inst;\n    };\n    GroupComponent.prototype.getElementById = function (id) {\n        return this.get('shapesMap')[id];\n    };\n    GroupComponent.prototype.getElementByLocalId = function (localId) {\n        var id = this.getElementId(localId);\n        return this.getElementById(id);\n    };\n    GroupComponent.prototype.getElementsByName = function (name) {\n        var rst = [];\n        each(this.get('shapesMap'), function (elem) {\n            if (elem.get('name') === name) {\n                rst.push(elem);\n            }\n        });\n        return rst;\n    };\n    GroupComponent.prototype.getContainer = function () {\n        return this.get('container');\n    };\n    GroupComponent.prototype.updateInner = function (cfg) {\n        // this.updateInner();\n        // this.set('isUpdating', false);\n        this.offScreenRender();\n        if (this.get('updateAutoRender')) {\n            this.render();\n        }\n    };\n    GroupComponent.prototype.render = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (!offScreenGroup) {\n            offScreenGroup = this.offScreenRender();\n        }\n        var group = this.get('group');\n        this.updateElements(offScreenGroup, group);\n        this.deleteElements();\n        this.applyOffset();\n        if (!this.get('eventInitted')) {\n            this.initEvent();\n            this.set('eventInitted', true);\n        }\n        this.set('isInit', false);\n    };\n    GroupComponent.prototype.show = function () {\n        var group = this.get('group');\n        group.show();\n        this.set('visible', true);\n    };\n    GroupComponent.prototype.hide = function () {\n        var group = this.get('group');\n        group.hide();\n        this.set('visible', false);\n    };\n    GroupComponent.prototype.setCapture = function (capture) {\n        var group = this.get('group');\n        group.set('capture', capture);\n        this.set('capture', capture);\n    };\n    GroupComponent.prototype.destroy = function () {\n        this.removeEvent();\n        this.remove();\n        _super.prototype.destroy.call(this);\n    };\n    GroupComponent.prototype.getBBox = function () {\n        return this.get('group').getCanvasBBox();\n    };\n    GroupComponent.prototype.getLayoutBBox = function () {\n        var group = this.get('group');\n        // 防止被 clear 了，offScreenBBox 不存在\n        var bbox = this.getInnerLayoutBBox();\n        var matrix = group.getTotalMatrix();\n        if (matrix) {\n            bbox = applyMatrix2BBox(matrix, bbox);\n        }\n        return bbox; // 默认返回 getBBox，不同的组件内部单独实现\n    };\n    // 复写 on, off, emit 透传到 group\n    GroupComponent.prototype.on = function (evt, callback, once) {\n        var group = this.get('group');\n        group.on(evt, callback, once);\n        return this;\n    };\n    GroupComponent.prototype.off = function (evt, callback) {\n        var group = this.get('group');\n        group && group.off(evt, callback);\n        return this;\n    };\n    GroupComponent.prototype.emit = function (eventName, eventObject) {\n        var group = this.get('group');\n        group.emit(eventName, eventObject);\n    };\n    GroupComponent.prototype.init = function () {\n        _super.prototype.init.call(this);\n        if (!this.get('group')) {\n            this.initGroup();\n        }\n        this.offScreenRender(); // 绘制离屏 group\n    };\n    // 获取组件内部布局占的包围盒\n    GroupComponent.prototype.getInnerLayoutBBox = function () {\n        return this.get('offScreenBBox') || this.get('group').getBBox();\n    };\n    // 抛出委托对象\n    GroupComponent.prototype.delegateEmit = function (eventName, eventObject) {\n        var group = this.get('group');\n        eventObject.target = group;\n        group.emit(eventName, eventObject);\n        propagationDelegate(group, eventName, eventObject);\n    };\n    // 创建离屏的 group ,不添加在 canvas 中\n    GroupComponent.prototype.createOffScreenGroup = function () {\n        var group = this.get('group');\n        var GroupClass = group.getGroupBase(); // 获取分组的构造函数\n        var newGroup = new GroupClass({\n            delegateObject: this.getDelegateObject(),\n        });\n        return newGroup;\n    };\n    // 应用 offset\n    GroupComponent.prototype.applyOffset = function () {\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        this.moveElementTo(this.get('group'), {\n            x: offsetX,\n            y: offsetY,\n        });\n    };\n    GroupComponent.prototype.initGroup = function () {\n        var container = this.get('container');\n        this.set('group', container.addGroup({\n            id: this.get('id'),\n            name: this.get('name'),\n            capture: this.get('capture'),\n            visible: this.get('visible'),\n            isComponent: true,\n            component: this,\n            delegateObject: this.getDelegateObject(),\n        }));\n    };\n    // 离屏渲染\n    GroupComponent.prototype.offScreenRender = function () {\n        this.clearOffScreenCache();\n        var offScreenGroup = this.createOffScreenGroup();\n        this.renderInner(offScreenGroup);\n        this.set('offScreenGroup', offScreenGroup);\n        // 包含包围盒的 bbox\n        this.set('offScreenBBox', getBBoxWithClip(offScreenGroup));\n        return offScreenGroup;\n    };\n    /**\n     * @protected\n     * 在组件上添加分组，主要解决 isReigeter 的问题\n     * @param {IGroup} parent 父元素\n     * @param {object} cfg    分组的配置项\n     */\n    GroupComponent.prototype.addGroup = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var group = parent.addGroup(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(group);\n        }\n        return group;\n    };\n    /**\n     * @protected\n     * 在组件上添加图形，主要解决 isReigeter 的问题\n     * @param {IGroup} parent 父元素\n     * @param {object} cfg    分组的配置项\n     */\n    GroupComponent.prototype.addShape = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var shape = parent.addShape(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(shape);\n        }\n        return shape;\n    };\n    /**\n     * 在组件上添加子组件\n     *\n     * @param parent 父元素\n     * @param cfg 子组件配置项\n     */\n    GroupComponent.prototype.addComponent = function (parent, cfg) {\n        var id = cfg.id, Ctor = cfg.component, restCfg = __rest(cfg, [\"id\", \"component\"]);\n        // @ts-ignore\n        var inst = new Ctor(__assign(__assign({}, restCfg), { id: id, container: parent, updateAutoRender: this.get('updateAutoRender') }));\n        inst.init();\n        inst.render();\n        if (this.get('isRegister')) {\n            this.registerElement(inst.get('group'));\n        }\n        return inst;\n    };\n    GroupComponent.prototype.initEvent = function () { };\n    GroupComponent.prototype.removeEvent = function () {\n        var group = this.get('group');\n        group.off();\n    };\n    GroupComponent.prototype.getElementId = function (localId) {\n        var id = this.get('id'); // 组件的 Id\n        var name = this.get('name'); // 组件的名称\n        return id + \"-\" + name + \"-\" + localId;\n    };\n    GroupComponent.prototype.registerElement = function (element) {\n        var id = element.get('id');\n        this.get('shapesMap')[id] = element;\n    };\n    GroupComponent.prototype.unregisterElement = function (element) {\n        var id = element.get('id');\n        delete this.get('shapesMap')[id];\n    };\n    // 移动元素\n    GroupComponent.prototype.moveElementTo = function (element, point) {\n        var matrix = getMatrixByTranslate(point);\n        element.attr('matrix', matrix);\n    };\n    /**\n     * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n     * @protected\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} newElement  新的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.addAnimation = function (elmentName, newElement, animateCfg) {\n        // 缓存透明度\n        var originOpacity = newElement.attr('opacity');\n        if (isNil(originOpacity)) {\n            originOpacity = 1;\n        }\n        newElement.attr('opacity', 0);\n        newElement.animate({ opacity: originOpacity }, animateCfg);\n    };\n    /**\n     * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n     * @protected\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} originElement 要删除的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.removeAnimation = function (elementName, originElement, animateCfg) {\n        originElement.animate({ opacity: 0 }, animateCfg);\n    };\n    /**\n     * 图形元素的更新动画\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} originElement 现有的图形元素\n     * @param {object} newAttrs  新的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.updateAnimation = function (elementName, originElement, newAttrs, animateCfg) {\n        originElement.animate(newAttrs, animateCfg);\n    };\n    // 更新组件的图形\n    GroupComponent.prototype.updateElements = function (newGroup, originGroup) {\n        var _this = this;\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        var children = newGroup.getChildren().slice(0); // 创建一个新数组，防止添加到 originGroup 时， children 变动\n        var preElement; // 前面已经匹配到的图形元素，用于\n        each(children, function (element) {\n            var elementId = element.get('id');\n            var originElement = _this.getElementById(elementId);\n            var elementName = element.get('name');\n            if (originElement) {\n                if (element.get('isComponent')) {\n                    // 嵌套子组件更新\n                    var childComponent = element.get('component');\n                    var origChildComponent = originElement.get('component');\n                    var newCfg = pick(childComponent.cfg, difference(keys(childComponent.cfg), COPY_PROPERTIES_EXCLUDES));\n                    origChildComponent.update(newCfg);\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n                else {\n                    var replaceAttrs = _this.getReplaceAttrs(originElement, element);\n                    // 更新\n                    if (animate && animateOption.update) {\n                        // 没有动画\n                        _this.updateAnimation(elementName, originElement, replaceAttrs, animateOption.update);\n                    }\n                    else {\n                        // originElement.attrs = replaceAttrs; // 直接替换\n                        originElement.attr(replaceAttrs);\n                    }\n                    // 如果是分组，则继续执行\n                    if (element.isGroup()) {\n                        _this.updateElements(element, originElement);\n                    }\n                    // 复制属性\n                    each(COPY_PROPERTIES, function (name) {\n                        originElement.set(name, element.get(name));\n                    });\n                    updateClip(originElement, element);\n                    preElement = originElement;\n                    // 执行完更新后设置状态位为更新\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n            }\n            else {\n                // 没有对应的图形，则插入当前图形\n                originGroup.add(element); // 应该在 group 加个 insertAt 的方法\n                var siblings = originGroup.getChildren(); // 兄弟节点\n                siblings.splice(siblings.length - 1, 1); // 先从数组中移除，然后放到合适的位置\n                if (preElement) {\n                    // 前面已经有更新的图形或者插入的图形，则在这个图形后面插入\n                    var index = siblings.indexOf(preElement);\n                    siblings.splice(index + 1, 0, element); // 在已经更新的图形元素后面插入\n                }\n                else {\n                    siblings.unshift(element);\n                }\n                _this.registerElement(element); // 注册节点\n                element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n                if (element.get('isComponent')) {\n                    // 直接新增子组件container属性，实例不变\n                    var childComponent = element.get('component');\n                    childComponent.set('container', originGroup);\n                }\n                else if (element.isGroup()) {\n                    // 如果元素是新增加的元素，则遍历注册所有的子节点\n                    _this.registerNewGroup(element);\n                }\n                preElement = element;\n                if (animate) {\n                    var animateCfg = _this.get('isInit') ? animateOption.appear : animateOption.enter;\n                    if (animateCfg) {\n                        _this.addAnimation(elementName, element, animateCfg);\n                    }\n                }\n            }\n        });\n    };\n    GroupComponent.prototype.clearUpdateStatus = function (group) {\n        var children = group.getChildren();\n        each(children, function (el) {\n            el.set(STATUS_UPDATE, null); // 清理掉更新状态\n        });\n    };\n    // 清理离屏缓存\n    GroupComponent.prototype.clearOffScreenCache = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (offScreenGroup) {\n            // 销毁原先的离线 Group\n            offScreenGroup.destroy();\n        }\n        this.set('offScreenGroup', null);\n        this.set('offScreenBBox', null);\n    };\n    // private updateInner() {\n    //   const group = this.get('group');\n    //   const newGroup = this.createOffScreenGroup();\n    //   this.renderInner(newGroup);\n    //   this.applyOffset();\n    //   this.updateElements(newGroup, group);\n    //   this.deleteElements();\n    //   newGroup.destroy(); // 销毁虚拟分组\n    // }\n    // 获取发生委托时的对象，在事件中抛出\n    GroupComponent.prototype.getDelegateObject = function () {\n        var _a;\n        var name = this.get('name');\n        var delegateObject = (_a = {},\n            _a[name] = this,\n            _a.component = this,\n            _a);\n        return delegateObject;\n    };\n    // 附加委托信息，用于事件\n    GroupComponent.prototype.appendDelegateObject = function (parent, cfg) {\n        var parentObject = parent.get('delegateObject');\n        if (!cfg.delegateObject) {\n            cfg.delegateObject = {};\n        }\n        mix(cfg.delegateObject, parentObject); // 将父元素上的委托信息复制到自身\n    };\n    // 获取需要替换的属性，如果原先图形元素存在，而新图形不存在，则设置 undefined\n    GroupComponent.prototype.getReplaceAttrs = function (originElement, newElement) {\n        var originAttrs = originElement.attr();\n        var newAttrs = newElement.attr();\n        each(originAttrs, function (v, k) {\n            if (newAttrs[k] === undefined) {\n                newAttrs[k] = undefined;\n            }\n        });\n        return newAttrs;\n    };\n    GroupComponent.prototype.registerNewGroup = function (group) {\n        var _this = this;\n        var children = group.getChildren();\n        each(children, function (element) {\n            _this.registerElement(element); // 注册节点\n            element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n            if (element.isGroup()) {\n                _this.registerNewGroup(element);\n            }\n        });\n    };\n    // 移除多余的元素\n    GroupComponent.prototype.deleteElements = function () {\n        var _this = this;\n        var shapesMap = this.get('shapesMap');\n        var deleteArray = [];\n        // 遍历获取需要删除的图形元素\n        each(shapesMap, function (element, id) {\n            if (!element.get(STATUS_UPDATE) || element.destroyed) {\n                deleteArray.push([id, element]);\n            }\n            else {\n                element.set(STATUS_UPDATE, null); // 清理掉更新状态\n            }\n        });\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        // 删除图形元素\n        each(deleteArray, function (item) {\n            var id = item[0], element = item[1];\n            if (!element.destroyed) {\n                var elementName = element.get('name');\n                if (animate && animateOption.leave) {\n                    // 需要动画结束时移除图形\n                    var callbackAnimCfg = mix({\n                        callback: function () {\n                            _this.removeElement(element);\n                        },\n                    }, animateOption.leave);\n                    _this.removeAnimation(elementName, element, callbackAnimCfg);\n                }\n                else {\n                    _this.removeElement(element);\n                }\n            }\n            delete shapesMap[id]; // 从缓存中移除\n        });\n    };\n    GroupComponent.prototype.removeElement = function (element) {\n        if (element.get('isGroup')) {\n            var component = element.get('component');\n            if (component) {\n                component.destroy();\n            }\n        }\n        element.remove();\n    };\n    return GroupComponent;\n}(Component));\nexport default GroupComponent;\n//# sourceMappingURL=group-component.js.map"]}]}