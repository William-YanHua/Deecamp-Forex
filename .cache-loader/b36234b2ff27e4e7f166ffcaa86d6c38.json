{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\mirror.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\mirror.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { deepMix, each, filter } from '@antv/util';\r\nimport { DIRECTION } from '../constant';\r\nimport { getFactTitleConfig } from '../util/facet';\r\nimport { Facet } from './facet';\r\nvar Mirror = (function (_super) {\r\n    __extends(Mirror, _super);\r\n    function Mirror() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Mirror.prototype.getDefaultCfg = function () {\r\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\r\n            type: 'mirror',\r\n            showTitle: true,\r\n            title: _super.prototype.getDefaultTitleCfg.call(this),\r\n            transpose: false,\r\n        });\r\n    };\r\n    Mirror.prototype.render = function () {\r\n        _super.prototype.render.call(this);\r\n        if (this.cfg.showTitle) {\r\n            this.renderTitle();\r\n        }\r\n    };\r\n    Mirror.prototype.beforeEachView = function (view, facet) {\r\n        if (this.cfg.transpose) {\r\n            if (facet.columnIndex % 2 === 0) {\r\n                view.coordinate().transpose().reflect('x');\r\n            }\r\n            else {\r\n                view.coordinate().transpose();\r\n            }\r\n        }\r\n        else {\r\n            if (facet.rowIndex % 2 !== 0) {\r\n                view.coordinate().reflect('y');\r\n            }\r\n        }\r\n    };\r\n    Mirror.prototype.afterEachView = function (view, facet) {\r\n        this.processAxis(view, facet);\r\n    };\r\n    Mirror.prototype.generateFacets = function (data) {\r\n        var _this = this;\r\n        var f = this.cfg.fields[0];\r\n        var rst = [];\r\n        var columnValuesLength = 1;\r\n        var rowValuesLength = 1;\r\n        var columnValues = [''];\r\n        var rowValues = [''];\r\n        var columnField;\r\n        var rowField;\r\n        if (this.cfg.transpose) {\r\n            columnField = f;\r\n            columnValues = this.getFieldValues(data, columnField).slice(0, 2);\r\n            columnValuesLength = columnValues.length;\r\n        }\r\n        else {\r\n            rowField = f;\r\n            rowValues = this.getFieldValues(data, rowField).slice(0, 2);\r\n            rowValuesLength = rowValues.length;\r\n        }\r\n        columnValues.forEach(function (xVal, xIndex) {\r\n            rowValues.forEach(function (yVal, yIndex) {\r\n                var conditions = [\r\n                    { field: columnField, value: xVal, values: columnValues },\r\n                    { field: rowField, value: yVal, values: rowValues },\r\n                ];\r\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\r\n                var facet = {\r\n                    type: _this.cfg.type,\r\n                    data: facetData,\r\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\r\n                    columnValue: xVal,\r\n                    rowValue: yVal,\r\n                    columnField: columnField,\r\n                    rowField: rowField,\r\n                    columnIndex: xIndex,\r\n                    rowIndex: yIndex,\r\n                    columnValuesLength: columnValuesLength,\r\n                    rowValuesLength: rowValuesLength,\r\n                };\r\n                rst.push(facet);\r\n            });\r\n        });\r\n        return rst;\r\n    };\r\n    Mirror.prototype.getXAxisOption = function (x, axes, option, facet) {\r\n        if (facet.columnIndex === 1 || facet.rowIndex === 1) {\r\n            return __assign(__assign({}, option), { label: null, title: null });\r\n        }\r\n        return option;\r\n    };\r\n    Mirror.prototype.getYAxisOption = function (y, axes, option, facet) {\r\n        return option;\r\n    };\r\n    Mirror.prototype.renderTitle = function () {\r\n        var _this = this;\r\n        each(this.facets, function (facet, facetIndex) {\r\n            var columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\r\n            if (_this.cfg.transpose) {\r\n                var config = deepMix({\r\n                    position: ['50%', '0%'],\r\n                    content: columnValue,\r\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\r\n                view.annotation().text(config);\r\n            }\r\n            else {\r\n                var config = deepMix({\r\n                    position: ['100%', '50%'],\r\n                    content: rowValue,\r\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.title);\r\n                view.annotation().text(config);\r\n            }\r\n        });\r\n    };\r\n    return Mirror;\r\n}(Facet));\r\nexport default Mirror;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\mirror.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\node_modules\\@antv\\g2\\esm\\facet\\mirror.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Mirror = /** @class */ (function (_super) {\n    __extends(Mirror, _super);\n    function Mirror() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Mirror.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'mirror',\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n            transpose: false,\n        });\n    };\n    Mirror.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Mirror.prototype.beforeEachView = function (view, facet) {\n        // 做一下坐标系转化\n        if (this.cfg.transpose) {\n            if (facet.columnIndex % 2 === 0) {\n                view.coordinate().transpose().reflect('x');\n            }\n            else {\n                view.coordinate().transpose();\n            }\n        }\n        else {\n            if (facet.rowIndex % 2 !== 0) {\n                view.coordinate().reflect('y');\n            }\n        }\n    };\n    Mirror.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Mirror.prototype.generateFacets = function (data) {\n        var _this = this;\n        var f = this.cfg.fields[0];\n        var rst = [];\n        var columnValuesLength = 1;\n        var rowValuesLength = 1;\n        var columnValues = [''];\n        var rowValues = [''];\n        var columnField;\n        var rowField;\n        if (this.cfg.transpose) {\n            columnField = f;\n            columnValues = this.getFieldValues(data, columnField).slice(0, 2); // 镜像最多两个\n            columnValuesLength = columnValues.length;\n        }\n        else {\n            rowField = f;\n            rowValues = this.getFieldValues(data, rowField).slice(0, 2); // 镜像最多两个\n            rowValuesLength = rowValues.length;\n        }\n        // 获取每个维度对应的数据配置片段\n        columnValues.forEach(function (xVal, xIndex) {\n            rowValues.forEach(function (yVal, yIndex) {\n                var conditions = [\n                    { field: columnField, value: xVal, values: columnValues },\n                    { field: rowField, value: yVal, values: rowValues },\n                ];\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\n                var facet = {\n                    type: _this.cfg.type,\n                    data: facetData,\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\n                    columnValue: xVal,\n                    rowValue: yVal,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: xIndex,\n                    rowIndex: yIndex,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            });\n        });\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Mirror.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 非最后一行\n        // 当是最后一行或者下面没有 view 时文本不显示\n        if (facet.columnIndex === 1 || facet.rowIndex === 1) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Mirror.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // do nothing\n        return option;\n    };\n    Mirror.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            if (_this.cfg.transpose) {\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n                view.annotation().text(config);\n            }\n            else {\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.title);\n                view.annotation().text(config);\n            }\n        });\n    };\n    return Mirror;\n}(Facet));\nexport default Mirror;\n//# sourceMappingURL=mirror.js.map"]}]}