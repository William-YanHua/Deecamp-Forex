{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/rose/layer.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/rose/layer.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\nimport { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport ViewLayer from '../../base/view-layer';\nimport { getComponent } from '../../components/factory';\nimport { getGeom } from '../../geoms/factory';\nimport * as EventParser from './event';\nvar G2_GEOM_MAP = {\n    rose: 'interval',\n};\nvar PLOT_GEOM_MAP = {\n    rose: 'column',\n};\nvar RoseLayer = (function (_super) {\n    __extends(RoseLayer, _super);\n    function RoseLayer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'rose';\n        return _this;\n    }\n    RoseLayer.getDefaultOptions = function () {\n        return deepMix({}, _super.getDefaultOptions.call(this), {\n            width: 400,\n            height: 400,\n            title: {\n                visible: false,\n            },\n            description: {\n                visible: false,\n            },\n            forceFit: true,\n            padding: 'auto',\n            radius: 0.8,\n            innerRadius: 0,\n            label: {\n                visible: true,\n                type: 'inner',\n                autoRotate: true,\n                adjustColor: false,\n            },\n            legend: {\n                visible: true,\n                position: 'right',\n            },\n            tooltip: {\n                visible: true,\n                shared: false,\n                showCrosshairs: false,\n                showMarkers: false,\n            },\n            columnStyle: {\n                stroke: 'white',\n                lineWidth: 1,\n            },\n            xAxis: {\n                visible: false,\n                line: {\n                    visible: false,\n                },\n                tickLine: {\n                    visible: false,\n                },\n                grid: {\n                    visible: true,\n                    alignTick: false,\n                    style: {\n                        lineWidth: 0.5,\n                    },\n                },\n                label: {\n                    offset: 5,\n                    autoRotate: true,\n                },\n            },\n            yAxis: {\n                visible: false,\n            },\n        });\n    };\n    RoseLayer.prototype.getOptions = function (props) {\n        var options = _super.prototype.getOptions.call(this, props);\n        var columnStyle = props.sectorStyle;\n        var xField = props.categoryField;\n        var yField = props.radiusField;\n        return deepMix({}, options, { columnStyle: columnStyle, xField: xField, yField: yField });\n    };\n    RoseLayer.prototype.getRadiusScale = function () {\n        var radiusField = this.options.radiusField;\n        if (radiusField) {\n            this.view.getScaleByField(radiusField);\n        }\n    };\n    RoseLayer.prototype.getAngleScale = function () {\n        var categoryField = this.options.categoryField;\n        if (categoryField) {\n            this.view.getScaleByField(categoryField);\n        }\n    };\n    RoseLayer.prototype.geometryParser = function (dim, type) {\n        if (dim === 'g2') {\n            return G2_GEOM_MAP[type];\n        }\n        return PLOT_GEOM_MAP[type];\n    };\n    RoseLayer.prototype.scale = function () {\n        var props = this.options;\n        var scales = {};\n        scales[props.radiusField] = {};\n        scales[props.categoryField] = { type: 'cat' };\n        this.setConfig('scales', scales);\n    };\n    RoseLayer.prototype.coord = function () {\n        var props = this.options;\n        var coordConfig = {\n            type: 'polar',\n            cfg: {\n                radius: props.radius,\n                innerRadius: props.innerRadius || 0,\n            },\n        };\n        this.setConfig('coordinate', coordConfig);\n    };\n    RoseLayer.prototype.addGeometry = function () {\n        var options = this.options;\n        var rose = getGeom('interval', 'main', {\n            plot: this,\n            positionFields: [options.categoryField, options.radiusField],\n            widthRatio: {\n                rose: 1,\n            },\n        });\n        rose.label = this.extractLabel();\n        rose.adjust = this.adjustRoseAdjust();\n        this.rose = rose;\n        if (options.tooltip && (options.tooltip.fields || options.tooltip.formatter)) {\n            this.geometryTooltip();\n        }\n        this.setConfig('geometry', rose);\n    };\n    RoseLayer.prototype.adjustRoseAdjust = function () {\n        return;\n    };\n    RoseLayer.prototype.geometryTooltip = function () {\n        this.rose.tooltip = {};\n        var tooltipOptions = this.options.tooltip;\n        if (tooltipOptions.fields) {\n            this.rose.tooltip.fields = tooltipOptions.fields;\n        }\n        if (tooltipOptions.formatter) {\n            this.rose.tooltip.callback = tooltipOptions.formatter;\n            if (!tooltipOptions.fields) {\n                this.rose.tooltip.fields = [this.options.radiusField, this.options.categoryField, this.options.colorField];\n            }\n        }\n    };\n    RoseLayer.prototype.animation = function () {\n        _super.prototype.animation.call(this);\n        var props = this.options;\n        if (props.animation === false) {\n            this.rose.animate = false;\n        }\n    };\n    RoseLayer.prototype.annotation = function () {\n        return;\n    };\n    RoseLayer.prototype.parseEvents = function () {\n        _super.prototype.parseEvents.call(this, EventParser);\n    };\n    RoseLayer.prototype.extractLabel = function () {\n        var options = this.options;\n        if (!options.label || !options.label.visible) {\n            return false;\n        }\n        var label = deepMix({}, options.label);\n        this.adjustLabelOptions(label);\n        var fields = [options.categoryField, options.radiusField];\n        var labelConfig = getComponent('label', __assign({ plot: this, labelType: 'polar', fields: fields }, label));\n        return labelConfig;\n    };\n    RoseLayer.prototype.adjustLabelOptions = function (labelOptions) {\n        var radiusField = this.options.radiusField;\n        if (labelOptions) {\n            var offset = labelOptions.offset, type = labelOptions.type, content = labelOptions.content;\n            if (type === 'inner') {\n                labelOptions.offset = offset < 0 ? offset : -10;\n            }\n            else if (type === 'outer') {\n                labelOptions.offset = offset >= 0 ? offset : 10;\n            }\n            if (!content) {\n                labelOptions.content = function (text, item) { return \"\" + item._origin[radiusField]; };\n            }\n        }\n    };\n    return RoseLayer;\n}(ViewLayer));\nexport default RoseLayer;\nregisterPlotType('rose', RoseLayer);\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/rose/layer.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/rose/layer.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\n/**\n * Create By Bruce Too\n * On 2020-02-17\n */\nimport { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport ViewLayer from '../../base/view-layer';\nimport { getComponent } from '../../components/factory';\nimport { getGeom } from '../../geoms/factory';\nimport * as EventParser from './event';\nvar G2_GEOM_MAP = {\n    rose: 'interval',\n};\nvar PLOT_GEOM_MAP = {\n    rose: 'column',\n};\nvar RoseLayer = /** @class */ (function (_super) {\n    __extends(RoseLayer, _super);\n    function RoseLayer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'rose';\n        return _this;\n    }\n    RoseLayer.getDefaultOptions = function () {\n        return deepMix({}, _super.getDefaultOptions.call(this), {\n            width: 400,\n            height: 400,\n            title: {\n                visible: false,\n            },\n            description: {\n                visible: false,\n            },\n            forceFit: true,\n            padding: 'auto',\n            radius: 0.8,\n            innerRadius: 0,\n            label: {\n                visible: true,\n                type: 'inner',\n                autoRotate: true,\n                adjustColor: false,\n            },\n            legend: {\n                visible: true,\n                position: 'right',\n            },\n            tooltip: {\n                visible: true,\n                shared: false,\n                showCrosshairs: false,\n                showMarkers: false,\n            },\n            columnStyle: {\n                stroke: 'white',\n                lineWidth: 1,\n            },\n            xAxis: {\n                visible: false,\n                line: {\n                    visible: false,\n                },\n                tickLine: {\n                    visible: false,\n                },\n                grid: {\n                    visible: true,\n                    alignTick: false,\n                    style: {\n                        lineWidth: 0.5,\n                    },\n                },\n                label: {\n                    offset: 5,\n                    autoRotate: true,\n                },\n            },\n            yAxis: {\n                visible: false,\n            },\n        });\n    };\n    RoseLayer.prototype.getOptions = function (props) {\n        var options = _super.prototype.getOptions.call(this, props);\n        var columnStyle = props.sectorStyle;\n        var xField = props.categoryField;\n        var yField = props.radiusField;\n        return deepMix({}, options, { columnStyle: columnStyle, xField: xField, yField: yField });\n    };\n    RoseLayer.prototype.getRadiusScale = function () {\n        var radiusField = this.options.radiusField;\n        if (radiusField) {\n            this.view.getScaleByField(radiusField);\n        }\n    };\n    RoseLayer.prototype.getAngleScale = function () {\n        var categoryField = this.options.categoryField;\n        if (categoryField) {\n            this.view.getScaleByField(categoryField);\n        }\n    };\n    RoseLayer.prototype.geometryParser = function (dim, type) {\n        if (dim === 'g2') {\n            return G2_GEOM_MAP[type];\n        }\n        return PLOT_GEOM_MAP[type];\n    };\n    RoseLayer.prototype.scale = function () {\n        // super.scale();\n        var props = this.options;\n        var scales = {};\n        scales[props.radiusField] = {};\n        scales[props.categoryField] = { type: 'cat' };\n        this.setConfig('scales', scales);\n    };\n    /** 不显示坐标轴 */\n    /*protected axis() {\n      super.axis();\n      const options = this.options;\n      if (!options.stackField && !options.groupField) {\n        this.setConfig('axes', false);\n      }\n    }*/\n    RoseLayer.prototype.coord = function () {\n        var props = this.options;\n        var coordConfig = {\n            type: 'polar',\n            cfg: {\n                radius: props.radius,\n                innerRadius: props.innerRadius || 0,\n            },\n        };\n        this.setConfig('coordinate', coordConfig);\n    };\n    RoseLayer.prototype.addGeometry = function () {\n        var options = this.options;\n        var rose = getGeom('interval', 'main', {\n            plot: this,\n            positionFields: [options.categoryField, options.radiusField],\n            widthRatio: {\n                rose: 1,\n            },\n        });\n        rose.label = this.extractLabel();\n        rose.adjust = this.adjustRoseAdjust();\n        this.rose = rose;\n        if (options.tooltip && (options.tooltip.fields || options.tooltip.formatter)) {\n            this.geometryTooltip();\n        }\n        this.setConfig('geometry', rose);\n    };\n    RoseLayer.prototype.adjustRoseAdjust = function () {\n        return;\n    };\n    RoseLayer.prototype.geometryTooltip = function () {\n        this.rose.tooltip = {};\n        var tooltipOptions = this.options.tooltip;\n        if (tooltipOptions.fields) {\n            this.rose.tooltip.fields = tooltipOptions.fields;\n        }\n        if (tooltipOptions.formatter) {\n            this.rose.tooltip.callback = tooltipOptions.formatter;\n            if (!tooltipOptions.fields) {\n                this.rose.tooltip.fields = [this.options.radiusField, this.options.categoryField, this.options.colorField];\n            }\n        }\n    };\n    RoseLayer.prototype.animation = function () {\n        _super.prototype.animation.call(this);\n        var props = this.options;\n        if (props.animation === false) {\n            /** 关闭动画 */\n            this.rose.animate = false;\n        }\n    };\n    RoseLayer.prototype.annotation = function () {\n        return;\n    };\n    RoseLayer.prototype.parseEvents = function () {\n        _super.prototype.parseEvents.call(this, EventParser);\n    };\n    RoseLayer.prototype.extractLabel = function () {\n        var options = this.options;\n        if (!options.label || !options.label.visible) {\n            return false;\n        }\n        var label = deepMix({}, options.label);\n        this.adjustLabelOptions(label);\n        var fields = [options.categoryField, options.radiusField];\n        var labelConfig = getComponent('label', __assign({ plot: this, labelType: 'polar', fields: fields }, label));\n        return labelConfig;\n    };\n    RoseLayer.prototype.adjustLabelOptions = function (labelOptions) {\n        var radiusField = this.options.radiusField;\n        if (labelOptions) {\n            var offset = labelOptions.offset, type = labelOptions.type, content = labelOptions.content;\n            if (type === 'inner') {\n                labelOptions.offset = offset < 0 ? offset : -10;\n            }\n            else if (type === 'outer') {\n                labelOptions.offset = offset >= 0 ? offset : 10;\n            }\n            if (!content) {\n                // 默认显示 数值\n                labelOptions.content = function (text, item) { return \"\" + item._origin[radiusField]; };\n            }\n        }\n    };\n    return RoseLayer;\n}(ViewLayer));\nexport default RoseLayer;\nregisterPlotType('rose', RoseLayer);\n//# sourceMappingURL=layer.js.map"]}]}