{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\history\\es\\createBrowserHistory.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\history\\es\\createBrowserHistory.js","mtime":1503477301000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) {\r\n    var source = arguments[i];\r\n    for (var key in source) {\r\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n            target[key] = source[key];\r\n        }\r\n    }\r\n} return target; };\r\nimport warning from 'warning';\r\nimport invariant from 'invariant';\r\nimport { createLocation } from './LocationUtils';\r\nimport { addLeadingSlash, stripTrailingSlash, hasBasename, stripBasename, createPath } from './PathUtils';\r\nimport createTransitionManager from './createTransitionManager';\r\nimport { canUseDOM, addEventListener, removeEventListener, getConfirmation, supportsHistory, supportsPopStateOnHashChange, isExtraneousPopstateEvent } from './DOMUtils';\r\nvar PopStateEvent = 'popstate';\r\nvar HashChangeEvent = 'hashchange';\r\nvar getHistoryState = function getHistoryState() {\r\n    try {\r\n        return window.history.state || {};\r\n    }\r\n    catch (e) {\r\n        return {};\r\n    }\r\n};\r\nvar createBrowserHistory = function createBrowserHistory() {\r\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n    invariant(canUseDOM, 'Browser history needs a DOM');\r\n    var globalHistory = window.history;\r\n    var canUseHistory = supportsHistory();\r\n    var needsHashChangeListener = !supportsPopStateOnHashChange();\r\n    var _props$forceRefresh = props.forceRefresh, forceRefresh = _props$forceRefresh === undefined ? false : _props$forceRefresh, _props$getUserConfirm = props.getUserConfirmation, getUserConfirmation = _props$getUserConfirm === undefined ? getConfirmation : _props$getUserConfirm, _props$keyLength = props.keyLength, keyLength = _props$keyLength === undefined ? 6 : _props$keyLength;\r\n    var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\r\n    var getDOMLocation = function getDOMLocation(historyState) {\r\n        var _ref = historyState || {}, key = _ref.key, state = _ref.state;\r\n        var _window$location = window.location, pathname = _window$location.pathname, search = _window$location.search, hash = _window$location.hash;\r\n        var path = pathname + search + hash;\r\n        warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".');\r\n        if (basename)\r\n            path = stripBasename(path, basename);\r\n        return createLocation(path, state, key);\r\n    };\r\n    var createKey = function createKey() {\r\n        return Math.random().toString(36).substr(2, keyLength);\r\n    };\r\n    var transitionManager = createTransitionManager();\r\n    var setState = function setState(nextState) {\r\n        _extends(history, nextState);\r\n        history.length = globalHistory.length;\r\n        transitionManager.notifyListeners(history.location, history.action);\r\n    };\r\n    var handlePopState = function handlePopState(event) {\r\n        if (isExtraneousPopstateEvent(event))\r\n            return;\r\n        handlePop(getDOMLocation(event.state));\r\n    };\r\n    var handleHashChange = function handleHashChange() {\r\n        handlePop(getDOMLocation(getHistoryState()));\r\n    };\r\n    var forceNextPop = false;\r\n    var handlePop = function handlePop(location) {\r\n        if (forceNextPop) {\r\n            forceNextPop = false;\r\n            setState();\r\n        }\r\n        else {\r\n            var action = 'POP';\r\n            transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\r\n                if (ok) {\r\n                    setState({ action: action, location: location });\r\n                }\r\n                else {\r\n                    revertPop(location);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    var revertPop = function revertPop(fromLocation) {\r\n        var toLocation = history.location;\r\n        var toIndex = allKeys.indexOf(toLocation.key);\r\n        if (toIndex === -1)\r\n            toIndex = 0;\r\n        var fromIndex = allKeys.indexOf(fromLocation.key);\r\n        if (fromIndex === -1)\r\n            fromIndex = 0;\r\n        var delta = toIndex - fromIndex;\r\n        if (delta) {\r\n            forceNextPop = true;\r\n            go(delta);\r\n        }\r\n    };\r\n    var initialLocation = getDOMLocation(getHistoryState());\r\n    var allKeys = [initialLocation.key];\r\n    var createHref = function createHref(location) {\r\n        return basename + createPath(location);\r\n    };\r\n    var push = function push(path, state) {\r\n        warning(!((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored');\r\n        var action = 'PUSH';\r\n        var location = createLocation(path, state, createKey(), history.location);\r\n        transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\r\n            if (!ok)\r\n                return;\r\n            var href = createHref(location);\r\n            var key = location.key, state = location.state;\r\n            if (canUseHistory) {\r\n                globalHistory.pushState({ key: key, state: state }, null, href);\r\n                if (forceRefresh) {\r\n                    window.location.href = href;\r\n                }\r\n                else {\r\n                    var prevIndex = allKeys.indexOf(history.location.key);\r\n                    var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\r\n                    nextKeys.push(location.key);\r\n                    allKeys = nextKeys;\r\n                    setState({ action: action, location: location });\r\n                }\r\n            }\r\n            else {\r\n                warning(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history');\r\n                window.location.href = href;\r\n            }\r\n        });\r\n    };\r\n    var replace = function replace(path, state) {\r\n        warning(!((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored');\r\n        var action = 'REPLACE';\r\n        var location = createLocation(path, state, createKey(), history.location);\r\n        transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\r\n            if (!ok)\r\n                return;\r\n            var href = createHref(location);\r\n            var key = location.key, state = location.state;\r\n            if (canUseHistory) {\r\n                globalHistory.replaceState({ key: key, state: state }, null, href);\r\n                if (forceRefresh) {\r\n                    window.location.replace(href);\r\n                }\r\n                else {\r\n                    var prevIndex = allKeys.indexOf(history.location.key);\r\n                    if (prevIndex !== -1)\r\n                        allKeys[prevIndex] = location.key;\r\n                    setState({ action: action, location: location });\r\n                }\r\n            }\r\n            else {\r\n                warning(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history');\r\n                window.location.replace(href);\r\n            }\r\n        });\r\n    };\r\n    var go = function go(n) {\r\n        globalHistory.go(n);\r\n    };\r\n    var goBack = function goBack() {\r\n        return go(-1);\r\n    };\r\n    var goForward = function goForward() {\r\n        return go(1);\r\n    };\r\n    var listenerCount = 0;\r\n    var checkDOMListeners = function checkDOMListeners(delta) {\r\n        listenerCount += delta;\r\n        if (listenerCount === 1) {\r\n            addEventListener(window, PopStateEvent, handlePopState);\r\n            if (needsHashChangeListener)\r\n                addEventListener(window, HashChangeEvent, handleHashChange);\r\n        }\r\n        else if (listenerCount === 0) {\r\n            removeEventListener(window, PopStateEvent, handlePopState);\r\n            if (needsHashChangeListener)\r\n                removeEventListener(window, HashChangeEvent, handleHashChange);\r\n        }\r\n    };\r\n    var isBlocked = false;\r\n    var block = function block() {\r\n        var prompt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\r\n        var unblock = transitionManager.setPrompt(prompt);\r\n        if (!isBlocked) {\r\n            checkDOMListeners(1);\r\n            isBlocked = true;\r\n        }\r\n        return function () {\r\n            if (isBlocked) {\r\n                isBlocked = false;\r\n                checkDOMListeners(-1);\r\n            }\r\n            return unblock();\r\n        };\r\n    };\r\n    var listen = function listen(listener) {\r\n        var unlisten = transitionManager.appendListener(listener);\r\n        checkDOMListeners(1);\r\n        return function () {\r\n            checkDOMListeners(-1);\r\n            unlisten();\r\n        };\r\n    };\r\n    var history = {\r\n        length: globalHistory.length,\r\n        action: 'POP',\r\n        location: initialLocation,\r\n        createHref: createHref,\r\n        push: push,\r\n        replace: replace,\r\n        go: go,\r\n        goBack: goBack,\r\n        goForward: goForward,\r\n        block: block,\r\n        listen: listen\r\n    };\r\n    return history;\r\n};\r\nexport default createBrowserHistory;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\history\\es\\createBrowserHistory.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\history\\es\\createBrowserHistory.js"],"names":[],"mappings":"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","sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport warning from 'warning';\nimport invariant from 'invariant';\nimport { createLocation } from './LocationUtils';\nimport { addLeadingSlash, stripTrailingSlash, hasBasename, stripBasename, createPath } from './PathUtils';\nimport createTransitionManager from './createTransitionManager';\nimport { canUseDOM, addEventListener, removeEventListener, getConfirmation, supportsHistory, supportsPopStateOnHashChange, isExtraneousPopstateEvent } from './DOMUtils';\n\nvar PopStateEvent = 'popstate';\nvar HashChangeEvent = 'hashchange';\n\nvar getHistoryState = function getHistoryState() {\n  try {\n    return window.history.state || {};\n  } catch (e) {\n    // IE 11 sometimes throws when accessing window.history.state\n    // See https://github.com/ReactTraining/history/pull/289\n    return {};\n  }\n};\n\n/**\n * Creates a history object that uses the HTML5 history API including\n * pushState, replaceState, and the popstate event.\n */\nvar createBrowserHistory = function createBrowserHistory() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  invariant(canUseDOM, 'Browser history needs a DOM');\n\n  var globalHistory = window.history;\n  var canUseHistory = supportsHistory();\n  var needsHashChangeListener = !supportsPopStateOnHashChange();\n\n  var _props$forceRefresh = props.forceRefresh,\n      forceRefresh = _props$forceRefresh === undefined ? false : _props$forceRefresh,\n      _props$getUserConfirm = props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === undefined ? getConfirmation : _props$getUserConfirm,\n      _props$keyLength = props.keyLength,\n      keyLength = _props$keyLength === undefined ? 6 : _props$keyLength;\n\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n\n  var getDOMLocation = function getDOMLocation(historyState) {\n    var _ref = historyState || {},\n        key = _ref.key,\n        state = _ref.state;\n\n    var _window$location = window.location,\n        pathname = _window$location.pathname,\n        search = _window$location.search,\n        hash = _window$location.hash;\n\n\n    var path = pathname + search + hash;\n\n    warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".');\n\n    if (basename) path = stripBasename(path, basename);\n\n    return createLocation(path, state, key);\n  };\n\n  var createKey = function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  };\n\n  var transitionManager = createTransitionManager();\n\n  var setState = function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n\n    transitionManager.notifyListeners(history.location, history.action);\n  };\n\n  var handlePopState = function handlePopState(event) {\n    // Ignore extraneous popstate events in WebKit.\n    if (isExtraneousPopstateEvent(event)) return;\n\n    handlePop(getDOMLocation(event.state));\n  };\n\n  var handleHashChange = function handleHashChange() {\n    handlePop(getDOMLocation(getHistoryState()));\n  };\n\n  var forceNextPop = false;\n\n  var handlePop = function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({ action: action, location: location });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  };\n\n  var revertPop = function revertPop(fromLocation) {\n    var toLocation = history.location;\n\n    // TODO: We could probably make this more reliable by\n    // keeping a list of keys we've seen in sessionStorage.\n    // Instead, we just default to 0 for keys we don't know.\n\n    var toIndex = allKeys.indexOf(toLocation.key);\n\n    if (toIndex === -1) toIndex = 0;\n\n    var fromIndex = allKeys.indexOf(fromLocation.key);\n\n    if (fromIndex === -1) fromIndex = 0;\n\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  };\n\n  var initialLocation = getDOMLocation(getHistoryState());\n  var allKeys = [initialLocation.key];\n\n  // Public interface\n\n  var createHref = function createHref(location) {\n    return basename + createPath(location);\n  };\n\n  var push = function push(path, state) {\n    warning(!((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored');\n\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n\n      if (canUseHistory) {\n        globalHistory.pushState({ key: key, state: state }, null, href);\n\n        if (forceRefresh) {\n          window.location.href = href;\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n\n          nextKeys.push(location.key);\n          allKeys = nextKeys;\n\n          setState({ action: action, location: location });\n        }\n      } else {\n        warning(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history');\n\n        window.location.href = href;\n      }\n    });\n  };\n\n  var replace = function replace(path, state) {\n    warning(!((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored');\n\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n\n      if (canUseHistory) {\n        globalHistory.replaceState({ key: key, state: state }, null, href);\n\n        if (forceRefresh) {\n          window.location.replace(href);\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n\n          if (prevIndex !== -1) allKeys[prevIndex] = location.key;\n\n          setState({ action: action, location: location });\n        }\n      } else {\n        warning(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history');\n\n        window.location.replace(href);\n      }\n    });\n  };\n\n  var go = function go(n) {\n    globalHistory.go(n);\n  };\n\n  var goBack = function goBack() {\n    return go(-1);\n  };\n\n  var goForward = function goForward() {\n    return go(1);\n  };\n\n  var listenerCount = 0;\n\n  var checkDOMListeners = function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1) {\n      addEventListener(window, PopStateEvent, handlePopState);\n\n      if (needsHashChangeListener) addEventListener(window, HashChangeEvent, handleHashChange);\n    } else if (listenerCount === 0) {\n      removeEventListener(window, PopStateEvent, handlePopState);\n\n      if (needsHashChangeListener) removeEventListener(window, HashChangeEvent, handleHashChange);\n    }\n  };\n\n  var isBlocked = false;\n\n  var block = function block() {\n    var prompt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  };\n\n  var listen = function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  };\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n\n  return history;\n};\n\nexport default createBrowserHistory;"]}]}