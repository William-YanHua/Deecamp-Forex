{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\src\\app\\layouts\\nav\\SideNav\\index.tsx","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\src\\app\\layouts\\nav\\SideNav\\index.tsx","mtime":1596379644495},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport React from \"react\";\r\nimport { Inject } from \"react.di\";\r\nimport { NavStore } from \"../NavStore\";\r\nimport Icon from \"antd/lib/icon\";\r\nimport \"antd/lib/icon/style/index.js\";\r\nimport Layout from \"antd/lib/layout\";\r\nimport \"antd/lib/layout/style/index.js\";\r\nimport Menu from \"antd/lib/menu\";\r\nimport \"antd/lib/menu/style/index.js\";\r\nimport { LocaleMessage } from \"../../../internationalization/components\";\r\nimport { observer } from \"mobx-react\";\r\nimport { RouterStore } from \"../../../routing/RouterStore\";\r\nimport { action, computed, runInAction } from \"mobx\";\r\nimport { arrayContainsElement, flatten } from \"../../../../utils/Array\";\r\nimport styled from \"styled-components\";\r\nimport { antdBreakpoints } from \"../../components/constants\";\r\nimport BodyMask from \"./BodyMask\";\r\nvar Sider = Layout.Sider;\r\nvar SubMenu = Menu.SubMenu;\r\nvar breakpoint = \"lg\";\r\nvar StyledSider = styled(Sider).withConfig({ displayName: \"StyledSider\" })(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n\\n@media (max-width: \", \"px ) {\\n  position:absolute;\\n  height: 100%;\\n  z-index:5;\\n  \\nbody, html { \\n    overflow-x: hidden; \\n    overflow-y: auto;\\n}\\n  \\n}\\n\\n\"], [\"\\n\\n@media (max-width: \", \"px ) {\\n  position:absolute;\\n  height: 100%;\\n  z-index:5;\\n  \\nbody, html { \\n    overflow-x: hidden; \\n    overflow-y: auto;\\n}\\n  \\n}\\n\\n\"])), antdBreakpoints[breakpoint]);\r\nvar SideNav = (function (_super) {\r\n    __extends(SideNav, _super);\r\n    function SideNav() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.onBreakpoint = function (broken) {\r\n            if (broken) {\r\n                _this.navStore.sidebarCollapsed = true;\r\n            }\r\n            else {\r\n                _this.navStore.sidebarCollapsed = false;\r\n            }\r\n        };\r\n        _this.onClick = function (path) { return function (e) {\r\n            e.preventDefault();\r\n            _this.routerStore.jumpTo(path);\r\n            if (window.innerWidth <= antdBreakpoints[breakpoint]) {\r\n                runInAction(function () {\r\n                    _this.navStore.sidebarCollapsed = true;\r\n                });\r\n            }\r\n        }; };\r\n        _this.Link = function (props) {\r\n            var path = props.path, icon = props.icon, textId = props.textId;\r\n            return React.createElement(\"a\", { href: path, title: path, onClick: _this.onClick(path) },\r\n                React.createElement(Icon, { type: icon }),\r\n                React.createElement(LocaleMessage, { id: textId }));\r\n        };\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SideNav.prototype, \"selectedKeys\", {\r\n        get: function () {\r\n            if (!this.navStore.hasSider) {\r\n                return [];\r\n            }\r\n            var path = this.routerStore.path;\r\n            var rootSelected = this.navStore.sidenavs.filter(function (x) { return x.match(path); });\r\n            var childrenSelected = flatten(rootSelected.map(function (x) {\r\n                if (arrayContainsElement(x.children)) {\r\n                    return x.children.filter(function (child) { return child.match(path); });\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }).filter(function (x) { return !!x; }));\r\n            return flatten([rootSelected, childrenSelected]).map(function (x) { return x.path; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SideNav.prototype.render = function () {\r\n        var Link = this.Link;\r\n        if (!this.navStore.hasSider) {\r\n            return null;\r\n        }\r\n        return React.createElement(React.Fragment, null,\r\n            React.createElement(BodyMask, { sidebarShown: !this.navStore.sidebarCollapsed, breakpoint: antdBreakpoints[breakpoint] }),\r\n            React.createElement(StyledSider, { onBreakpoint: this.onBreakpoint, collapsed: this.navStore.sidebarCollapsed, collapsedWidth: 0, breakpoint: breakpoint, trigger: null },\r\n                React.createElement(Menu, { mode: \"inline\", selectedKeys: this.selectedKeys, style: { height: \"100%\", borderRight: 0 } }, this.navStore.sidenavs\r\n                    .map(function (x) {\r\n                    var subs = x.children;\r\n                    if (!arrayContainsElement(subs)) {\r\n                        return React.createElement(Menu.Item, { key: x.path },\r\n                            React.createElement(Link, { path: x.path, textId: x.textId, icon: x.iconName }));\r\n                    }\r\n                    else {\r\n                        return (React.createElement(SubMenu, { key: x.path, title: React.createElement(\"span\", null,\r\n                                React.createElement(Icon, { type: x.iconName }),\r\n                                React.createElement(\"span\", null,\r\n                                    React.createElement(LocaleMessage, { id: x.textId }))) }, subs.map(function (sub) {\r\n                            return React.createElement(Menu.Item, { key: sub.path },\r\n                                React.createElement(Link, { path: sub.path, textId: sub.textId, icon: sub.iconName }));\r\n                        })));\r\n                    }\r\n                }))));\r\n    };\r\n    var _a, _b;\r\n    __decorate([\r\n        Inject,\r\n        __metadata(\"design:type\", typeof (_a = typeof NavStore !== \"undefined\" && NavStore) === \"function\" ? _a : Object)\r\n    ], SideNav.prototype, \"navStore\", void 0);\r\n    __decorate([\r\n        Inject,\r\n        __metadata(\"design:type\", typeof (_b = typeof RouterStore !== \"undefined\" && RouterStore) === \"function\" ? _b : Object)\r\n    ], SideNav.prototype, \"routerStore\", void 0);\r\n    __decorate([\r\n        action,\r\n        __metadata(\"design:type\", Object)\r\n    ], SideNav.prototype, \"onBreakpoint\", void 0);\r\n    __decorate([\r\n        computed,\r\n        __metadata(\"design:type\", Object),\r\n        __metadata(\"design:paramtypes\", [])\r\n    ], SideNav.prototype, \"selectedKeys\", null);\r\n    SideNav = __decorate([\r\n        observer\r\n    ], SideNav);\r\n    return SideNav;\r\n}(React.Component));\r\nexport default SideNav;\r\nvar templateObject_1;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\src\\app\\layouts\\nav\\SideNav\\index.tsx","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\src\\app\\layouts\\nav\\SideNav\\index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Inject } from \"react.di\";\r\nimport { NavStore } from \"../NavStore\";\r\nimport { Icon, Layout, Menu } from \"antd\";\r\nimport { LocaleMessage } from \"../../../internationalization/components\";\r\nimport { observer } from \"mobx-react\";\r\nimport { RouterStore } from \"../../../routing/RouterStore\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { action, computed, runInAction } from \"mobx\";\r\nimport { NavItemProps } from \"../NavItemProps\";\r\nimport { arrayContainsElement, flatten } from \"../../../../utils/Array\";\r\nimport styled from \"styled-components\";\r\nimport { antdBreakpoints, layoutConstants } from \"../../components/constants\";\r\nimport BodyMask from \"./BodyMask\";\r\n\r\nconst {Sider} = Layout;\r\nconst {SubMenu} = Menu;\r\n\r\nconst breakpoint = \"lg\";\r\n\r\ninterface Props {\r\n\r\n}\r\n\r\nconst StyledSider = styled(Sider)`\r\n\r\n@media (max-width: ${antdBreakpoints[breakpoint]}px ) {\r\n  position:absolute;\r\n  height: 100%;\r\n  z-index:5;\r\n  \r\nbody, html { \r\n    overflow-x: hidden; \r\n    overflow-y: auto;\r\n}\r\n  \r\n}\r\n\r\n`;\r\n\r\n@observer\r\nexport default class SideNav extends React.Component<Props, {}> {\r\n\r\n  @Inject navStore: NavStore;\r\n  @Inject routerStore: RouterStore;\r\n\r\n  @action onBreakpoint = (broken: boolean) => {\r\n    if (broken) {\r\n      // big to small. collapse the sidebar\r\n      this.navStore.sidebarCollapsed = true;\r\n    } else {\r\n      // small to big. expand the sidebar\r\n      this.navStore.sidebarCollapsed = false;\r\n    }\r\n    // console.log(broken);\r\n  }\r\n\r\n  onClick = (path: string) => (e) => {\r\n    e.preventDefault();\r\n    this.routerStore.jumpTo(path);\r\n    if (window.innerWidth <= antdBreakpoints[breakpoint]) {\r\n      runInAction(() => {\r\n        this.navStore.sidebarCollapsed = true;\r\n      });\r\n    }\r\n  };\r\n\r\n  Link = (props: { path: string, icon: string, textId: string }) => {\r\n    const {path, icon, textId} = props;\r\n    return <a href={path} title={path} onClick={this.onClick(path)}>\r\n      <Icon type={icon}/>\r\n      <LocaleMessage id={textId}/>\r\n    </a>;\r\n  };\r\n\r\n  @computed get selectedKeys() {\r\n    // root selected keys\r\n    if (!this.navStore.hasSider) {\r\n      return [];\r\n    }\r\n    const path = this.routerStore.path;\r\n    const rootSelected: NavItemProps[] = this.navStore.sidenavs.filter((x) => x.match(path));\r\n\r\n    // children selected keys\r\n    const childrenSelected: NavItemProps[] = flatten(rootSelected.map((x) => {\r\n      if (arrayContainsElement(x.children)) {\r\n        return x.children.filter((child) => child.match(path));\r\n      } else {\r\n        return null;\r\n      }\r\n    }).filter((x) => !!x));\r\n\r\n    return flatten([rootSelected, childrenSelected]).map((x) => x.path);\r\n  }\r\n\r\n  render() {\r\n    const {Link} = this;\r\n    if (!this.navStore.hasSider) {\r\n      return null;\r\n    }\r\n    return <>\r\n      <BodyMask sidebarShown={!this.navStore.sidebarCollapsed} breakpoint={antdBreakpoints[breakpoint]}/>\r\n      <StyledSider\r\n      onBreakpoint={this.onBreakpoint}\r\n      collapsed={this.navStore.sidebarCollapsed}\r\n      collapsedWidth={0}\r\n      breakpoint={breakpoint}\r\n      trigger={null}>\r\n      <Menu\r\n        mode=\"inline\"\r\n        selectedKeys={this.selectedKeys}\r\n        // theme={'dark'}\r\n        style={{height: \"100%\", borderRight: 0}}\r\n      >\r\n        {this.navStore.sidenavs\r\n          .map((x) => {\r\n              const subs: NavItemProps[] = x.children;\r\n              if (!arrayContainsElement(subs)) {\r\n                return <Menu.Item key={x.path}>\r\n                  <Link path={x.path} textId={x.textId} icon={x.iconName}/>\r\n                </Menu.Item>;\r\n              } else {\r\n                return (\r\n                  <SubMenu key={x.path} title={\r\n                    <span>\r\n                      <Icon type={x.iconName}/>\r\n                      <span><LocaleMessage id={x.textId}/></span>\r\n                    </span>}\r\n                  >\r\n                    {subs.map((sub) =>\r\n                      <Menu.Item key={sub.path}>\r\n                        <Link path={sub.path} textId={sub.textId} icon={sub.iconName}/>\r\n                      </Menu.Item>,\r\n                    )}\r\n                  </SubMenu>\r\n                );\r\n              }\r\n\r\n            },\r\n          )}\r\n      </Menu>\r\n    </StyledSider>\r\n      </>;\r\n  }\r\n}\r\n"]}]}