{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/color.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/color.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar _require = require('@antv/attr/lib'), ColorUtil = _require.ColorUtil;\nvar Util = require('../util');\nvar Continuous = require('./continuous');\nvar Color = function (_Continuous) {\n    _inheritsLoose(Color, _Continuous);\n    var _super = _createSuper(Color);\n    function Color() {\n        return _Continuous.apply(this, arguments) || this;\n    }\n    var _proto = Color.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Continuous.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            type: 'color-legend',\n            layout: 'vertical',\n            triggerAttr: {\n                fill: '#fff',\n                shadowOffsetX: -2,\n                shadowOffsetY: 2,\n                shadowBlur: 10,\n                shadowColor: '#ccc',\n                radius: 3\n            },\n            isSegment: false\n        });\n    };\n    _proto._setPercentage = function _setPercentage() {\n        var items = this.get('items');\n        if (items[0].percentage)\n            return;\n        var min = items[0].value;\n        var max = items[items.length - 1].value;\n        Util.each(items, function (it) {\n            it.percentage = (it.value - min) / (max - min);\n        });\n        return;\n    };\n    _proto._renderSliderShape = function _renderSliderShape() {\n        this._setPercentage();\n        var slider = this.get('slider');\n        var backgroundElement = slider.get('backgroundElement');\n        var width = this.get('width');\n        var height = this.get('height');\n        var layout = this.get('layout');\n        var items = this.get('items');\n        var fill = '';\n        var rgbColor;\n        if (layout === 'vertical') {\n            fill += 'l (90) ';\n            Util.each(items, function (v) {\n                rgbColor = ColorUtil.toRGB(v.color);\n                fill += 1 - v.percentage + ':' + rgbColor + ' ';\n            });\n        }\n        else {\n            fill += 'l (0) ';\n            Util.each(items, function (v) {\n                rgbColor = ColorUtil.toRGB(v.color);\n                fill += v.percentage + ':' + rgbColor + ' ';\n            });\n        }\n        return this._addMiddleBar(backgroundElement, 'Rect', {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            fill: fill,\n            strokeOpacity: 0\n        });\n    };\n    _proto._renderUnslidable = function _renderUnslidable() {\n        this._setPercentage();\n        var titleShape = this.get('titleShape');\n        var titleGap = this.get('titleGap');\n        titleGap = titleShape ? titleShape.getBBox().height + titleGap : titleGap;\n        var width = this.get('width');\n        var height = this.get('height');\n        var layout = this.get('layout');\n        var items = this.get('items');\n        var fill = '';\n        var rgbColor;\n        var path = [];\n        var group = this.get('group');\n        var bgGroup = group.addGroup();\n        var isize = items.length;\n        if (layout === 'vertical') {\n            fill += 'l (90) ';\n            for (var i = 0; i < isize; i += 1) {\n                if (i !== 0 && i !== isize - 1) {\n                    path.push(['M', 0, height - items[i].percentage * height]);\n                    path.push(['L', width, height - items[i].percentage * height]);\n                }\n                rgbColor = ColorUtil.toRGB(items[i].color);\n                fill += 1 - items[i].percentage + ':' + rgbColor + ' ';\n                if (this.get('isSegment') && i > 0) {\n                    var preRgbColor = ColorUtil.toRGB(items[i - 1].color);\n                    fill += 1 - items[i].percentage + ':' + preRgbColor + ' ';\n                }\n                bgGroup.addShape('text', {\n                    attrs: Util.mix({}, {\n                        x: width + this.get('textOffset') / 2,\n                        y: height - items[i].percentage * height,\n                        text: this._formatItemValue(items[i].value) + ''\n                    }, this.get('textStyle'), {\n                        textAlign: 'start'\n                    })\n                });\n            }\n        }\n        else {\n            fill += 'l (0) ';\n            for (var _i = 0; _i < isize; _i += 1) {\n                if (_i !== 0 && _i !== isize - 1) {\n                    path.push(['M', items[_i].percentage * width, 0]);\n                    path.push(['L', items[_i].percentage * width, height]);\n                }\n                rgbColor = ColorUtil.toRGB(items[_i].color);\n                if (this.get('isSegment') && _i > 0) {\n                    var _preRgbColor = ColorUtil.toRGB(items[_i - 1].color);\n                    fill += items[_i].percentage + ':' + _preRgbColor + ' ';\n                }\n                fill += items[_i].percentage + ':' + rgbColor + ' ';\n                bgGroup.addShape('text', {\n                    attrs: Util.mix({}, {\n                        x: items[_i].percentage * width,\n                        y: height + 5 + this.get('textOffset'),\n                        text: this._formatItemValue(items[_i].value) + ''\n                    }, this.get('textStyle'))\n                });\n            }\n        }\n        bgGroup.addShape('rect', {\n            attrs: {\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                fill: fill,\n                strokeOpacity: 0\n            }\n        });\n        bgGroup.addShape('path', {\n            attrs: Util.mix({\n                path: path\n            }, this.get('lineStyle'))\n        });\n        bgGroup.move(0, titleGap);\n    };\n    return Color;\n}(Continuous);\nmodule.exports = Color;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/color.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/color.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview The class of the gradient color legend\n * @author sima.zhang\n */\nvar _require = require('@antv/attr/lib'),\n    ColorUtil = _require.ColorUtil; // TODO：ColorUtil 包需要从 attr 包中抽离\n\n\nvar Util = require('../util');\n\nvar Continuous = require('./continuous');\n\nvar Color = /*#__PURE__*/function (_Continuous) {\n  _inheritsLoose(Color, _Continuous);\n\n  var _super = _createSuper(Color);\n\n  function Color() {\n    return _Continuous.apply(this, arguments) || this;\n  }\n\n  var _proto = Color.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Continuous.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * 类型\n       * @type {String}\n       */\n      type: 'color-legend',\n\n      /**\n       * 布局方式\n       * horizontal 水平\n       * vertical 垂直\n       * @type {String}\n       */\n      layout: 'vertical',\n\n      /**\n       * 两头滑块的样式\n       * @type {object}\n       */\n      triggerAttr: {\n        fill: '#fff',\n        shadowOffsetX: -2,\n        shadowOffsetY: 2,\n        shadowBlur: 10,\n        shadowColor: '#ccc',\n        radius: 3\n      },\n\n      /**\n       * 同一分段是否使用相同颜色而不使用渐变色，在 slidable = false 时生效\n       * @type {boolean}\n       */\n      isSegment: false\n    });\n  };\n\n  _proto._setPercentage = function _setPercentage() {\n    var items = this.get('items');\n    if (items[0].percentage) return;\n    var min = items[0].value;\n    var max = items[items.length - 1].value;\n    Util.each(items, function (it) {\n      it.percentage = (it.value - min) / (max - min);\n    });\n    return;\n  } // render the slider while slidable === true\n  ;\n\n  _proto._renderSliderShape = function _renderSliderShape() {\n    this._setPercentage();\n\n    var slider = this.get('slider');\n    var backgroundElement = slider.get('backgroundElement');\n    var width = this.get('width');\n    var height = this.get('height');\n    var layout = this.get('layout');\n    var items = this.get('items');\n    var fill = '';\n    var rgbColor; // gradient color distributed according to the percentage\n\n    if (layout === 'vertical') {\n      fill += 'l (90) ';\n      Util.each(items, function (v) {\n        rgbColor = ColorUtil.toRGB(v.color);\n        fill += 1 - v.percentage + ':' + rgbColor + ' ';\n      });\n    } else {\n      fill += 'l (0) ';\n      Util.each(items, function (v) {\n        rgbColor = ColorUtil.toRGB(v.color);\n        fill += v.percentage + ':' + rgbColor + ' ';\n      });\n    }\n\n    return this._addMiddleBar(backgroundElement, 'Rect', {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      fill: fill,\n      strokeOpacity: 0\n    });\n  } // render the silder while slidable === false\n  ;\n\n  _proto._renderUnslidable = function _renderUnslidable() {\n    this._setPercentage();\n\n    var titleShape = this.get('titleShape');\n    var titleGap = this.get('titleGap');\n    titleGap = titleShape ? titleShape.getBBox().height + titleGap : titleGap;\n    var width = this.get('width');\n    var height = this.get('height');\n    var layout = this.get('layout');\n    var items = this.get('items');\n    var fill = '';\n    var rgbColor;\n    var path = [];\n    var group = this.get('group');\n    var bgGroup = group.addGroup();\n    var isize = items.length; // gradient color distributed according to the percentage\n\n    if (layout === 'vertical') {\n      fill += 'l (90) ';\n\n      for (var i = 0; i < isize; i += 1) {\n        if (i !== 0 && i !== isize - 1) {\n          path.push(['M', 0, height - items[i].percentage * height]);\n          path.push(['L', width, height - items[i].percentage * height]);\n        }\n\n        rgbColor = ColorUtil.toRGB(items[i].color);\n        fill += 1 - items[i].percentage + ':' + rgbColor + ' ';\n\n        if (this.get('isSegment') && i > 0) {\n          // one color instead of gradient color for a block while isSegment === true\n          var preRgbColor = ColorUtil.toRGB(items[i - 1].color);\n          fill += 1 - items[i].percentage + ':' + preRgbColor + ' ';\n        }\n\n        bgGroup.addShape('text', {\n          attrs: Util.mix({}, {\n            x: width + this.get('textOffset') / 2,\n            y: height - items[i].percentage * height,\n            text: this._formatItemValue(items[i].value) + '' // 以字符串格式展示\n\n          }, this.get('textStyle'), {\n            textAlign: 'start'\n          })\n        });\n      }\n    } else {\n      // horizontal\n      fill += 'l (0) ';\n\n      for (var _i = 0; _i < isize; _i += 1) {\n        if (_i !== 0 && _i !== isize - 1) {\n          path.push(['M', items[_i].percentage * width, 0]);\n          path.push(['L', items[_i].percentage * width, height]);\n        }\n\n        rgbColor = ColorUtil.toRGB(items[_i].color);\n\n        if (this.get('isSegment') && _i > 0) {\n          var _preRgbColor = ColorUtil.toRGB(items[_i - 1].color);\n\n          fill += items[_i].percentage + ':' + _preRgbColor + ' ';\n        }\n\n        fill += items[_i].percentage + ':' + rgbColor + ' ';\n        bgGroup.addShape('text', {\n          attrs: Util.mix({}, {\n            x: items[_i].percentage * width,\n            y: height + 5 + this.get('textOffset'),\n            text: this._formatItemValue(items[_i].value) + '' // 以字符串格式展示\n\n          }, this.get('textStyle'))\n        });\n      }\n    }\n\n    bgGroup.addShape('rect', {\n      attrs: {\n        x: 0,\n        y: 0,\n        width: width,\n        height: height,\n        fill: fill,\n        strokeOpacity: 0\n      }\n    }); // the white line segment to seperate color blocks\n\n    bgGroup.addShape('path', {\n      attrs: Util.mix({\n        path: path\n      }, this.get('lineStyle'))\n    });\n    bgGroup.move(0, titleGap);\n  };\n\n  return Color;\n}(Continuous);\n\nmodule.exports = Color;"]}]}