{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/components/label/parser.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/components/label/parser.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __rest } from \"tslib\";\nimport { assign, isFunction, deepMix, get, each, has } from '@antv/util';\nimport { combineFormatter, getNoopFormatter, getPrecisionFormatter, getSuffixFormatter } from '../../util/formatter';\nvar LabelParser = (function () {\n    function LabelParser(cfg) {\n        this.config = {};\n        var plot = cfg.plot, rest = __rest(cfg, [\"plot\"]);\n        this.plot = plot;\n        this.originConfig = rest;\n        this.init(cfg);\n    }\n    LabelParser.prototype.getConfig = function () {\n        return this.config;\n    };\n    LabelParser.prototype.init = function (cfg) {\n        var _this = this;\n        assign(this.config, cfg);\n        this.config.callback = function (val) {\n            return _this.parseCallBack(val);\n        };\n    };\n    LabelParser.prototype.parseCallBack = function (val) {\n        var labelProps = this.originConfig;\n        var theme = this.plot.getPlotTheme();\n        var config = __assign({}, labelProps);\n        this.parseOffset(labelProps, config);\n        if (labelProps.position) {\n            if (isFunction(labelProps.position)) {\n                config.position = labelProps.position(val);\n            }\n            else {\n                config.position = labelProps.position;\n            }\n        }\n        this.parseFormatter(config);\n        if (labelProps.style) {\n            if (isFunction(labelProps.style)) {\n                config.textStyle = labelProps.style(val);\n            }\n            else {\n                config.textStyle = labelProps.style;\n            }\n        }\n        config.textStyle = deepMix({}, get(theme, 'label.style'), config.textStyle);\n        if (labelProps.autoRotate) {\n            config.autoRotate = labelProps.autoRotate;\n        }\n        return config;\n    };\n    LabelParser.prototype.parseOffset = function (props, config) {\n        var mapper = ['offset', 'offsetX', 'offsetY'];\n        var count = 0;\n        each(mapper, function (m) {\n            if (has(props, m)) {\n                config[m] = props[m];\n                count++;\n            }\n        });\n        if (count === 0 && get(props, 'position') === 'middle') {\n            config.offset = 0;\n        }\n    };\n    LabelParser.prototype.parseFormatter = function (config) {\n        var labelProps = this.originConfig;\n        config.content = function (data, index) {\n            var text = data[labelProps.fields[0]];\n            return combineFormatter(getNoopFormatter(), getPrecisionFormatter(labelProps.precision), getSuffixFormatter(labelProps.suffix), labelProps.formatter\n                ? labelProps.formatter\n                : getNoopFormatter())(text, data, index);\n        };\n    };\n    return LabelParser;\n}());\nexport default LabelParser;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/components/label/parser.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/components/label/parser.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { assign, isFunction, deepMix, get, each, has } from '@antv/util';\nimport { combineFormatter, getNoopFormatter, getPrecisionFormatter, getSuffixFormatter } from '../../util/formatter';\nvar LabelParser = /** @class */ (function () {\n    function LabelParser(cfg) {\n        this.config = {};\n        var plot = cfg.plot, rest = __rest(cfg, [\"plot\"]);\n        this.plot = plot;\n        this.originConfig = rest;\n        this.init(cfg);\n    }\n    LabelParser.prototype.getConfig = function () {\n        return this.config;\n    };\n    LabelParser.prototype.init = function (cfg) {\n        var _this = this;\n        assign(this.config, cfg);\n        this.config.callback = function (val) {\n            return _this.parseCallBack(val);\n        };\n    };\n    LabelParser.prototype.parseCallBack = function (val) {\n        var labelProps = this.originConfig;\n        var theme = this.plot.getPlotTheme();\n        var config = __assign({}, labelProps);\n        this.parseOffset(labelProps, config);\n        if (labelProps.position) {\n            if (isFunction(labelProps.position)) {\n                config.position = labelProps.position(val);\n            }\n            else {\n                config.position = labelProps.position;\n            }\n        }\n        this.parseFormatter(config);\n        if (labelProps.style) {\n            if (isFunction(labelProps.style)) {\n                config.textStyle = labelProps.style(val);\n            }\n            else {\n                config.textStyle = labelProps.style;\n            }\n        }\n        config.textStyle = deepMix({}, get(theme, 'label.style'), config.textStyle);\n        if (labelProps.autoRotate) {\n            config.autoRotate = labelProps.autoRotate;\n        }\n        return config;\n    };\n    LabelParser.prototype.parseOffset = function (props, config) {\n        var mapper = ['offset', 'offsetX', 'offsetY'];\n        var count = 0;\n        each(mapper, function (m) {\n            if (has(props, m)) {\n                config[m] = props[m];\n                count++;\n            }\n        });\n        // 如用户没有设置offset，而label position又为middle时，则默认设置offset为0\n        if (count === 0 && get(props, 'position') === 'middle') {\n            config.offset = 0;\n        }\n    };\n    LabelParser.prototype.parseFormatter = function (config) {\n        var labelProps = this.originConfig;\n        config.content = function (data, index) {\n            // @ts-ignore\n            var text = data[labelProps.fields[0]];\n            return combineFormatter(getNoopFormatter(), getPrecisionFormatter(labelProps.precision), getSuffixFormatter(labelProps.suffix), labelProps.formatter\n                ? labelProps.formatter\n                : getNoopFormatter())(text, data, index);\n        };\n    };\n    return LabelParser;\n}());\nexport default LabelParser;\n//# sourceMappingURL=parser.js.map"]}]}