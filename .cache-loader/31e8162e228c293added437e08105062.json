{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/schema.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/schema.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["var Util = require('../../util');\nvar Shape = require('./shape');\nvar ShapeUtil = require('../util/shape');\nvar Global = require('../../global');\nfunction _parseValue(value) {\n    if (!Util.isArray(value)) {\n        value = [value];\n    }\n    var min = value[0];\n    var max = value[value.length - 1];\n    var min1 = value.length > 1 ? value[1] : min;\n    var max1 = value.length > 3 ? value[3] : max;\n    var median = value.length > 2 ? value[2] : min1;\n    return {\n        min: min,\n        max: max,\n        min1: min1,\n        max1: max1,\n        median: median\n    };\n}\nfunction addPoints(from, to) {\n    Util.each(from, function (subArr) {\n        to.push({\n            x: subArr[0],\n            y: subArr[1]\n        });\n    });\n}\nfunction getAttrs(cfg) {\n    var defaultAttrs = Global.shape.schema;\n    var lineAttrs = Util.mix({}, defaultAttrs, cfg.style);\n    ShapeUtil.addStrokeAttrs(lineAttrs, cfg);\n    return lineAttrs;\n}\nfunction getFillAttrs(cfg) {\n    var defaultAttrs = Global.shape.schema;\n    var lineAttrs = Util.mix({}, defaultAttrs, cfg.style);\n    ShapeUtil.addFillAttrs(lineAttrs, cfg);\n    if (cfg.color) {\n        lineAttrs.stroke = cfg.color || lineAttrs.stroke;\n    }\n    return lineAttrs;\n}\nfunction getBoxPoints(x, y, width) {\n    var points = [];\n    var pointsArray;\n    var obj;\n    if (Util.isArray(y)) {\n        obj = _parseValue(y);\n        pointsArray = [[x - width / 2, obj.max], [x + width / 2, obj.max], [x, obj.max], [x, obj.max1], [x - width / 2, obj.min1], [x - width / 2, obj.max1], [x + width / 2, obj.max1], [x + width / 2, obj.min1], [x, obj.min1], [x, obj.min], [x - width / 2, obj.min], [x + width / 2, obj.min], [x - width / 2, obj.median], [x + width / 2, obj.median]];\n    }\n    else {\n        y = y || 0.5;\n        obj = _parseValue(x);\n        pointsArray = [[obj.min, y - width / 2], [obj.min, y + width / 2], [obj.min, y], [obj.min1, y], [obj.min1, y - width / 2], [obj.min1, y + width / 2], [obj.max1, y + width / 2], [obj.max1, y - width / 2], [obj.max1, y], [obj.max, y], [obj.max, y - width / 2], [obj.max, y + width / 2], [obj.median, y - width / 2], [obj.median, y + width / 2]];\n    }\n    addPoints(pointsArray, points);\n    return points;\n}\nfunction _sortValue(value) {\n    if (!Util.isArray(value)) {\n        value = [value];\n    }\n    var sorted = value.sort(function (a, b) {\n        return a < b ? 1 : -1;\n    });\n    var length = sorted.length;\n    if (length < 4) {\n        var min = sorted[length - 1];\n        for (var i = 0; i < 4 - length; i++) {\n            sorted.push(min);\n        }\n    }\n    return sorted;\n}\nfunction getCandlePoints(x, y, width) {\n    var yValues = _sortValue(y);\n    var points = [{\n            x: x,\n            y: yValues[0]\n        }, {\n            x: x,\n            y: yValues[1]\n        }, {\n            x: x - width / 2,\n            y: yValues[2]\n        }, {\n            x: x - width / 2,\n            y: yValues[1]\n        }, {\n            x: x + width / 2,\n            y: yValues[1]\n        }, {\n            x: x + width / 2,\n            y: yValues[2]\n        }, {\n            x: x,\n            y: yValues[2]\n        }, {\n            x: x,\n            y: yValues[3]\n        }];\n    return points;\n}\nfunction getBoxPath(points) {\n    var path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['M', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['L', points[6].x, points[6].y], ['L', points[7].x, points[7].y], ['L', points[4].x, points[4].y],\n        ['Z'], ['M', points[8].x, points[8].y], ['L', points[9].x, points[9].y], ['M', points[10].x, points[10].y], ['L', points[11].x, points[11].y], ['M', points[12].x, points[12].y], ['L', points[13].x, points[13].y]];\n    return path;\n}\nfunction getCandlePath(points) {\n    var path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['L', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['Z'], ['M', points[6].x, points[6].y], ['L', points[7].x, points[7].y]];\n    return path;\n}\nvar Schema = Shape.registerFactory('schema', {\n    defaultShapeType: '',\n    getActiveCfg: function getActiveCfg(type, cfg) {\n        if (type === 'box') {\n            var lineWidth = cfg.lineWidth || 1;\n            return {\n                lineWidth: lineWidth + 1\n            };\n        }\n        var opacity = cfg.fillOpacity || cfg.opacity || 1;\n        return {\n            fillOpacity: opacity - 0.15,\n            strokeOpacity: opacity - 0.15\n        };\n    },\n    getSelectedCfg: function getSelectedCfg(type, cfg) {\n        if (cfg && cfg.style) {\n            return cfg.style;\n        }\n        return this.getActiveCfg(type, cfg);\n    }\n});\nShape.registerShape('schema', 'box', {\n    getPoints: function getPoints(pointInfo) {\n        return getBoxPoints(pointInfo.x, pointInfo.y, pointInfo.size);\n    },\n    draw: function draw(cfg, container) {\n        var attrs = getAttrs(cfg);\n        var path = getBoxPath(cfg.points);\n        path = this.parsePath(path);\n        return container.addShape('path', {\n            attrs: Util.mix(attrs, {\n                path: path\n            })\n        });\n    },\n    getMarkerCfg: function getMarkerCfg(cfg) {\n        return {\n            symbol: function symbol(x, y, r) {\n                var yValues = [y - 6, y - 3, y, y + 3, y + 6];\n                var points = getBoxPoints(x, yValues, r);\n                return [['M', points[0].x + 1, points[0].y], ['L', points[1].x - 1, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['M', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['L', points[6].x, points[6].y], ['L', points[7].x, points[7].y], ['L', points[4].x, points[4].y], ['Z'], ['M', points[8].x, points[8].y], ['L', points[9].x, points[9].y], ['M', points[10].x + 1, points[10].y], ['L', points[11].x - 1, points[11].y], ['M', points[12].x, points[12].y], ['L', points[13].x, points[13].y]];\n            },\n            radius: 6,\n            lineWidth: 1,\n            stroke: cfg.color\n        };\n    }\n});\nShape.registerShape('schema', 'candle', {\n    getPoints: function getPoints(pointInfo) {\n        return getCandlePoints(pointInfo.x, pointInfo.y, pointInfo.size);\n    },\n    draw: function draw(cfg, container) {\n        var attrs = getFillAttrs(cfg);\n        var path = getCandlePath(cfg.points);\n        path = this.parsePath(path);\n        return container.addShape('path', {\n            attrs: Util.mix(attrs, {\n                path: path\n            })\n        });\n    },\n    getMarkerCfg: function getMarkerCfg(cfg) {\n        return {\n            symbol: function symbol(x, y, r) {\n                y = [y + 7.5, y + 3, y - 3, y - 7.5];\n                var points = getCandlePoints(x, y, r);\n                return [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['L', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['Z'], ['M', points[6].x, points[6].y], ['L', points[7].x, points[7].y]];\n            },\n            lineWidth: 1,\n            stroke: cfg.color,\n            fill: cfg.color,\n            radius: 6\n        };\n    }\n});\nmodule.exports = Schema;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/schema.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/geom/shape/schema.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * @fileOverview 自定义的 shape\n * @author dxq613@gmail.com\n * @author sima.zhang1990@gmail.com\n */\nvar Util = require('../../util');\n\nvar Shape = require('./shape');\n\nvar ShapeUtil = require('../util/shape');\n\nvar Global = require('../../global');\n\nfunction _parseValue(value) {\n  if (!Util.isArray(value)) {\n    value = [value];\n  }\n\n  var min = value[0]; // 最小值\n\n  var max = value[value.length - 1]; // 最大值\n\n  var min1 = value.length > 1 ? value[1] : min;\n  var max1 = value.length > 3 ? value[3] : max;\n  var median = value.length > 2 ? value[2] : min1;\n  return {\n    min: min,\n    // 最小值\n    max: max,\n    // 最大值\n    min1: min1,\n    max1: max1,\n    median: median\n  };\n}\n\nfunction addPoints(from, to) {\n  Util.each(from, function (subArr) {\n    to.push({\n      x: subArr[0],\n      y: subArr[1]\n    });\n  });\n}\n\nfunction getAttrs(cfg) {\n  var defaultAttrs = Global.shape.schema;\n  var lineAttrs = Util.mix({}, defaultAttrs, cfg.style);\n  ShapeUtil.addStrokeAttrs(lineAttrs, cfg);\n  return lineAttrs;\n}\n\nfunction getFillAttrs(cfg) {\n  var defaultAttrs = Global.shape.schema;\n  var lineAttrs = Util.mix({}, defaultAttrs, cfg.style);\n  ShapeUtil.addFillAttrs(lineAttrs, cfg);\n\n  if (cfg.color) {\n    lineAttrs.stroke = cfg.color || lineAttrs.stroke;\n  }\n\n  return lineAttrs;\n}\n\nfunction getBoxPoints(x, y, width) {\n  var points = [];\n  var pointsArray;\n  var obj;\n\n  if (Util.isArray(y)) {\n    // 2维\n    obj = _parseValue(y);\n    pointsArray = [[x - width / 2, obj.max], [x + width / 2, obj.max], [x, obj.max], [x, obj.max1], [x - width / 2, obj.min1], [x - width / 2, obj.max1], [x + width / 2, obj.max1], [x + width / 2, obj.min1], [x, obj.min1], [x, obj.min], [x - width / 2, obj.min], [x + width / 2, obj.min], [x - width / 2, obj.median], [x + width / 2, obj.median]];\n  } else {\n    // 只有一个维度\n    y = y || 0.5;\n    obj = _parseValue(x);\n    pointsArray = [[obj.min, y - width / 2], [obj.min, y + width / 2], [obj.min, y], [obj.min1, y], [obj.min1, y - width / 2], [obj.min1, y + width / 2], [obj.max1, y + width / 2], [obj.max1, y - width / 2], [obj.max1, y], [obj.max, y], [obj.max, y - width / 2], [obj.max, y + width / 2], [obj.median, y - width / 2], [obj.median, y + width / 2]];\n  }\n\n  addPoints(pointsArray, points);\n  return points;\n}\n\nfunction _sortValue(value) {\n  if (!Util.isArray(value)) {\n    value = [value];\n  } // 从大到小排序\n\n\n  var sorted = value.sort(function (a, b) {\n    return a < b ? 1 : -1;\n  });\n  var length = sorted.length;\n\n  if (length < 4) {\n    var min = sorted[length - 1];\n\n    for (var i = 0; i < 4 - length; i++) {\n      sorted.push(min);\n    }\n  }\n\n  return sorted;\n} // 获取K线图的points\n\n\nfunction getCandlePoints(x, y, width) {\n  var yValues = _sortValue(y);\n\n  var points = [{\n    x: x,\n    y: yValues[0]\n  }, {\n    x: x,\n    y: yValues[1]\n  }, {\n    x: x - width / 2,\n    y: yValues[2]\n  }, {\n    x: x - width / 2,\n    y: yValues[1]\n  }, {\n    x: x + width / 2,\n    y: yValues[1]\n  }, {\n    x: x + width / 2,\n    y: yValues[2]\n  }, {\n    x: x,\n    y: yValues[2]\n  }, {\n    x: x,\n    y: yValues[3]\n  }]; // 按照顺时针连接\n\n  return points;\n}\n\nfunction getBoxPath(points) {\n  var path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['M', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['L', points[6].x, points[6].y], ['L', points[7].x, points[7].y], ['L', points[4].x, points[4].y], // 封闭 z\n  ['Z'], ['M', points[8].x, points[8].y], ['L', points[9].x, points[9].y], ['M', points[10].x, points[10].y], ['L', points[11].x, points[11].y], ['M', points[12].x, points[12].y], ['L', points[13].x, points[13].y]];\n  return path;\n}\n\nfunction getCandlePath(points) {\n  var path = [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['L', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['Z'], ['M', points[6].x, points[6].y], ['L', points[7].x, points[7].y]];\n  return path;\n}\n\nvar Schema = Shape.registerFactory('schema', {\n  defaultShapeType: '',\n  getActiveCfg: function getActiveCfg(type, cfg) {\n    if (type === 'box') {\n      var lineWidth = cfg.lineWidth || 1;\n      return {\n        lineWidth: lineWidth + 1\n      };\n    }\n\n    var opacity = cfg.fillOpacity || cfg.opacity || 1;\n    return {\n      fillOpacity: opacity - 0.15,\n      strokeOpacity: opacity - 0.15\n    };\n  },\n  getSelectedCfg: function getSelectedCfg(type, cfg) {\n    if (cfg && cfg.style) {\n      return cfg.style;\n    }\n\n    return this.getActiveCfg(type, cfg);\n  }\n}); // 箱线图\n\nShape.registerShape('schema', 'box', {\n  getPoints: function getPoints(pointInfo) {\n    return getBoxPoints(pointInfo.x, pointInfo.y, pointInfo.size);\n  },\n  draw: function draw(cfg, container) {\n    var attrs = getAttrs(cfg);\n    var path = getBoxPath(cfg.points);\n    path = this.parsePath(path);\n    return container.addShape('path', {\n      attrs: Util.mix(attrs, {\n        path: path\n      })\n    });\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return {\n      symbol: function symbol(x, y, r) {\n        var yValues = [y - 6, y - 3, y, y + 3, y + 6];\n        var points = getBoxPoints(x, yValues, r);\n        return [['M', points[0].x + 1, points[0].y], ['L', points[1].x - 1, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['M', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['L', points[6].x, points[6].y], ['L', points[7].x, points[7].y], ['L', points[4].x, points[4].y], ['Z'], ['M', points[8].x, points[8].y], ['L', points[9].x, points[9].y], ['M', points[10].x + 1, points[10].y], ['L', points[11].x - 1, points[11].y], ['M', points[12].x, points[12].y], ['L', points[13].x, points[13].y]];\n      },\n      radius: 6,\n      lineWidth: 1,\n      stroke: cfg.color\n    };\n  }\n}); // K线\n\nShape.registerShape('schema', 'candle', {\n  getPoints: function getPoints(pointInfo) {\n    return getCandlePoints(pointInfo.x, pointInfo.y, pointInfo.size);\n  },\n  draw: function draw(cfg, container) {\n    var attrs = getFillAttrs(cfg);\n    var path = getCandlePath(cfg.points);\n    path = this.parsePath(path);\n    return container.addShape('path', {\n      attrs: Util.mix(attrs, {\n        path: path\n      })\n    });\n  },\n  getMarkerCfg: function getMarkerCfg(cfg) {\n    return {\n      symbol: function symbol(x, y, r) {\n        y = [y + 7.5, y + 3, y - 3, y - 7.5];\n        var points = getCandlePoints(x, y, r);\n        return [['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['M', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['L', points[4].x, points[4].y], ['L', points[5].x, points[5].y], ['Z'], ['M', points[6].x, points[6].y], ['L', points[7].x, points[7].y]];\n      },\n      lineWidth: 1,\n      stroke: cfg.color,\n      fill: cfg.color,\n      radius: 6\n    };\n  }\n});\nmodule.exports = Schema;"]}]}