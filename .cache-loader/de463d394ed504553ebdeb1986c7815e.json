{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/column/component/label.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/column/component/label.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\nimport { get, each, deepMix } from '@antv/util';\nimport { _ORIGIN } from '../../../dependents';\nimport BaseLabel, { registerLabelComponent } from '../../../components/label/base';\nimport { mappingColor, rgb2arr } from '../../../util/color';\nimport BBox from '../../../util/bbox';\nvar ColumnLabel = (function (_super) {\n    __extends(ColumnLabel, _super);\n    function ColumnLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ColumnLabel.prototype.getLabelItemAttrs = function (element, index) {\n        var _a;\n        var _b;\n        var _c = this.options, style = _c.style, formatter = _c.formatter;\n        var mappingData = [].concat(element.getModel().mappingData);\n        var value = this.getValue(element);\n        return deepMix({}, style, __assign(__assign({}, this.getPosition(element)), { text: formatter\n                ? formatter(value, (_a = {},\n                    _a[_ORIGIN] = (_b = mappingData[0]) === null || _b === void 0 ? void 0 : _b._origin,\n                    _a.mappingDatum = mappingData[0],\n                    _a.mappingDatumIndex = 0,\n                    _a.element = element,\n                    _a.elementIndex = index,\n                    _a), index)\n                : value, fill: this.getTextFill(element), stroke: this.getTextStroke(element), textAlign: this.getTextAlign(), textBaseline: this.getTextBaseLine() }));\n    };\n    ColumnLabel.prototype.getDefaultOptions = function () {\n        var theme = this.layer.theme;\n        var _a = theme.label, label = _a === void 0 ? {} : _a;\n        return __assign({ offsetX: 0, offsetY: 0, adjustPosition: true }, label);\n    };\n    ColumnLabel.prototype.adjustLabel = function (label, element) {\n        var adjustPosition = this.options.adjustPosition;\n        if (adjustPosition) {\n            var offset = this.getDefaultOffset();\n            var labelRange = label.getBBox();\n            var shapeRange = this.getElementShapeBBox(element);\n            if (shapeRange.height <= labelRange.height) {\n                var yPosition = shapeRange.minY + this.options.offsetY - offset;\n                label.attr('y', yPosition);\n                label.attr('textBaseline', 'bottom');\n                label.attr('fill', this.options.style.fill);\n            }\n        }\n    };\n    ColumnLabel.prototype.getValue = function (element) {\n        return get(element.getData(), this.layer.options.yField);\n    };\n    ColumnLabel.prototype.getPosition = function (element) {\n        var offset = this.getDefaultOffset();\n        var value = this.getValue(element);\n        var bbox = this.getElementShapeBBox(element);\n        var minX = bbox.minX, minY = bbox.minY, maxY = bbox.maxY, height = bbox.height, width = bbox.width;\n        var _a = this.options, offsetX = _a.offsetX, offsetY = _a.offsetY, position = _a.position;\n        var x = minX + width / 2 + offsetX;\n        var dir = value > 0 ? -1 : 1;\n        var y;\n        if (position === 'top') {\n            var root = value > 0 ? minY : maxY;\n            y = root + offset * dir + offsetY;\n        }\n        else if (position === 'bottom') {\n            var root = value > 0 ? maxY : minY;\n            y = root + offset * dir + offsetY;\n        }\n        else {\n            y = minY + height / 2 + offsetY;\n        }\n        return { x: x, y: y };\n    };\n    ColumnLabel.prototype.getTextFill = function (element) {\n        var shape = element.shape;\n        if (this.options.adjustColor && this.options.position !== 'top') {\n            var shapeColor = shape.attr('fill');\n            var shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n            var rgb = rgb2arr(shapeColor);\n            var gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n            var colorBand = [\n                { from: 0, to: 85, color: 'white' },\n                { from: 85, to: 170, color: '#F6F6F6' },\n                { from: 170, to: 255, color: 'black' },\n            ];\n            var reflect = mappingColor(colorBand, gray);\n            return reflect;\n        }\n        var defaultColor = this.options.style.fill;\n        return defaultColor;\n    };\n    ColumnLabel.prototype.getTextStroke = function (element) {\n        var fill = this.getTextFill(element);\n        var _a = this.options, position = _a.position, adjustColor = _a.adjustColor;\n        return position !== 'top' && adjustColor && fill !== 'black' ? null : undefined;\n    };\n    ColumnLabel.prototype.getElementShapeBBox = function (element) {\n        var _this = this;\n        var shape = element.shape;\n        var points = [];\n        each(shape.get('origin').points, function (p) {\n            points.push(_this.coord.convertPoint(p));\n        });\n        var xValues = points.map(function (point) { return point.x; });\n        var xValuesMin = Math.min.apply(Math, xValues);\n        var xValueMax = Math.max.apply(Math, xValues);\n        var yValues = points.map(function (point) { return point.y; });\n        var yValuesMin = Math.min.apply(Math, yValues);\n        var yValuesMax = Math.max.apply(Math, yValues);\n        var bbox = new BBox(xValuesMin, yValuesMin, xValueMax - xValuesMin, yValuesMax - yValuesMin);\n        return bbox;\n    };\n    ColumnLabel.prototype.getTextAlign = function () {\n        return 'center';\n    };\n    ColumnLabel.prototype.getTextBaseLine = function () {\n        return 'middle';\n    };\n    ColumnLabel.prototype.getLabelOffset = function () {\n        return {\n            x: 0,\n            y: 0,\n        };\n    };\n    return ColumnLabel;\n}(BaseLabel));\nexport default ColumnLabel;\nregisterLabelComponent('column', ColumnLabel);\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/column/component/label.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/@antv/g2plot/esm/plots/column/component/label.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { get, each, deepMix } from '@antv/util';\nimport { _ORIGIN } from '../../../dependents';\nimport BaseLabel, { registerLabelComponent } from '../../../components/label/base';\nimport { mappingColor, rgb2arr } from '../../../util/color';\nimport BBox from '../../../util/bbox';\nvar ColumnLabel = /** @class */ (function (_super) {\n    __extends(ColumnLabel, _super);\n    function ColumnLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ColumnLabel.prototype.getLabelItemAttrs = function (element, index) {\n        var _a;\n        var _b;\n        var _c = this.options, style = _c.style, formatter = _c.formatter;\n        var mappingData = [].concat(element.getModel().mappingData);\n        var value = this.getValue(element);\n        return deepMix({}, style, __assign(__assign({}, this.getPosition(element)), { text: formatter\n                ? formatter(value, (_a = {},\n                    _a[_ORIGIN] = (_b = mappingData[0]) === null || _b === void 0 ? void 0 : _b._origin,\n                    _a.mappingDatum = mappingData[0],\n                    _a.mappingDatumIndex = 0,\n                    _a.element = element,\n                    _a.elementIndex = index,\n                    _a), index)\n                : value, fill: this.getTextFill(element), stroke: this.getTextStroke(element), textAlign: this.getTextAlign(), textBaseline: this.getTextBaseLine() }));\n    };\n    ColumnLabel.prototype.getDefaultOptions = function () {\n        var theme = this.layer.theme;\n        var _a = theme.label, label = _a === void 0 ? {} : _a;\n        return __assign({ offsetX: 0, offsetY: 0, adjustPosition: true }, label);\n    };\n    ColumnLabel.prototype.adjustLabel = function (label, element) {\n        var adjustPosition = this.options.adjustPosition;\n        if (adjustPosition) {\n            var offset = this.getDefaultOffset();\n            var labelRange = label.getBBox();\n            var shapeRange = this.getElementShapeBBox(element);\n            if (shapeRange.height <= labelRange.height) {\n                var yPosition = shapeRange.minY + this.options.offsetY - offset;\n                label.attr('y', yPosition);\n                label.attr('textBaseline', 'bottom');\n                label.attr('fill', this.options.style.fill);\n            }\n        }\n    };\n    ColumnLabel.prototype.getValue = function (element) {\n        return get(element.getData(), this.layer.options.yField);\n    };\n    ColumnLabel.prototype.getPosition = function (element) {\n        var offset = this.getDefaultOffset();\n        var value = this.getValue(element);\n        var bbox = this.getElementShapeBBox(element);\n        var minX = bbox.minX, minY = bbox.minY, maxY = bbox.maxY, height = bbox.height, width = bbox.width;\n        var _a = this.options, offsetX = _a.offsetX, offsetY = _a.offsetY, position = _a.position;\n        var x = minX + width / 2 + offsetX;\n        var dir = value > 0 ? -1 : 1;\n        var y;\n        if (position === 'top') {\n            var root = value > 0 ? minY : maxY;\n            y = root + offset * dir + offsetY;\n        }\n        else if (position === 'bottom') {\n            var root = value > 0 ? maxY : minY;\n            y = root + offset * dir + offsetY;\n        }\n        else {\n            y = minY + height / 2 + offsetY;\n        }\n        return { x: x, y: y };\n    };\n    ColumnLabel.prototype.getTextFill = function (element) {\n        var shape = element.shape;\n        if (this.options.adjustColor && this.options.position !== 'top') {\n            var shapeColor = shape.attr('fill');\n            var shapeOpacity = shape.attr('opacity') ? shape.attr('opacity') : 1;\n            var rgb = rgb2arr(shapeColor);\n            var gray = Math.round(rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) / shapeOpacity;\n            var colorBand = [\n                { from: 0, to: 85, color: 'white' },\n                { from: 85, to: 170, color: '#F6F6F6' },\n                { from: 170, to: 255, color: 'black' },\n            ];\n            var reflect = mappingColor(colorBand, gray);\n            return reflect;\n        }\n        var defaultColor = this.options.style.fill;\n        return defaultColor;\n    };\n    ColumnLabel.prototype.getTextStroke = function (element) {\n        var fill = this.getTextFill(element);\n        var _a = this.options, position = _a.position, adjustColor = _a.adjustColor;\n        return position !== 'top' && adjustColor && fill !== 'black' ? null : undefined;\n    };\n    ColumnLabel.prototype.getElementShapeBBox = function (element) {\n        var _this = this;\n        var shape = element.shape;\n        var points = [];\n        each(shape.get('origin').points, function (p) {\n            points.push(_this.coord.convertPoint(p));\n        });\n        var xValues = points.map(function (point) { return point.x; });\n        var xValuesMin = Math.min.apply(Math, xValues);\n        var xValueMax = Math.max.apply(Math, xValues);\n        var yValues = points.map(function (point) { return point.y; });\n        var yValuesMin = Math.min.apply(Math, yValues);\n        var yValuesMax = Math.max.apply(Math, yValues);\n        var bbox = new BBox(xValuesMin, yValuesMin, xValueMax - xValuesMin, yValuesMax - yValuesMin);\n        return bbox;\n    };\n    ColumnLabel.prototype.getTextAlign = function () {\n        return 'center';\n    };\n    ColumnLabel.prototype.getTextBaseLine = function () {\n        return 'middle';\n    };\n    ColumnLabel.prototype.getLabelOffset = function () {\n        // Column 的 offset 在 getPosition 中因 position 不同单独处理\n        return {\n            x: 0,\n            y: 0,\n        };\n    };\n    return ColumnLabel;\n}(BaseLabel));\nexport default ColumnLabel;\nregisterLabelComponent('column', ColumnLabel);\n//# sourceMappingURL=label.js.map"]}]}