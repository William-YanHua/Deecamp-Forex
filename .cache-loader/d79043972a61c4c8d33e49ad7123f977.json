{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/chart/chart.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/chart/chart.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar View = require('./view');\nvar G = require('../renderer');\nvar Canvas = G.Canvas;\nvar DomUtil = Util.DomUtil;\nvar Global = require('../global');\nvar Plot = require('../component/plot');\nvar Controller = require('./controller/index');\nvar mergeBBox = require('./util/merge-bbox');\nvar bboxOfBackPlot = require('./util/bbox-of-back-plot');\nvar plotRange2BBox = require('./util/plot-range2bbox');\nvar AUTO_STR = 'auto';\nfunction _isScaleExist(scales, compareScale) {\n    var flag = false;\n    Util.each(scales, function (scale) {\n        var scaleValues = [].concat(scale.values);\n        var compareScaleValues = [].concat(compareScale.values);\n        if (scale.type === compareScale.type && scale.field === compareScale.field && scaleValues.sort().toString() === compareScaleValues.sort().toString()) {\n            flag = true;\n            return;\n        }\n    });\n    return flag;\n}\nfunction isEqualArray(arr1, arr2) {\n    return Util.isEqualWith(arr1, arr2, function (v1, v2) {\n        return v1 === v2;\n    });\n}\nvar Chart = function (_View) {\n    _inheritsLoose(Chart, _View);\n    function Chart() {\n        return _View.apply(this, arguments) || this;\n    }\n    var _proto = Chart.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var viewCfg = _View.prototype.getDefaultCfg.call(this);\n        return Util.mix(viewCfg, {\n            id: null,\n            forceFit: false,\n            container: null,\n            wrapperEl: null,\n            canvas: null,\n            width: 500,\n            height: 500,\n            pixelRatio: null,\n            backPlot: null,\n            frontPlot: null,\n            plotBackground: null,\n            padding: Global.plotCfg.padding,\n            background: null,\n            autoPaddingAppend: 5,\n            limitInPlot: false,\n            renderer: Global.renderer,\n            views: []\n        });\n    };\n    _proto.init = function init() {\n        var self = this;\n        var viewTheme = self.get('viewTheme');\n        self._initCanvas();\n        self._initPlot();\n        self._initEvents();\n        _View.prototype.init.call(this);\n        var tooltipController = new Controller.Tooltip({\n            chart: self,\n            viewTheme: viewTheme,\n            options: {}\n        });\n        self.set('tooltipController', tooltipController);\n        var legendController = new Controller.Legend({\n            chart: self,\n            viewTheme: viewTheme\n        });\n        self.set('legendController', legendController);\n        self.set('_id', 'chart');\n        self.emit('afterinit');\n    };\n    _proto._isAutoPadding = function _isAutoPadding() {\n        var padding = this.get('padding');\n        if (Util.isArray(padding)) {\n            return padding.includes(AUTO_STR);\n        }\n        return padding === AUTO_STR;\n    };\n    _proto._getAutoPadding = function _getAutoPadding() {\n        var padding = this.get('padding');\n        var frontPlot = this.get('frontPlot');\n        var frontBBox = frontPlot.getBBox();\n        var backPlot = this.get('backPlot');\n        var backBBox = bboxOfBackPlot(backPlot, plotRange2BBox(this.get('plotRange')));\n        var box = mergeBBox(frontBBox, backBBox);\n        var outter = [0 - box.minY,\n            box.maxX - this.get('width'),\n            box.maxY - this.get('height'),\n            0 - box.minX];\n        var autoPadding = Util.toAllPadding(padding);\n        for (var i = 0; i < autoPadding.length; i++) {\n            if (autoPadding[i] === AUTO_STR) {\n                var tmp = Math.max(0, outter[i]);\n                autoPadding[i] = tmp + this.get('autoPaddingAppend');\n            }\n        }\n        return autoPadding;\n    };\n    _proto._initCanvas = function _initCanvas() {\n        var container = this.get('container');\n        var id = this.get('id');\n        if (!container && id) {\n            container = id;\n            this.set('container', id);\n        }\n        var width = this.get('width');\n        var height = this.get('height');\n        if (Util.isString(container)) {\n            container = document.getElementById(container);\n            if (!container) {\n                throw new Error('Please specify the container for the chart!');\n            }\n            this.set('container', container);\n        }\n        var wrapperEl = DomUtil.createDom('<div style=\"position:relative;\"></div>');\n        container.appendChild(wrapperEl);\n        this.set('wrapperEl', wrapperEl);\n        if (this.get('forceFit')) {\n            width = DomUtil.getWidth(container, width);\n            this.set('width', width);\n        }\n        var renderer = this.get('renderer');\n        var canvas = new Canvas({\n            containerDOM: wrapperEl,\n            width: width,\n            height: height,\n            pixelRatio: renderer === 'svg' ? 1 : this.get('pixelRatio'),\n            renderer: renderer\n        });\n        this.set('canvas', canvas);\n    };\n    _proto._initPlot = function _initPlot() {\n        var self = this;\n        self._initPlotBack();\n        var canvas = self.get('canvas');\n        var backPlot = canvas.addGroup({\n            zIndex: 1\n        });\n        var plotContainer = canvas.addGroup({\n            zIndex: 0\n        });\n        var frontPlot = canvas.addGroup({\n            zIndex: 3\n        });\n        self.set('backPlot', backPlot);\n        self.set('middlePlot', plotContainer);\n        self.set('frontPlot', frontPlot);\n    };\n    _proto._initPlotBack = function _initPlotBack() {\n        var self = this;\n        var canvas = self.get('canvas');\n        var viewTheme = self.get('viewTheme');\n        var plot = canvas.addGroup(Plot, {\n            padding: this.get('padding'),\n            plotBackground: Util.mix({}, viewTheme.plotBackground, self.get('plotBackground')),\n            background: Util.mix({}, viewTheme.background, self.get('background'))\n        });\n        self.set('plot', plot);\n        self.set('plotRange', plot.get('plotRange'));\n    };\n    _proto._initEvents = function _initEvents() {\n        if (this.get('forceFit')) {\n            window.addEventListener('resize', Util.wrapBehavior(this, '_initForceFitEvent'));\n        }\n    };\n    _proto._initForceFitEvent = function _initForceFitEvent() {\n        var timer = setTimeout(Util.wrapBehavior(this, 'forceFit'), 200);\n        clearTimeout(this.get('resizeTimer'));\n        this.set('resizeTimer', timer);\n    };\n    _proto._renderLegends = function _renderLegends() {\n        var options = this.get('options');\n        var legendOptions = options.legends;\n        if (Util.isNil(legendOptions) || legendOptions !== false) {\n            var legendController = this.get('legendController');\n            legendController.options = legendOptions || {};\n            legendController.plotRange = this.get('plotRange');\n            if (legendOptions && legendOptions.custom) {\n                legendController.addCustomLegend();\n            }\n            else {\n                var geoms = this.getAllGeoms();\n                var scales = [];\n                Util.each(geoms, function (geom) {\n                    var view = geom.get('view');\n                    var attrs = geom.getAttrsForLegend();\n                    Util.each(attrs, function (attr) {\n                        var type = attr.type;\n                        var scale = attr.getScale(type);\n                        if (scale.field && scale.type !== 'identity' && !_isScaleExist(scales, scale)) {\n                            scales.push(scale);\n                            var filteredValues = view.getFilteredOutValues(scale.field);\n                            legendController.addLegend(scale, attr, geom, filteredValues);\n                        }\n                    });\n                });\n                var yScales = this.getYScales();\n                if (scales.length === 0 && yScales.length > 1) {\n                    legendController.addMixedLegend(yScales, geoms);\n                }\n            }\n            legendController.alignLegends();\n        }\n    };\n    _proto._renderTooltips = function _renderTooltips() {\n        var options = this.get('options');\n        if (Util.isNil(options.tooltip) || options.tooltip !== false) {\n            var tooltipController = this.get('tooltipController');\n            tooltipController.options = options.tooltip || {};\n            tooltipController.renderTooltip();\n        }\n    };\n    _proto.getAllGeoms = function getAllGeoms() {\n        var geoms = [];\n        geoms = geoms.concat(this.get('geoms'));\n        var views = this.get('views');\n        Util.each(views, function (view) {\n            geoms = geoms.concat(view.get('geoms'));\n        });\n        return geoms;\n    };\n    _proto.forceFit = function forceFit() {\n        var self = this;\n        if (!self || self.destroyed) {\n            return;\n        }\n        var container = self.get('container');\n        var oldWidth = self.get('width');\n        var width = DomUtil.getWidth(container, oldWidth);\n        if (width !== 0 && width !== oldWidth) {\n            var height = self.get('height');\n            self.changeSize(width, height);\n        }\n        return self;\n    };\n    _proto.resetPlot = function resetPlot() {\n        var plot = this.get('plot');\n        var padding = this.get('padding');\n        if (!isEqualArray(padding, plot.get('padding'))) {\n            plot.set('padding', padding);\n            plot.repaint();\n        }\n    };\n    _proto.changeSize = function changeSize(width, height) {\n        var self = this;\n        var canvas = self.get('canvas');\n        canvas.changeSize(width, height);\n        var plot = this.get('plot');\n        self.set('width', width);\n        self.set('height', height);\n        plot.repaint();\n        this.set('keepPadding', true);\n        self.repaint();\n        this.set('keepPadding', false);\n        this.emit('afterchangesize');\n        return self;\n    };\n    _proto.changeWidth = function changeWidth(width) {\n        return this.changeSize(width, this.get('height'));\n    };\n    _proto.changeHeight = function changeHeight(height) {\n        return this.changeSize(this.get('width'), height);\n    };\n    _proto.view = function view(cfg) {\n        cfg = cfg || {};\n        cfg.theme = this.get('theme');\n        cfg.parent = this;\n        cfg.backPlot = this.get('backPlot');\n        cfg.middlePlot = this.get('middlePlot');\n        cfg.frontPlot = this.get('frontPlot');\n        cfg.canvas = this.get('canvas');\n        if (Util.isNil(cfg.animate)) {\n            cfg.animate = this.get('animate');\n        }\n        cfg.options = Util.mix({}, this._getSharedOptions(), cfg.options);\n        var view = new View(cfg);\n        view.set('_id', 'view' + this.get('views').length);\n        this.get('views').push(view);\n        this.emit('addview', {\n            view: view\n        });\n        return view;\n    };\n    _proto.removeView = function removeView(view) {\n        var views = this.get('views');\n        Util.Array.remove(views, view);\n        view.destroy();\n    };\n    _proto._getSharedOptions = function _getSharedOptions() {\n        var options = this.get('options');\n        var sharedOptions = {};\n        Util.each(['scales', 'coord', 'axes'], function (name) {\n            sharedOptions[name] = Util.cloneDeep(options[name]);\n        });\n        return sharedOptions;\n    };\n    _proto.getViewRegion = function getViewRegion() {\n        var plotRange = this.get('plotRange');\n        return {\n            start: plotRange.bl,\n            end: plotRange.tr\n        };\n    };\n    _proto.legend = function legend(field, cfg) {\n        var options = this.get('options');\n        if (!options.legends) {\n            options.legends = {};\n        }\n        var legends = {};\n        if (field === false) {\n            options.legends = false;\n        }\n        else if (Util.isObject(field)) {\n            legends = field;\n        }\n        else if (Util.isString(field)) {\n            legends[field] = cfg;\n        }\n        else {\n            legends = cfg;\n        }\n        Util.mix(options.legends, legends);\n        return this;\n    };\n    _proto.tooltip = function tooltip(visible, cfg) {\n        var options = this.get('options');\n        if (!options.tooltip) {\n            options.tooltip = {};\n        }\n        if (visible === false) {\n            options.tooltip = false;\n        }\n        else if (Util.isObject(visible)) {\n            Util.mix(options.tooltip, visible);\n        }\n        else {\n            Util.mix(options.tooltip, cfg);\n        }\n        return this;\n    };\n    _proto.clear = function clear() {\n        this.emit('beforeclear');\n        var views = this.get('views');\n        while (views.length > 0) {\n            var view = views.shift();\n            view.destroy();\n        }\n        _View.prototype.clear.call(this);\n        var canvas = this.get('canvas');\n        this.resetPlot();\n        canvas.draw();\n        this.emit('afterclear');\n        return this;\n    };\n    _proto.clearInner = function clearInner() {\n        var views = this.get('views');\n        Util.each(views, function (view) {\n            view.clearInner();\n        });\n        var tooltipController = this.get('tooltipController');\n        tooltipController && tooltipController.clear();\n        if (!this.get('keepLegend')) {\n            var legendController = this.get('legendController');\n            legendController && legendController.clear();\n        }\n        _View.prototype.clearInner.call(this);\n    };\n    _proto.drawComponents = function drawComponents() {\n        _View.prototype.drawComponents.call(this);\n        if (!this.get('keepLegend')) {\n            this._renderLegends();\n        }\n    };\n    _proto.render = function render() {\n        var self = this;\n        if (!self.get('keepPadding') && self._isAutoPadding()) {\n            self.beforeRender();\n            self.drawComponents();\n            var autoPadding = self._getAutoPadding();\n            var plot = self.get('plot');\n            if (!isEqualArray(plot.get('padding'), autoPadding)) {\n                plot.set('padding', autoPadding);\n                plot.repaint();\n            }\n        }\n        var middlePlot = self.get('middlePlot');\n        if (self.get('limitInPlot') && !middlePlot.attr('clip')) {\n            var clip = Util.getClipByRange(self.get('plotRange'));\n            middlePlot.attr('clip', clip);\n        }\n        _View.prototype.render.call(this);\n        self._renderTooltips();\n    };\n    _proto.repaint = function repaint() {\n        if (!this.get('keepPadding')) {\n            this.resetPlot();\n        }\n        _View.prototype.repaint.call(this);\n    };\n    _proto.changeVisible = function changeVisible(visible) {\n        var wrapperEl = this.get('wrapperEl');\n        var visibleStr = visible ? '' : 'none';\n        wrapperEl.style.display = visibleStr;\n    };\n    _proto.toDataURL = function toDataURL() {\n        var chart = this;\n        var canvas = chart.get('canvas');\n        var renderer = chart.get('renderer');\n        var canvasDom = canvas.get('el');\n        var dataURL = '';\n        if (renderer === 'svg') {\n            var clone = canvasDom.cloneNode(true);\n            var svgDocType = document.implementation.createDocumentType('svg', '-//W3C//DTD SVG 1.1//EN', 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd');\n            var svgDoc = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg', svgDocType);\n            svgDoc.replaceChild(clone, svgDoc.documentElement);\n            var svgData = new XMLSerializer().serializeToString(svgDoc);\n            dataURL = 'data:image/svg+xml;charset=utf8,' + encodeURIComponent(svgData);\n        }\n        else if (renderer === 'canvas') {\n            dataURL = canvasDom.toDataURL('image/png');\n        }\n        return dataURL;\n    };\n    _proto.downloadImage = function downloadImage(name) {\n        var chart = this;\n        var link = document.createElement('a');\n        var renderer = chart.get('renderer');\n        var filename = (name || 'chart') + (renderer === 'svg' ? '.svg' : '.png');\n        var canvas = chart.get('canvas');\n        canvas.get('timeline').stopAllAnimations();\n        setTimeout(function () {\n            var dataURL = chart.toDataURL();\n            if (window.Blob && window.URL && renderer !== 'svg') {\n                var arr = dataURL.split(',');\n                var mime = arr[0].match(/:(.*?);/)[1];\n                var bstr = atob(arr[1]);\n                var n = bstr.length;\n                var u8arr = new Uint8Array(n);\n                while (n--) {\n                    u8arr[n] = bstr.charCodeAt(n);\n                }\n                var blobObj = new Blob([u8arr], {\n                    type: mime\n                });\n                if (window.navigator.msSaveBlob) {\n                    window.navigator.msSaveBlob(blobObj, filename);\n                }\n                else {\n                    link.addEventListener('click', function () {\n                        link.download = filename;\n                        link.href = window.URL.createObjectURL(blobObj);\n                    });\n                }\n            }\n            else {\n                link.addEventListener('click', function () {\n                    link.download = filename;\n                    link.href = dataURL;\n                });\n            }\n            var e = document.createEvent('MouseEvents');\n            e.initEvent('click', false, false);\n            link.dispatchEvent(e);\n        }, 16);\n    };\n    _proto.showTooltip = function showTooltip(point) {\n        var views = this.getViewsByPoint(point);\n        if (views.length) {\n            var tooltipController = this.get('tooltipController');\n            tooltipController.showTooltip(point, views);\n        }\n        return this;\n    };\n    _proto.lockTooltip = function lockTooltip() {\n        var tooltipController = this.get('tooltipController');\n        tooltipController.lockTooltip();\n        return this;\n    };\n    _proto.unlockTooltip = function unlockTooltip() {\n        var tooltipController = this.get('tooltipController');\n        tooltipController.unlockTooltip();\n        return this;\n    };\n    _proto.hideTooltip = function hideTooltip() {\n        var tooltipController = this.get('tooltipController');\n        tooltipController.hideTooltip();\n        return this;\n    };\n    _proto.getTooltipItems = function getTooltipItems(point) {\n        var self = this;\n        var views = self.getViewsByPoint(point);\n        var rst = [];\n        Util.each(views, function (view) {\n            var geoms = view.get('geoms');\n            Util.each(geoms, function (geom) {\n                var dataArray = geom.get('dataArray');\n                var items = [];\n                Util.each(dataArray, function (data) {\n                    var tmpPoint = geom.findPoint(point, data);\n                    if (tmpPoint) {\n                        var subItems = geom.getTipItems(tmpPoint);\n                        items = items.concat(subItems);\n                    }\n                });\n                rst = rst.concat(items);\n            });\n        });\n        return rst;\n    };\n    _proto.destroy = function destroy() {\n        this.emit('beforedestroy');\n        clearTimeout(this.get('resizeTimer'));\n        var canvas = this.get('canvas');\n        var wrapperEl = this.get('wrapperEl');\n        wrapperEl.parentNode.removeChild(wrapperEl);\n        _View.prototype.destroy.call(this);\n        canvas.destroy();\n        window.removeEventListener('resize', Util.getWrapBehavior(this, '_initForceFitEvent'));\n        this.emit('afterdestroy');\n    };\n    return Chart;\n}(View);\nmodule.exports = Chart;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/chart/chart.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/g2/lib/chart/chart.js"],"names":[],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview G2 图表的入口文件\n * @author dxq613@gmail.com\n */\nvar Util = require('../util');\n\nvar View = require('./view');\n\nvar G = require('../renderer');\n\nvar Canvas = G.Canvas;\nvar DomUtil = Util.DomUtil;\n\nvar Global = require('../global');\n\nvar Plot = require('../component/plot');\n\nvar Controller = require('./controller/index');\n\nvar mergeBBox = require('./util/merge-bbox');\n\nvar bboxOfBackPlot = require('./util/bbox-of-back-plot');\n\nvar plotRange2BBox = require('./util/plot-range2bbox');\n\nvar AUTO_STR = 'auto';\n\nfunction _isScaleExist(scales, compareScale) {\n  var flag = false;\n  Util.each(scales, function (scale) {\n    var scaleValues = [].concat(scale.values);\n    var compareScaleValues = [].concat(compareScale.values);\n\n    if (scale.type === compareScale.type && scale.field === compareScale.field && scaleValues.sort().toString() === compareScaleValues.sort().toString()) {\n      flag = true;\n      return;\n    }\n  });\n  return flag;\n}\n\nfunction isEqualArray(arr1, arr2) {\n  return Util.isEqualWith(arr1, arr2, function (v1, v2) {\n    return v1 === v2;\n  });\n}\n/**\n * 图表的入口\n * @class Chart\n */\n\n\nvar Chart = /*#__PURE__*/function (_View) {\n  _inheritsLoose(Chart, _View);\n\n  function Chart() {\n    return _View.apply(this, arguments) || this;\n  }\n\n  var _proto = Chart.prototype;\n\n  /**\n   * 获取默认的配置属性\n   * @protected\n   * @return {Object} 默认属性\n   */\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var viewCfg = _View.prototype.getDefaultCfg.call(this);\n\n    return Util.mix(viewCfg, {\n      id: null,\n      forceFit: false,\n      container: null,\n      wrapperEl: null,\n      canvas: null,\n      width: 500,\n      height: 500,\n      pixelRatio: null,\n      backPlot: null,\n      frontPlot: null,\n      plotBackground: null,\n      padding: Global.plotCfg.padding,\n      background: null,\n      autoPaddingAppend: 5,\n      limitInPlot: false,\n      renderer: Global.renderer,\n      // renderer: 'svg',\n      views: []\n    });\n  };\n\n  _proto.init = function init() {\n    var self = this;\n    var viewTheme = self.get('viewTheme');\n\n    self._initCanvas();\n\n    self._initPlot();\n\n    self._initEvents();\n\n    _View.prototype.init.call(this);\n\n    var tooltipController = new Controller.Tooltip({\n      chart: self,\n      viewTheme: viewTheme,\n      options: {}\n    });\n    self.set('tooltipController', tooltipController);\n    var legendController = new Controller.Legend({\n      chart: self,\n      viewTheme: viewTheme\n    });\n    self.set('legendController', legendController);\n    self.set('_id', 'chart'); // 防止同用户设定的 id 同名\n\n    self.emit('afterinit'); // 初始化完毕\n  };\n\n  _proto._isAutoPadding = function _isAutoPadding() {\n    var padding = this.get('padding');\n\n    if (Util.isArray(padding)) {\n      return padding.includes(AUTO_STR);\n    }\n\n    return padding === AUTO_STR;\n  };\n\n  _proto._getAutoPadding = function _getAutoPadding() {\n    var padding = this.get('padding'); // 图例在最前面的一层\n\n    var frontPlot = this.get('frontPlot');\n    var frontBBox = frontPlot.getBBox(); // 坐标轴在最后面的一层\n\n    var backPlot = this.get('backPlot'); // 这段代码临时处理了title 过长的情况，但是是非常不好的代码\n\n    var backBBox = bboxOfBackPlot(backPlot, plotRange2BBox(this.get('plotRange')));\n    var box = mergeBBox(frontBBox, backBBox);\n    var outter = [0 - box.minY, // 上面超出的部分\n    box.maxX - this.get('width'), // 右边超出的部分\n    box.maxY - this.get('height'), // 下边超出的部分\n    0 - box.minX]; // 如果原始的 padding 内部存在 'auto' 则替换对应的边\n\n    var autoPadding = Util.toAllPadding(padding);\n\n    for (var i = 0; i < autoPadding.length; i++) {\n      if (autoPadding[i] === AUTO_STR) {\n        var tmp = Math.max(0, outter[i]);\n        autoPadding[i] = tmp + this.get('autoPaddingAppend');\n      }\n    }\n\n    return autoPadding;\n  } // 初始化画布\n  ;\n\n  _proto._initCanvas = function _initCanvas() {\n    var container = this.get('container');\n    var id = this.get('id'); // 如果未设置 container 使用 ID, 兼容 2.x 版本\n\n    if (!container && id) {\n      container = id;\n      this.set('container', id);\n    }\n\n    var width = this.get('width');\n    var height = this.get('height');\n\n    if (Util.isString(container)) {\n      container = document.getElementById(container);\n\n      if (!container) {\n        throw new Error('Please specify the container for the chart!');\n      }\n\n      this.set('container', container);\n    }\n\n    var wrapperEl = DomUtil.createDom('<div style=\"position:relative;\"></div>');\n    container.appendChild(wrapperEl);\n    this.set('wrapperEl', wrapperEl);\n\n    if (this.get('forceFit')) {\n      width = DomUtil.getWidth(container, width);\n      this.set('width', width);\n    }\n\n    var renderer = this.get('renderer');\n    var canvas = new Canvas({\n      containerDOM: wrapperEl,\n      width: width,\n      height: height,\n      // NOTICE: 有问题找青湳\n      pixelRatio: renderer === 'svg' ? 1 : this.get('pixelRatio'),\n      renderer: renderer\n    });\n    this.set('canvas', canvas);\n  } // 初始化绘图区间\n  ;\n\n  _proto._initPlot = function _initPlot() {\n    var self = this;\n\n    self._initPlotBack(); // 最底层的是背景相关的 group\n\n\n    var canvas = self.get('canvas');\n    var backPlot = canvas.addGroup({\n      zIndex: 1\n    }); // 图表最后面的容器\n\n    var plotContainer = canvas.addGroup({\n      zIndex: 0\n    }); // 图表所在的容器\n\n    var frontPlot = canvas.addGroup({\n      zIndex: 3\n    }); // 图表前面的容器\n\n    self.set('backPlot', backPlot);\n    self.set('middlePlot', plotContainer);\n    self.set('frontPlot', frontPlot);\n  } // 初始化背景\n  ;\n\n  _proto._initPlotBack = function _initPlotBack() {\n    var self = this;\n    var canvas = self.get('canvas');\n    var viewTheme = self.get('viewTheme');\n    var plot = canvas.addGroup(Plot, {\n      padding: this.get('padding'),\n      plotBackground: Util.mix({}, viewTheme.plotBackground, self.get('plotBackground')),\n      background: Util.mix({}, viewTheme.background, self.get('background'))\n    });\n    self.set('plot', plot);\n    self.set('plotRange', plot.get('plotRange'));\n  };\n\n  _proto._initEvents = function _initEvents() {\n    if (this.get('forceFit')) {\n      window.addEventListener('resize', Util.wrapBehavior(this, '_initForceFitEvent'));\n    }\n  };\n\n  _proto._initForceFitEvent = function _initForceFitEvent() {\n    var timer = setTimeout(Util.wrapBehavior(this, 'forceFit'), 200);\n    clearTimeout(this.get('resizeTimer'));\n    this.set('resizeTimer', timer);\n  } // 绘制图例\n  ;\n\n  _proto._renderLegends = function _renderLegends() {\n    var options = this.get('options');\n    var legendOptions = options.legends;\n\n    if (Util.isNil(legendOptions) || legendOptions !== false) {\n      // 没有关闭图例\n      var legendController = this.get('legendController');\n      legendController.options = legendOptions || {};\n      legendController.plotRange = this.get('plotRange');\n\n      if (legendOptions && legendOptions.custom) {\n        // 用户自定义图例\n        legendController.addCustomLegend();\n      } else {\n        var geoms = this.getAllGeoms();\n        var scales = [];\n        Util.each(geoms, function (geom) {\n          var view = geom.get('view');\n          var attrs = geom.getAttrsForLegend();\n          Util.each(attrs, function (attr) {\n            var type = attr.type;\n            var scale = attr.getScale(type);\n\n            if (scale.field && scale.type !== 'identity' && !_isScaleExist(scales, scale)) {\n              scales.push(scale);\n              var filteredValues = view.getFilteredOutValues(scale.field);\n              legendController.addLegend(scale, attr, geom, filteredValues);\n            }\n          });\n        }); // 双轴的情况\n\n        var yScales = this.getYScales();\n\n        if (scales.length === 0 && yScales.length > 1) {\n          legendController.addMixedLegend(yScales, geoms);\n        }\n      }\n\n      legendController.alignLegends();\n    }\n  } // 绘制 tooltip\n  ;\n\n  _proto._renderTooltips = function _renderTooltips() {\n    var options = this.get('options');\n\n    if (Util.isNil(options.tooltip) || options.tooltip !== false) {\n      // 用户没有关闭 tooltip\n      var tooltipController = this.get('tooltipController');\n      tooltipController.options = options.tooltip || {};\n      tooltipController.renderTooltip();\n    }\n  }\n  /**\n   * 获取所有的几何标记\n   * @return {Array} 所有的几何标记\n   */\n  ;\n\n  _proto.getAllGeoms = function getAllGeoms() {\n    var geoms = [];\n    geoms = geoms.concat(this.get('geoms'));\n    var views = this.get('views');\n    Util.each(views, function (view) {\n      geoms = geoms.concat(view.get('geoms'));\n    });\n    return geoms;\n  }\n  /**\n   * 自适应宽度\n   * @chainable\n   * @return {Chart} 图表对象\n   */\n  ;\n\n  _proto.forceFit = function forceFit() {\n    var self = this;\n\n    if (!self || self.destroyed) {\n      return;\n    }\n\n    var container = self.get('container');\n    var oldWidth = self.get('width');\n    var width = DomUtil.getWidth(container, oldWidth);\n\n    if (width !== 0 && width !== oldWidth) {\n      var height = self.get('height');\n      self.changeSize(width, height);\n    }\n\n    return self;\n  };\n\n  _proto.resetPlot = function resetPlot() {\n    var plot = this.get('plot');\n    var padding = this.get('padding');\n\n    if (!isEqualArray(padding, plot.get('padding'))) {\n      // 重置 padding，仅当padding 发生更改\n      plot.set('padding', padding);\n      plot.repaint();\n    }\n  }\n  /**\n   * 改变大小\n   * @param  {Number} width  图表宽度\n   * @param  {Number} height 图表高度\n   * @return {Chart} 图表对象\n   */\n  ;\n\n  _proto.changeSize = function changeSize(width, height) {\n    var self = this;\n    var canvas = self.get('canvas');\n    canvas.changeSize(width, height);\n    var plot = this.get('plot');\n    self.set('width', width);\n    self.set('height', height); // change size 时重新计算边框\n\n    plot.repaint(); // 保持边框不变，防止自动 padding 时绘制多遍\n\n    this.set('keepPadding', true);\n    self.repaint();\n    this.set('keepPadding', false);\n    this.emit('afterchangesize');\n    return self;\n  }\n  /**\n   * 改变宽度\n   * @param  {Number} width  图表宽度\n   * @return {Chart} 图表对象\n   */\n  ;\n\n  _proto.changeWidth = function changeWidth(width) {\n    return this.changeSize(width, this.get('height'));\n  }\n  /**\n   * 改变宽度\n   * @param  {Number} height  图表高度\n   * @return {Chart} 图表对象\n   */\n  ;\n\n  _proto.changeHeight = function changeHeight(height) {\n    return this.changeSize(this.get('width'), height);\n  }\n  /**\n   * 创建一个视图\n   * @param  {Object} cfg 视图的配置项\n   * @return {View} 视图对象\n   */\n  ;\n\n  _proto.view = function view(cfg) {\n    cfg = cfg || {};\n    cfg.theme = this.get('theme');\n    cfg.parent = this;\n    cfg.backPlot = this.get('backPlot');\n    cfg.middlePlot = this.get('middlePlot');\n    cfg.frontPlot = this.get('frontPlot');\n    cfg.canvas = this.get('canvas');\n\n    if (Util.isNil(cfg.animate)) {\n      cfg.animate = this.get('animate');\n    }\n\n    cfg.options = Util.mix({}, this._getSharedOptions(), cfg.options);\n    var view = new View(cfg);\n    view.set('_id', 'view' + this.get('views').length); // 标识 ID，防止同用户设定的 id 重名\n\n    this.get('views').push(view);\n    this.emit('addview', {\n      view: view\n    });\n    return view;\n  } // isShapeInView() {\n  //   return true;\n  // }\n  ;\n\n  _proto.removeView = function removeView(view) {\n    var views = this.get('views');\n    Util.Array.remove(views, view);\n    view.destroy();\n  };\n\n  _proto._getSharedOptions = function _getSharedOptions() {\n    var options = this.get('options');\n    var sharedOptions = {};\n    Util.each(['scales', 'coord', 'axes'], function (name) {\n      sharedOptions[name] = Util.cloneDeep(options[name]);\n    });\n    return sharedOptions;\n  }\n  /**\n   * @override\n   * 当前chart 的范围\n   */\n  ;\n\n  _proto.getViewRegion = function getViewRegion() {\n    var plotRange = this.get('plotRange');\n    return {\n      start: plotRange.bl,\n      end: plotRange.tr\n    };\n  }\n  /**\n   * 设置图例配置信息\n   * @param  {String|Object} field 字段名\n   * @param  {Object} [cfg] 图例的配置项\n   * @return {Chart} 当前的图表对象\n   */\n  ;\n\n  _proto.legend = function legend(field, cfg) {\n    var options = this.get('options');\n\n    if (!options.legends) {\n      options.legends = {};\n    }\n\n    var legends = {};\n\n    if (field === false) {\n      options.legends = false;\n    } else if (Util.isObject(field)) {\n      legends = field;\n    } else if (Util.isString(field)) {\n      legends[field] = cfg;\n    } else {\n      legends = cfg;\n    }\n\n    Util.mix(options.legends, legends);\n    return this;\n  }\n  /**\n   * 设置提示信息\n   * @param  {String|Object} visible 是否可见\n   * @param  {Object} [cfg] 提示信息的配置项\n   * @return {Chart} 当前的图表对象\n   */\n  ;\n\n  _proto.tooltip = function tooltip(visible, cfg) {\n    var options = this.get('options');\n\n    if (!options.tooltip) {\n      options.tooltip = {};\n    }\n\n    if (visible === false) {\n      options.tooltip = false;\n    } else if (Util.isObject(visible)) {\n      Util.mix(options.tooltip, visible);\n    } else {\n      Util.mix(options.tooltip, cfg);\n    }\n\n    return this;\n  }\n  /**\n   * 清空图表\n   * @return {Chart} 当前的图表对象\n   */\n  ;\n\n  _proto.clear = function clear() {\n    this.emit('beforeclear');\n    var views = this.get('views');\n\n    while (views.length > 0) {\n      var view = views.shift();\n      view.destroy();\n    }\n\n    _View.prototype.clear.call(this);\n\n    var canvas = this.get('canvas');\n    this.resetPlot();\n    canvas.draw();\n    this.emit('afterclear');\n    return this;\n  };\n\n  _proto.clearInner = function clearInner() {\n    var views = this.get('views');\n    Util.each(views, function (view) {\n      view.clearInner();\n    });\n    var tooltipController = this.get('tooltipController');\n    tooltipController && tooltipController.clear();\n\n    if (!this.get('keepLegend')) {\n      var legendController = this.get('legendController');\n      legendController && legendController.clear();\n    }\n\n    _View.prototype.clearInner.call(this);\n  } // chart 除了view 上绘制的组件外，还会绘制图例和 tooltip\n  ;\n\n  _proto.drawComponents = function drawComponents() {\n    _View.prototype.drawComponents.call(this); // 一般是点击图例时，仅仅隐藏某些选项，而不销毁图例\n\n\n    if (!this.get('keepLegend')) {\n      this._renderLegends(); // 渲染图例\n\n    }\n  }\n  /**\n   * 绘制图表\n   * @override\n   */\n  ;\n\n  _proto.render = function render() {\n    var self = this; // 需要自动计算边框，则重新设置\n\n    if (!self.get('keepPadding') && self._isAutoPadding()) {\n      self.beforeRender(); // 初始化各个 view 和 绘制\n\n      self.drawComponents();\n\n      var autoPadding = self._getAutoPadding();\n\n      var plot = self.get('plot'); // 在计算出来的边框不一致的情况，重新改变边框\n\n      if (!isEqualArray(plot.get('padding'), autoPadding)) {\n        plot.set('padding', autoPadding);\n        plot.repaint();\n      }\n    }\n\n    var middlePlot = self.get('middlePlot');\n\n    if (self.get('limitInPlot') && !middlePlot.attr('clip')) {\n      var clip = Util.getClipByRange(self.get('plotRange')); // TODO Polar coord\n\n      middlePlot.attr('clip', clip); // clip.attr('fill', 'grey');\n      // clip.attr('opacity', 0.5);\n      // middlePlot.add(clip);\n    }\n\n    _View.prototype.render.call(this);\n\n    self._renderTooltips(); // 渲染 tooltip\n\n  };\n\n  _proto.repaint = function repaint() {\n    // 重绘时需要判定当前的 padding 是否发生过改变，如果发生过改变进行调整\n    // 需要判定是否使用了自动 padding\n    if (!this.get('keepPadding')) {\n      this.resetPlot();\n    }\n\n    _View.prototype.repaint.call(this);\n  }\n  /**\n   * @override\n   * 显示或者隐藏\n   */\n  ;\n\n  _proto.changeVisible = function changeVisible(visible) {\n    var wrapperEl = this.get('wrapperEl');\n    var visibleStr = visible ? '' : 'none';\n    wrapperEl.style.display = visibleStr;\n  }\n  /**\n   * 返回图表的 dataUrl 用于生成图片\n   * @return {String} dataUrl 路径\n   */\n  ;\n\n  _proto.toDataURL = function toDataURL() {\n    var chart = this;\n    var canvas = chart.get('canvas');\n    var renderer = chart.get('renderer');\n    var canvasDom = canvas.get('el');\n    var dataURL = '';\n\n    if (renderer === 'svg') {\n      var clone = canvasDom.cloneNode(true);\n      var svgDocType = document.implementation.createDocumentType('svg', '-//W3C//DTD SVG 1.1//EN', 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd');\n      var svgDoc = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg', svgDocType);\n      svgDoc.replaceChild(clone, svgDoc.documentElement);\n      var svgData = new XMLSerializer().serializeToString(svgDoc);\n      dataURL = 'data:image/svg+xml;charset=utf8,' + encodeURIComponent(svgData);\n    } else if (renderer === 'canvas') {\n      dataURL = canvasDom.toDataURL('image/png');\n    }\n\n    return dataURL;\n  }\n  /**\n   * 图表导出功能\n   * @param  {String} [name] 图片的名称，默认为 chart(.png|.svg)\n   */\n  ;\n\n  _proto.downloadImage = function downloadImage(name) {\n    var chart = this;\n    var link = document.createElement('a');\n    var renderer = chart.get('renderer');\n    var filename = (name || 'chart') + (renderer === 'svg' ? '.svg' : '.png');\n    var canvas = chart.get('canvas');\n    canvas.get('timeline').stopAllAnimations();\n    setTimeout(function () {\n      var dataURL = chart.toDataURL();\n\n      if (window.Blob && window.URL && renderer !== 'svg') {\n        var arr = dataURL.split(',');\n        var mime = arr[0].match(/:(.*?);/)[1];\n        var bstr = atob(arr[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n\n        var blobObj = new Blob([u8arr], {\n          type: mime\n        });\n\n        if (window.navigator.msSaveBlob) {\n          window.navigator.msSaveBlob(blobObj, filename);\n        } else {\n          link.addEventListener('click', function () {\n            link.download = filename;\n            link.href = window.URL.createObjectURL(blobObj);\n          });\n        }\n      } else {\n        link.addEventListener('click', function () {\n          link.download = filename;\n          link.href = dataURL;\n        });\n      }\n\n      var e = document.createEvent('MouseEvents');\n      e.initEvent('click', false, false);\n      link.dispatchEvent(e);\n    }, 16);\n  }\n  /**\n   * 根据坐标点显示对应的 tooltip\n   * @param  {Object} point 画布上的点\n   * @return {Chart}       返回 chart 实例\n   */\n  ;\n\n  _proto.showTooltip = function showTooltip(point) {\n    var views = this.getViewsByPoint(point);\n\n    if (views.length) {\n      var tooltipController = this.get('tooltipController');\n      tooltipController.showTooltip(point, views);\n    }\n\n    return this;\n  }\n  /**\n   * 将tooltip 锁定到当前位置不能移动\n   * @return {Chart}       返回 chart 实例\n   */\n  ;\n\n  _proto.lockTooltip = function lockTooltip() {\n    var tooltipController = this.get('tooltipController');\n    tooltipController.lockTooltip();\n    return this;\n  }\n  /**\n   * 将tooltip 锁定解除\n   * @return {Chart}       返回 chart 实例\n   */\n  ;\n\n  _proto.unlockTooltip = function unlockTooltip() {\n    var tooltipController = this.get('tooltipController');\n    tooltipController.unlockTooltip();\n    return this;\n  }\n  /**\n   * 隐藏 tooltip\n  * @return {Chart}       返回 chart 实例\n   */\n  ;\n\n  _proto.hideTooltip = function hideTooltip() {\n    var tooltipController = this.get('tooltipController');\n    tooltipController.hideTooltip();\n    return this;\n  }\n  /**\n   * 根据传入的画布坐标，获取该处的 tooltip 上的记录信息\n   * @param  {Object} point 画布坐标点\n   * @return {Array}       返回结果\n   */\n  ;\n\n  _proto.getTooltipItems = function getTooltipItems(point) {\n    var self = this;\n    var views = self.getViewsByPoint(point);\n    var rst = [];\n    Util.each(views, function (view) {\n      var geoms = view.get('geoms');\n      Util.each(geoms, function (geom) {\n        var dataArray = geom.get('dataArray');\n        var items = [];\n        Util.each(dataArray, function (data) {\n          var tmpPoint = geom.findPoint(point, data);\n\n          if (tmpPoint) {\n            var subItems = geom.getTipItems(tmpPoint);\n            items = items.concat(subItems);\n          }\n        });\n        rst = rst.concat(items);\n      });\n    });\n    return rst;\n  }\n  /**\n   * @override\n   * 销毁图表\n   */\n  ;\n\n  _proto.destroy = function destroy() {\n    this.emit('beforedestroy');\n    clearTimeout(this.get('resizeTimer'));\n    var canvas = this.get('canvas');\n    var wrapperEl = this.get('wrapperEl');\n    wrapperEl.parentNode.removeChild(wrapperEl);\n\n    _View.prototype.destroy.call(this);\n\n    canvas.destroy();\n    window.removeEventListener('resize', Util.getWrapBehavior(this, '_initForceFitEvent'));\n    this.emit('afterdestroy');\n  };\n\n  return Chart;\n}(View);\n\nmodule.exports = Chart;"]}]}