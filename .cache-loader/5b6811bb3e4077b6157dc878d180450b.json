{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\shape\\path.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\shape\\path.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { __assign, __extends } from \"tslib\";\r\nimport { each, isArray, isObject } from '@antv/util';\r\nimport { SVG_ATTR_MAP } from '../constant';\r\nimport ShapeBase from './base';\r\nvar Path = (function (_super) {\r\n    __extends(Path, _super);\r\n    function Path() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.type = 'path';\r\n        _this.canFill = true;\r\n        _this.canStroke = true;\r\n        return _this;\r\n    }\r\n    Path.prototype.getDefaultAttrs = function () {\r\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\r\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\r\n    };\r\n    Path.prototype.createPath = function (context, targetAttrs) {\r\n        var _this = this;\r\n        var attrs = this.attr();\r\n        var el = this.get('el');\r\n        each(targetAttrs || attrs, function (value, attr) {\r\n            if (attr === 'path' && isArray(value)) {\r\n                el.setAttribute('d', _this._formatPath(value));\r\n            }\r\n            else if (attr === 'startArrow' || attr === 'endArrow') {\r\n                if (value) {\r\n                    var id = isObject(value)\r\n                        ? context.addArrow(attrs, SVG_ATTR_MAP[attr])\r\n                        : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\r\n                    el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\r\n                }\r\n                else {\r\n                    el.removeAttribute(SVG_ATTR_MAP[attr]);\r\n                }\r\n            }\r\n            else if (SVG_ATTR_MAP[attr]) {\r\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\r\n            }\r\n        });\r\n    };\r\n    Path.prototype._formatPath = function (value) {\r\n        var newValue = value\r\n            .map(function (path) {\r\n            return path.join(' ');\r\n        })\r\n            .join('');\r\n        if (~newValue.indexOf('NaN')) {\r\n            return '';\r\n        }\r\n        return newValue;\r\n    };\r\n    Path.prototype.getTotalLength = function () {\r\n        var el = this.get('el');\r\n        return el ? el.getTotalLength() : null;\r\n    };\r\n    Path.prototype.getPoint = function (ratio) {\r\n        var el = this.get('el');\r\n        var totalLength = this.getTotalLength();\r\n        var point = el ? el.getPointAtLength(ratio * totalLength) : null;\r\n        return point\r\n            ? {\r\n                x: point.x,\r\n                y: point.y,\r\n            }\r\n            : null;\r\n    };\r\n    return Path;\r\n}(ShapeBase));\r\nexport default Path;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\shape\\path.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g-svg\\esm\\shape\\path.js"],"names":[],"mappings":"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","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { each, isArray, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'path';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Path.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    Path.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'path' && isArray(value)) {\n                el.setAttribute('d', _this._formatPath(value));\n            }\n            else if (attr === 'startArrow' || attr === 'endArrow') {\n                if (value) {\n                    var id = isObject(value)\n                        ? context.addArrow(attrs, SVG_ATTR_MAP[attr])\n                        : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n                    el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n                }\n                else {\n                    el.removeAttribute(SVG_ATTR_MAP[attr]);\n                }\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Path.prototype._formatPath = function (value) {\n        var newValue = value\n            .map(function (path) {\n            return path.join(' ');\n        })\n            .join('');\n        if (~newValue.indexOf('NaN')) {\n            return '';\n        }\n        return newValue;\n    };\n    /**\n     * Get total length of path\n     * 尽管通过浏览器的 SVGPathElement.getTotalLength() 接口获取的 path 长度，\n     * 与 Canvas 版本通过数学计算的方式得到的长度有一些细微差异，但最大误差在个位数像素，精度上可以能接受\n     * @return {number} length\n     */\n    Path.prototype.getTotalLength = function () {\n        var el = this.get('el');\n        return el ? el.getTotalLength() : null;\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Path.prototype.getPoint = function (ratio) {\n        var el = this.get('el');\n        var totalLength = this.getTotalLength();\n        var point = el ? el.getPointAtLength(ratio * totalLength) : null;\n        return point\n            ? {\n                x: point.x,\n                y: point.y,\n            }\n            : null;\n    };\n    return Path;\n}(ShapeBase));\nexport default Path;\n//# sourceMappingURL=path.js.map"]}]}