{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\continuous.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\continuous.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\nvar Util = require('../util');\r\nvar Legend = require('./base');\r\nvar Event = Util.Event;\r\nvar Group = Util.Group;\r\nvar Slider = require('./slider');\r\nvar TRIGGER_WIDTH = 8;\r\nvar Continuous = function (_Legend) {\r\n    _inheritsLoose(Continuous, _Legend);\r\n    function Continuous() {\r\n        return _Legend.apply(this, arguments) || this;\r\n    }\r\n    var _proto = Continuous.prototype;\r\n    _proto.getDefaultCfg = function getDefaultCfg() {\r\n        var cfg = _Legend.prototype.getDefaultCfg.call(this);\r\n        return Util.mix({}, cfg, {\r\n            type: 'continuous-legend',\r\n            items: null,\r\n            layout: 'vertical',\r\n            width: 20,\r\n            height: 156,\r\n            textStyle: {\r\n                fill: '#333',\r\n                textAlign: 'center',\r\n                textBaseline: 'middle',\r\n                stroke: '#fff',\r\n                lineWidth: 5,\r\n                fontFamily: '\"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto,\"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",SimSun, \"sans-serif\"'\r\n            },\r\n            hoverTextStyle: {\r\n                fill: 'rgba(0,0,0,0.25)'\r\n            },\r\n            slidable: true,\r\n            triggerAttr: {\r\n                fill: '#fff',\r\n                shadowBlur: 10,\r\n                shadowColor: 'rgba(0,0,0,0.65)',\r\n                radius: 2\r\n            },\r\n            _range: [0, 100],\r\n            middleBackgroundStyle: {\r\n                fill: '#D9D9D9'\r\n            },\r\n            textOffset: 4,\r\n            lineStyle: {\r\n                lineWidth: 1,\r\n                stroke: '#fff'\r\n            },\r\n            pointerStyle: {\r\n                fill: 'rgb(230, 230, 230)'\r\n            }\r\n        });\r\n    };\r\n    _proto._calStartPoint = function _calStartPoint() {\r\n        var start = {\r\n            x: 10,\r\n            y: this.get('titleGap') - TRIGGER_WIDTH\r\n        };\r\n        var titleShape = this.get('titleShape');\r\n        if (titleShape) {\r\n            var titleBox = titleShape.getBBox();\r\n            start.y += titleBox.height;\r\n        }\r\n        return start;\r\n    };\r\n    _proto.beforeRender = function beforeRender() {\r\n        var items = this.get('items');\r\n        if (!Util.isArray(items) || Util.isEmpty(items)) {\r\n            return;\r\n        }\r\n        _Legend.prototype.beforeRender.call(this);\r\n        this.set('firstItem', items[0]);\r\n        this.set('lastItem', items[items.length - 1]);\r\n    };\r\n    _proto._formatItemValue = function _formatItemValue(value) {\r\n        var formatter = this.get('formatter') || this.get('itemFormatter');\r\n        if (formatter) {\r\n            value = formatter.call(this, value);\r\n        }\r\n        return value;\r\n    };\r\n    _proto.render = function render() {\r\n        _Legend.prototype.render.call(this);\r\n        if (this.get('slidable')) {\r\n            this._renderSlider();\r\n        }\r\n        else {\r\n            this._renderUnslidable();\r\n        }\r\n    };\r\n    _proto._renderSlider = function _renderSlider() {\r\n        var minHandleElement = new Group();\r\n        var maxHandleElement = new Group();\r\n        var backgroundElement = new Group();\r\n        var start = this._calStartPoint();\r\n        var group = this.get('group');\r\n        var slider = group.addGroup(Slider, {\r\n            minHandleElement: minHandleElement,\r\n            maxHandleElement: maxHandleElement,\r\n            backgroundElement: backgroundElement,\r\n            layout: this.get('layout'),\r\n            range: this.get('_range'),\r\n            width: this.get('width'),\r\n            height: this.get('height')\r\n        });\r\n        slider.translate(start.x, start.y);\r\n        this.set('slider', slider);\r\n        var shape = this._renderSliderShape();\r\n        shape.attr('clip', slider.get('middleHandleElement'));\r\n        this._renderTrigger();\r\n    };\r\n    _proto._addMiddleBar = function _addMiddleBar(parent, name, attrs) {\r\n        parent.addShape(name, {\r\n            attrs: Util.mix({}, attrs, this.get('middleBackgroundStyle'))\r\n        });\r\n        return parent.addShape(name, {\r\n            attrs: attrs\r\n        });\r\n    };\r\n    _proto._renderTrigger = function _renderTrigger() {\r\n        var min = this.get('firstItem');\r\n        var max = this.get('lastItem');\r\n        var layout = this.get('layout');\r\n        var textStyle = this.get('textStyle');\r\n        var triggerAttr = this.get('triggerAttr');\r\n        var minBlockAttr = Util.mix({}, triggerAttr);\r\n        var maxBlockAttr = Util.mix({}, triggerAttr);\r\n        var minTextAttr = Util.mix({\r\n            text: this._formatItemValue(min.value) + ''\r\n        }, textStyle);\r\n        var maxTextAttr = Util.mix({\r\n            text: this._formatItemValue(max.value) + ''\r\n        }, textStyle);\r\n        if (layout === 'vertical') {\r\n            this._addVerticalTrigger('min', minBlockAttr, minTextAttr);\r\n            this._addVerticalTrigger('max', maxBlockAttr, maxTextAttr);\r\n        }\r\n        else {\r\n            this._addHorizontalTrigger('min', minBlockAttr, minTextAttr);\r\n            this._addHorizontalTrigger('max', maxBlockAttr, maxTextAttr);\r\n        }\r\n    };\r\n    _proto._addVerticalTrigger = function _addVerticalTrigger(type, blockAttr, textAttr) {\r\n        var slider = this.get('slider');\r\n        var trigger = slider.get(type + 'HandleElement');\r\n        var width = this.get('width');\r\n        var button = trigger.addShape('rect', {\r\n            attrs: Util.mix({\r\n                x: width / 2 - TRIGGER_WIDTH - 2,\r\n                y: type === 'min' ? 0 : -TRIGGER_WIDTH,\r\n                width: 2 * TRIGGER_WIDTH + 2,\r\n                height: TRIGGER_WIDTH\r\n            }, blockAttr)\r\n        });\r\n        var text = trigger.addShape('text', {\r\n            attrs: Util.mix(textAttr, {\r\n                x: width + this.get('textOffset'),\r\n                y: type === 'max' ? -4 : 4,\r\n                textAlign: 'start',\r\n                lineHeight: 1,\r\n                textBaseline: 'middle'\r\n            })\r\n        });\r\n        var layout = this.get('layout');\r\n        var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\r\n        button.attr('cursor', trigerCursor);\r\n        text.attr('cursor', trigerCursor);\r\n        this.set(type + 'ButtonElement', button);\r\n        this.set(type + 'TextElement', text);\r\n    };\r\n    _proto._addHorizontalTrigger = function _addHorizontalTrigger(type, blockAttr, textAttr) {\r\n        var slider = this.get('slider');\r\n        var trigger = slider.get(type + 'HandleElement');\r\n        var button = trigger.addShape('rect', {\r\n            attrs: Util.mix({\r\n                x: type === 'min' ? -TRIGGER_WIDTH : 0,\r\n                y: -TRIGGER_WIDTH - this.get('height') / 2,\r\n                width: TRIGGER_WIDTH,\r\n                height: 2 * TRIGGER_WIDTH\r\n            }, blockAttr)\r\n        });\r\n        var text = trigger.addShape('text', {\r\n            attrs: Util.mix(textAttr, {\r\n                x: type === 'min' ? -TRIGGER_WIDTH - 4 : TRIGGER_WIDTH + 4,\r\n                y: TRIGGER_WIDTH / 2 + this.get('textOffset') + 10,\r\n                textAlign: type === 'min' ? 'end' : 'start',\r\n                textBaseline: 'middle'\r\n            })\r\n        });\r\n        var layout = this.get('layout');\r\n        var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\r\n        button.attr('cursor', trigerCursor);\r\n        text.attr('cursor', trigerCursor);\r\n        this.set(type + 'ButtonElement', button);\r\n        this.set(type + 'TextElement', text);\r\n    };\r\n    _proto._bindEvents = function _bindEvents() {\r\n        var _this = this;\r\n        if (this.get('slidable')) {\r\n            var slider = this.get('slider');\r\n            slider.on('sliderchange', function (ev) {\r\n                var range = ev.range;\r\n                var firstItemValue = _this.get('firstItem').value;\r\n                var lastItemValue = _this.get('lastItem').value;\r\n                var minValue = firstItemValue + range[0] / 100 * (lastItemValue - firstItemValue);\r\n                var maxValue = firstItemValue + range[1] / 100 * (lastItemValue - firstItemValue);\r\n                _this._updateElement(minValue, maxValue);\r\n                var itemFiltered = new Event('itemfilter', ev, true, true);\r\n                itemFiltered.range = [minValue, maxValue];\r\n                _this.emit('itemfilter', itemFiltered);\r\n            });\r\n        }\r\n        if (this.get('hoverable')) {\r\n            this.get('group').on('mousemove', Util.wrapBehavior(this, '_onMouseMove'));\r\n            this.get('group').on('mouseleave', Util.wrapBehavior(this, '_onMouseLeave'));\r\n        }\r\n    };\r\n    _proto._updateElement = function _updateElement(min, max) {\r\n        var minTextElement = this.get('minTextElement');\r\n        var maxTextElement = this.get('maxTextElement');\r\n        if (max > 1) {\r\n            min = parseInt(min, 10);\r\n            max = parseInt(max, 10);\r\n        }\r\n        minTextElement.attr('text', this._formatItemValue(min) + '');\r\n        maxTextElement.attr('text', this._formatItemValue(max) + '');\r\n    };\r\n    _proto._onMouseLeave = function _onMouseLeave() {\r\n        var hoverPointer = this.get('group').findById('hoverPointer');\r\n        hoverPointer && hoverPointer.destroy();\r\n        var hoverText = this.get('group').findById('hoverText');\r\n        hoverText && hoverText.destroy();\r\n        this.get('canvas').draw();\r\n    };\r\n    _proto._onMouseMove = function _onMouseMove(ev) {\r\n        var height = this.get('height');\r\n        var width = this.get('width');\r\n        var items = this.get('items');\r\n        var el = this.get('canvas').get('el');\r\n        var el_bbox = el.getBoundingClientRect();\r\n        var bbox = this.get('group').getBBox();\r\n        var value;\r\n        if (this.get('layout') === 'vertical') {\r\n            var valuePadding = 5;\r\n            if (this.get('type') === 'color-legend') {\r\n                valuePadding = 30;\r\n            }\r\n            var titleOffset = this.get('titleGap');\r\n            var titleShape = this.get('titleShape');\r\n            if (titleShape)\r\n                titleOffset += titleShape.getBBox().maxY - titleShape.getBBox().minY;\r\n            var currentPage = ev.clientY || ev.event.clientY;\r\n            currentPage = currentPage - el_bbox.y - this.get('group').attr('matrix')[7] + bbox.y - valuePadding + titleOffset;\r\n            value = items[0].value + (1 - currentPage / height) * (items[items.length - 1].value - items[0].value);\r\n        }\r\n        else {\r\n            var _currentPage = ev.clientX || ev.event.clientX;\r\n            _currentPage = _currentPage - el_bbox.x - this.get('group').attr('matrix')[6];\r\n            value = items[0].value + _currentPage / width * (items[items.length - 1].value - items[0].value);\r\n        }\r\n        value = value.toFixed(2);\r\n        this.activate(value);\r\n        this.emit('mousehover', {\r\n            value: value\r\n        });\r\n    };\r\n    _proto.activate = function activate(value) {\r\n        if (!value) {\r\n            return;\r\n        }\r\n        var hoverPointer = this.get('group').findById('hoverPointer');\r\n        var hoverText = this.get('group').findById('hoverText');\r\n        var items = this.get('items');\r\n        if (value < items[0].value || value > items[items.length - 1].value) {\r\n            return;\r\n        }\r\n        var height = this.get('height');\r\n        var width = this.get('width');\r\n        var titleShape = this.get('titleShape');\r\n        var titleGap = this.get('titleGap');\r\n        var points = [];\r\n        var page = (value - items[0].value) / (items[items.length - 1].value - items[0].value);\r\n        var textStyle;\r\n        if (this.get('layout') === 'vertical') {\r\n            var paddingY = 0, paddingX = 0;\r\n            if (this.get('type') === 'color-legend') {\r\n                paddingY = titleGap;\r\n                if (titleShape)\r\n                    paddingY += titleShape.getBBox().height;\r\n            }\r\n            if (this.get('slidable')) {\r\n                if (this.get('type') === 'color-legend') {\r\n                    paddingY -= 13;\r\n                }\r\n                else {\r\n                    paddingY = titleGap - 15;\r\n                    if (titleShape)\r\n                        paddingY += titleShape.getBBox().height;\r\n                }\r\n                paddingX += 10;\r\n            }\r\n            page = (1 - page) * height;\r\n            points = [[paddingX, page + paddingY], [paddingX - 10, page + paddingY - 5], [paddingX - 10, page + paddingY + 5]];\r\n            textStyle = Util.mix({}, {\r\n                x: width + this.get('textOffset') / 2 + paddingX,\r\n                y: page + paddingY,\r\n                text: this._formatItemValue(value) + ''\r\n            }, this.get('textStyle'), {\r\n                textAlign: 'start'\r\n            });\r\n        }\r\n        else {\r\n            var _paddingY = 0, _paddingX = 0;\r\n            if (this.get('type') === 'color-legend') {\r\n                _paddingY = titleGap;\r\n                if (titleShape)\r\n                    _paddingY += titleShape.getBBox().height;\r\n            }\r\n            if (this.get('slidable')) {\r\n                if (this.get('type') === 'color-legend') {\r\n                    _paddingY -= 7;\r\n                }\r\n                else {\r\n                    _paddingY = titleGap;\r\n                    if (!titleShape)\r\n                        _paddingY -= 7;\r\n                }\r\n                _paddingX += 10;\r\n            }\r\n            page *= width;\r\n            points = [[page + _paddingX, _paddingY], [page + _paddingX - 5, _paddingY - 10], [page + _paddingX + 5, _paddingY - 10]];\r\n            textStyle = Util.mix({}, {\r\n                x: page - 5,\r\n                y: height + this.get('textOffset') + _paddingY,\r\n                text: this._formatItemValue(value) + ''\r\n            }, this.get('textStyle'));\r\n        }\r\n        var hoverTextStyle = Util.mix(textStyle, this.get('hoverTextStyle'));\r\n        if (!hoverText) {\r\n            hoverText = this.get('group').addShape('text', {\r\n                attrs: hoverTextStyle\r\n            });\r\n            hoverText.set('id', 'hoverText');\r\n        }\r\n        else {\r\n            hoverText.attr(hoverTextStyle);\r\n        }\r\n        if (!hoverPointer) {\r\n            hoverPointer = this.get('group').addShape('Polygon', {\r\n                attrs: Util.mix({\r\n                    points: points\r\n                }, this.get('pointerStyle'))\r\n            });\r\n            hoverPointer.set('id', 'hoverPointer');\r\n        }\r\n        else {\r\n            hoverPointer.attr(Util.mix({\r\n                points: points\r\n            }, this.get('pointerStyle')));\r\n        }\r\n        this.get('canvas').draw();\r\n    };\r\n    _proto.unactivate = function unactivate() {\r\n        var hoverPointer = this.get('group').findById('hoverPointer');\r\n        hoverPointer && hoverPointer.destroy();\r\n        var hoverText = this.get('group').findById('hoverText');\r\n        hoverText && hoverText.destroy();\r\n        this.get('canvas').draw();\r\n    };\r\n    return Continuous;\r\n}(Legend);\r\nmodule.exports = Continuous;\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\continuous.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2\\node_modules\\@antv\\component\\lib\\legend\\continuous.js"],"names":[],"mappings":"AAAA,SAAS,cAAc,CAAC,QAAQ,EAAE,UAAU,IAAI,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC;AAMvL,IAAI,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAG9B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAE/B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACvB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AAEvB,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAEjC,IAAI,aAAa,GAAG,CAAC,CAAC;AAEtB,IAAI,UAAU,GAEd,UAAU,OAAO;IACf,cAAc,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IAEpC,SAAS,UAAU;QACjB,OAAO,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC;IAChD,CAAC;IAED,IAAI,MAAM,GAAG,UAAU,CAAC,SAAS,CAAC;IAElC,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAErD,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE;YAKvB,IAAI,EAAE,mBAAmB;YAMzB,KAAK,EAAE,IAAI;YAQX,MAAM,EAAE,UAAU;YAMlB,KAAK,EAAE,EAAE;YAMT,MAAM,EAAE,GAAG;YAMX,SAAS,EAAE;gBACT,IAAI,EAAE,MAAM;gBACZ,SAAS,EAAE,QAAQ;gBACnB,YAAY,EAAE,QAAQ;gBACtB,MAAM,EAAE,MAAM;gBACd,SAAS,EAAE,CAAC;gBACZ,UAAU,EAAE,gKAAgK;aAC7K;YACD,cAAc,EAAE;gBACd,IAAI,EAAE,kBAAkB;aACzB;YAMD,QAAQ,EAAE,IAAI;YAMd,WAAW,EAAE;gBACX,IAAI,EAAE,MAAM;gBAGZ,UAAU,EAAE,EAAE;gBACd,WAAW,EAAE,kBAAkB;gBAC/B,MAAM,EAAE,CAAC;aACV;YAMD,MAAM,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;YAMhB,qBAAqB,EAAE;gBACrB,IAAI,EAAE,SAAS;aAChB;YAMD,UAAU,EAAE,CAAC;YAMb,SAAS,EAAE;gBACT,SAAS,EAAE,CAAC;gBACZ,MAAM,EAAE,MAAM;aACf;YAMD,YAAY,EAAE;gBAEZ,IAAI,EAAE,oBAAoB;aAC3B;SACF,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc;QAC7C,IAAI,KAAK,GAAG;YACV,CAAC,EAAE,EAAE;YACL,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,aAAa;SACxC,CAAC;QACF,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAExC,IAAI,UAAU,EAAE;YACd,IAAI,QAAQ,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC;YACpC,KAAK,CAAC,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC;SAC5B;QAED,OAAO,KAAK,CAAC;IACf,CAAC,CAAC;IAEF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY;QACzC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YAC/C,OAAO;SACR;QAED,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE1C,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;IAChD,CAAC,CAAC;IAEF,MAAM,CAAC,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,KAAK;QACvD,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAEnE,IAAI,SAAS,EAAE;YACb,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SACrC;QAED,OAAO,KAAK,CAAC;IACf,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM;QAC7B,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;YACxB,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;aAAM;YACL,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,gBAAgB,GAAG,IAAI,KAAK,EAAE,CAAC;QACnC,IAAI,gBAAgB,GAAG,IAAI,KAAK,EAAE,CAAC;QACnC,IAAI,iBAAiB,GAAG,IAAI,KAAK,EAAE,CAAC;QAEpC,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAElC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE;YAClC,gBAAgB,EAAE,gBAAgB;YAClC,gBAAgB,EAAE,gBAAgB;YAClC,iBAAiB,EAAE,iBAAiB;YACpC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC1B,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;YACzB,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;YACxB,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;SAC3B,CAAC,CAAC;QACH,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAE3B,IAAI,KAAK,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAEtC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAEtD,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC,CAAC;IAGF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK;QAE/D,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;YACpB,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;SAC9D,CAAC,CAAC;QAEH,OAAO,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;YAC3B,KAAK,EAAE,KAAK;SACb,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc;QAC7C,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC/B,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC1C,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;QAC7C,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;QAC7C,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC;YACzB,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE;SAC5C,EAAE,SAAS,CAAC,CAAC;QACd,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC;YACzB,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE;SAC5C,EAAE,SAAS,CAAC,CAAC;QAEd,IAAI,MAAM,KAAK,UAAU,EAAE;YACzB,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC;YAE3D,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC;SAC5D;aAAM;YACL,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC;YAE7D,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC;SAC9D;IACH,CAAC,CAAC;IAEF,MAAM,CAAC,mBAAmB,GAAG,SAAS,mBAAmB,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ;QACjF,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,eAAe,CAAC,CAAC;QACjD,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE;YACpC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC;gBACd,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,aAAa,GAAG,CAAC;gBAChC,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa;gBACtC,KAAK,EAAE,CAAC,GAAG,aAAa,GAAG,CAAC;gBAC5B,MAAM,EAAE,aAAa;aACtB,EAAE,SAAS,CAAC;SACd,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE;YAClC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;gBACxB,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC;gBACjC,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1B,SAAS,EAAE,OAAO;gBAClB,UAAU,EAAE,CAAC;gBACb,YAAY,EAAE,QAAQ;aACvB,CAAC;SACH,CAAC,CAAC;QACH,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,YAAY,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC;QACrE,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAClC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,eAAe,EAAE,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,aAAa,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC,CAAC;IAEF,MAAM,CAAC,qBAAqB,GAAG,SAAS,qBAAqB,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ;QACrF,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,eAAe,CAAC,CAAC;QACjD,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE;YACpC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC;gBACd,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBACtC,CAAC,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC;gBAC1C,KAAK,EAAE,aAAa;gBACpB,MAAM,EAAE,CAAC,GAAG,aAAa;aAC1B,EAAE,SAAS,CAAC;SACd,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE;YAClC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;gBACxB,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC;gBAC1D,CAAC,EAAE,aAAa,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE;gBAClD,SAAS,EAAE,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO;gBAC3C,YAAY,EAAE,QAAQ;aACvB,CAAC;SACH,CAAC,CAAC;QACH,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,YAAY,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC;QACrE,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAClC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,eAAe,EAAE,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,aAAa,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC,CAAC;IAEF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW;QACvC,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;YACxB,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAChC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,UAAU,EAAE;gBACpC,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;gBAErB,IAAI,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;gBAElD,IAAI,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;gBAEhD,IAAI,QAAQ,GAAG,cAAc,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,aAAa,GAAG,cAAc,CAAC,CAAC;gBAClF,IAAI,QAAQ,GAAG,cAAc,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,aAAa,GAAG,cAAc,CAAC,CAAC;gBAElF,KAAK,CAAC,cAAc,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAEzC,IAAI,YAAY,GAAG,IAAI,KAAK,CAAC,YAAY,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;gBAC3D,YAAY,CAAC,KAAK,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAE1C,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;SACJ;QAED,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;YACzB,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC,CAAC;YAC3E,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC,CAAC;SAC9E;IACH,CAAC,CAAC;IAGF,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc,CAAC,GAAG,EAAE,GAAG;QACtD,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAChD,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAEhD,IAAI,GAAG,GAAG,CAAC,EAAE;YAEX,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;YACxB,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;SACzB;QAED,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;QAC7D,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;IAC/D,CAAC,CAAC;IAEF,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC9D,YAAY,IAAI,YAAY,CAAC,OAAO,EAAE,CAAC;QACvC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QACxD,SAAS,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC,CAAC;IAGF,MAAM,CAAC,YAAY,GAAG,SAAS,YAAY,CAAC,EAAE;QAC5C,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,OAAO,GAAG,EAAE,CAAC,qBAAqB,EAAE,CAAC;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;QACvC,IAAI,KAAK,CAAC;QAEV,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,UAAU,EAAE;YACrC,IAAI,YAAY,GAAG,CAAC,CAAC;YAErB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,cAAc,EAAE;gBACvC,YAAY,GAAG,EAAE,CAAC;aACnB;YAED,IAAI,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACvC,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YACxC,IAAI,UAAU;gBAAE,WAAW,IAAI,UAAU,CAAC,OAAO,EAAE,CAAC,IAAI,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACrF,IAAI,WAAW,GAAG,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;YACjD,WAAW,GAAG,WAAW,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,YAAY,GAAG,WAAW,CAAC;YAClH,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SACxG;aAAM;YACL,IAAI,YAAY,GAAG,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;YAElD,YAAY,GAAG,YAAY,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9E,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,YAAY,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SAClG;QAED,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,KAAK,EAAE,KAAK;SACb,CAAC,CAAC;IACL,CAAC,CAAC;IAGF,MAAM,CAAC,QAAQ,GAAG,SAAS,QAAQ,CAAC,KAAK;QACvC,IAAI,CAAC,KAAK,EAAE;YACV,OAAO;SACR;QAED,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QACxD,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE;YACnE,OAAO;SACR;QAED,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACxC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACpC,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,IAAI,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACvF,IAAI,SAAS,CAAC;QAEd,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,UAAU,EAAE;YAErC,IAAI,QAAQ,GAAG,CAAC,EACZ,QAAQ,GAAG,CAAC,CAAC;YAEjB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,cAAc,EAAE;gBACvC,QAAQ,GAAG,QAAQ,CAAC;gBACpB,IAAI,UAAU;oBAAE,QAAQ,IAAI,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;aACzD;YAED,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBACxB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,cAAc,EAAE;oBACvC,QAAQ,IAAI,EAAE,CAAC;iBAChB;qBAAM;oBACL,QAAQ,GAAG,QAAQ,GAAG,EAAE,CAAC;oBACzB,IAAI,UAAU;wBAAE,QAAQ,IAAI,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;iBACzD;gBAED,QAAQ,IAAI,EAAE,CAAC;aAChB;YAED,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,MAAM,CAAC;YAC3B,MAAM,GAAG,CAAC,CAAC,QAAQ,EAAE,IAAI,GAAG,QAAQ,CAAC,EAAE,CAAC,QAAQ,GAAG,EAAE,EAAE,IAAI,GAAG,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,QAAQ,GAAG,EAAE,EAAE,IAAI,GAAG,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;YACnH,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;gBACvB,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,QAAQ;gBAChD,CAAC,EAAE,IAAI,GAAG,QAAQ;gBAClB,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,EAAE;aAExC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;gBACxB,SAAS,EAAE,OAAO;aACnB,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,SAAS,GAAG,CAAC,EACb,SAAS,GAAG,CAAC,CAAC;YAElB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,cAAc,EAAE;gBACvC,SAAS,GAAG,QAAQ,CAAC;gBACrB,IAAI,UAAU;oBAAE,SAAS,IAAI,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;aAC1D;YAED,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBACxB,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,cAAc,EAAE;oBAEvC,SAAS,IAAI,CAAC,CAAC;iBAChB;qBAAM;oBACL,SAAS,GAAG,QAAQ,CAAC;oBACrB,IAAI,CAAC,UAAU;wBAAE,SAAS,IAAI,CAAC,CAAC;iBACjC;gBAED,SAAS,IAAI,EAAE,CAAC;aACjB;YAED,IAAI,IAAI,KAAK,CAAC;YACd,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,SAAS,EAAE,SAAS,CAAC,EAAE,CAAC,IAAI,GAAG,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,GAAG,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,EAAE,CAAC,CAAC,CAAC;YACzH,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;gBACvB,CAAC,EAAE,IAAI,GAAG,CAAC;gBACX,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,SAAS;gBAC9C,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,EAAE;aAExC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;SAC3B;QAED,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAErE,IAAI,CAAC,SAAS,EAAE;YAEd,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAM,EAAE;gBAC7C,KAAK,EAAE,cAAc;aACtB,CAAC,CAAC;YACH,SAAS,CAAC,GAAG,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;SAClC;aAAM;YAEL,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAChC;QAED,IAAI,CAAC,YAAY,EAAE;YAEjB,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,SAAS,EAAE;gBACnD,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC;oBACd,MAAM,EAAE,MAAM;iBACf,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;aAC7B,CAAC,CAAC;YACH,YAAY,CAAC,GAAG,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;SACxC;aAAM;YAEL,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACzB,MAAM,EAAE,MAAM;aACf,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;SAC/B;QAED,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC,CAAC;IAEF,MAAM,CAAC,UAAU,GAAG,SAAS,UAAU;QACrC,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC9D,YAAY,IAAI,YAAY,CAAC,OAAO,EAAE,CAAC;QACvC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QACxD,SAAS,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC,CAAC;IAEF,OAAO,UAAU,CAAC;AACpB,CAAC,CAAC,MAAM,CAAC,CAAC;AAEV,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/**\n * @fileOverview The base class of continuous legend\n * @author sima.zhang\n */\nvar Util = require('../util'); // const Global = require('../../global');\n\n\nvar Legend = require('./base');\n\nvar Event = Util.Event;\nvar Group = Util.Group;\n\nvar Slider = require('./slider');\n\nvar TRIGGER_WIDTH = 8;\n\nvar Continuous =\n/*#__PURE__*/\nfunction (_Legend) {\n  _inheritsLoose(Continuous, _Legend);\n\n  function Continuous() {\n    return _Legend.apply(this, arguments) || this;\n  }\n\n  var _proto = Continuous.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _Legend.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * 类型\n       * @type {String}\n       */\n      type: 'continuous-legend',\n\n      /**\n       * 子项\n       * @type {Array}\n       */\n      items: null,\n\n      /**\n       * 布局方式\n       * horizontal 水平\n       * vertical 垂直\n       * @type {String}\n       */\n      layout: 'vertical',\n\n      /**\n       * 宽度\n       * @type {Number}\n       */\n      width: 20,\n\n      /**\n       * 高度\n       * @type {Number}\n       */\n      height: 156,\n\n      /**\n       * 默认文本图形属性\n       * @type {ATTRS}\n       */\n      textStyle: {\n        fill: '#333',\n        textAlign: 'center',\n        textBaseline: 'middle',\n        stroke: '#fff',\n        lineWidth: 5,\n        fontFamily: '\"-apple-system\", BlinkMacSystemFont, \"Segoe UI\", Roboto,\"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",SimSun, \"sans-serif\"'\n      },\n      hoverTextStyle: {\n        fill: 'rgba(0,0,0,0.25)'\n      },\n\n      /**\n       * 连续图例是否可滑动\n       * @type {Boolean}\n       */\n      slidable: true,\n\n      /**\n       * 两头滑块的样式\n       * @type {object}\n       */\n      triggerAttr: {\n        fill: '#fff',\n        // shadowOffsetX: -2,\n        // shadowOffsetY: 2,\n        shadowBlur: 10,\n        shadowColor: 'rgba(0,0,0,0.65)',\n        radius: 2\n      },\n\n      /**\n       * slider 的范围\n       * @type {array}}\n       */\n      _range: [0, 100],\n\n      /**\n       * 中间 bar 背景灰色\n       * @type {ATTRS}\n       */\n      middleBackgroundStyle: {\n        fill: '#D9D9D9'\n      },\n\n      /**\n       * 文本与图例间距\n       * @type {Number}\n       */\n      textOffset: 4,\n\n      /**\n       * line segment to seperate the unslidable slider blocks\n       * @type {object}\n       */\n      lineStyle: {\n        lineWidth: 1,\n        stroke: '#fff'\n      },\n\n      /**\n       * the pointer while activate the legend by mouse hovering or called by outside\n       * @type {object}\n       */\n      pointerStyle: {\n        // color: '#ccc',\n        fill: 'rgb(230, 230, 230)'\n      }\n    });\n  };\n\n  _proto._calStartPoint = function _calStartPoint() {\n    var start = {\n      x: 10,\n      y: this.get('titleGap') - TRIGGER_WIDTH\n    };\n    var titleShape = this.get('titleShape');\n\n    if (titleShape) {\n      var titleBox = titleShape.getBBox();\n      start.y += titleBox.height;\n    }\n\n    return start;\n  };\n\n  _proto.beforeRender = function beforeRender() {\n    var items = this.get('items');\n\n    if (!Util.isArray(items) || Util.isEmpty(items)) {\n      return;\n    }\n\n    _Legend.prototype.beforeRender.call(this);\n\n    this.set('firstItem', items[0]);\n    this.set('lastItem', items[items.length - 1]);\n  };\n\n  _proto._formatItemValue = function _formatItemValue(value) {\n    var formatter = this.get('formatter') || this.get('itemFormatter');\n\n    if (formatter) {\n      value = formatter.call(this, value);\n    }\n\n    return value;\n  };\n\n  _proto.render = function render() {\n    _Legend.prototype.render.call(this);\n\n    if (this.get('slidable')) {\n      this._renderSlider();\n    } else {\n      this._renderUnslidable();\n    }\n  };\n\n  _proto._renderSlider = function _renderSlider() {\n    var minHandleElement = new Group();\n    var maxHandleElement = new Group();\n    var backgroundElement = new Group();\n\n    var start = this._calStartPoint();\n\n    var group = this.get('group');\n    var slider = group.addGroup(Slider, {\n      minHandleElement: minHandleElement,\n      maxHandleElement: maxHandleElement,\n      backgroundElement: backgroundElement,\n      layout: this.get('layout'),\n      range: this.get('_range'),\n      width: this.get('width'),\n      height: this.get('height')\n    });\n    slider.translate(start.x, start.y);\n    this.set('slider', slider);\n\n    var shape = this._renderSliderShape();\n\n    shape.attr('clip', slider.get('middleHandleElement'));\n\n    this._renderTrigger();\n  }; // the middle bar\n\n\n  _proto._addMiddleBar = function _addMiddleBar(parent, name, attrs) {\n    // background of the middle bar\n    parent.addShape(name, {\n      attrs: Util.mix({}, attrs, this.get('middleBackgroundStyle'))\n    }); // frontground of the middle bar\n\n    return parent.addShape(name, {\n      attrs: attrs\n    });\n  };\n\n  _proto._renderTrigger = function _renderTrigger() {\n    var min = this.get('firstItem');\n    var max = this.get('lastItem');\n    var layout = this.get('layout');\n    var textStyle = this.get('textStyle');\n    var triggerAttr = this.get('triggerAttr');\n    var minBlockAttr = Util.mix({}, triggerAttr);\n    var maxBlockAttr = Util.mix({}, triggerAttr);\n    var minTextAttr = Util.mix({\n      text: this._formatItemValue(min.value) + ''\n    }, textStyle);\n    var maxTextAttr = Util.mix({\n      text: this._formatItemValue(max.value) + ''\n    }, textStyle);\n\n    if (layout === 'vertical') {\n      this._addVerticalTrigger('min', minBlockAttr, minTextAttr);\n\n      this._addVerticalTrigger('max', maxBlockAttr, maxTextAttr);\n    } else {\n      this._addHorizontalTrigger('min', minBlockAttr, minTextAttr);\n\n      this._addHorizontalTrigger('max', maxBlockAttr, maxTextAttr);\n    }\n  };\n\n  _proto._addVerticalTrigger = function _addVerticalTrigger(type, blockAttr, textAttr) {\n    var slider = this.get('slider');\n    var trigger = slider.get(type + 'HandleElement');\n    var width = this.get('width');\n    var button = trigger.addShape('rect', {\n      attrs: Util.mix({\n        x: width / 2 - TRIGGER_WIDTH - 2,\n        y: type === 'min' ? 0 : -TRIGGER_WIDTH,\n        width: 2 * TRIGGER_WIDTH + 2,\n        height: TRIGGER_WIDTH\n      }, blockAttr)\n    });\n    var text = trigger.addShape('text', {\n      attrs: Util.mix(textAttr, {\n        x: width + this.get('textOffset'),\n        y: type === 'max' ? -4 : 4,\n        textAlign: 'start',\n        lineHeight: 1,\n        textBaseline: 'middle'\n      })\n    });\n    var layout = this.get('layout');\n    var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\n    button.attr('cursor', trigerCursor);\n    text.attr('cursor', trigerCursor);\n    this.set(type + 'ButtonElement', button);\n    this.set(type + 'TextElement', text);\n  };\n\n  _proto._addHorizontalTrigger = function _addHorizontalTrigger(type, blockAttr, textAttr) {\n    var slider = this.get('slider');\n    var trigger = slider.get(type + 'HandleElement');\n    var button = trigger.addShape('rect', {\n      attrs: Util.mix({\n        x: type === 'min' ? -TRIGGER_WIDTH : 0,\n        y: -TRIGGER_WIDTH - this.get('height') / 2,\n        width: TRIGGER_WIDTH,\n        height: 2 * TRIGGER_WIDTH\n      }, blockAttr)\n    });\n    var text = trigger.addShape('text', {\n      attrs: Util.mix(textAttr, {\n        x: type === 'min' ? -TRIGGER_WIDTH - 4 : TRIGGER_WIDTH + 4,\n        y: TRIGGER_WIDTH / 2 + this.get('textOffset') + 10,\n        textAlign: type === 'min' ? 'end' : 'start',\n        textBaseline: 'middle'\n      })\n    });\n    var layout = this.get('layout');\n    var trigerCursor = layout === 'vertical' ? 'ns-resize' : 'ew-resize';\n    button.attr('cursor', trigerCursor);\n    text.attr('cursor', trigerCursor);\n    this.set(type + 'ButtonElement', button);\n    this.set(type + 'TextElement', text);\n  };\n\n  _proto._bindEvents = function _bindEvents() {\n    var _this = this;\n\n    if (this.get('slidable')) {\n      var slider = this.get('slider');\n      slider.on('sliderchange', function (ev) {\n        var range = ev.range;\n\n        var firstItemValue = _this.get('firstItem').value;\n\n        var lastItemValue = _this.get('lastItem').value;\n\n        var minValue = firstItemValue + range[0] / 100 * (lastItemValue - firstItemValue);\n        var maxValue = firstItemValue + range[1] / 100 * (lastItemValue - firstItemValue);\n\n        _this._updateElement(minValue, maxValue);\n\n        var itemFiltered = new Event('itemfilter', ev, true, true);\n        itemFiltered.range = [minValue, maxValue];\n\n        _this.emit('itemfilter', itemFiltered);\n      });\n    }\n\n    if (this.get('hoverable')) {\n      this.get('group').on('mousemove', Util.wrapBehavior(this, '_onMouseMove'));\n      this.get('group').on('mouseleave', Util.wrapBehavior(this, '_onMouseLeave'));\n    }\n  }; // update the text of min and max trigger\n\n\n  _proto._updateElement = function _updateElement(min, max) {\n    var minTextElement = this.get('minTextElement');\n    var maxTextElement = this.get('maxTextElement');\n\n    if (max > 1) {\n      // 对于大于 1 的值，默认显示为整数\n      min = parseInt(min, 10);\n      max = parseInt(max, 10);\n    }\n\n    minTextElement.attr('text', this._formatItemValue(min) + '');\n    maxTextElement.attr('text', this._formatItemValue(max) + '');\n  };\n\n  _proto._onMouseLeave = function _onMouseLeave() {\n    var hoverPointer = this.get('group').findById('hoverPointer');\n    hoverPointer && hoverPointer.destroy();\n    var hoverText = this.get('group').findById('hoverText');\n    hoverText && hoverText.destroy();\n    this.get('canvas').draw();\n  }; // activate the legend while mouse moving\n\n\n  _proto._onMouseMove = function _onMouseMove(ev) {\n    var height = this.get('height');\n    var width = this.get('width');\n    var items = this.get('items');\n    var el = this.get('canvas').get('el');\n    var el_bbox = el.getBoundingClientRect();\n    var bbox = this.get('group').getBBox();\n    var value;\n\n    if (this.get('layout') === 'vertical') {\n      var valuePadding = 5;\n\n      if (this.get('type') === 'color-legend') {\n        valuePadding = 30;\n      }\n\n      var titleOffset = this.get('titleGap');\n      var titleShape = this.get('titleShape');\n      if (titleShape) titleOffset += titleShape.getBBox().maxY - titleShape.getBBox().minY;\n      var currentPage = ev.clientY || ev.event.clientY;\n      currentPage = currentPage - el_bbox.y - this.get('group').attr('matrix')[7] + bbox.y - valuePadding + titleOffset;\n      value = items[0].value + (1 - currentPage / height) * (items[items.length - 1].value - items[0].value);\n    } else {\n      var _currentPage = ev.clientX || ev.event.clientX;\n\n      _currentPage = _currentPage - el_bbox.x - this.get('group').attr('matrix')[6];\n      value = items[0].value + _currentPage / width * (items[items.length - 1].value - items[0].value);\n    }\n\n    value = value.toFixed(2);\n    this.activate(value);\n    this.emit('mousehover', {\n      value: value\n    });\n  }; // activated by mouse moving or being called\n\n\n  _proto.activate = function activate(value) {\n    if (!value) {\n      return;\n    }\n\n    var hoverPointer = this.get('group').findById('hoverPointer');\n    var hoverText = this.get('group').findById('hoverText');\n    var items = this.get('items');\n\n    if (value < items[0].value || value > items[items.length - 1].value) {\n      return;\n    }\n\n    var height = this.get('height');\n    var width = this.get('width');\n    var titleShape = this.get('titleShape');\n    var titleGap = this.get('titleGap');\n    var points = [];\n    var page = (value - items[0].value) / (items[items.length - 1].value - items[0].value);\n    var textStyle;\n\n    if (this.get('layout') === 'vertical') {\n      // revise the offset\n      var paddingY = 0,\n          paddingX = 0;\n\n      if (this.get('type') === 'color-legend') {\n        paddingY = titleGap;\n        if (titleShape) paddingY += titleShape.getBBox().height;\n      }\n\n      if (this.get('slidable')) {\n        if (this.get('type') === 'color-legend') {\n          paddingY -= 13;\n        } else {\n          paddingY = titleGap - 15;\n          if (titleShape) paddingY += titleShape.getBBox().height;\n        }\n\n        paddingX += 10;\n      }\n\n      page = (1 - page) * height;\n      points = [[paddingX, page + paddingY], [paddingX - 10, page + paddingY - 5], [paddingX - 10, page + paddingY + 5]];\n      textStyle = Util.mix({}, {\n        x: width + this.get('textOffset') / 2 + paddingX,\n        y: page + paddingY,\n        text: this._formatItemValue(value) + '' // 以字符串格式展示\n\n      }, this.get('textStyle'), {\n        textAlign: 'start'\n      });\n    } else {\n      var _paddingY = 0,\n          _paddingX = 0;\n\n      if (this.get('type') === 'color-legend') {\n        _paddingY = titleGap;\n        if (titleShape) _paddingY += titleShape.getBBox().height;\n      }\n\n      if (this.get('slidable')) {\n        if (this.get('type') === 'color-legend') {\n          // hoverPointer三角形的高\n          _paddingY -= 7;\n        } else {\n          _paddingY = titleGap;\n          if (!titleShape) _paddingY -= 7;\n        }\n\n        _paddingX += 10;\n      }\n\n      page *= width;\n      points = [[page + _paddingX, _paddingY], [page + _paddingX - 5, _paddingY - 10], [page + _paddingX + 5, _paddingY - 10]];\n      textStyle = Util.mix({}, {\n        x: page - 5,\n        y: height + this.get('textOffset') + _paddingY,\n        text: this._formatItemValue(value) + '' // 以字符串格式展示\n\n      }, this.get('textStyle'));\n    }\n\n    var hoverTextStyle = Util.mix(textStyle, this.get('hoverTextStyle'));\n\n    if (!hoverText) {\n      // mouse enter the legend, add hoverText\n      hoverText = this.get('group').addShape('text', {\n        attrs: hoverTextStyle\n      });\n      hoverText.set('id', 'hoverText');\n    } else {\n      // mouse move, update hoverText\n      hoverText.attr(hoverTextStyle);\n    }\n\n    if (!hoverPointer) {\n      // mouse enter the legend, add hoverPointer\n      hoverPointer = this.get('group').addShape('Polygon', {\n        attrs: Util.mix({\n          points: points\n        }, this.get('pointerStyle'))\n      });\n      hoverPointer.set('id', 'hoverPointer');\n    } else {\n      // mouse move, update hoverPointer\n      hoverPointer.attr(Util.mix({\n        points: points\n      }, this.get('pointerStyle')));\n    }\n\n    this.get('canvas').draw();\n  };\n\n  _proto.unactivate = function unactivate() {\n    var hoverPointer = this.get('group').findById('hoverPointer');\n    hoverPointer && hoverPointer.destroy();\n    var hoverText = this.get('group').findById('hoverText');\n    hoverText && hoverText.destroy();\n    this.get('canvas').draw();\n  };\n\n  return Continuous;\n}(Legend);\n\nmodule.exports = Continuous;"]}]}