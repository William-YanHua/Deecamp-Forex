{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/mini.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/mini.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar CanvasTooltip = require('./canvas');\nvar _require = require('../const'), FONT_FAMILY = _require.FONT_FAMILY;\nvar DomUtil = Util.DomUtil;\nvar MatrixUtil = Util.MatrixUtil;\nvar MiniTooltip = function (_CanvasTooltip) {\n    _inheritsLoose(MiniTooltip, _CanvasTooltip);\n    var _super = _createSuper(MiniTooltip);\n    function MiniTooltip() {\n        return _CanvasTooltip.apply(this, arguments) || this;\n    }\n    var _proto = MiniTooltip.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _CanvasTooltip.prototype.getDefaultCfg.call(this);\n        return Util.mix({}, cfg, {\n            boardStyle: {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n                radius: 3\n            },\n            valueStyle: {\n                x: 0,\n                y: 0,\n                text: '',\n                fontFamily: FONT_FAMILY,\n                fontSize: 12,\n                stroke: '#fff',\n                lineWidth: 2,\n                fill: 'black',\n                textBaseline: 'top',\n                textAlign: 'start'\n            },\n            padding: {\n                top: 5,\n                right: 5,\n                bottom: 0,\n                left: 5\n            },\n            triangleWidth: 10,\n            triangleHeight: 4\n        });\n    };\n    _proto._init_ = function _init_() {\n        var self = this;\n        var padding = self.get('padding');\n        var parent = self.get('frontPlot');\n        var container = parent.addGroup();\n        self.set('container', container);\n        var board = container.addShape('rect', {\n            attrs: Util.mix({}, self.get('boardStyle'))\n        });\n        self.set('board', board);\n        var triangleShape = container.addShape('path', {\n            attrs: {\n                fill: self.get('boardStyle').fill\n            }\n        });\n        self.set('triangleShape', triangleShape);\n        var itemGroup = container.addGroup();\n        itemGroup.move(padding.left, padding.top);\n        var valueShape = itemGroup.addShape('text', {\n            attrs: Util.mix({}, self.get('valueStyle'))\n        });\n        self.set('valueShape', valueShape);\n    };\n    _proto.render = function render() {\n        var self = this;\n        self.clear();\n        var board = self.get('board');\n        var valueShape = self.get('valueShape');\n        var padding = self.get('padding');\n        var item = self.get('items')[0];\n        if (valueShape) {\n            valueShape.attr('text', item.value);\n        }\n        var bbox = valueShape ? valueShape.getBBox() : {\n            width: 80,\n            height: 30\n        };\n        var width = padding.left + bbox.width + padding.right;\n        var height = padding.top + bbox.height + padding.bottom;\n        board.attr('width', width);\n        board.attr('height', height);\n        self._centerTriangleShape();\n    };\n    _proto.clear = function clear() {\n        var valueShape = this.get('valueShape');\n        valueShape.attr('text', '');\n    };\n    _proto.setPosition = function setPosition(x, y, target) {\n        var self = this;\n        var container = self.get('container');\n        var plotRange = self.get('plotRange');\n        var bbox = container.getBBox();\n        var width = bbox.width;\n        var height = bbox.height;\n        x -= width / 2;\n        if (target && (target.name === 'point' || target.name === 'interval')) {\n            var targetY = target.getBBox().y;\n            y = targetY;\n        }\n        y -= height;\n        if (this.get('inPlot')) {\n            if (x < plotRange.tl.x) {\n                x = plotRange.tl.x;\n                self._leftTriangleShape();\n            }\n            else if (x + width / 2 > plotRange.tr.x) {\n                x = plotRange.tr.x - width;\n                self._rightTriangleShape();\n            }\n            else {\n                self._centerTriangleShape();\n            }\n            if (y < plotRange.tl.y) {\n                y = plotRange.tl.y;\n            }\n            else if (y + height > plotRange.bl.y) {\n                y = plotRange.bl.y - height;\n            }\n        }\n        else {\n            var outterNode = this.get('canvas').get('el');\n            var viewWidth = DomUtil.getWidth(outterNode);\n            var viewHeight = DomUtil.getHeight(outterNode);\n            if (x < 0) {\n                x = 0;\n                self._leftTriangleShape();\n            }\n            else if (x + width / 2 > viewWidth) {\n                x = viewWidth - width;\n                self._rightTriangleShape();\n            }\n            else {\n                self._centerTriangleShape();\n            }\n            if (y < 0) {\n                y = 0;\n            }\n            else if (y + height > viewHeight) {\n                y = viewHeight - height;\n            }\n        }\n        var ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        var mat = MatrixUtil.transform(ulMatrix, [['t', x, y]]);\n        container.stopAnimate();\n        container.animate({\n            matrix: mat\n        }, this.get('animationDuration'));\n    };\n    _proto._centerTriangleShape = function _centerTriangleShape() {\n        var triangle = this.get('triangleShape');\n        var width = this.get('triangleWidth');\n        var height = this.get('triangleHeight');\n        var boardBBox = this.get('board').getBBox();\n        var boardWidth = boardBBox.width;\n        var boardHeight = boardBBox.height;\n        var pathArray = [['M', 0, 0], ['L', width, 0], ['L', width / 2, height], ['L', 0, 0], ['Z']];\n        triangle.attr('path', pathArray);\n        triangle.move(boardWidth / 2 - width / 2, boardHeight - 1);\n    };\n    _proto._leftTriangleShape = function _leftTriangleShape() {\n        var triangle = this.get('triangleShape');\n        var width = this.get('triangleWidth');\n        var height = this.get('triangleHeight');\n        var boardBBox = this.get('board').getBBox();\n        var boardHeight = boardBBox.height;\n        var pathArray = [['M', 0, 0], ['L', width, 0], ['L', 0, height + 3], ['L', 0, 0], ['Z']];\n        triangle.attr('path', pathArray);\n        triangle.move(0, boardHeight - 3);\n    };\n    _proto._rightTriangleShape = function _rightTriangleShape() {\n        var triangle = this.get('triangleShape');\n        var width = this.get('triangleWidth');\n        var height = this.get('triangleHeight');\n        var boardBBox = this.get('board').getBBox();\n        var boardWidth = boardBBox.width;\n        var boardHeight = boardBBox.height;\n        var pathArray = [['M', 0, 0], ['L', width, 0], ['L', width, height + 4], ['L', 0, 0], ['Z']];\n        triangle.attr('path', pathArray);\n        triangle.move(boardWidth - width - 1, boardHeight - 4);\n    };\n    return MiniTooltip;\n}(CanvasTooltip);\nmodule.exports = MiniTooltip;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/mini.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/tooltip/mini.js"],"names":[],"mappings":"AAAA,SAAS,YAAY,CAAC,OAAO,IAAI,OAAO,cAAc,IAAI,KAAK,GAAG,eAAe,CAAC,OAAO,CAAC,EAAE,MAAM,CAAC,CAAC,IAAI,yBAAyB,EAAE,EAAE;IAAE,IAAI,SAAS,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC;IAAC,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;CAAE;KAAM;IAAE,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CAAE,CAAC,OAAO,0BAA0B,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAE1V,SAAS,0BAA0B,CAAC,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,UAAU,CAAC,EAAE;IAAE,OAAO,IAAI,CAAC;CAAE,CAAC,OAAO,sBAAsB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAE/K,SAAS,sBAAsB,CAAC,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;IAAE,MAAM,IAAI,cAAc,CAAC,2DAA2D,CAAC,CAAC;CAAE,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC;AAEtK,SAAS,yBAAyB,KAAK,IAAI,OAAO,OAAO,KAAK,WAAW,IAAI,CAAC,OAAO,CAAC,SAAS;IAAE,OAAO,KAAK,CAAC,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI;IAAE,OAAO,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,KAAK,UAAU;IAAE,OAAO,IAAI,CAAC,CAAC,IAAI;IAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,cAAa,CAAC,CAAC,CAAC,CAAC;IAAC,OAAO,IAAI,CAAC;CAAE;AAAC,OAAO,CAAC,EAAE;IAAE,OAAO,KAAK,CAAC;CAAE,CAAC,CAAC;AAEpU,SAAS,eAAe,CAAC,CAAC,IAAI,eAAe,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,eAAe,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,SAAS,IAAI,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAE7M,SAAS,cAAc,CAAC,QAAQ,EAAE,UAAU,IAAI,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,CAAC,QAAQ,CAAC,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC;AAEvL,IAAI,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAE9B,IAAI,aAAa,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAExC,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,EAC9B,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC;AAEvC,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC3B,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AAEjC,IAAI,WAAW,GAAgB,UAAU,cAAc;IACrD,cAAc,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC;IAE5C,IAAI,MAAM,GAAG,YAAY,CAAC,WAAW,CAAC,CAAC;IAEvC,SAAS,WAAW;QAClB,OAAO,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC;IACvD,CAAC;IAED,IAAI,MAAM,GAAG,WAAW,CAAC,SAAS,CAAC;IAEnC,MAAM,CAAC,aAAa,GAAG,SAAS,aAAa;QAC3C,IAAI,GAAG,GAAG,cAAc,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5D,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE;YAKvB,UAAU,EAAE;gBACV,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;gBACJ,KAAK,EAAE,CAAC;gBACR,MAAM,EAAE,CAAC;gBAET,MAAM,EAAE,CAAC;aACV;YAMD,UAAU,EAAE;gBACV,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;gBACJ,IAAI,EAAE,EAAE;gBACR,UAAU,EAAE,WAAW;gBACvB,QAAQ,EAAE,EAAE;gBACZ,MAAM,EAAE,MAAM;gBACd,SAAS,EAAE,CAAC;gBACZ,IAAI,EAAE,OAAO;gBACb,YAAY,EAAE,KAAK;gBACnB,SAAS,EAAE,OAAO;aACnB;YAMD,OAAO,EAAE;gBACP,GAAG,EAAE,CAAC;gBACN,KAAK,EAAE,CAAC;gBACR,MAAM,EAAE,CAAC;gBACT,IAAI,EAAE,CAAC;aACR;YACD,aAAa,EAAE,EAAE;YACjB,cAAc,EAAE,CAAC;SAClB,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM;QAC7B,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAEnC,IAAI,SAAS,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QAClC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAEjC,IAAI,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YACrC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;SAC5C,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAEzB,IAAI,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YAC7C,KAAK,EAAE;gBACL,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI;aAClC;SACF,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;QAEzC,IAAI,SAAS,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;QACrC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;QAE1C,IAAI,UAAU,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YAC1C,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;SAC5C,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;IACrC,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,SAAS,MAAM;QAC7B,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC9B,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACxC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAClC,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAEhC,IAAI,UAAU,EAAE;YACd,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SACrC;QAGD,IAAI,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAC7C,KAAK,EAAE,EAAE;YACT,MAAM,EAAE,EAAE;SACX,CAAC;QACF,IAAI,KAAK,GAAG,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QACtD,IAAI,MAAM,GAAG,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QACxD,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC3B,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAE7B,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC,CAAC;IAEF,MAAM,CAAC,KAAK,GAAG,SAAS,KAAK;QAC3B,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACxC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IAC9B,CAAC,CAAC;IAEF,MAAM,CAAC,WAAW,GAAG,SAAS,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM;QACpD,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,IAAI,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC;QAC/B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QACzB,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;QAEf,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,OAAO,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,EAAE;YACrE,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YACjC,CAAC,GAAG,OAAO,CAAC;SACb;QAED,CAAC,IAAI,MAAM,CAAC;QAEZ,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YAEtB,IAAI,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE;gBACtB,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;gBAEnB,IAAI,CAAC,kBAAkB,EAAE,CAAC;aAC3B;iBAAM,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE;gBACzC,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC;gBAE3B,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC5B;iBAAM;gBACL,IAAI,CAAC,oBAAoB,EAAE,CAAC;aAC7B;YAED,IAAI,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE;gBACtB,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;aACpB;iBAAM,IAAI,CAAC,GAAG,MAAM,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE;gBACtC,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC;aAC7B;SACF;aAAM;YAEL,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9C,IAAI,SAAS,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAC7C,IAAI,UAAU,GAAG,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YAE/C,IAAI,CAAC,GAAG,CAAC,EAAE;gBACT,CAAC,GAAG,CAAC,CAAC;gBAEN,IAAI,CAAC,kBAAkB,EAAE,CAAC;aAC3B;iBAAM,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,SAAS,EAAE;gBACpC,CAAC,GAAG,SAAS,GAAG,KAAK,CAAC;gBAEtB,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC5B;iBAAM;gBACL,IAAI,CAAC,oBAAoB,EAAE,CAAC;aAC7B;YAED,IAAI,CAAC,GAAG,CAAC,EAAE;gBACT,CAAC,GAAG,CAAC,CAAC;aACP;iBAAM,IAAI,CAAC,GAAG,MAAM,GAAG,UAAU,EAAE;gBAClC,CAAC,GAAG,UAAU,GAAG,MAAM,CAAC;aACzB;SACF;QAED,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3C,IAAI,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACxD,SAAS,CAAC,WAAW,EAAE,CAAC;QACxB,SAAS,CAAC,OAAO,CAAC;YAChB,MAAM,EAAE,GAAG;SACZ,EAAE,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;IACpC,CAAC,CAAC;IAEF,MAAM,CAAC,oBAAoB,GAAG,SAAS,oBAAoB;QACzD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACzC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACxC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;QAC5C,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC;QACjC,IAAI,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC;QACnC,IAAI,SAAS,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7F,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACjC,QAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,WAAW,GAAG,CAAC,CAAC,CAAC;IAC7D,CAAC,CAAC;IAEF,MAAM,CAAC,kBAAkB,GAAG,SAAS,kBAAkB;QACrD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACzC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACxC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;QAC5C,IAAI,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC;QACnC,IAAI,SAAS,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QACzF,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACjC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,WAAW,GAAG,CAAC,CAAC,CAAC;IACpC,CAAC,CAAC;IAEF,MAAM,CAAC,mBAAmB,GAAG,SAAS,mBAAmB;QACvD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACzC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACxC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;QAC5C,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC;QACjC,IAAI,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC;QACnC,IAAI,SAAS,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7F,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACjC,QAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,KAAK,GAAG,CAAC,EAAE,WAAW,GAAG,CAAC,CAAC,CAAC;IACzD,CAAC,CAAC;IAEF,OAAO,WAAW,CAAC;AACrB,CAAC,CAAC,aAAa,CAAC,CAAC;AAEjB,MAAM,CAAC,OAAO,GAAG,WAAW,CAAC","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar CanvasTooltip = require('./canvas');\n\nvar _require = require('../const'),\n    FONT_FAMILY = _require.FONT_FAMILY;\n\nvar DomUtil = Util.DomUtil;\nvar MatrixUtil = Util.MatrixUtil;\n\nvar MiniTooltip = /*#__PURE__*/function (_CanvasTooltip) {\n  _inheritsLoose(MiniTooltip, _CanvasTooltip);\n\n  var _super = _createSuper(MiniTooltip);\n\n  function MiniTooltip() {\n    return _CanvasTooltip.apply(this, arguments) || this;\n  }\n\n  var _proto = MiniTooltip.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    var cfg = _CanvasTooltip.prototype.getDefaultCfg.call(this);\n\n    return Util.mix({}, cfg, {\n      /**\n       * 默认背景板样式\n       * @type {Object}\n       */\n      boardStyle: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        // fill: 'rgba(50, 50, 50, 1)',\n        radius: 3\n      },\n\n      /**\n       * 默认value样式\n       * @type {Object}\n       * */\n      valueStyle: {\n        x: 0,\n        y: 0,\n        text: '',\n        fontFamily: FONT_FAMILY,\n        fontSize: 12,\n        stroke: '#fff',\n        lineWidth: 2,\n        fill: 'black',\n        textBaseline: 'top',\n        textAlign: 'start'\n      },\n\n      /**\n       * 默认padding值\n       * @type {Object}\n       */\n      padding: {\n        top: 5,\n        right: 5,\n        bottom: 0,\n        left: 5\n      },\n      triangleWidth: 10,\n      triangleHeight: 4\n    });\n  };\n\n  _proto._init_ = function _init_() {\n    var self = this;\n    var padding = self.get('padding');\n    var parent = self.get('frontPlot'); // container\n\n    var container = parent.addGroup();\n    self.set('container', container); // board\n\n    var board = container.addShape('rect', {\n      attrs: Util.mix({}, self.get('boardStyle'))\n    });\n    self.set('board', board); // triangleShpe\n\n    var triangleShape = container.addShape('path', {\n      attrs: {\n        fill: self.get('boardStyle').fill\n      }\n    });\n    self.set('triangleShape', triangleShape); // itemGroup\n\n    var itemGroup = container.addGroup();\n    itemGroup.move(padding.left, padding.top); // value\n\n    var valueShape = itemGroup.addShape('text', {\n      attrs: Util.mix({}, self.get('valueStyle'))\n    });\n    self.set('valueShape', valueShape);\n  };\n\n  _proto.render = function render() {\n    var self = this;\n    self.clear();\n    var board = self.get('board');\n    var valueShape = self.get('valueShape');\n    var padding = self.get('padding');\n    var item = self.get('items')[0];\n\n    if (valueShape) {\n      valueShape.attr('text', item.value);\n    } // update board based on bbox\n\n\n    var bbox = valueShape ? valueShape.getBBox() : {\n      width: 80,\n      height: 30\n    };\n    var width = padding.left + bbox.width + padding.right;\n    var height = padding.top + bbox.height + padding.bottom;\n    board.attr('width', width);\n    board.attr('height', height); // update triangle shape\n\n    self._centerTriangleShape();\n  };\n\n  _proto.clear = function clear() {\n    var valueShape = this.get('valueShape');\n    valueShape.attr('text', '');\n  };\n\n  _proto.setPosition = function setPosition(x, y, target) {\n    var self = this;\n    var container = self.get('container');\n    var plotRange = self.get('plotRange');\n    var bbox = container.getBBox();\n    var width = bbox.width;\n    var height = bbox.height;\n    x -= width / 2;\n\n    if (target && (target.name === 'point' || target.name === 'interval')) {\n      var targetY = target.getBBox().y;\n      y = targetY;\n    }\n\n    y -= height;\n\n    if (this.get('inPlot')) {\n      // constrain in plot\n      if (x < plotRange.tl.x) {\n        x = plotRange.tl.x;\n\n        self._leftTriangleShape();\n      } else if (x + width / 2 > plotRange.tr.x) {\n        x = plotRange.tr.x - width;\n\n        self._rightTriangleShape();\n      } else {\n        self._centerTriangleShape();\n      }\n\n      if (y < plotRange.tl.y) {\n        y = plotRange.tl.y;\n      } else if (y + height > plotRange.bl.y) {\n        y = plotRange.bl.y - height;\n      }\n    } else {\n      // constrain in dom\n      var outterNode = this.get('canvas').get('el');\n      var viewWidth = DomUtil.getWidth(outterNode);\n      var viewHeight = DomUtil.getHeight(outterNode);\n\n      if (x < 0) {\n        x = 0;\n\n        self._leftTriangleShape();\n      } else if (x + width / 2 > viewWidth) {\n        x = viewWidth - width;\n\n        self._rightTriangleShape();\n      } else {\n        self._centerTriangleShape();\n      }\n\n      if (y < 0) {\n        y = 0;\n      } else if (y + height > viewHeight) {\n        y = viewHeight - height;\n      }\n    }\n\n    var ulMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var mat = MatrixUtil.transform(ulMatrix, [['t', x, y]]);\n    container.stopAnimate();\n    container.animate({\n      matrix: mat\n    }, this.get('animationDuration'));\n  };\n\n  _proto._centerTriangleShape = function _centerTriangleShape() {\n    var triangle = this.get('triangleShape');\n    var width = this.get('triangleWidth');\n    var height = this.get('triangleHeight');\n    var boardBBox = this.get('board').getBBox();\n    var boardWidth = boardBBox.width;\n    var boardHeight = boardBBox.height;\n    var pathArray = [['M', 0, 0], ['L', width, 0], ['L', width / 2, height], ['L', 0, 0], ['Z']];\n    triangle.attr('path', pathArray);\n    triangle.move(boardWidth / 2 - width / 2, boardHeight - 1);\n  };\n\n  _proto._leftTriangleShape = function _leftTriangleShape() {\n    var triangle = this.get('triangleShape');\n    var width = this.get('triangleWidth');\n    var height = this.get('triangleHeight');\n    var boardBBox = this.get('board').getBBox();\n    var boardHeight = boardBBox.height;\n    var pathArray = [['M', 0, 0], ['L', width, 0], ['L', 0, height + 3], ['L', 0, 0], ['Z']];\n    triangle.attr('path', pathArray);\n    triangle.move(0, boardHeight - 3);\n  };\n\n  _proto._rightTriangleShape = function _rightTriangleShape() {\n    var triangle = this.get('triangleShape');\n    var width = this.get('triangleWidth');\n    var height = this.get('triangleHeight');\n    var boardBBox = this.get('board').getBBox();\n    var boardWidth = boardBBox.width;\n    var boardHeight = boardBBox.height;\n    var pathArray = [['M', 0, 0], ['L', width, 0], ['L', width, height + 4], ['L', 0, 0], ['Z']];\n    triangle.attr('path', pathArray);\n    triangle.move(boardWidth - width - 1, boardHeight - 4);\n  };\n\n  return MiniTooltip;\n}(CanvasTooltip);\n\nmodule.exports = MiniTooltip;"]}]}