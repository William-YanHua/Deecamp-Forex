{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip\\state.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip\\state.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["import { each, clone, isFunction, has } from '@antv/util';\r\nimport { compare } from '../../base/controller/state';\r\nvar POSITION_MAPPER = ['xField', 'yField', 'angleField'];\r\nfunction onActive(plot, condition) {\r\n    var props = plot.options;\r\n    if (shouldActive(props, condition)) {\r\n        var data = props.data;\r\n        each(data, function (d) {\r\n            if (compare(d, condition)) {\r\n                var point = plot.view.getXY(d);\r\n                plot.view.on('tooltip:create', function (e) {\r\n                    processState(condition, e, false);\r\n                });\r\n                plot.view.showTooltip(point);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction onDisable(plot, condition) {\r\n    plot.view.on('tooltip:change', function (e) {\r\n        processState(condition, e, true);\r\n    });\r\n}\r\nfunction processState(condition, e, inverse) {\r\n    var expected = inverse ? false : true;\r\n    var originItems = clone(e.items);\r\n    e.items.splice(0);\r\n    each(originItems, function (item) {\r\n        var origin = item.point._origin;\r\n        if (compare(origin, condition) === expected) {\r\n            e.items.push(item);\r\n        }\r\n    });\r\n}\r\nfunction shouldActive(props, condition) {\r\n    var fields = getPositionField(props);\r\n    return !isFunction(condition) && fields.indexOf(condition.name);\r\n}\r\nfunction getPositionField(props) {\r\n    var fields = [];\r\n    each(POSITION_MAPPER, function (v) {\r\n        if (has(props, v)) {\r\n            fields.push(v);\r\n        }\r\n    });\r\n    return fields;\r\n}\r\nexport default {\r\n    active: onActive,\r\n    selected: onActive,\r\n    disable: onDisable,\r\n};\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip\\state.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\g2plot\\esm\\components\\tooltip\\state.js"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,EAAE,MAAM,YAAY,CAAC;AAC1D,OAAO,EAAE,OAAO,EAAE,MAAM,6BAA6B,CAAC;AACtD,IAAI,eAAe,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAC;AACzD,SAAS,QAAQ,CAAC,IAAI,EAAE,SAAS;IAC7B,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC;IAEzB,IAAI,YAAY,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE;QAChC,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;QACtB,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC;YAClB,IAAI,OAAO,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE;gBACvB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAE/B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,EAAE,UAAU,CAAC;oBACtC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;gBACtC,CAAC,CAAC,CAAC;gBACH,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;aAChC;QACL,CAAC,CAAC,CAAC;KACN;AACL,CAAC;AACD,SAAS,SAAS,CAAC,IAAI,EAAE,SAAS;IAC9B,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,EAAE,UAAU,CAAC;QACtC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC;AACP,CAAC;AACD,SAAS,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,OAAO;IACvC,IAAI,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;IACtC,IAAI,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAClB,IAAI,CAAC,WAAW,EAAE,UAAU,IAAI;QAC5B,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;QAChC,IAAI,OAAO,CAAC,MAAM,EAAE,SAAS,CAAC,KAAK,QAAQ,EAAE;YACzC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtB;IACL,CAAC,CAAC,CAAC;AACP,CAAC;AACD,SAAS,YAAY,CAAC,KAAK,EAAE,SAAS;IAClC,IAAI,MAAM,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;IACrC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AACpE,CAAC;AACD,SAAS,gBAAgB,CAAC,KAAK;IAC3B,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC;QAC7B,IAAI,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;YACf,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAClB;IACL,CAAC,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAClB,CAAC;AACD,eAAe;IACX,MAAM,EAAE,QAAQ;IAChB,QAAQ,EAAE,QAAQ;IAClB,OAAO,EAAE,SAAS;CACrB,CAAC","sourcesContent":["import { each, clone, isFunction, has } from '@antv/util';\nimport { compare } from '../../base/controller/state';\nvar POSITION_MAPPER = ['xField', 'yField', 'angleField'];\nfunction onActive(plot, condition) {\n    var props = plot.options;\n    // 获取state condition对应在画布的位置，只有在state condition对应字段为位置映射字段时，tooltip才会对齐进行响应\n    if (shouldActive(props, condition)) {\n        var data = props.data;\n        each(data, function (d) {\n            if (compare(d, condition)) {\n                var point = plot.view.getXY(d);\n                // 调用showTooltip方法\n                plot.view.on('tooltip:create', function (e) {\n                    processState(condition, e, false);\n                });\n                plot.view.showTooltip(point);\n            }\n        });\n    }\n}\nfunction onDisable(plot, condition) {\n    plot.view.on('tooltip:change', function (e) {\n        processState(condition, e, true);\n    });\n}\nfunction processState(condition, e, inverse) {\n    var expected = inverse ? false : true;\n    var originItems = clone(e.items);\n    e.items.splice(0);\n    each(originItems, function (item) {\n        var origin = item.point._origin;\n        if (compare(origin, condition) === expected) {\n            e.items.push(item);\n        }\n    });\n}\nfunction shouldActive(props, condition) {\n    var fields = getPositionField(props);\n    return !isFunction(condition) && fields.indexOf(condition.name);\n}\nfunction getPositionField(props) {\n    var fields = [];\n    each(POSITION_MAPPER, function (v) {\n        if (has(props, v)) {\n            fields.push(v);\n        }\n    });\n    return fields;\n}\nexport default {\n    active: onActive,\n    selected: onActive,\n    disable: onDisable,\n};\n//# sourceMappingURL=state.js.map"]}]}