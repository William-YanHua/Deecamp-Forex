{"remainingRequest":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js??ref--4-1!/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/base.js","dependencies":[{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/base.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) {\n    var NewTarget = _getPrototypeOf(this).constructor;\n    result = Reflect.construct(Super, arguments, NewTarget);\n}\nelse {\n    result = Super.apply(this, arguments);\n} return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n} return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n} return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false; if (Reflect.construct.sham)\n    return false; if (typeof Proxy === \"function\")\n    return true; try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n}\ncatch (e) {\n    return false;\n} }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\nvar Util = require('../util');\nvar Component = require('../component');\nvar _require = require('../const'), FONT_FAMILY = _require.FONT_FAMILY;\nvar Legend = function (_Component) {\n    _inheritsLoose(Legend, _Component);\n    var _super = _createSuper(Legend);\n    var _proto = Legend.prototype;\n    _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n            container: null,\n            title: null,\n            formatter: null,\n            hoverable: true,\n            titleGap: 15,\n            position: [0, 0],\n            offset: [0, 0],\n            offsetX: null,\n            offsetY: null\n        };\n    };\n    function Legend(cfg) {\n        var _this;\n        _this = _Component.call(this, cfg) || this;\n        _this._init();\n        _this.beforeRender();\n        _this.render();\n        _this._adjustPositionOffset();\n        _this._bindEvents();\n        return _this;\n    }\n    _proto._init = function _init() {\n        var group = this.get('group');\n        var container = this.get('container');\n        this.set('canvas', container.get('canvas'));\n        var position = this.get('position');\n        if (!group)\n            group = container.addGroup({\n                x: 0 - position[0],\n                y: 0 - position[1]\n            });\n        this.set('group', group);\n    };\n    _proto._adjustPositionOffset = function _adjustPositionOffset() {\n        var position = this.get('position');\n        var offset = this.get('offset');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        if (!Util.isArray(offset)) {\n            var layout = this.get('layout');\n            offset = layout === 'vertical' ? [offset, 0] : [0, offset];\n        }\n        if (offsetX)\n            offset[0] = offsetX;\n        if (offsetY)\n            offset[1] = offsetY;\n        var bbox = this.get('group').getBBox();\n        this.move(-bbox.minX + position[0] + offset[0], -bbox.minY + position[1] + offset[1]);\n    };\n    _proto.beforeRender = function beforeRender() {\n        var group = this.get('group');\n        var itemsGroup = group.addGroup();\n        this.set('itemsGroup', itemsGroup);\n    };\n    _proto.render = function render() {\n        this._renderTitle();\n    };\n    _proto._renderTitle = function _renderTitle() {\n        var title = this.get('title');\n        var titleGap = this.get('titleGap');\n        titleGap = titleGap || 0;\n        if (title && title.text) {\n            var group = this.get('group');\n            var titleShape = group.addShape('text', {\n                attrs: Util.mix({\n                    x: 0,\n                    y: 0 - titleGap,\n                    fill: '#333',\n                    textBaseline: 'middle',\n                    fontFamily: FONT_FAMILY\n                }, title)\n            });\n            titleShape.name = 'legend-title';\n            this.get('appendInfo') && titleShape.setSilent('appendInfo', this.get('appendInfo'));\n            this.set('titleShape', titleShape);\n        }\n    };\n    _proto.getCheckedCount = function getCheckedCount() {\n        var itemsGroup = this.get('itemsGroup');\n        var items = itemsGroup.get('children');\n        var checkedArr = Util.filter(items, function (item) {\n            return item.get('checked');\n        });\n        return checkedArr.length;\n    };\n    _proto.setItems = function setItems(items) {\n        this.set('items', items);\n        this.clear();\n        this.render();\n    };\n    _proto.addItem = function addItem(item) {\n        var items = this.get('items');\n        items.push(item);\n        this.clear();\n        this.render();\n    };\n    _proto.clear = function clear() {\n        var itemsGroup = this.get('itemsGroup');\n        itemsGroup.clear();\n        var group = this.get('group');\n        group.clear();\n        this.beforeRender();\n    };\n    _proto.destroy = function destroy() {\n        var group = this.get('group');\n        group && group.destroy();\n        this._attrs = {};\n        this.removeAllListeners();\n        _Component.prototype.destroy.call(this);\n    };\n    _proto.getWidth = function getWidth() {\n        var bbox = this.get('group').getBBox();\n        return bbox.width;\n    };\n    _proto.getHeight = function getHeight() {\n        var bbox = this.get('group').getBBox();\n        return bbox.height;\n    };\n    _proto.move = function move(x, y) {\n        this.get('group').move(x, y);\n    };\n    _proto.draw = function draw() {\n        this.get('canvas').draw();\n    };\n    return Legend;\n}(Component);\nmodule.exports = Legend;\n",{"version":3,"file":"/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/base.js","sourceRoot":"","sources":["/run/media/williamyh/新加卷/project/Deecamp-project/system/Web/node_modules/bizcharts/node_modules/@antv/component/lib/legend/base.js"],"names":[],"mappings":"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","sourcesContent":["function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar Util = require('../util');\n\nvar Component = require('../component');\n\nvar _require = require('../const'),\n    FONT_FAMILY = _require.FONT_FAMILY;\n\nvar Legend = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Legend, _Component);\n\n  var _super = _createSuper(Legend);\n\n  var _proto = Legend.prototype;\n\n  _proto.getDefaultCfg = function getDefaultCfg() {\n    return {\n      /**\n       * Group 容器\n       * @type {Object}\n       */\n      container: null,\n\n      /**\n       * 图例标题配置\n       * @type {Object}\n       */\n      title: null,\n\n      /**\n       * 图例项文本格式化\n       * @type {Function}\n       */\n      formatter: null,\n\n      /**\n       * 鼠标 hover 到图例上的默认交互是否开启\n       * @type {Boolean}\n       */\n      hoverable: true,\n\n      /**\n       * TODO：rename\n       * 图例标题距离图例项的距离\n       * @type {Number}\n       */\n      titleGap: 15,\n\n      /**\n       * legend 相对于 container 的位置\n       * @type {Array}\n       */\n      position: [0, 0],\n\n      /**\n       * legend 在 position 位置上的偏移量\n       * @type {Array}\n       */\n      offset: [0, 0],\n\n      /**\n       * legend 在 position 位置上沿 x 轴的偏移量。若同时设置了 offset 和 offsetX， 以 offsetX 为准\n       * @type {Number}\n       */\n      offsetX: null,\n\n      /**\n       * legend 在 position 位置上沿 y 轴的偏移量。若同时设置了 offset 和 offsetY， 以 offsetY 为准\n       * @type {Number}\n       */\n      offsetY: null\n    };\n  };\n\n  function Legend(cfg) {\n    var _this;\n\n    _this = _Component.call(this, cfg) || this;\n\n    _this._init();\n\n    _this.beforeRender();\n\n    _this.render();\n\n    _this._adjustPositionOffset();\n\n    _this._bindEvents();\n\n    return _this;\n  }\n\n  _proto._init = function _init() {\n    var group = this.get('group');\n    var container = this.get('container');\n    this.set('canvas', container.get('canvas'));\n    var position = this.get('position');\n    if (!group) group = container.addGroup({\n      x: 0 - position[0],\n      y: 0 - position[1]\n    });\n    this.set('group', group);\n  };\n\n  _proto._adjustPositionOffset = function _adjustPositionOffset() {\n    var position = this.get('position');\n    var offset = this.get('offset');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n\n    if (!Util.isArray(offset)) {\n      var layout = this.get('layout');\n      offset = layout === 'vertical' ? [offset, 0] : [0, offset];\n    }\n\n    if (offsetX) offset[0] = offsetX;\n    if (offsetY) offset[1] = offsetY;\n    var bbox = this.get('group').getBBox();\n    this.move(-bbox.minX + position[0] + offset[0], -bbox.minY + position[1] + offset[1]);\n  };\n\n  _proto.beforeRender = function beforeRender() {\n    var group = this.get('group');\n    var itemsGroup = group.addGroup();\n    this.set('itemsGroup', itemsGroup);\n  };\n\n  _proto.render = function render() {\n    this._renderTitle();\n  } // render the title of the legend\n  ;\n\n  _proto._renderTitle = function _renderTitle() {\n    var title = this.get('title');\n    var titleGap = this.get('titleGap');\n    titleGap = titleGap || 0;\n\n    if (title && title.text) {\n      var group = this.get('group');\n      var titleShape = group.addShape('text', {\n        attrs: Util.mix({\n          x: 0,\n          y: 0 - titleGap,\n          fill: '#333',\n          textBaseline: 'middle',\n          fontFamily: FONT_FAMILY\n        }, title)\n      });\n      titleShape.name = 'legend-title';\n      this.get('appendInfo') && titleShape.setSilent('appendInfo', this.get('appendInfo'));\n      this.set('titleShape', titleShape);\n    }\n  } // return the count of checked items\n  ;\n\n  _proto.getCheckedCount = function getCheckedCount() {\n    var itemsGroup = this.get('itemsGroup');\n    var items = itemsGroup.get('children');\n    var checkedArr = Util.filter(items, function (item) {\n      return item.get('checked');\n    });\n    return checkedArr.length;\n  } // set items for the legend\n  ;\n\n  _proto.setItems = function setItems(items) {\n    this.set('items', items);\n    this.clear();\n    this.render();\n  } // add an item into the legend\n  ;\n\n  _proto.addItem = function addItem(item) {\n    var items = this.get('items');\n    items.push(item);\n    this.clear();\n    this.render();\n  } // clear all the items of the legend\n  ;\n\n  _proto.clear = function clear() {\n    var itemsGroup = this.get('itemsGroup');\n    itemsGroup.clear();\n    var group = this.get('group');\n    group.clear();\n    this.beforeRender();\n  } // destroy the legend\n  ;\n\n  _proto.destroy = function destroy() {\n    var group = this.get('group');\n    group && group.destroy();\n    this._attrs = {};\n    this.removeAllListeners();\n\n    _Component.prototype.destroy.call(this); // 要最后调用 super.destroy 否则 get 属性会无效\n\n  } // return the width of the legend\n  ;\n\n  _proto.getWidth = function getWidth() {\n    var bbox = this.get('group').getBBox();\n    return bbox.width;\n  } // return the height of the legend\n  ;\n\n  _proto.getHeight = function getHeight() {\n    var bbox = this.get('group').getBBox();\n    return bbox.height;\n  };\n\n  _proto.move = function move(x, y) {\n    this.get('group').move(x, y);\n  };\n\n  _proto.draw = function draw() {\n    this.get('canvas').draw();\n  };\n\n  return Legend;\n}(Component);\n\nmodule.exports = Legend;"]}]}