{"remainingRequest":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js??ref--4-1!D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\data-set\\src\\transform\\hierarchy\\pack.js","dependencies":[{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\data-set\\src\\transform\\hierarchy\\pack.js","mtime":499162500000},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595520254649},{"path":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\ts-loader\\index.js","mtime":1537906253000}],"contextDependencies":[],"result":["var assign = require('@antv/util/lib/mix');\r\nvar d3Hierarchy = require('d3-hierarchy');\r\nvar isArray = require('@antv/util/lib/type/is-array');\r\nvar _a = require('../../data-set'), HIERARCHY = _a.HIERARCHY, registerTransform = _a.registerTransform;\r\nvar getField = require('../../util/option-parser').getField;\r\nvar DEFAULT_OPTIONS = {\r\n    field: 'value',\r\n    size: [1, 1],\r\n    padding: 0,\r\n    as: ['x', 'y', 'r']\r\n};\r\nfunction transform(dataView, options) {\r\n    if (dataView.dataType !== HIERARCHY) {\r\n        throw new TypeError('Invalid DataView: This transform is for Hierarchy data only!');\r\n    }\r\n    var root = dataView.root;\r\n    options = assign({}, DEFAULT_OPTIONS, options);\r\n    var as = options.as;\r\n    if (!isArray(as) || as.length !== 3) {\r\n        throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ \"x\", \"y\", \"r\" ])!');\r\n    }\r\n    var field;\r\n    try {\r\n        field = getField(options);\r\n    }\r\n    catch (e) {\r\n        console.warn(e);\r\n    }\r\n    if (field) {\r\n        root.sum(function (d) { return d[field]; })\r\n            .sort(function (a, b) { return b[field] - a[field]; });\r\n    }\r\n    var packLayout = d3Hierarchy.pack();\r\n    packLayout.size(options.size);\r\n    if (options.padding) {\r\n        packLayout.padding(options.padding);\r\n    }\r\n    packLayout(root);\r\n    var x = as[0];\r\n    var y = as[1];\r\n    var r = as[2];\r\n    root.each(function (node) {\r\n        node[x] = node.x;\r\n        node[y] = node.y;\r\n        node[r] = node.r;\r\n    });\r\n}\r\nregisterTransform('hierarchy.pack', transform);\r\nregisterTransform('hierarchy.circle-packing', transform);\r\nregisterTransform('circle-packing', transform);\r\n",{"version":3,"file":"D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\data-set\\src\\transform\\hierarchy\\pack.js","sourceRoot":"","sources":["D:\\project\\Deecamp-project\\system\\Web\\node_modules\\@antv\\data-set\\src\\transform\\hierarchy\\pack.js"],"names":[],"mappings":"AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAC7C,IAAM,WAAW,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAC5C,IAAM,OAAO,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;AAClD,IAAA,8BAGuB,EAF3B,wBAAS,EACT,wCAC2B,CAAC;AAE5B,IAAA,uDAAQ,CAC8B;AAExC,IAAM,eAAe,GAAG;IACtB,KAAK,EAAE,OAAO;IACd,IAAI,EAAE,CAAE,CAAC,EAAE,CAAC,CAAE;IACd,OAAO,EAAE,CAAC;IACV,EAAE,EAAE,CAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAE;CACtB,CAAC;AAEF,SAAS,SAAS,CAAC,QAAQ,EAAE,OAAO;IAClC,IAAI,QAAQ,CAAC,QAAQ,KAAK,SAAS,EAAE;QACnC,MAAM,IAAI,SAAS,CAAC,8DAA8D,CAAC,CAAC;KACrF;IACD,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;IAC3B,OAAO,GAAG,MAAM,CAAC,EAAE,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;IAE/C,IAAM,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;IACtB,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;QACnC,MAAM,IAAI,SAAS,CAAC,0EAA0E,CAAC,CAAC;KACjG;IAED,IAAI,KAAK,CAAC;IACV,IAAI;QACF,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC;KAC3B;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACjB;IACD,IAAI,KAAK,EAAE;QACT,IAAI,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAK,CAAC,EAAR,CAAQ,CAAC;aACpB,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,EAAnB,CAAmB,CAAC,CAAC;KACxC;IAED,IAAM,UAAU,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC;IACtC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAE9B,IAAI,OAAO,CAAC,OAAO,EAAE;QACnB,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACrC;IACD,UAAU,CAAC,IAAI,CAAC,CAAC;IAEjB,IAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB,IAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB,IAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAChB,IAAI,CAAC,IAAI,CAAC,UAAA,IAAI;QACZ,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;QACjB,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;QACjB,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC;AACL,CAAC;AAED,iBAAiB,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;AAC/C,iBAAiB,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;AACzD,iBAAiB,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC","sourcesContent":["const assign = require('@antv/util/lib/mix');\nconst d3Hierarchy = require('d3-hierarchy');\nconst isArray = require('@antv/util/lib/type/is-array');\nconst {\n  HIERARCHY,\n  registerTransform\n} = require('../../data-set');\nconst {\n  getField\n} = require('../../util/option-parser');\n\nconst DEFAULT_OPTIONS = {\n  field: 'value',\n  size: [ 1, 1 ], // width, height\n  padding: 0,\n  as: [ 'x', 'y', 'r' ]\n};\n\nfunction transform(dataView, options) {\n  if (dataView.dataType !== HIERARCHY) {\n    throw new TypeError('Invalid DataView: This transform is for Hierarchy data only!');\n  }\n  const root = dataView.root;\n  options = assign({}, DEFAULT_OPTIONS, options);\n\n  const as = options.as;\n  if (!isArray(as) || as.length !== 3) {\n    throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ \"x\", \"y\", \"r\" ])!');\n  }\n\n  let field;\n  try {\n    field = getField(options);\n  } catch (e) {\n    console.warn(e);\n  }\n  if (field) {\n    root.sum(d => d[field])\n      .sort((a, b) => b[field] - a[field]);\n  }\n\n  const packLayout = d3Hierarchy.pack();\n  packLayout.size(options.size);\n\n  if (options.padding) {\n    packLayout.padding(options.padding);\n  }\n  packLayout(root);\n\n  const x = as[0];\n  const y = as[1];\n  const r = as[2];\n  root.each(node => {\n    node[x] = node.x;\n    node[y] = node.y;\n    node[r] = node.r;\n  });\n}\n\nregisterTransform('hierarchy.pack', transform);\nregisterTransform('hierarchy.circle-packing', transform);\nregisterTransform('circle-packing', transform);\n"]}]}